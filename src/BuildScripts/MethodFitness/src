function ensureDropdownSelectionIsConsistentWithModelValue(element,modelValue,preferModelValue){preferModelValue&&modelValue!==ko.selectExtensions.readValue(element)&&ko.selectExtensions.writeValue(element,modelValue),modelValue!==ko.selectExtensions.readValue(element)&&ko.utils.triggerEvent(element,"change")}function parseMdyyyyHHmmTT(str){if(-1==str.indexOf("t")||-1==str.indexOf("-"))return null;var date=str.split("t")[0],time=str.split("t")[1],dateParts=date.split("-"),timePart=time.split(" ")[0],amPm=time.split(" ")[1],timeParts=timePart.split(":");return 3==dateParts.length&&2==timeParts.length?new XDate(parseInt(dateParts[0]),parseInt(dateParts[1]),parseInt(dateParts[2]),"AM"==amPm?parseInt(timeParts[0]):parseInt(timeParts[0])+12,parseInt(timeParts[1])):null}function parseMdyyyyHHmmTTSlashes(str){if(-1==str.indexOf("t")||-1==str.indexOf("/"))return null;var date=str.split("t")[0],time=str.split("t")[1],dateParts=date.split("/"),timePart=time.split(" ")[0],amPm=time.split(" ")[1],timeParts=timePart.split(":");return 3==dateParts.length&&2==timeParts.length?new XDate(parseInt(dateParts[2]),parseInt(dateParts[1]),parseInt(dateParts[0]),"AM"==amPm?parseInt(timeParts[0]):parseInt(timeParts[0])+12,parseInt(timeParts[1])):null}function CCMenu(_caller,_options){var menu=this,caller=$(_caller);$(caller).wrap("<div />");var content=$(caller).parent().hide(),options=jQuery.extend({content:content.html(),width:220,maxHeight:400,positionOpts:{posX:"left",posY:"bottom",offsetX:0,offsetY:0,directionH:"right",directionV:"down",detectH:!0,detectV:!0,linkToFront:!1},showSpeed:200,callerOnState:"ui-state-active",loadingState:"ui-state-loading",linkHover:"ui-state-hover",linkHoverSecondary:"li-hover",crossSpeed:200,crumbDefaultText:"Choose an option:",backLink:!0,backLinkText:"Back",flyOut:!1,flyOutOnState:"ui-state-default",nextMenuLink:"ui-icon-triangle-1-e",topLinkText:"Home",nextCrumbLink:"ui-icon-carat-1-e",containingElement:".mf_menuContainer"},_options);this.showLoading=function(){caller.addClass(options.loadingState)};var container=$('<div class="mf_menuContainer ui-widget ui-widget-content ui-corner-all">'+options.content+"</div>");$(caller).hide(),this.getLocationString=function(){var result="";return $(".fg-menu-breadcrumb li").each(function(i,item){i>0&&(result+=$(item).text().trim()+"/")}),result.length>0?result.substring(0,result.length-1):""},this.setMenuByUrl=function(url){function getToken(item){var parent=$(item).parents("ul:eq(0)");parent&&!$(parent).hasClass("ccMenu")&&(result+=parent.siblings("a").children("span").text().trim()+"/",getToken(parent))}var item=container.find(".fg-menu").find("a[href='"+url+"']");if(0!=$(item).size()){var result="";getToken(item),result?(result=result.substring(0,result.length-1).split("/").reverse().join("/"),menu.goToItem(result)):menu.resetDrilldownMenu(),$(item).addClass(options.callerOnState)}},this.goToItem=function(displayText){$(".fg-menu-current").removeClass("fg-menu-current"),container.find(".fg-menu").find("ul").each(function(){$(this).hide(),$(this).removeClass("fg-menu-scroll").removeClass("fg-menu-current").height("auto")}),$(".fg-menu-all-lists").find("span").remove(),$(".fg-menu-breadcrumb").empty().append($('<li class="fg-menu-breadcrumb-text">'+options.crumbDefaultText+"</li>"));var tokens=displayText.split("/"),parentUl=container.find(".fg-menu");$(tokens).each(function(x,xy){$(parentUl).children("li").children("a").each(function(i,item){$(item).text()==xy&&($(item).trigger("click",!0),$(parentUl).removeClass(options.callerOnState),parentUl=$(this).next("ul"))})})},this.showMenu=function(){menu.menuExists||menu.create(),menu.menuOpen=!0,$(document).keydown(function(event){var e;""!=event.which?e=event.which:""!=event.charCode?e=event.charCode:""!=event.keyCode&&(e=event.keyCode);$(event.target).parents("div").is(".fg-menu-flyout")?"flyout":"ipod"})},this.create=function(){if(container.css({width:options.width}).appendTo(options.containingElement).find("ul:first").not(".fg-menu-breadcrumb").addClass("fg-menu"),container.find("ul, li a").addClass("ui-corner-all"),container.find("ul").attr("role","menu").eq(0).attr("aria-activedescendant","active-menuitem").attr("aria-labelledby",caller.attr("id")),container.find("li").attr("role","menuitem"),container.find("li:has(ul)").attr("aria-haspopup","true").find("ul").attr("aria-expanded","false"),container.find("a").attr("tabindex","-1"),container.find("ul").size()>1?menu.drilldown(container,options):container.find("a").click(function(){return menu.chooseItem(this),!1}),options.linkHover){var allLinks=container.find(".fg-menu li a");allLinks.hover(function(){$(this);$("."+options.linkHover).removeClass(options.linkHover).blur().parent().removeAttr("id"),$(this).addClass(options.linkHover).focus().parent().attr("id","active-menuitem")},function(){$(this).removeClass(options.linkHover).blur().parent().removeAttr("id")})}options.linkHoverSecondary&&container.find(".fg-menu li").hover(function(){$(this).siblings("li").removeClass(options.linkHoverSecondary),options.flyOutOnState&&$(this).siblings("li").find("a").removeClass(options.flyOutOnState),$(this).addClass(options.linkHoverSecondary)},function(){$(this).removeClass(options.linkHoverSecondary)}),menu.setPosition(container,caller,options)},this.chooseItem=function(item){return $(".fg-menu li a",container).removeClass(options.callerOnState),$(item).addClass(options.callerOnState),MF.vent.trigger("menuItem",$(item).attr("rel")),!1}}function sortBigToSmall(a,b){return b-a}function getScrollTop(){return self.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop}function getScrollLeft(){return self.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft}function getWindowHeight(){var de=document.documentElement;return self.innerHeight||de&&de.clientHeight||document.body.clientHeight}function getWindowWidth(){var de=document.documentElement;return self.innerWidth||de&&de.clientWidth||document.body.clientWidth}function fitHorizontal(el,leftOffset){var leftVal=parseInt(leftOffset)||$(el).offset().left;return leftVal+$(el).width()<=getWindowWidth()+getScrollLeft()&&leftVal-getScrollLeft()>=0}function fitVertical(el,topOffset){var topVal=parseInt(topOffset)||$(el).offset().top;return topVal+$(el).height()<=getWindowHeight()+getScrollTop()&&topVal-getScrollTop()>=0}function tableToGrid(selector,options){jQuery(selector).each(function(){if(!this.grid){jQuery(this).width("99%");var w=jQuery(this).width(),inputCheckbox=jQuery("tr td:first-child input[type=checkbox]:first",jQuery(this)),inputRadio=jQuery("tr td:first-child input[type=radio]:first",jQuery(this)),selectMultiple=inputCheckbox.length>0,selectSingle=!selectMultiple&&inputRadio.length>0,selectable=selectMultiple||selectSingle,colModel=[],colNames=[];jQuery("th",jQuery(this)).each(function(){0===colModel.length&&selectable?(colModel.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),colNames.push("__selection__")):(colModel.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150}),colNames.push(jQuery(this).html()))});var data=[],rowIds=[],rowChecked=[];jQuery("tbody > tr",jQuery(this)).each(function(){var row={},rowPos=0;jQuery("td",jQuery(this)).each(function(){if(0===rowPos&&selectable){var input=jQuery("input",jQuery(this)),rowId=input.attr("value");rowIds.push(rowId||data.length),input.is(":checked")&&rowChecked.push(rowId),row[colModel[rowPos].name]=input.attr("value")}else row[colModel[rowPos].name]=jQuery(this).html();rowPos++}),rowPos>0&&data.push(row)}),jQuery(this).empty(),jQuery(this).addClass("scroll"),jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:w,colNames:colNames,colModel:colModel,multiselect:selectMultiple},options||{}));var a;for(a=0;a<data.length;a++){var id=null;rowIds.length>0&&(id=rowIds[a],id&&id.replace&&(id=encodeURIComponent(id).replace(/[.\-%]/g,"_"))),null===id&&(id=a+1),jQuery(this).jqGrid("addRowData",id,data[a])}for(a=0;a<rowChecked.length;a++)jQuery(this).jqGrid("setSelection",rowChecked[a])}})}function noty(options){var using_old=0,old_to_new={animateOpen:"animation.open",animateClose:"animation.close",easing:"animation.easing",speed:"animation.speed",onShow:"callback.onShow",onShown:"callback.afterShow",onClose:"callback.onClose",onClosed:"callback.afterClose"};return jQuery.each(options,function(key,value){if(old_to_new[key]){using_old++;var _new=old_to_new[key].split(".");options[_new[0]]||(options[_new[0]]={}),options[_new[0]][_new[1]]=value?value:function(){},delete options[key]}}),options.closeWith||(options.closeWith=jQuery.noty.defaults.closeWith),options.hasOwnProperty("closeButton")&&(using_old++,options.closeButton&&options.closeWith.push("button"),delete options.closeButton),options.hasOwnProperty("closeOnSelfClick")&&(using_old++,options.closeOnSelfClick&&options.closeWith.push("click"),delete options.closeOnSelfClick),options.hasOwnProperty("closeOnSelfOver")&&(using_old++,options.closeOnSelfOver&&options.closeWith.push("hover"),delete options.closeOnSelfOver),options.hasOwnProperty("custom")&&(using_old++,"null"!=options.custom.container&&(options.custom=options.custom.container)),options.hasOwnProperty("cssPrefix")&&(using_old++,delete options.cssPrefix),"noty_theme_default"==options.theme&&(using_old++,options.theme="defaultTheme"),options.hasOwnProperty("dismissQueue")||("topLeft"==options.layout||"topRight"==options.layout||"bottomLeft"==options.layout||"bottomRight"==options.layout)&&(options.dismissQueue=!0),options.buttons&&jQuery.each(options.buttons,function(i,button){button.click&&(using_old++,button.onClick=button.click,delete button.click),button.type&&(using_old++,button.addClass=button.type,delete button.type)}),using_old&&"undefined"!=typeof console&&console.warn&&console.warn("You are using noty v2 with v1.x.x options. @deprecated until v2.2.0 - Please update your options."),jQuery.notyRenderer.init(options)}function Player(){}function Song(){}if(MF.Routing.BillingApp=function(MF){var BillingApp={};return MF.addInitializer(function(){}),BillingApp}(MF,Backbone),MF.Views.PayTrainerGridView=MF.Views.View.extend({initialize:function(){this.beforeInitGrid(),this.model={},MF.mixin(this,"ajaxGridMixin"),MF.mixin(this,"setupGridMixin"),MF.mixin(this,"setupGridSearchMixin")},events:{"click .jqgrow":"handleSingleClick","click .cbox":"handleSelectAllClick","click #payTrainerButton":"payTrainer","click .return":"returnToParent","click #search":"filterByDate"},beforeInitGrid:function(){var that=this;this.options.gridId="trainerPayment",this.options.gridOptions={loadComplete:function(){for(var ids=$(this).getDataIDs(),paymentRows=[],i=0,l=ids.length;l>i;i++){var row,rowId=ids[i],rowData=$(this).getRowData(rowId);"True"==rowData.InArrears?(row=$("#"+rowId,that.el),row.find("td").addClass("gridRowRedFont"),row.find("td:first input").remove()):"True"==rowData.TrainerVerified?(row=$("#"+rowId,that.el),paymentRows.push({id:rowId,trainerPay:rowData.TrainerPay,_checked:!1})):(row=$("#"+rowId,that.el),row.find("td").addClass("gridRowGrey"),paymentRows.push({id:rowId,trainerPay:rowData.TrainerPay,_checked:!1}))}that.model.eligableRows=ko.mapping.fromJS(paymentRows),that.setupElements()}}},viewLoaded:function(){MF.vent.bind("popup:payTrainerPopup:save",this.formSave,this),MF.vent.bind("popup:payTrainerPopup:cancel",this.formCancel,this)},onClose:function(){MF.vent.unbind("popup:payTrainerPopup:save"),MF.vent.unbind("popup:payTrainerPopup:cancel"),this._super("onClose",arguments)},reloadGrid:function(){$("#"+this.options.gridId).trigger("reloadGrid")},setupElements:function(){0==$("#filterArea").size()&&(this.model.paymentAmount=ko.observable(),$(this.el).find(".content-header").prepend($("#payTrainerSearchTemplate").tmpl()),$(".title-name",this.el).append("<span class='paymentAmount' data-bind='text:paymentAmount'></span>"),$("[name='EndDate']",this.$el).datepicker(),this.model.EndDate=ko.observable((new XDate).toString("MM/dd/yyyy")),$("#payTrainerButton").hide(),$(".paymentAmount").hide(),$(".content-header",this.$el).find(".search").remove(),ko.applyBindings(this.model,this.el)),this.model.paymentAmount(0),$(".paymentAmount").hide()},returnToParent:function(){MF.WorkflowManager.returnParentView(null,!0)},filterByDate:function(){var obj={endDate:this.model.EndDate()};$("#"+this.options.gridId).jqGrid("setGridParam",{postData:obj}),this.reloadGrid()},payTrainer:function(){var amount=this.model.paymentAmount();if(!(0>=amount)){var builder=MF.Views.popupButtonBuilder.builder("payTrainerPopup");builder.addButton("Ok",builder.getSaveFunc()),builder.addCancelButton();var data={trainersName:this.options.TrainersName,amount:amount},formOptions={id:"payTrainerPopup",data:data,template:"#payTrainerTemplate",title:"Trainer Payment",buttons:builder.getButtons()};this.templatePopup=new MF.Views.TemplatedPopupView(formOptions),this.templatePopup.render(),this.storeChild(this.templatePopup)}},formSave:function(){var model=ko.mapping.toJS(this.model);model.eligableRows=_.filter(model.eligableRows,function(item){return item._checked}),model.EntityId=MF.State.get("Relationships").entityId;var data=JSON.stringify(model),promise=MF.repository.ajaxPostModel(this.options.PayTrainerUrl,data);promise.done($.proxy(this.paymentCallback,this))},paymentCallback:function(result){result.Success&&(this.reloadGrid(),this.formCancel())},formCancel:function(){this.templatePopup.close()},handleSingleClick:function(e){var checkbox=$(e.currentTarget).find(".cbox");if(checkbox&&!checkbox.attr("disabled")){var id=$(e.currentTarget).attr("id"),data=_.find(this.model.eligableRows(),function(item){return item.id()==id}),itemAmount=parseFloat(data.trainerPay());checkbox.is(":checked")?(this.model.paymentAmount(Math.round(100*(this.model.paymentAmount()+itemAmount))/100),data._checked(!0)):(this.model.paymentAmount(Math.round(100*(this.model.paymentAmount()-itemAmount))/100),data._checked(!1)),this.model.paymentAmount()>0?($("#payTrainerButton").show(),$(".paymentAmount").show()):($("#payTrainerButton").hide(),$(".paymentAmount").hide())}},handleSelectAllClick:function(e){"rowheader"==$(e.target).closest("tr").attr("role")&&(this.model.paymentAmount(0),$(e.currentTarget).is(":checked")?(_.each(this.model.eligableRows(),function(item){item._checked(!0),this.model.paymentAmount(this.model.paymentAmount()+parseFloat(item.trainerPay()))},this),this.model.paymentAmount(Math.round(100*this.model.paymentAmount())/100)):_.each(this.model.eligableRows(),function(item){item._checked(!1)},this),this.model.paymentAmount()>0?($("#payTrainerButton").show(),$(".paymentAmount").show()):($("#payTrainerButton").hide(),$(".paymentAmount").hide()))}}),MF.Views.TrainerSessionVerificationView=MF.Views.View.extend({initialize:function(){this.beforeInitGrid(),this.model={},MF.mixin(this,"ajaxGridMixin"),MF.mixin(this,"setupGridMixin"),MF.mixin(this,"setupGridSearchMixin"),this.notification=new CC.NotificationService},events:{"click #acceptSessionsButton":"acceptSessions","click #alertAdminButton":"alertAdmin","click #search":"filterByDate"},successSelector:"#messageContainer",errorSelector:"#messageContainer",beforeInitGrid:function(){var that=this;this.options.gridId="trainerPayment",this.options.gridOptions={multiselect:!1,loadComplete:function(){that.options.paymentTotal=0;for(var ids=$(this).getDataIDs(),paymentRows=[],i=0,l=ids.length;l>i;i++){var rowId=ids[i],rowData=$(this).getRowData(rowId);if("True"==rowData.InArrears){var row=$("#"+rowId,that.el);row.find("td").addClass("gridRowRedFont"),row.find("td:first input").remove()}else paymentRows.push({id:rowId,trainerPay:rowData.TrainerPay}),that.options.paymentTotal+=parseFloat(rowData.TrainerPay)}that.model.paymentAmount=ko.observable(Math.round(that.options.paymentTotal)),that.model.eligableRows=ko.mapping.fromJS(paymentRows),that.setupElements()}}},viewLoaded:function(){MF.vent.bind("popup:trainerAlertAdminPopup:save",this.formSave,this),MF.vent.bind("popup:trainerAlertAdminPopup:cancel",this.formCancel,this)},onClose:function(){MF.vent.unbind("popup:trainerAlertAdminPopup:save"),MF.vent.unbind("popup:trainerAlertAdminPopup:cancel"),this._super("onClose",arguments)},setupElements:function(){0==$("#acceptSessionsButton").size()&&($(this.el).find(".content-header").prepend('<a href="#" id="acceptSessionsButton"><img src="/content/images/thumbs_up.jpg" title="Accept Sessions" class="thumbsImage" /></a><a href="#" id="alertAdminButton"><img src="/content/images/thumbs_down.jpg" title="Email Admin of a problem" class="thumbsImage thumbsLeft" /></a>'),$(".title-name",this.el).append("<span class='paymentAmount' data-bind='text:paymentAmount'></span>"),$("[name='EndDate']",this.$el).datepicker(),this.model.EndDate=ko.observable((new XDate).toString("MM/dd/yyyy")),ko.applyBindings(this.model,this.el))},filterByDate:function(){var obj={endDate:this.model.EndDate()};$("#"+this.options.gridId).jqGrid("setGridParam",{postData:obj}),this.reloadGrid()},reloadGrid:function(){$("#"+this.options.gridId).trigger("reloadGrid")},acceptSessions:function(){if(confirm("If you are sure that all of these appointments are correct please click 'OK'.")){var model=ko.mapping.toJS(this.model);model.EntityIds=_.pluck(model.eligableRows,"id");var data=JSON.stringify(model),promise=MF.repository.ajaxPostModel(this.options.AcceptSessionsUrl,data);promise.done($.proxy(this.acceptSessionsCallback,this))}},acceptSessionsCallback:function(_result){var result="string"==typeof _result?JSON.parse(_result):_result;if(result.Success){if(result.Message){var note=$(this.successSelector).noty({type:"success",text:result.Message,viewId:this.cid});note.setAnimationSpeed(1e3),note.setTimeout(3e3),$.noty.closeAllErrorsByViewId(this.cid)}this.model.paymentAmount(0),this.reloadGrid(),MF.vent.trigger("form:"+this.id+":success",result)}else result.Message&&!$.noty.getByViewIdAndElementId(this.cid)&&$(this.errorSelector).noty({type:"error",text:result.Message,viewId:this.cid}),result.Errors&&!$.noty.getByViewIdAndElementId(this.cid)&&_.each(result.Errors,function(item){$(this.errorSelector).noty({type:"error",text:item.ErrorMessage,viewId:this.cid})})},alertAdmin:function(){var model={From:ko.observable(this.options.From)};model.To=ko.observable(this.options.To),model.Subject=ko.observable(this.options.Subject),model.Body=ko.observable(this.options.Body);var builder=MF.Views.popupButtonBuilder.builder("trainerAlertAdminPopup");builder.addButton("Send",builder.getSaveFunc()),builder.addCancelButton();var data=model,formOptions={id:"trainerAlertAdminPopup",data:data,template:"#emailTemplate",title:"Alert Admin",buttons:builder.getButtons()};this.templatePopup=new MF.Views.KOPopupView(formOptions),this.templatePopup.render(),this.templatePopup.successSelector=$("#messageContainer",this.templatePopup.el),this.storeChild(this.templatePopup)},formSave:function(){var popup=this.templatePopup,isValid=CC.ValidationRunner.runViewModel(popup.cid,popup.elementsViewmodel,popup.errorSelector);if(isValid){var model=ko.mapping.toJS(popup.options.data),data=JSON.stringify(model),promise=MF.repository.ajaxPostModel(this.options.AlertAdminEmailUrl,data);promise.done($.proxy(this.emailCallback,this))}},emailCallback:function(_result){var that=this;this.successSelector=$("#messageContainer"),this.errorSelector=$("#popupMessageContainer",this.templatePopup.$el);var result="string"==typeof _result?JSON.parse(_result):_result;if(result.Success){if(result.Message){var note=$(this.successSelector).noty({type:"success",text:result.Message,viewId:this.cid});note.setAnimationSpeed(1e3),note.setTimeout(3e3),$.noty.closeAllErrorsByViewId(this.cid)}MF.vent.trigger("form:"+this.id+":success",result),MF.vent.trigger("form:"+this.id+":success",result),this.formCancel()}else result.Message&&!$.noty.getByViewIdAndElementId(this.cid)&&$(this.errorSelector).noty({type:"error",text:result.Message,viewId:this.cid}),result.Errors&&!$.noty.getByViewIdAndElementId(this.cid)&&_.each(result.Errors,function(item){$(that.errorSelector).noty({type:"error",text:item.ErrorMessage,viewId:this.cid})})},formCancel:function(){this.templatePopup.close()}}),MF.Views.TrainerSessionView=MF.Views.View.extend({initialize:function(){this.beforeInitGrid(),this.model={},MF.mixin(this,"ajaxGridMixin"),MF.mixin(this,"setupGridMixin"),MF.mixin(this,"setupGridSearchMixin")},events:{"click #search":"filterByDate"},beforeInitGrid:function(){var that=this;this.options.gridId="trainerPayment",this.options.gridOptions={multiselect:!1,loadComplete:function(){that.options.paymentTotal=0;for(var ids=$(this).getDataIDs(),i=0,l=ids.length;l>i;i++){var rowId=ids[i],rowData=$(this).getRowData(rowId);if("True"==rowData.InArrears){var row=$("#"+rowId,that.el);row.find("td").addClass("gridRowRedFont"),row.find("td:first input").remove()}that.options.paymentTotal+=parseFloat(rowData.TrainerPay)}that.setupElements()}}},filterByDate:function(){var obj={endDate:this.model.EndDate()};$("#"+this.options.gridId).jqGrid("setGridParam",{postData:obj}),this.reloadGrid()},reloadGrid:function(){$("#"+this.options.gridId).trigger("reloadGrid")},setupElements:function(){0==$("#filterArea").size()&&(this.model.paymentAmount=ko.observable(),$(this.el).find(".content-header").prepend($("#payTrainerSearchTemplate").tmpl()),$(".title-name",this.el).append("<span class='paymentAmount' data-bind='text:paymentAmount'></span>"),$("[name='EndDate']",this.$el).datepicker(),this.model.EndDate=ko.observable((new XDate).toString("MM/dd/yyyy")),$("#payTrainerButton").hide(),ko.applyBindings(this.model,this.el)),this.model.paymentAmount(Math.round(this.options.paymentTotal)),this.model.paymentAmount()<=0?$(".paymentAmount").hide():$(".paymentAmount").show()}}),MF.Views.TrainerPaymentListGridView=MF.Views.View.extend({initialize:function(){this.options.gridOptions={multiselect:!1},MF.mixin(this,"ajaxGridMixin"),MF.mixin(this,"setupGridMixin"),MF.mixin(this,"defaultGridEventsMixin"),MF.mixin(this,"setupGridSearchMixin"),this.options.gridId="trainerPaymentsList"},events:{"click .return":"retunToParent"},retunToParent:function(){MF.WorkflowManager.returnParentView(null,!0)},displayItem:function(id){var parentId=this.$el.find("#EntityId").val();return window.open("/Billing/PayTrainer/TrainerReceipt/"+id+"?ParentId="+parentId),!1},viewLoaded:function(){this.setupBindings()},onClose:function(){this.unbindBindings()}}),CC.AjaxFileUpload=function(){function fileFromPath(file){return file.replace(/.*(\/|\\)/,"")}function getExt(file){return-1!==file.indexOf(".")?file.replace(/.*[.]/,""):""}function addEvent(el,type,fn){if(el.addEventListener)el.addEventListener(type,fn,!1);else{if(!el.attachEvent)throw new Error("not supported or DOM not loaded");el.attachEvent("on"+type,function(){fn.call(el)})}}var getUID=function(){var id=0;return function(){return"CCAjaxFileUpload"+id++}}(),toElement=function(){var div=document.createElement("div");return function(html){div.innerHTML=html;var el=div.firstChild;return div.removeChild(el)}}();return AjaxFileUpload=function(input,options){this._input=input,this._settings={action:"upload.php",name:"userfile",multiple:!1,data:{},autoSubmit:!1,responseType:"json",onSubmit:function(){},onComplete:function(){}};for(var i in options)options.hasOwnProperty(i)&&(this._settings[i]=options[i])},AjaxFileUpload.prototype={setData:function(data){this._settings.data=data},_createIframe:function(){var id=getUID(),iframe=toElement('<iframe src="javascript:false;" name="'+id+'" />');return iframe.setAttribute("id",id),$(iframe).css({position:"absolute",top:"-1000px",left:"-1000px"}),$(iframe).appendTo("body"),iframe},_createForm:function(iframe){function createElement(obj,key,prefix){if(obj.hasOwnProperty(key)){var el=document.createElement("input");el.setAttribute("type","hidden"),el.setAttribute("name",prefix+key),el.setAttribute("value",obj[key]),form.appendChild(el)}}function createElements(obj,prefix){for(var key in obj)obj.hasOwnProperty(key)&&$.isPlainObject(obj[key])?createElements(obj[key],key+"."):obj.hasOwnProperty(key)&&$.isArray(obj[key])?$(obj[key]).each(function(i,item){$.isPlainObject(item)||$.isArray(item)?createElements(item,prefix+key+"["+i+"]."):createElement(obj,item,key+"["+i+"].")}):createElement(obj,key,prefix)}var settings=this._settings,form=toElement('<form method="post" enctype="multipart/form-data"></form>');return form.setAttribute("action",settings.action),form.setAttribute("target",iframe.name),form.style.display="none",document.body.appendChild(form),createElements(settings.data,""),form},_getResponse:function(iframe,file){var toDeleteFlag=!1,self=this,settings=this._settings;addEvent(iframe,"load",function(){if("javascript:'%3Chtml%3E%3C/html%3E';"==iframe.src||"javascript:'<html></html>';"==iframe.src)return void(toDeleteFlag&&setTimeout(function(){$(iframe).remove()},0));var doc=iframe.contentDocument?iframe.contentDocument:window.frames[iframe.id].document;if(!(doc.readyState&&"complete"!=doc.readyState||doc.body&&"false"==doc.body.innerHTML)){var response;doc.XMLDocument?response=doc.XMLDocument:doc.body?(response=doc.body.innerHTML,settings.responseType&&"json"==settings.responseType.toLowerCase()&&(doc.body.firstChild&&"PRE"==doc.body.firstChild.nodeName.toUpperCase()&&(doc.normalize(),response=doc.body.firstChild.firstChild.nodeValue),response=response?eval("("+response+")"):{})):response=doc,settings.onComplete.call(self,file,response),toDeleteFlag=!0,iframe.src="javascript:'<html></html>';"}})},submit:function(){var settings=this._settings;if(this._input&&""!==this._input.value){var file=fileFromPath(this._input.value);if(!1===settings.onSubmit.call(this,file,getExt(file)))return void this._clearInput();var iframe=this._createIframe(),form=this._createForm(iframe),parent=$(this._input).parent(),name=$(this._input).attr("id");form.appendChild(this._input),form.submit(),$(parent).append($("<input>").attr("type","file").attr("name",name).attr("id",name).addClass("customfile-input").attr("size",45)),$(form).remove(),this._getResponse(iframe,file)}}},AjaxFileUpload}(),ko.bindingHandlers.MultiSelect={init:function(element,valueAccessor){var model=valueAccessor();model._resultsItems=ko.observableArray(),$(element).tokenInput(model,{internalTokenMarkup:function(){var anchor=$("<a>").addClass("selectedItem").attr("data-bind","text:name");return $("<p>").append(anchor)}});var item=$(element).data("tokenInputObject"),binding=function(){ko.applyBindings(model,$(element).next("div")[0])};item.init(binding)},update:function(){}},ko.bindingHandlers.dateString={init:function(element,valueAccessor){ko.utils.registerEventHandler(element,"change",function(){var observable=valueAccessor();"SPAN"==element.nodeName&&observable($(element).text()),"INPUT"==element.nodeName&&observable($(element).val())}),ko.utils.domNodeDisposal.addDisposeCallback(element,function(){$(element).timepicker("destroy")});var valueUnwrapped=ko.utils.unwrapObservable(valueAccessor()),formattedDate=valueUnwrapped?new XDate(new XDate(valueUnwrapped)).toString("MM/dd/yyyy"):"";"SPAN"==element.nodeName&&$(element).text(formattedDate).change(),"INPUT"==element.nodeName&&$(element).val(formattedDate).change()},update:function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());"SPAN"==element.nodeName&&$(element).text(value),"INPUT"==element.nodeName&&$(element).val(value)}},ko.bindingHandlers.timeString={init:function(element,valueAccessor){ko.utils.registerEventHandler(element,"change",function(){var observable=valueAccessor();"SPAN"==element.nodeName&&observable($(element).text()),"INPUT"==element.nodeName&&observable($(element).val())}),ko.utils.domNodeDisposal.addDisposeCallback(element,function(){$(element).datepicker("destroy")});var valueUnwrapped=ko.utils.unwrapObservable(valueAccessor()),formattedTime=valueUnwrapped?new XDate(new Date(valueUnwrapped)).toString("hh:mm TT"):"";"SPAN"==element.nodeName&&$(element).text(formattedTime).change(),"INPUT"==element.nodeName&&$(element).val(formattedTime).change()},update:function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());"SPAN"==element.nodeName&&$(element).text(value),"INPUT"==element.nodeName&&$(element).val(value),$(element).val(value)}},ko.bindingHandlers.groupedSelect={update:function(element,valueAccessor,allBindingsAccessor){if("select"!==ko.utils.tagNameLower(element))throw new Error("options binding applies only to SELECT elements");var selectWasPreviouslyEmpty=0==element.length,previousSelectedValues=ko.utils.arrayMap(ko.utils.arrayFilter(element.childNodes,function(node){return node.tagName&&"option"===ko.utils.tagNameLower(node)&&node.selected}),function(node){return ko.selectExtensions.readValue(node)||node.innerText||node.textContent}),previousScrollTop=element.scrollTop,value=ko.utils.unwrapObservable(valueAccessor());value=value.groups();for(element.value;element.length>0;)ko.cleanNode(element.options[0]),element.remove(0);for(;element.children.length>0;)ko.cleanNode(element.children[0]),$(element.children[0]).remove();if(value){var allBindings=allBindingsAccessor();if("number"!=typeof value.length&&(value=[value]),allBindings.optionsCaption){var option=document.createElement("option");ko.utils.setHtml(option,allBindings.optionsCaption),ko.selectExtensions.writeValue(option,void 0),element.appendChild(option)}for(var a=0,b=value.length;b>a;a++){var optGroup=document.createElement("optgroup");ko.bindingHandlers.attr.update(optGroup,ko.observable({label:value[a].label()}));var children=ko.utils.unwrapObservable(value[a].children());for(c=0,d=children.length;d>c;c++){var option=document.createElement("option"),optionValue="string"==typeof allBindings.optionsValue?value[a].children()[c][allBindings.optionsValue]:value[a].children()[c];optionValue=ko.utils.unwrapObservable(optionValue),ko.selectExtensions.writeValue(option,optionValue);var optionText,optionsTextValue=allBindings.optionsText;optionText="function"==typeof optionsTextValue?optionsTextValue(value[a].children()[c]):"string"==typeof optionsTextValue?value[a].children()[c][optionsTextValue]:optionValue,(null===optionText||void 0===optionText)&&(optionText=""),ko.utils.setTextContent(option,optionText),optGroup.appendChild(option)}element.appendChild(optGroup)}for(var newOptions=element.getElementsByTagName("option"),countSelectionsRetained=0,i=0,j=newOptions.length;j>i;i++)ko.utils.arrayIndexOf(previousSelectedValues,ko.selectExtensions.readValue(newOptions[i]))>=0&&(ko.utils.setOptionNodeSelectionState(newOptions[i],!0),countSelectionsRetained++);element.scrollTop=previousScrollTop,selectWasPreviouslyEmpty&&"value"in allBindings&&ensureDropdownSelectionIsConsistentWithModelValue(element,ko.utils.unwrapObservable(allBindings.value),!0),ko.utils.ensureSelectElementIsRenderedCorrectly(element)}}},ko.bindingHandlers.stopBinding={init:function(){return{controlsDescendantBindings:!0}}},"undefined"==typeof CC)var CC={};CC.Elements={},CC.Elements.Element=function($container){this.$container=$container,this.trimFieldName=function(){var name=this.$container.find("label").text();return name=name.replace(":",""),name=name.replace("*",""),$.trim(name)}},CC.Elements.Element.extend=Backbone.View.extend,$.extend(CC.Elements.Element.prototype,{init:function(view){this.viewId=view.cid,this.cid=_.uniqueId("c"),this.$input=this.$container.find("input"),this.type="Element",this.friendlyName=this.trimFieldName(),this.name=this.$input.attr("name"),this.errorSelector=view.errorSelector?view.errorSelector:"#messageContainer"},validate:function(){CC.ValidationRunner.runElement(this,this.errorSelector)},getValue:function(){return this.$input.val()},setValidState:function(isValid){isValid?(this.$input.removeClass("invalid"),this.$input.hasClass("valid")||this.$input.addClass("valid")):(this.$input.removeClass("valid"),this.$input.hasClass("invalid")||this.$input.addClass("invalid")),this.isValid=isValid
},destroy:function(){$.noty.closeByElementId(this.cid)}}),CC.Elements.Textbox=CC.Elements.Element.extend({render:function(){var that=this;this.type="textbox",this.$input.on("change",function(){that.validate()})},destroy:function(){this.$input.off("change"),this._super("destroy",arguments)}}),CC.Elements.DateTextbox=CC.Elements.Element.extend({render:function(){var that=this;this.type="datetextbox",this.$label=this.$container.find("label"),this.$input.on("change",function(){that.validate()}),this.$input.datepicker({changeYear:!0,changeMonth:!0})},destroy:function(){this.$input.off("change"),this._super("destroy",arguments)}}),CC.Elements.NumberTextbox=CC.Elements.Element.extend({render:function(){var that=this;this.type="numbertextbox",this.$input.on("change",function(){that.validate()})},destroy:function(){this.$input.off("change"),this._super("destroy",arguments)}}),CC.Elements.Textarea=CC.Elements.Element.extend({render:function(){var that=this;this.type="textarea",this.$input.on("change",function(){that.validate()})},destroy:function(){this.$input.off("change"),this._super("destroy",arguments)}}),CC.Elements.Checkbox=CC.Elements.Element.extend({render:function(){var that=this;this.type="checkbox",this.$input.on("change",function(){that.validate()})},destroy:function(){this.$input.off("change"),this._super("destroy",arguments)}}),CC.Elements.Password=CC.Elements.Element.extend({render:function(){var that=this;this.type="textbox",this.$input.on("change",function(){that.validate()})},destroy:function(){this.$input.off("change"),this._super("destroy",arguments)}}),CC.Elements.FileSubmission=CC.Elements.Element.extend({render:function(view){this.type="file",this.$input=this.$container.find("#FileUrl"),view.model.FileUrl()?this.showImage():this.showInput(),this.$container.find(".deleteImage").on("click",$.proxy(function(){this.showInput(),view.model.DeleteImage(!0)},this))},showImage:function(){this.$container.find(".imageContainer").show(),this.$container.find(".inputContainer").hide()},showInput:function(){this.$container.find(".imageContainer").hide(),this.$container.find(".inputContainer").show(),this.$input.customFileInput()}}),CC.Elements.PictureGallery=CC.Elements.Element.extend({render:function(){this.type="ul",this.$input=this.$container.find("ul"),this.$input.find("li").size>0&&this.$input.galleryView({panel_width:500,panel_height:250})}}),CC.Elements.Select=CC.Elements.Element.extend({init:function(){var that=this;this._super("init",arguments),this.type="select",this.$input=this.$container.find("select"),this.name=this.$input.attr("name"),this.$input.on("change",function(){that.validate()})},render:function(){this.type="select",this.$input=this.$container.find("select")},destroy:function(){this._super("destroy",arguments)}}),CC.Elements.MultiSelect=CC.Elements.Element.extend({init:function(view){this._super("init",arguments),$.isFunction(view.multiSelectModifier)&&view.multiSelectModifier(this)},render:function(){var that=this;this.type="select",this.$input=this.$container.find("input.multiSelect"),this.item=this.$input.data("tokenInputObject"),this.item.render(this.multiSelectOptions),MF.vent.bind(this.name+":tokenizer:add",$.proxy(that.multiSelectChange,that)),MF.vent.bind(this.name+":tokenizer:remove",$.proxy(that.multiSelectChange,that))},multiSelectChange:function(){this.selectedViewmodel=this.item.getSelectedItems(),this.validate()},getValue:function(){return this.item.getSelectedItems()},destroy:function(){MF.vent.unbind(this.name+":tokenizer:add"),MF.vent.unbind(this.name+":tokenizer:remove"),this.$container.off(this.$input.attr("id")+":tokenizer:blur"),$("#"+this.$input.attr("name")+"_container *").unbind().remove(),this._super("destroy",arguments)}}),_.each(["Element","Textbox","Password","Select","MultiSelect","PictureGallery","FileSubmission"],function(klass){CC.Elements[klass].prototype._super=Backbone.View.prototype._super}),CC.ElementCollection=function(){this.collection={}},$.extend(CC.ElementCollection.prototype,{add:function(element){this.collection[element.name]=element},destroy:function(){for(var el in this.collection)this.collection[el].destroy();this.collection={}}}),CC.elementService=function(){var srv={};return srv.getElementsViewmodel=function(view){var model=new CC.ElementCollection;return view.$el.find("[eltype]").each(function(i,item){var element=new(CC.Elements[$(item).attr("eltype")])($(item));element.init(view),model.add(element)}),model},srv}(),CC.NotificationService=function(){this.successViewmodel={messages:ko.observableArray(),fadeOut:function(item){1==item.nodeType&&$(item).hide("slow")}},this.errorViewmodel={messages:ko.observableArray(),fadeOut:function(item){1==item.nodeType&&$(item).hide("slow")}}},$.extend(CC.NotificationService.prototype,{successSelector:"",errorSelector:"",render:function(_successSelector,_errorSelector){this.successSelector=_successSelector,this.errorSelector=_errorSelector,ko.applyBindings(this.successViewmodel,this.successSelector),ko.applyBindings(this.errorViewmodel,this.errorSelector)},getCorrectViewModel:function(status){return"success"==status?this.successViewmodel.messages:"error"==status?this.errorViewmodel.messages:void 0},add:function(msgObject,status){var messages=this.getCorrectViewModel(status),exists=_.any(messages,function(msg){return msgObject.elementCid()===msg.elementCid()&&msgObject.message()===msg.message()});exists||(messages.push(msgObject),msgObject.shouldSelfDestruct&&(msgObject.parent=this,msgObject.selfDestruct()))},remove:function(msgObject,status){var messages=this.getCorrectViewModel(status);messages.remove(function(msg){return msg.elementCid()===msgObject.elementCid()&&msg.message()===msgObject.message()})},removeById:function(cid,status){var messages=this.getCorrectViewModel(status);messages.remove(function(item){return item.elementCid()===cid})},removeAllErrorsByViewId:function(viewId){var errorMessages=this.errorViewmodel.messages,successMessages=this.successViewmodel.messages;errorMessages.remove(function(item){return item.viewId()===viewId&&"error"===item.status()}),successMessages.remove(function(item){return item.viewId()===viewId&&"success"===item.status()})},resetSuccessSelector:function(_successSelector){ko.cleanNode(this.successSelector[0]),this.successSelector=_successSelector,ko.applyBindings(this.successViewmodel,this.successSelector)},resetErrorSelector:function(){ko.cleanNode(this.errorSelector[0]),this.errorSelector=_successSelector,ko.applyBindings(this.errorViewmodel,this.errorSelector)},handleResult:function(result,cid){var that=this;return result.Success?result.Message&&(that.add(new CC.NotificationMessage("",cid,result.Message,"success",!0),"success"),that.removeAllErrorsByViewId(cid)):(result.Message&&that.add(new CC.NotificationMessage("",cid,result.Message,"error"),"error"),result.Errors&&_.each(result.Errors,function(item){that.add(new CC.NotificationMessage("",cid,item.ErrorMessage,"error"),"error")})),result.Success}}),CC.NotificationMessage=function(elementCid,viewId,message,status,_shouldSelfDestruct){this.message=ko.observable(message),this.elementCid=ko.observable(elementCid),this.viewId=ko.observable(viewId),this.status=ko.observable(status),this.parent=null,this.shouldSelfDestruct=_shouldSelfDestruct,this.selfDestruct=function(time){var that=this;setTimeout(function(){that.parent.remove(that)},time?time:2e3)}},define(["jquery","underscore"],function($){}),CC.errorMessages={required:"field is Required",minlength:"field should be a certain min",maxlength:"field should be a certain max",rangelength:"field should be with in a range",email:"field should be valid email",url:"field should be valid url",date:"field should be a valid date",number:"field should be a number",digits:"field should be didgets",creditcard:"field should be a valid creditcard",equalTo:"field should be equal to"},CC.validationRules=function(){return{required:function(CCElement){var val=CCElement.getValue();return"select"==CCElement.type||"multiselect"==CCElement.type?val&&val.length>0:CCElement.type.indexOf("textbox")>=0||"textarea"==CCElement.type?$.trim(val).length>0:"checkbox"==CCElement.type?val:void 0},minlength:function(CCElement,param){var val=CCElement.getValue();return val.length>=param},maxlength:function(CCElement,param){var val=CCElement.getValue();return val.length<=param},rangelength:function(CCElement,param){var val=CCElement.getValue(),length=val.length;return length>=param[0]&&length<=param[1]},email:function(CCElement){var val=CCElement.getValue();return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(val)},url:function(CCElement){var val=CCElement.getValue();return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(val)},date:function(CCElement){var val=CCElement.getValue();return!/Invalid|NaN/.test(new Date(val))},number:function(CCElement){var val=CCElement.getValue();return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(val)},digits:function(CCElement){var val=CCElement.getValue();return/^\d+$/.test(val)},creditcard:function(CCElement){var val=CCElement.getValue();if(/[^0-9 -]+/.test(val))return!1;for(var nCheck=0,nDigit=0,bEven=!1,value=val.replace(/\D/g,""),n=value.length-1;n>=0;n--){var cDigit=value.charAt(n),nDigit=parseInt(cDigit,10);bEven&&(nDigit*=2)>9&&(nDigit-=9),nCheck+=nDigit,bEven=!bEven}return nCheck%10==0},equalTo:function(CCElement,CCElementTarget){return CCElement.getValue()==CCElementTarget.getValue()}}}(),CC.ValidationRunner=function(){function classList(elem){return elem.attr("class")?elem.attr("class").split(/\s+/):[]}var runner={},validator=CC.validationRules;return runner.runElement=function(CCElement,errorSelector){var elementIsValid=!0,classes=classList(CCElement.$input),val=CCElement.getValue();return val&&""!=val||_.any(classes,function(item){return"required"==item})?($.each(classes,function(idx,rule){if(rule&&validator[rule]){var isValid=validator[rule](CCElement);isValid?$.noty.closeByElementId(CCElement.cid):(elementIsValid=!1,$.noty.getByViewIdAndElementId(CCElement.viewId,CCElement.cid)||$(errorSelector).noty({type:"error",text:CCElement.friendlyName+" "+CC.errorMessages[rule],elementId:CCElement.cid,viewId:CCElement.viewId}))}}),void(classes.length?CCElement.setValidState(elementIsValid):CCElement.isValid=elementIsValid)):void(CCElement.isValid=!0)},runner.runViewModel=function(cid,viewModel,errorSelector){var isValid=!0,collection=viewModel.collection;for(var el in collection)collection.hasOwnProperty(el)&&(collection[el].errorSelector=errorSelector?errorSelector:"#messageContainer",collection[el].validate(),collection[el].isValid||(isValid=!1));return isValid},runner}();var MF=new Backbone.Marionette.Application;if(MF.addRegions({header:"#main-header",content:"#contentInner",menu:"#left-navigation"}),MF.addInitializer(function(){$("#ajaxLoading").hide(),MF.vent.bind("route",function(route,triggerRoute){MF.Routing.showRoute(route,triggerRoute)}),Backbone.Marionette.TemplateCache.prototype.loadTemplate=function(){return MF.repository.ajaxGet(this.url,this.data)},Backbone.Marionette.TemplateCache.prototype.compileTemplate=function(rawTemplate){return rawTemplate}}),MF.bind("initialize:after",function(){Backbone.history&&Backbone.history.start()}),MF.generateRoute=function(route,_entityId,_parentId,_rootId,_var){var rel=MF.State.get("Relationships"),entityId=_entityId?_entityId:0,parentId=_parentId&&_parentId>0?_parentId:rel.parentId,rootId=_rootId&&_rootId>0?_rootId:rel.rootId,variable=_var?"/"+_var:"";return route+"/"+entityId+"/"+parentId+"/"+rootId+variable},$(function(){MF.start()}),MF.Controller=function(MF){var Controller={};return Controller.showViews=function(splat,entityId,parentId,rootId,_var){var routeToken=_.find(MF.routeTokens,function(item){return item.route==splat});if(routeToken){var viewOptions=$.extend({},routeToken);viewOptions.templateUrl=viewOptions.url+"_Template",entityId&&(viewOptions.url+="/"+entityId,viewOptions.route+="/"+entityId),parentId&&(viewOptions.url+="?ParentId="+parentId,viewOptions.route+="/"+parentId),rootId&&(viewOptions.url+="&RootId="+rootId,viewOptions.route+="/"+rootId),_var&&(viewOptions.url+="&Var="+_var,viewOptions.route+="/"+_var),MF.State.set({Relationships:{entityId:entityId?entityId:0,parentId:parentId?parentId:0,rootId:rootId?rootId:0,extraVar:_var?_var:""}});var item;if(item=routeToken.itemName&&MF.Views[routeToken.itemName]?new MF.Views[routeToken.itemName](viewOptions):new MF.Views[routeToken.viewName](viewOptions),routeToken.isChild){var hasParent=MF.WorkflowManager.addChildView(item);hasParent||(MF.WorkflowManager.cleanAllViews(),MF.State.set({currentView:item}),MF.content.show(item))}else MF.WorkflowManager.cleanAllViews(),MF.State.set({currentView:item}),MF.content.show(item)}},MF.addInitializer(function(){MF.ScheduleApp.Menu.show()}),Controller}(MF,Backbone),MF.Header=function(MF,Backbone){var Header={};return Header.HeaderView=Backbone.View.extend({events:{"click #userSettings":"userSettings"},initialize:function(){this.setupAppSelectionEvents(),this.setupGlobalSettings()},setupGlobalSettings:function(){$("a[rel^='prettyPhoto']").on("mouseover",function(){$(this).data("init")||($(this).data("init",!0),$(this).prettyPhoto({theme:"light_rounded",show_title:!1,deeplinking:!1}),$(this).trigger("mouseover"))})},userSettings:function(e){e.preventDefault(),MF.State.set({application:"userSettings"}),MF.vent.trigger("route","usersettings",!0)},setupAppSelectionEvents:function(){var self=this;MF.State.bind("change:application",function(){self.setSelection(MF.State.get("application"))})},setSelection:function(app){this.$("#main-tabs li").removeClass("selected"),this.$("#userSettings").removeClass("active"),"userSettings"==app&&this.$("#userSettings").addClass("active")}}),MF.addInitializer(function(){Header.view=new Header.HeaderView({el:$("#main-header")}).render()}),Header}(MF,Backbone),MF.Views.ResetPasswordView=MF.Views.View.extend({initialize:function(){MF.mixin(this,"baseFormView")},render:function(){return this.bindModelAndElements(),this.setBindings&&this.setBindings(),$("input[name='Password']").focus(),this.viewLoaded(),MF.vent.trigger("form:"+this.id+":pageLoaded",this.options),this}}),MF.Views.LoginView=MF.Views.View.extend({registerEvents:function(){this.events={"click #forgotPasswordLink":"forgotPasswordClick","click .save":"submitClick"}},initialize:function(){var that=this;MF.mixin(this,"formMixin"),MF.mixin(this,"modelAndElementsMixin"),this.registerEvents(),this.$el.delegate(this.$el,"keypress",function(e){13==e.keyCode&&($(".save").focus(),that.submitClick())})},render:function(){return this.bindModelAndElements(),this.setBindings&&this.setBindings(),$("input[name='UserName']").focus(),this.viewLoaded(),MF.vent.trigger("form:"+this.id+":pageLoaded",this.options),this},forgotPasswordClick:function(e){e.preventDefault();var popupOptions={url:this.options.forgotPasswordUrl,popupTitle:this.options.popupTitle},forgottenPasswordView=new MF.Views.AjaxPopupFormModule(popupOptions);forgottenPasswordView.render()},submitClick:function(){var isValid=CC.ValidationRunner.runViewModel(this.cid,this.elementsViewmodel);if(isValid){var data=JSON.stringify(ko.mapping.toJS(this.model)),promise=MF.repository.ajaxPostModel(this.model._saveUrl(),data);promise.done($.proxy(this.success,this))}},success:function(result){result.Success?window.location.href=result.RedirectUrl:(result.Message&&!$.noty.getByViewIdAndElementId(this.cid)&&$(this.errorSelector).noty({type:"error",text:result.Message,viewId:this.cid}),result.Errors&&!$.noty.getByViewIdAndElementId(this.cid)&&_.each(result.Errors,function(item){$(this.errorSelector).noty({type:"error",text:item.ErrorMessage,viewId:this.cid})}))}}),MF.Routing=function(MF,Backbone){var Routing={};Routing.showRoute=function(route,triggerAction){Backbone.history.navigate(route,triggerAction)};return Routing.getCurrentRoute=function(){return window.location.hash},Routing}(MF,Backbone),MF.loadTemplateAndModel=function(view){var d=new $.Deferred;return $.when(Backbone.Marionette.TemplateCache.get(view.options.route,view.options.templateUrl,view.options.data),MF.repository.ajaxGet(view.options.url,view.options.data)).done(function(html,data){view.$el.html(html),view.rawModel=data[0],d.resolve()}),d.promise()},MF.State=function(MF,Backbone){var State=Backbone.Model.extend({defaults:{parentStack:[]},application:"",currentView:""});return new State}(MF,Backbone),MF.Views={},function(Backbone){function _super(methodName,args){this._superCallObjects||(this._superCallObjects={});var currentObject=this._superCallObjects[methodName]||this,parentObject=findSuper(methodName,currentObject);if(this._superCallObjects[methodName]=parentObject,parentObject[methodName])var result=parentObject[methodName].apply(this,args||[]);return delete this._superCallObjects[methodName],result}function findSuper(methodName,childObject){for(var object=childObject;object[methodName]===childObject[methodName];)object=object.constructor.__super__;return object}_.each(["Model","Collection","View","Router"],function(klass){Backbone[klass].prototype._super=_super})}(Backbone),MF.Views.View=Backbone.View.extend({removeChildView:function(item){var view=this.children[item.cid];view&&(view.close(),delete this.children[item.cid])},storeChild:function(view){this.children||(this.children={}),this.children[view.cid]=view},close:function(){this.unbind(),this.elementsViewmodel&&this.elementsViewmodel.destroy(),this.remove(),this.closeChildren(),this.onClose&&this.onClose()},closeChildren:function(){this.children&&_.each(this.children,function(childView){childView.close()})},viewLoaded:function(){}}),MF.Views.FormView=MF.Views.View.extend({initialize:function(){MF.mixin(this,"formMixin"),MF.mixin(this,"modelAndElementsMixin")},render:function(){return this.bindModelAndElements(),this.viewLoaded(),MF.vent.trigger("form:"+this.id+":pageLoaded",this.options),this}}),MF.Views.AjaxFormView=MF.Views.View.extend({initialize:function(){MF.mixin(this,"formMixin"),MF.mixin(this,"ajaxFormMixin"),MF.mixin(this,"modelAndElementsMixin")}}),MF.Views.AjaxDisplayView=MF.Views.View.extend({initialize:function(){MF.mixin(this,"displayMixin"),MF.mixin(this,"ajaxDisplayMixin"),MF.mixin(this,"modelAndElementsMixin")}}),MF.Views.NoMultiSelectGridView=MF.Views.View.extend({initialize:function(){this.options.gridOptions={multiselect:!1},MF.mixin(this,"ajaxGridMixin"),MF.mixin(this,"setupGridMixin"),MF.mixin(this,"defaultGridEventsMixin"),MF.mixin(this,"setupGridSearchMixin")},viewLoaded:function(){this.setupBindings()},onClose:function(){this.unbindBindings()}}),MF.Views.GridView=MF.Views.View.extend({initialize:function(){MF.mixin(this,"ajaxGridMixin"),MF.mixin(this,"setupGridMixin"),MF.mixin(this,"defaultGridEventsMixin"),MF.mixin(this,"setupGridSearchMixin")},viewLoaded:function(){this.setupBindings()},onClose:function(){this.unbindBindings()}}),MF.Views.AjaxPopupFormModule=MF.Views.View.extend({initialize:function(){this.registerSubscriptions()},render:function(){this.options.noBubbleUp=!0,this.options.isPopup=!0,this.popupForm=this.options.view&&MF.Views[this.options.view]?new MF.Views[this.options.view](this.options):new MF.Views.AjaxFormView(this.options),this.popupForm.render(),this.storeChild(this.popupForm),$(this.el).append(this.popupForm.el)},registerSubscriptions:function(){MF.vent.bind("form:"+this.id+":pageLoaded",this.loadPopupView,this),MF.vent.bind("popup:"+this.id+":cancel",this.popupCancel,this),MF.vent.bind("popup:"+this.id+":save",this.formSave,this),MF.vent.bind("form:"+this.id+":success",this.formSuccess,this)},onClose:function(){MF.vent.unbind("form:"+this.id+":pageLoaded"),MF.vent.unbind("popup:"+this.id+":cancel"),MF.vent.unbind("popup:"+this.id+":save"),MF.vent.unbind("form:"+this.id+":success")},loadPopupView:function(formOptions){var buttons=formOptions.buttons?formOptions.buttons:MF.Views.popupButtonBuilder.builder(formOptions.id).standardEditButons(),popupOptions={id:this.id,el:this.el,buttons:buttons,title:formOptions.title},view=new MF.Views.PopupView(popupOptions);view.render(),this.storeChild(view)},formSave:function(){this.popupForm.saveItem()},formSuccess:function(result){MF.vent.trigger("ajaxPopupFormModule:"+this.id+":success",result)},popupCancel:function(){MF.vent.trigger("ajaxPopupFormModule:"+this.id+":cancel",[])}}),MF.Views.AjaxPopupDisplayModule=MF.Views.View.extend({initialize:function(){this.registerSubscriptions()},render:function(){this.options.noBubbleUp=!0,this.options.isPopup=!0,this.popupDisplay=this.options.view&&MF.Views[this.options.view]?new MF.Views[this.options.view](this.options):new MF.Views.AjaxDisplayView(this.options),this.popupDisplay.render(),this.storeChild(this.popupDisplay),$(this.el).append(this.popupDisplay.el)},registerSubscriptions:function(){MF.vent.bind("display:"+this.id+":pageLoaded",this.loadPopupView,this),MF.vent.bind("popup:"+this.id+":cancel",this.popupCancel,this)},onClose:function(){MF.vent.unbind("display:"+this.id+":pageLoaded"),MF.vent.unbind("popup:"+this.id+":cancel")},loadPopupView:function(formOptions){var buttons=formOptions.buttons?formOptions.buttons:MF.Views.popupButtonBuilder.builder(formOptions.id).standardEditButons(),popupOptions={id:this.id,el:this.el,buttons:buttons,width:this.options.popupWidth,title:formOptions.title},view=new MF.Views.PopupView(popupOptions);view.render(),this.storeChild(view)},popupCancel:function(){MF.vent.trigger("module:"+this.id+":cancel",[])}}),MF.Views.PopupView=MF.Views.View.extend({render:function(){var that=this;return $(".ui-dialog").remove(),$(this.el).dialog({modal:!0,width:this.options.width||550,buttons:this.options.buttons,title:this.options.title,close:function(){MF.vent.trigger("popup:"+that.options.id+":cancel")}}),this}}),MF.Views.TemplatedPopupView=MF.Views.View.extend({initialize:function(){this.options=$.extend({},MF.popupDefaults,this.options)},render:function(){$(this.el).append($(this.options.template).tmpl(this.options.data));var popupOptions={id:this.id,el:this.el,buttons:this.options.buttons,width:this.options.popupWidth,title:this.options.title},view=new MF.Views.PopupView(popupOptions);view.render(),this.storeChild(view)}}),MF.Views.KOPopupView=MF.Views.View.extend({initialize:function(){this.options=$.extend({},MF.popupDefaults,this.options)},render:function(){var template=$(this.options.template).clone().show();$(this.el).append(template),this.errorSelector=$("#popupMessageContainer",this.el),ko.applyBindings(this.options.data,this.el),this.elementsViewmodel=CC.elementService.getElementsViewmodel(this);var collection=this.elementsViewmodel.collection;for(var item in collection)collection[item].render();var popupOptions={id:this.id,el:this.el,buttons:this.options.buttons,width:this.options.popupWidth,title:this.options.title},view=new MF.Views.PopupView(popupOptions);view.render(),this.storeChild(view)}}),MF.Views.popupButtonBuilder=function(){return{builder:function(id){var buttons={},_addButton=function(name,func){buttons[name]=func},saveFunc=function(){$(this).hasClass("disabled")||($(this).addClass("disabled"),MF.vent.trigger("popup:"+id+":save",this))},editFunc=function(){MF.vent.trigger("popup:"+id+":edit")},cancelFunc=function(){$(this).dialog("close"),MF.vent.trigger("popup:"+id+":cancel")};return{getButtons:function(){return buttons},getSaveFunc:function(){return saveFunc},getCancelFunc:function(){return cancelFunc},addSaveButton:function(){return _addButton("Save",saveFunc),this},addEditButton:function(){return _addButton("Edit",editFunc),this},addCancelButton:function(){return _addButton("Cancel",cancelFunc),this},addButton:function(name,func){return _addButton(name,func),this},clearButtons:function(){return buttons={},this},standardEditButons:function(){return _addButton("Save",saveFunc),_addButton("Cancel",cancelFunc),buttons},standardDisplayButtons:function(){return _addButton("Cancel",cancelFunc),buttons}}}}}(),MF.Views.TokenizerModule=MF.Views.View.extend({render:function(){this.registerSubscriptions(),this.tokenView=new MF.Views.TokenView(this.options),this.storeChild(this.tokenView)},registerSubscriptions:function(){MF.vent.bind("token:"+this.id+":addUpdate",this.addUpdateItem,this),MF.vent.bind("ajaxPopupFormModule:"+this.id+":success",this.formSuccess,this),MF.vent.bind("ajaxPopupFormModule:"+this.id+":cancel",this.formCancel,this)},onClose:function(){MF.vent.unbind("token:"+this.id+":addUpdate"),MF.vent.unbind("ajaxPopupFormModule:"+this.id+":success"),MF.vent.unbind("ajaxPopupFormModule:"+this.id+":cancel")},addUpdateItem:function(){var options={id:this.id,url:this.options.tokenizerUrls[this.id+"AddUpdateUrl"],crudFormOptions:{errorContainer:"#errorMessagesPU",successContainer:"#errorMessagesForm"}};this.popupModule=new MF.Views.AjaxPopupFormModule(options),this.popupModule.render(),this.storeChild(this.popupModule),$(this.el).append(this.popupModule.el)},formSuccess:function(result){return this.tokenView.successHandler(result),this.popupModule.close(),this.formCancel(),!1},formCancel:function(){return this.popupModule.close(),!1}}),MF.Views.TokenView=MF.Views.View.extend({events:{"click #addNew":"addNew"},initialize:function(){this.options=$.extend({},MF.tokenDefaults,this.options)},render:function(){this.options.availableItems&&0!=this.options.availableItems.length?($("#noAssets",this.el).hide(),$("#hasAssets",this.el).show(),this.inputSetup()):($("#noAssets",this.el).show(),$("#hasAssets",this.el).hide())},inputSetup:function(){$(this.options.inputSelector,this.el).tokenInput(this.options.availableItems,{prePopulate:this.options.selectedItems,internalTokenMarkup:$.proxy(this.internalTokenMarkup,this),afterTokenSelectedFunction:$.proxy(this.afterTokenSelectedFunction,this),onDelete:$.proxy(this.deleteToken,this)}),this.options.instantiated=!0,this.postSetup&&this.postSetup()},internalTokenMarkup:function(item){var cssClass="class='selectedItem'";return"<p><a "+cssClass+">"+item.name+"</a></p>"},afterTokenSelectedFunction:function(){},deleteToken:function(){},addNew:function(e){e.preventDefault(),MF.vent.trigger("token:"+this.id+":addUpdate",this.id)},successHandler:function(result){this.options.instantiated||($("#noAssets",this.el).hide(),$("#hasAssets",this.el).show(),this.inputSetup()),$(this.options.inputSelector,this.el).tokenInput("add",{id:result.EntityId,name:result.Variable}),$(this.options.inputSelector,this.el).tokenInput("addToAvailableList",{id:result.EntityId,name:result.Variable})}}),MF.Views.EditableTokenView=MF.Views.TokenView.extend({events:_.extend({"click .tokenEditor":"tokenEditor"},MF.Views.TokenView.prototype.events),internalTokenMarkup:function(item){var cssClass="class='selectedItem'";return"<p><a "+cssClass+">"+item.name+"</a><a href='javascript:void(0);' class='tokenEditor' > -- Edit</a> </p>"},afterTokenSelectedFunction:function(item){$(this.options.inputSelector,this.el).data("selectedItems")||$(this.options.inputSelector,this.el).data("selectedItems",[]),$(this.options.inputSelector,this.el).data("selectedItems").push(item)},deleteToken:function(hidden_input){var data=$(this.options.inputSelector,this.el).data("selectedItems"),idx=0;$.each(data,function(i,item){item.id==hidden_input.id&&(idx=i)}),data.splice(idx,1)},tokenEditor:function(){}}),MF.tokenDefaults={availableItems:[],selectedItems:[],tooltipAjaxUrl:"",inputSelector:"#Input"},MF.popupDefaults={title:""},MF.gridDefaults={searchField:"Name",showSearch:!0,id:""},MF.WorkflowManager=function(MF,Backbone){var WFM=Backbone.Model.extend({defaults:{parentStack:[]},addChildView:function(child){var parent=MF.State.get("currentView");if(!parent)return null;MF.State.set({currentView:child}),MF.State.set({childView:child});var stack=this.get("parentStack");return stack.push(parent),$.when(child.render()).then(function(){$(parent.el).after(child.el)}),$(parent.el).hide(),child},returnParentView:function(result,triggerCallback){var stack=this.get("parentStack"),parent=stack.pop();MF.State.get("currentView").close(),parent&&(triggerCallback&&parent.callbackAction&&parent.callbackAction(result),$(parent.el).show(),MF.vent.trigger("route",parent.options.route,!1),MF.State.set({currentView:parent}))},loadBottomLevel:function(url){var last=_.last(this.get("parentStack"));return last&&last.options.url==url?(this.returnParentView("",!1),!1):!0},cleanAllViews:function(){var currentView=MF.State.get("currentView");currentView&&currentView.close();for(var stack=this.get("parentStack");stack.length>0;)stack.pop().close()}});return new WFM}(MF,Backbone),"undefined"==typeof MF)var MF={};if("undefined"==typeof CC)var CC={};MF.mixins={},MF.mixin=function(target,mixin,preserveRender){var mixinObj=MF.mixins[mixin];for(var prop in mixinObj)"render"==prop?1!=preserveRender&&(target[prop]=mixinObj[prop]):null==target[prop]&&mixinObj.hasOwnProperty(prop)&&(target[prop]=mixinObj[prop])},MF.mixins.modelAndElementsMixin={bindModelAndElements:function(arrayOfIgnoreItems){var that=this;this.mappingOptions={ignore:[]},_.each(arrayOfIgnoreItems,function(item){that.mappingOptions.ignore.push(item)}),this.model=ko.mapping.fromJS(this.rawModel,this.mappingOptions),this.extendModel(this.model),ko.applyBindings(this.model,this.el),this.elementsViewmodel=CC.elementService.getElementsViewmodel(this),this.boundElementOptions&&this.boundElementOptions.modifiers&&_.each(this.boundElementOptions.modifiers,function(item){item(this.elementsViewmodel.collection)},this);var ignore=_.filter(_.keys(this.model),function(item){return 0==item.indexOf("_")&&"__ko_mapping__"!=item});_.each(ignore,function(item){that.mappingOptions.ignore.push(item)}),this.renderElements(),this.mappingOptions.ignore.push("_availableItems"),this.mappingOptions.ignore.push("_resultsItems"),this.mappingOptions.ignore=_.uniq(this.mappingOptions.ignore),MF.vent.trigger("model:"+this.id+"modelLoaded")},bindSpecificModelAndElements:function(viewModel){var that=this;this.mappingOptions={ignore:[]},this.viewModel=ko.mapping.fromJS(viewModel),this.extendModel(this.viewModel),ko.applyBindings(this.viewModel,this.el),this.elementsViewmodel=CC.elementService.getElementsViewmodel(this);
var ignore=_.filter(_.keys(this.viewModel),function(item){return 0==item.indexOf("_")&&"__ko_mapping__"!=item});_.each(ignore,function(item){that.mappingOptions.ignore.push(item)}),this.renderElements()},renderElements:function(){var collection=this.elementsViewmodel.collection;for(var item in collection)collection[item].render()},extendModel:function(model){model._createdText=ko.computed(function(){return model.EntityId()>0&&model.DateCreated()?"Added "+new XDate(model.DateCreated()).toString("MMM d, yyyy"):""},this),model._title=ko.computed(function(){return model.EntityId()<=0&&model._Title()?"Add New "+model._Title():model._Title()?model._Title():""},this)},addIdsToModel:function(){var rel=MF.State.get("Relationships");rel&&(this.model.EntityId(rel.entityId),this.model.ParentId(rel.parentId),this.model.RootId(rel.rootId),this.model.Var(rel.extraVar))}},MF.mixins.reportMixin={events:{"click #viewReport":"viewReport"},successSelector:"#messageContainer",errorSelector:"#messageContainer",viewReport:function(){var isValid=CC.ValidationRunner.runViewModel(this.cid,this.elementsViewmodel,this.errorSelector);if(isValid){var url=this.createUrl();window.open(url)}},createUrl:function(){}},MF.mixins.formMixin={events:{"click #save":"saveItem","click #cancel":"cancel"},successSelector:"#messageContainer",errorSelector:"#messageContainer",saveItem:function(){var isValid=CC.ValidationRunner.runViewModel(this.cid,this.elementsViewmodel,this.errorSelector);if(isValid){var data,fileInputs=$("input:file",this.$el);if(fileInputs.length>0&&_.any(fileInputs,function(item){return $(item).val()})){var that=this;data=ko.mapping.toJS(this.model,this.mappingOptions);var ajaxFileUpload=new CC.AjaxFileUpload(fileInputs[0],{action:that.model._saveUrl(),onComplete:function(file,response){that.successHandler(response)}});ajaxFileUpload.setData(data),ajaxFileUpload.submit()}else{data=JSON.stringify(ko.mapping.toJS(this.model,this.mappingOptions));var promise=MF.repository.ajaxPostModel(this.model._saveUrl(),data);promise.done($.proxy(this.successHandler,this))}this.$el.find("#save").attr("disabled","disabled")}},cancel:function(){MF.vent.trigger("form:"+this.id+":cancel"),this.options.noBubbleUp||MF.WorkflowManager.returnParentView()},successHandler:function(_result){var result="string"==typeof _result?JSON.parse(_result):_result;if(result.Success){if(result.Message){var note=$(this.successSelector).noty({type:"success",text:result.Message,viewId:this.cid});note.setAnimationSpeed(1e3),note.setTimeout(3e3),$.noty.closeAllErrorsByViewId(this.cid)}MF.vent.trigger("form:"+this.id+":success",result),this.options.noBubbleUp||MF.WorkflowManager.returnParentView(result,!0)}else result.Message&&!$.noty.getByViewIdAndElementId(this.cid)&&$(this.errorSelector).noty({type:"error",text:result.Message,viewId:this.cid}),result.Errors&&!$.noty.getByViewIdAndElementId(this.cid)&&_.each(result.Errors,function(item){$(this.errorSelector).noty({type:"error",text:item.ErrorMessage,viewId:this.cid})});this.$el.find("#save").removeAttr("disabled")}},MF.mixins.displayMixin={events:{"click #cancel":"cancel"},cancel:function(){MF.vent.trigger("display:"+this.id+":cancel"),this.options.noBubbleUp||MF.WorkflowManager.returnParentView()}},MF.mixins.ajaxDisplayMixin={render:function(){$.when(MF.loadTemplateAndModel(this)).done($.proxy(this.renderCallback,this))},renderCallback:function(){this.bindModelAndElements(),$("div.form-scroll-inner").height(window.innerHeight-180),this.viewLoaded(),MF.vent.trigger("display:"+this.id+":pageLoaded",this.options)}},MF.mixins.ajaxFormMixin={render:function(){$.when(MF.loadTemplateAndModel(this)).done($.proxy(this.renderCallback,this))},renderCallback:function(){this.bindModelAndElements(),$("div.form-scroll-inner").height(window.innerHeight-220),this.viewLoaded(),MF.vent.trigger("form:"+this.id+":pageLoaded",this.options)}},MF.mixins.ajaxGridMixin={render:function(){MF.repository.ajaxGet(this.options.url,this.options.data).done($.proxy(this.renderCallback,this))},renderCallback:function(result){$(this.el).html($("#gridTemplate").tmpl(result)),$.extend(this.options,result,MF.gridDefaults),this.setupGrid(),this.viewLoaded(),MF.vent.trigger("grid:"+this.id+":pageLoaded",this.options)}},MF.mixins.setupGridMixin={setupGrid:function(){$.each(this.options.headerButtons,$.proxy(function(i,item){$(this.el).find("."+item).show()},this)),this.options.gridId?this.$el.find("#gridContainer").attr("id",this.options.gridId):this.options.gridId="gridContainer",this.options.NoMultiSelectGridView&&(this.options.gridOptions=this.options.gridOptions?this.options.gridOptions.multiselect=!1:this.options.gridOptions={multiselect:!1}),this.options.searchField=this.options.gridDef.SearchField||this.options.searchField,$("#"+this.options.gridId,this.el).AsGrid(this.options.gridDef,this.options.gridOptions),$(this.el).gridSearch({onClear:$.proxy(this.removeSearch,this),onSubmit:$.proxy(this.search,this)})}},MF.mixins.defaultGridEventsMixin={events:{"click .new":"addNew","click .delete":"deleteItems"},successSelector:"#messageContainer",errorSelector:"#messageContainer",setupBindings:function(){MF.vent.bind(this.options.gridId+":AddUpdateItem",this.editItem,this),MF.vent.bind(this.options.gridId+":DisplayItem",this.displayItem,this),$.isFunction(this._setupBindings)&&this._setupBindings()},unbindBindings:function(){MF.vent.unbind(this.options.gridId+":AddUpdateItem",this.editItem,this),MF.vent.unbind(this.options.gridId+":DisplayItem",this.displayItem,this),$.isFunction(this._unbindBindings)&&this._unbindBindings()},addNew:function(){MF.vent.trigger("route",MF.generateRoute(this.options.addUpdate),!0)},editItem:function(id){MF.vent.trigger("route",MF.generateRoute(this.options.addUpdate,id),!0)},displayItem:function(id){MF.vent.trigger("route",MF.generateRoute(this.options.display,id),!0)},deleteItems:function(){if(confirm("Are you sure you would like to delete this Item?")){var ids=cc.gridMultiSelect.getCheckedBoxes(this.options.gridId);MF.repository.ajaxGet(this.options.deleteMultipleUrl,$.param({EntityIds:ids},!0)).done($.proxy(function(result){this.successHandler(result)},this))}},successHandler:function(_result){var that=this,result="string"==typeof _result?JSON.parse(_result):_result;if(result.Success){if(result.Message){var note=$(that.successSelector).noty({type:"success",text:result.Message,viewId:this.cid});note.setAnimationSpeed(1e3),note.setTimeout(3e3),$.noty.closeAllErrorsByViewId(this.cid)}this.reloadGrid()}else{if(result.Message&&!$.noty.getByViewIdAndElementId(this.cid)){var note=$(that.errorSelector).noty({type:"error",text:result.Message,viewId:that.cid});note.setAnimationSpeed(1e3),note.setTimeout(3e3),$.noty.closeAllErrorsByViewId(this.cid)}result.Errors&&!$.noty.getByViewIdAndElementId(this.cid)&&_.each(result.Errors,function(item){var note=$(that.errorSelector).noty({type:"error",text:item.ErrorMessage,viewId:that.cid});note.setAnimationSpeed(1e3),note.setTimeout(3e3),$.noty.closeAllErrorsByViewId(this.cid)})}},bulkDeleteSuccess:function(){this.reloadGrid()},reloadGrid:function(){MF.vent.unbind(this.options.gridId+":AddUpdateItem",this.editItem,this),MF.vent.unbind(this.options.gridId+":DisplayItem",this.displayItem,this),$("#"+this.options.gridId).trigger("reloadGrid"),MF.vent.bind(this.options.gridId+":AddUpdateItem",this.editItem,this),MF.vent.bind(this.options.gridId+":DisplayItem",this.displayItem,this)},callbackAction:function(){this.reloadGrid()}},MF.mixins.setupGridSearchMixin={search:function(v){var searchItem={field:this.options.searchField,data:v},filter={group:"AND",rules:[searchItem]},obj={filters:""+JSON.stringify(filter)};$("#"+this.options.gridId).jqGrid("setGridParam",{postData:obj}),this.reloadGrid()},removeSearch:function(){return delete $("#"+this.options.gridId).jqGrid("getGridParam","postData").filters,this.reloadGrid(),!1}},MF.Routing.ReportingApp=function(MF){var ReportingApp={};return MF.addInitializer(function(){}),ReportingApp}(MF,Backbone),MF.Views.DailyPaymentsView=MF.Views.View.extend({initialize:function(){MF.mixin(this,"ajaxFormMixin"),MF.mixin(this,"modelAndElementsMixin"),MF.mixin(this,"reportMixin")},createUrl:function(){var trainerId=this.model.Trainer()>0?this.model.Trainer():0,clientId=this.model.Client()>0?this.model.Client():0;return this.model.ReportUrl()+"?StartDate="+this.model.StartDate()+"&EndDate="+this.model.EndDate()+"&TrainerId="+trainerId+"&ClientId="+clientId}}),MF.Views.TrainerMetricView=MF.Views.View.extend({initialize:function(){MF.mixin(this,"ajaxFormMixin"),MF.mixin(this,"modelAndElementsMixin"),MF.mixin(this,"reportMixin")},createUrl:function(){var startDate=this.model.StartDate(),endDate=this.model.EndDate(),trainerId=this.model.TrainerEntityId();return this.model.ReportUrl()+"?TrainerId="+trainerId+"&EndDate="+endDate+"&StartDate="+startDate}}),MF.Views.ActivityView=MF.Views.View.extend({initialize:function(){MF.mixin(this,"ajaxFormMixin"),MF.mixin(this,"modelAndElementsMixin"),MF.mixin(this,"reportMixin")},createUrl:function(){var trainerId=this.model.Trainer()>0?this.model.Trainer():0,clientId=this.model.Client()>0?this.model.Client():0,locationId=this.model.Location()>0?this.model.Location():0;return this.model.ReportUrl()+"?StartDate="+this.model.StartDate()+"&EndDate="+this.model.EndDate()+"&TrainerId="+trainerId+"&ClientId="+clientId+"&LocationId="+locationId}}),MF.ScheduleApp.Menu=function(MF,Backbone,$){var Menu={};Menu.show=function(){var routeToken=_.find(MF.routeTokens,function(item){return"scheduleMenu"==item.id}),view=new MenuView(routeToken);MF.menu.show(view),$("#left-navigation").show()};var MenuView=MF.Views.View.extend({render:function(){MF.repository.ajaxGet(this.options.url,this.options.data).done($.proxy(this.renderCallback,this))},renderCallback:function(result){return result.LoggedOut?void window.location.replace(result.RedirectUrl):($(this.el).html(result),MF.vent.bind("menuItem",this.menuItemClick,this),$(this.el).find(".ccMenu").ccMenu({backLink:!1,width:220}),this)},menuItemClick:function(name){MF.vent.trigger("route",name,!0)},onClose:function(){MF.vent.unbind("menuItem",this.menuItemClick,this)}});return Menu}(MF,Backbone,jQuery),MF.Routing.ScheduleApp=function(MF,Backbone){var ScheduleApp={};return ScheduleApp.Router=Backbone.Marionette.AppRouter.extend({appRoutes:{"*path/:entityId/:parentId/:rootId/:string":"showViews","*path/:entityId/:parentId/:rootId":"showViews","*path/:entityId/:parentId":"showViews","*path/:entityId":"showViews","*path":"showViews"}}),MF.addInitializer(function(){MF.ScheduleApp.router=new MF.Routing.ScheduleApp.Router({controller:MF.Controller})}),ScheduleApp}(MF,Backbone),MF.Views.CalendarView=MF.Views.View.extend({initialize:function(){MF.mixin(this,"modelAndElementsMixin")},events:{"change [name=Location]":"resetCalendar","click .legendLabel":"legendLabelClick","click .legendHeader":"legendHeaderClick"},render:function(){$.when(MF.loadTemplateAndModel(this)).done($.proxy(this.renderCallback,this))},renderCallback:function(){this.model=this.rawModel,this.model.id=this.model.CalendarDefinition.id=this.id,this.setupLegend(),$("div.form-scroll-inner").height(window.innerHeight-160),$("#calendar",this.el).asCalendar(this.model.CalendarDefinition),this.bindSpecificModelAndElements({Location:this.model.Location,_LocationList:this.model._LocationList,_Title:this.model._Title,EntityId:0}),this.viewLoaded(),$("#calendar",this.el).fullCalendar("option","height",$("div.form-scroll-inner").height()),MF.vent.trigger("calendar:"+this.id+":pageLoaded",this.options),this.calendarBindings()},calendarBindings:function(){MF.vent.trigger("calendar:"+this.id+":pageLoaded",this.options),MF.vent.bind("calendar:"+this.id+":eventDrop",this.eventDrop,this),MF.vent.bind("calendar:"+this.id+":eventResize",this.eventResize,this),MF.vent.bind("calendar:"+this.id+":dayClick",this.dayClick,this),MF.vent.bind("calendar:"+this.id+":eventClick",this.eventClick,this),MF.vent.bind("ajaxPopupFormModule:editModule:success",this.formSuccess,this),MF.vent.bind("ajaxPopupFormModule:editModule:cancel",this.formCancel,this),MF.vent.bind("ajaxPopupDisplayModule:displayModule:cancel",this.displayCancel,this),MF.vent.bind("popup:displayModule:edit",this.displayEdit,this),MF.vent.bind("module:displayModule:cancel",this.displayCancel,this)},onClose:function(){MF.vent.unbind("calendar:"+this.id+":eventDrop"),MF.vent.unbind("calendar:"+this.id+":eventResize"),MF.vent.unbind("calendar:"+this.id+":eventClick"),MF.vent.unbind("calendar:"+this.id+":dayClick"),MF.vent.unbind("ajaxPopupFormModule:editModule:success"),MF.vent.unbind("ajaxPopupFormModule:editModule:cancel"),MF.vent.unbind("ajaxPopupDisplayModule:displayModule:cancel"),MF.vent.unbind("popup:displayModule:edit"),MF.vent.unbind("module:displayModule:cancel")},setupLegend:function(){this.model.Trainers.length<=0&&$("#legend").hide(),$("#legendTemplate").tmpl(this.model.Trainers).appendTo("#legendItems"),$(".legendHeader").addClass("showing"),$(".legendLabel").each(function(i,item){$(item).addClass("showing")})},eventDrop:function(event,dayDelta,minuteDelta,allDay,revertFunc){var data={EntityId:event.EntityId,ScheduledDate:$.fullCalendar.formatDate(event.start,"M/d/yyyy hh:mm TT"),StartTime:$.fullCalendar.formatDate(event.start,"M/d/yyyy hh:mm TT"),EndTime:$.fullCalendar.formatDate(event.end,"M/d/yyyy hh:mm TT")};MF.repository.ajaxGet(this.model.CalendarDefinition.EventChangedUrl,data).done($.proxy(function(result){this.changeEventCallback(result,revertFunc)},this))},eventResize:function(event,dayDelta,minuteDelta,revertFunc){var data={EntityId:event.EntityId,ScheduledDate:$.fullCalendar.formatDate(event.start,"M/d/yyyy hh:mm TT"),StartTime:$.fullCalendar.formatDate(event.start,"M/d/yyyy hh:mm TT"),EndTime:$.fullCalendar.formatDate(event.end,"M/d/yyyy hh:mm TT")};MF.repository.ajaxGet(this.model.CalendarDefinition.EventChangedUrl,data).done($.proxy(function(result){this.changeEventCallback(result,revertFunc)},this))},dayClick:function(date){if(new XDate(date,!0).diffHours(new XDate(!0))>0&&!this.model.CalendarDefinition.CanEnterRetroactiveAppointments)return void alert("That period is closed");var data={ScheduledDate:new XDate(date).toString("M/d/yyyy"),ScheduledStartTime:new XDate(date).toString("hh:mm TT")};this.editEvent(this.model.CalendarDefinition.AddUpdateUrl,data)},eventClick:function(calEvent){if(1!=this.displayAppointmentDisabled&&(this.displayAppointmentDisabled=!0,calEvent.trainerId==this.model.CalendarDefinition.TrainerId||this.model.CalendarDefinition.CanSeeOthersAppointments)){this.model.CalendarDefinition.canEdit=new XDate(calEvent.start).diffHours(new XDate)<0||this.model.CalendarDefinition.CanEditPastAppointments,this.currentEventId=calEvent.EntityId;var data={EntityId:calEvent.EntityId},builder=MF.Views.popupButtonBuilder.builder("displayModule");builder.addButton("Delete",$.proxy(this.deleteItem,this)),builder.addButton("Edit",$.proxy(this.editItem,this)),builder.addButton("Copy Event",$.proxy(this.copyItem,this)),builder.addCancelButton();var formOptions={id:"displayModule",route:this.model.CalendarDefinition.DisplayRoute,templateUrl:this.model.CalendarDefinition.DisplayUrl+"_Template?Popup=true",view:this.options.subViewName?"Display"+this.options.subViewName:"",AddUpdateUrl:this.model.CalendarDefinition.AddUpdateUrl,url:this.model.CalendarDefinition.DisplayUrl,data:data,buttons:builder.getButtons()};this.ajaxPopupDisplay=new MF.Views.AjaxPopupDisplayModule(formOptions),this.ajaxPopupDisplay.render(),this.storeChild(this.ajaxPopupDisplay),$(this.el).append(this.ajaxPopupDisplay.el),this.displayAppointmentDisabled=!1}},editEvent:function(url,data){if(1!=this.appointmentViewDisabled){this.appointmentViewDisabled=!0;var formOptions={id:"editModule",route:this.model.CalendarDefinition.AddUpdateRoute,url:url,templateUrl:url+"_Template?Popup=true",data:data,view:"AppointmentView",buttons:MF.Views.popupButtonBuilder.builder("editModule").standardEditButons()};this.ajaxPopupFormModule=new MF.Views.AjaxPopupFormModule(formOptions),this.ajaxPopupFormModule.render(),this.storeChild(this.ajaxPopupFormModule),$(this.el).append(this.ajaxPopupFormModule.el),this.dayClickDisabled=!1,this.eventClickDisabled=!1}},changeEventCallback:function(result,revertFunc){result.Success||(alert(result.Message),revertFunc())},copyItem:function(){this.appointmentViewDisabled=!1;var data={EntityId:this.currentEventId,Copy:!0};this.editEvent(this.model.CalendarDefinition.AddUpdateUrl,data),this.ajaxPopupDisplay.close()},editItem:function(){this.appointmentViewDisabled=!1,MF.vent.trigger("popup:displayModule:edit"),this.ajaxPopupDisplay.close()},deleteItem:function(){confirm("Are you sure you would like to delete this Item?")&&(this.appointmentViewDisabled=!1,MF.repository.ajaxGet(this.model.CalendarDefinition.DeleteUrl,{EntityId:this.currentEventId}).done($.proxy(function(result){this.ajaxPopupDisplay.close(),result.Success?this.reload():alert(result.Message)},this)))},displayEdit:function(){return this.model.CalendarDefinition.canEdit?(this.ajaxPopupDisplay.close(),void this.editEvent(this.model.CalendarDefinition.AddUpdateUrl,{EntityId:this.currentEventId})):void alert("you can't edit retroactively")},resetCalendar:function(){var locId=this.viewModel.Location(),ids="";$(".legendLabel").each(function(i,item){$(item).hasClass("showing")&&(ids+=$("#trainerId",$(item).parent()).val()+",")}),ids?ids=ids.substr(0,ids.length-1):$(".legend").is(":visible")&&(ids="NONE"),this.replaceSource({url:this.model.CalendarDefinition.Url,data:{Loc:locId,TrainerIds:ids}}),this.reload()},reload:function(){$("#calendar",this.el).fullCalendar("refetchEvents")},replaceSource:function(source){$("#calendar",this.el).fullCalendar("replaceEventSource",source)},legendLabelClick:function(e){$(e.target).toggleClass("showing"),this.resetCalendar()},legendHeaderClick:function(e){$(e.target).hasClass("showing")?($(".legendHeader").removeClass("showing"),$(".legendLabel").each(function(i,item){$(item).removeClass("showing")})):($(".legendHeader").addClass("showing"),$(".legendLabel").each(function(i,item){$(item).hasClass("showing")||$(item).addClass("showing")})),this.resetCalendar()},formSuccess:function(){this.formCancel(),this.resetCalendar()},formCancel:function(){this.ajaxPopupFormModule.close(),this.appointmentViewDisabled=!1},displayCancel:function(){this.ajaxPopupDisplay.close()}}),MF.Views.AppointmentView=MF.Views.View.extend({initialize:function(){MF.mixin(this,"formMixin"),MF.mixin(this,"ajaxFormMixin"),MF.mixin(this,"modelAndElementsMixin")},events:{'change [name="AppointmentType"]':"handleSwitchFromPairToInd",'change [name="StartTimeString"]':"handleTimeChange","click #save":"saveItem","click #cancel":"cancel"},viewLoaded:function(){var startDate=new XDate("1/5/1972t"+this.model.StartTimeString());this.setEndTime(startDate),MF.vent.bind("ClientsDtos:tokenizer:add",this.handleSwitchFromPairToInd,this),MF.vent.bind("ClientsDtos:tokenizer:remove",this.handleSwitchFromPairToInd,this),this.handleSwitchFromPairToInd()},setCurrentSelectionForAptType:function(isPair){var currentSelection=$("[name='AppointmentType']").val();if(isPair)$("[name='AppointmentType']").data.previousSelection=currentSelection,$("[name='AppointmentType']").val("Pair"),this.model.AppointmentType("Pair");else if("Pair"==currentSelection){var previousSelection=$("[name='AppointmentType']").data.previousSelection;"Pair"==previousSelection&&(previousSelection="Hour"),$("[name='AppointmentType']").val(previousSelection),this.model.AppointmentType(previousSelection)}},handleSwitchFromPairToInd:function(){var isPair=$(this.model.ClientsDtos.selectedItems()).size()>1;this.setCurrentSelectionForAptType(isPair),this.setDisabledOptionsOnAptType(isPair),this.handleTimeChange()},setDisabledOptionsOnAptType:function(isPair){$("[name='AppointmentType'] option").each(function(){var $item=$(this);"Pair"==$item.text()?isPair?$item.removeAttr("disabled"):$item.attr("disabled","disabled"):isPair?$item.attr("disabled","disabled"):$item.removeAttr("disabled")})},onClose:function(){MF.vent.unbind("ClientsDtos:tokenizer:add"),MF.vent.unbind("ClientsDtos:tokenizer:remove")},handleTimeChange:function(){var startTime=new XDate(this.model.Date().split("T")[0]+"t"+this.model.StartTimeString());return this.setEndTime(startTime),startTime},setEndTime:function(startTime){var aptMin;switch(this.model.AppointmentType()){case"Hour":case"Pair":aptMin=60;break;case"Half Hour":aptMin=30}var endTime=startTime.addMinutes(aptMin),endHour=endTime.getHours(),amPm="AM";endHour>12&&(endHour-=12,amPm="PM");var endMin=endTime.getMinutes().toString();1==endMin.length&&(endMin="0"+endMin),this.model.EndTimeString(endHour+":"+endMin+" "+amPm)}}),MF.Views.ClientFormView=MF.Views.View.extend({events:_.extend({"click .client_payment":"payment","click .delete":"deleteItem","click #save":"saveItem","click #cancel":"cancel"}),initialize:function(){MF.mixin(this,"formMixin"),MF.mixin(this,"ajaxFormMixin"),MF.mixin(this,"modelAndElementsMixin")},viewLoaded:function(){this._setupBindings()},_setupBindings:function(){MF.vent.bind("delete:"+this.id+":success",this.deleteSuccess,this)},_unbindBindings:function(){MF.vent.unbind("delete:"+this.id+":success",this.deleteSuccess,this)},payment:function(){var id=this.model.EntityId();MF.vent.trigger("route",MF.generateRoute("paymentlist",id),!0)},deleteItem:function(){if(confirm("Are you sure you would like to delete this Item?")){var id=this.model.EntityId();MF.repository.ajaxPost(this.model._deleteUrl,{EntityId:id},$.proxy(this.deleteCallback,this))}},deleteCallback:function(_result){var result="string"==typeof _result?JSON.parse(_result):_result;CC.notification.handleResult(result,this.cid)&&MF.vent.trigger("delete:"+this.id+":success",result)},deleteSuccess:function(result){MF.WorkflowManager.returnParentView(result,!0)},onClose:function(){this._unbindBindings(),this._super("onClose",arguments)}}),MF.Views.PaymentListView=MF.Views.View.extend({initialize:function(){this.options.gridOptions={multiselect:!1},MF.mixin(this,"ajaxGridMixin"),MF.mixin(this,"setupGridMixin"),MF.mixin(this,"defaultGridEventsMixin"),MF.mixin(this,"setupGridSearchMixin")},addNew:function(){var parentId=this.options.ParentId;MF.vent.trigger("route",MF.generateRoute(this.options.addUpdate,0,parentId),!0)},editItem:function(id){var parentId=this.options.ParentId;MF.vent.trigger("route",MF.generateRoute(this.options.addUpdate,id,parentId),!0)},displayItem:function(id){var parentId=this.options.ParentId;MF.vent.trigger("route",MF.generateRoute(this.options.display,id,parentId),!0)},viewLoaded:function(){this.setupBindings()},onClose:function(){this.unbindBindings()}}),MF.Views.PaymentFormView=MF.Views.View.extend({initialize:function(){MF.mixin(this,"formMixin"),MF.mixin(this,"ajaxFormMixin"),MF.mixin(this,"modelAndElementsMixin")},viewLoaded:function(){$("[name='FullHour']").change($.proxy(function(){this.calculateTotal("FullHour")},this)),$("[name='HalfHour']").change($.proxy(function(){this.calculateTotal("HalfHour")},this)),$("[name='FullHourTenPack']").change($.proxy(function(){this.calculateTotal("FullHourTenPack")},this)),$("[name='HalfHourTenPack']").change($.proxy(function(){this.calculateTotal("HalfHourTenPack")},this)),$("[name='Pair']").change($.proxy(function(){this.calculateTotal("Pair")},this)),$("[name='PairTenPack']").change($.proxy(function(){this.calculateTotal("PairTenPack")},this))},calculateTotal:function(type){var number=this.model[type](),itemTotal=this.model._sessionRateDto[type]()*number;this.model[type+"Price"](itemTotal);var total=this.model.FullHourPrice()+this.model.HalfHourPrice()+this.model.FullHourTenPackPrice()+this.model.HalfHourTenPackPrice()+this.model.PairPrice()+this.model.PairTenPackPrice();this.model.PaymentTotal(total)}}),MF.Views.TrainerFormView=MF.Views.View.extend({initialize:function(){MF.mixin(this,"formMixin"),MF.mixin(this,"ajaxFormMixin"),MF.mixin(this,"modelAndElementsMixin")},events:{"click #trainerPayments":"trainerPayments","click #payTrainer":"payTrainer","click #save":"saveItem","click #cancel":"cancel","click .tokenEditor":"tokenEditor"},viewLoaded:function(){var that=this;$("#colorPickerInput",this.el).miniColors({change:function(hex){that.model.Color(hex)}}),MF.vent.bind("popup:templatePopup:save",this.tokenSave,this),MF.vent.bind("popup:templatePopup:cancel",this.tokenCancel,this)},onClose:function(){MF.vent.unbind("popup:templatePopup:save",this.tokenSave,this),MF.vent.unbind("popup:templatePopup:cancel",this.tokenCancel,this)},multiSelectModifier:function(ccElement){"ClientsDtos"==ccElement.name&&(ccElement.multiSelectOptions={internalTokenMarkup:function(){var anchor=$("<a>").addClass("selectedItem").attr("data-bind","text:display"),anchor2=$("<a>").addClass("tokenEditor stdTxtColor").text(" --Edit").attr("href","javascript:void(0);").attr("data-bind","attr:{rel:percentage}");return $("<p>").append(anchor).append(anchor2)},beforeTokenAddedFunction:$.proxy(this.beforeTokenAddedFunction,this)})},tokenEditor:function(e){var $li=$(e.target).closest("li");this.currentlyEditing=$li;var id=$li.attr("id"),percentage=$(e.target).attr("rel"),dataItem={id:id,percentage:percentage},buttons=this.options.buttons?this.options.buttons:MF.Views.popupButtonBuilder.builder("templatePopup").standardEditButons(),popupOptions={id:"templatePopup",buttons:buttons,data:dataItem,template:"#percentageTemplate"};this.templatedPopupView=new MF.Views.TemplatedPopupView(popupOptions),this.templatedPopupView.render(),this.storeChild(this.templatedPopupView)},tokenSave:function(){var id=$("#editingId").val(),newVal=$("#newTrainerPercentage").val();_.find(this.model.ClientsDtos.selectedItems(),function(item){if(item.id()==id){var anchorText=$(this.currentlyEditing.find("a").first()).text();return item.display(anchorText.substring(0,anchorText.indexOf("("))+"( "+newVal+" ) "),item.percentage(newVal),!0}},this),this.templatedPopupView.close()},tokenCancel:function(){this.templatedPopupView.close()},beforeTokenAddedFunction:function(item){item.percentage=ko.observable(this.model.ClientRateDefault()),item.display=ko.observable(item.name()+"("+item.percentage()+")")},trainerPayments:function(){var rel=MF.State.get("Relationships");MF.vent.trigger("route","trainerpaymentlist/"+rel.entityId,!0)},payTrainer:function(){var rel=MF.State.get("Relationships");MF.vent.trigger("route","paytrainerlist/"+rel.entityId,!0)}}),MF.Views.TrainerEditableTokenView=MF.Views.EditableTokenView.extend({events:_.extend({"click .tokenEditor":"tokenEditor"},MF.Views.EditableTokenView.prototype.events),internalTokenMarkup:function(item){var cssClass="class='selectedItem'";return"<p><a "+cssClass+">"+item.name+" ( "+item.percentage+" )</a><a href='javascript:void(0);' class='tokenEditor' >&nbsp;-- Edit</a><input id='itemId' type='hidden' value='"+item.id+"' </p>"},render:function(){MF.vent.bind("popup:templatePopup:save",this.tokenSave,this),MF.vent.bind("popup:templatePopup:cancel",this.tokenCancel,this)},onClose:function(){MF.vent.unbind("popup:templatePopup:save"),MF.vent.unbind("popup:templatePopup:cancel")},afterTokenSelectedFunction:function(item){$(this.options.inputSelector,this.el).data("selectedItems")||$(this.options.inputSelector,this.el).data("selectedItems",[]),$(this.options.inputSelector,this.el).data("selectedItems").push(item)},deleteToken:function(hidden_input){var data=$(this.options.inputSelector,this.el).data("selectedItems"),idx=0;$.each(data,function(i,item){item.id==hidden_input.id&&(idx=i)}),data.splice(idx,1)},tokenEditor:function(e){this.options.currentlyEditing=$(e.target).prev("a");var dataItem,id=$(e.target).next("input#itemId").val(),data=$(this.options.inputSelector,this.el).data("selectedItems");$.each(data,function(i,item){item.id==id&&(dataItem=item)});var buttons=this.options.buttons?this.options.buttons:MF.Views.popupButtonBuilder.builder("templatePopup").standardEditButons(),popupOptions={id:"templatePopup",buttons:buttons,data:dataItem,template:"#percentageTemplate"};this.templatedPopupView=new MF.Views.TemplatedPopupView(popupOptions),this.templatedPopupView.render(),this.storeChild(this.templatedPopupView)},tokenSave:function(){var dataItem,id=$("#editingId").val(),data=$(this.options.inputSelector,this.options.el).data("selectedItems");$.each(data,function(i,item){item.id==id&&(dataItem=item)}),dataItem.percentage=$("#newTrainerPercentage").val();var anchor=$(this.options.currentlyEditing).text(),newText=anchor.substr(0,anchor.indexOf("("))+"( "+$("#newTrainerPercentage").val()+" ) ";$(this.options.currentlyEditing).text(newText),this.templatedPopupView.close()},tokenCancel:function(){this.templatedPopupView.close()}}),MF.Views.TrainerGridView=MF.Views.View.extend({initialize:function(){this.options.gridOptions={multiselect:!1},MF.mixin(this,"ajaxGridMixin"),MF.mixin(this,"setupGridMixin"),MF.mixin(this,"defaultGridEventsMixin"),MF.mixin(this,"setupGridSearchMixin")},addNew:function(){var parentId=this.options.ParentId;MF.vent.trigger("route",MF.generateRoute(this.options.addUpdate,0,parentId),!0)},editItem:function(id){var parentId=this.options.ParentId;MF.vent.trigger("route",MF.generateRoute(this.options.addUpdate,id,parentId),!0)},viewLoaded:function(){this.setupBindings(),MF.vent.bind(this.options.gridId+":Redirect",this.showPayGrid,this),MF.vent.bind(this.options.gridId+":Other",this.archiveTrainer,this)},_setupBindings:function(){MF.vent.bind("Redirect",this.showPayGrid,this),MF.vent.bind("gridComplete",this.modifyArchiveColumn,this)},_unbindBindings:function(){MF.vent.bind("Redirect",this.showPayGrid,this)},modifyArchiveColumn:function(){{var grid=$("#"+this.options.gridId);grid.jqGrid("getRowData")}grid.find("tr").not(".jqgfirstrow").each(function(idx,row){var span=$($(row).find("td").last().find("span"));span.text().indexOf("True")>-1?(span.text("UnArchive"),$(row).addClass("gridRowGrey")):span.text("Archive")})},showPayGrid:function(id){MF.vent.trigger("route","paytrainerlist/"+id,!0)},archiveTrainer:function(id){MF.repository.ajaxGet(this.options.ArchiveTrainerUrl,{EntityId:id}).done($.proxy(this.successHandler,this))},onClose:function(){this.unbindBindings()}}),MF.Views.ClientGridView=MF.Views.View.extend({initialize:function(){this.options.gridOptions={multiselect:!1},MF.mixin(this,"ajaxGridMixin"),MF.mixin(this,"setupGridMixin"),MF.mixin(this,"defaultGridEventsMixin"),MF.mixin(this,"setupGridSearchMixin")},viewLoaded:function(){MF.vent.bind(this.options.gridId+":Redirect",this.showPayGrid,this),this.setupBindings()},onClose:function(){MF.vent.unbind(this.options.gridId+":Redirect",this.showPayGrid,this),this.unbindBindings()},showPayGrid:function(id){MF.vent.trigger("route",MF.generateRoute("paymentlist",id),!0)}}),MF.ScheduleApp=function(MF){var ScheduleApp={};return ScheduleApp.show=function(){ScheduleApp.Menu.show(),MF.vent.trigger("route","calendar",!0)},MF.State.bind("change:application",function(){"scheduler"==MF.State.get("application")&&ScheduleApp.show()}),MF.addInitializer(function(){}),ScheduleApp}(MF,Backbone),window.debug=function(){function exec_callback(args){!callback_func||!callback_force&&con&&con.log||callback_func.apply(window,args)}function is_level(level){return log_level>0?log_level>level:log_methods.length+log_level<=level}for(var callback_func,callback_force,window=this,aps=Array.prototype.slice,con=window.console,that={},log_level=9,log_methods=["error","warn","info","debug","log"],pass_methods="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),idx=pass_methods.length,logs=[];--idx>=0;)!function(method){that[method]=function(){0!==log_level&&con&&con[method]&&con[method].apply(con,arguments)}}(pass_methods[idx]);for(idx=log_methods.length;--idx>=0;)!function(idx,level){that[level]=function(){var args=aps.call(arguments),log_arr=[level].concat(args);logs.push(log_arr),exec_callback(log_arr),con&&is_level(idx)&&(con.firebug?con[level].apply(window,args):con[level]?con[level](args):con.log(args))
}}(idx,log_methods[idx]);return that.setLevel=function(level){log_level="number"==typeof level?level:9},that.setCallback=function(){var args=aps.call(arguments),max=logs.length,i=max;for(callback_func=args.shift()||null,callback_force="boolean"==typeof args[0]?args.shift():!1,i-="number"==typeof args[0]?args.shift():max;max>i;)exec_callback(logs[i++])},that}(),function(){var Backbone,root=this,previousBackbone=root.Backbone,slice=Array.prototype.slice,splice=Array.prototype.splice;Backbone="undefined"!=typeof exports?exports:root.Backbone={},Backbone.VERSION="0.9.2";var _=root._;_||"undefined"==typeof require||(_=require("underscore"));var $=root.jQuery||root.Zepto||root.ender;Backbone.setDomLibrary=function(lib){$=lib},Backbone.noConflict=function(){return root.Backbone=previousBackbone,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var eventSplitter=/\s+/,Events=Backbone.Events={on:function(events,callback,context){var calls,event,node,tail,list;if(!callback)return this;for(events=events.split(eventSplitter),calls=this._callbacks||(this._callbacks={});event=events.shift();)list=calls[event],node=list?list.tail:{},node.next=tail={},node.context=context,node.callback=callback,calls[event]={tail:tail,next:list?list.next:node};return this},off:function(events,callback,context){var event,calls,node,tail,cb,ctx;if(calls=this._callbacks){if(!(events||callback||context))return delete this._callbacks,this;for(events=events?events.split(eventSplitter):_.keys(calls);event=events.shift();)if(node=calls[event],delete calls[event],node&&(callback||context))for(tail=node.tail;(node=node.next)!==tail;)cb=node.callback,ctx=node.context,(callback&&cb!==callback||context&&ctx!==context)&&this.on(event,cb,ctx);return this}},trigger:function(events){var event,node,calls,tail,args,all,rest;if(!(calls=this._callbacks))return this;for(all=calls.all,events=events.split(eventSplitter),rest=slice.call(arguments,1);event=events.shift();){if(node=calls[event])for(tail=node.tail;(node=node.next)!==tail;)node.callback.apply(node.context||this,rest);if(node=all)for(tail=node.tail,args=[event].concat(rest);(node=node.next)!==tail;)node.callback.apply(node.context||this,args)}return this}};Events.bind=Events.on,Events.unbind=Events.off;var Model=Backbone.Model=function(attributes,options){var defaults;attributes||(attributes={}),options&&options.parse&&(attributes=this.parse(attributes)),(defaults=getValue(this,"defaults"))&&(attributes=_.extend({},defaults,attributes)),options&&options.collection&&(this.collection=options.collection),this.attributes={},this._escapedAttributes={},this.cid=_.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(attributes,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=_.clone(this.attributes),this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return _.clone(this.attributes)},get:function(attr){return this.attributes[attr]},escape:function(attr){var html;if(html=this._escapedAttributes[attr])return html;var val=this.get(attr);return this._escapedAttributes[attr]=_.escape(null==val?"":""+val)},has:function(attr){return null!=this.get(attr)},set:function(key,value,options){var attrs,attr,val;if(_.isObject(key)||null==key?(attrs=key,options=value):(attrs={},attrs[key]=value),options||(options={}),!attrs)return this;if(attrs instanceof Model&&(attrs=attrs.attributes),options.unset)for(attr in attrs)attrs[attr]=void 0;if(!this._validate(attrs,options))return!1;this.idAttribute in attrs&&(this.id=attrs[this.idAttribute]);var changes=options.changes={},now=this.attributes,escaped=this._escapedAttributes,prev=this._previousAttributes||{};for(attr in attrs)val=attrs[attr],(!_.isEqual(now[attr],val)||options.unset&&_.has(now,attr))&&(delete escaped[attr],(options.silent?this._silent:changes)[attr]=!0),options.unset?delete now[attr]:now[attr]=val,_.isEqual(prev[attr],val)&&_.has(now,attr)==_.has(prev,attr)?(delete this.changed[attr],delete this._pending[attr]):(this.changed[attr]=val,options.silent||(this._pending[attr]=!0));return options.silent||this.change(options),this},unset:function(attr,options){return(options||(options={})).unset=!0,this.set(attr,null,options)},clear:function(options){return(options||(options={})).unset=!0,this.set(_.clone(this.attributes),options)},fetch:function(options){options=options?_.clone(options):{};var model=this,success=options.success;return options.success=function(resp,status,xhr){return model.set(model.parse(resp,xhr),options)?void(success&&success(model,resp)):!1},options.error=Backbone.wrapError(options.error,model,options),(this.sync||Backbone.sync).call(this,"read",this,options)},save:function(key,value,options){var attrs,current;if(_.isObject(key)||null==key?(attrs=key,options=value):(attrs={},attrs[key]=value),options=options?_.clone(options):{},options.wait){if(!this._validate(attrs,options))return!1;current=_.clone(this.attributes)}var silentOptions=_.extend({},options,{silent:!0});if(attrs&&!this.set(attrs,options.wait?silentOptions:options))return!1;var model=this,success=options.success;options.success=function(resp,status,xhr){var serverAttrs=model.parse(resp,xhr);return options.wait&&(delete options.wait,serverAttrs=_.extend(attrs||{},serverAttrs)),model.set(serverAttrs,options)?void(success?success(model,resp):model.trigger("sync",model,resp,options)):!1},options.error=Backbone.wrapError(options.error,model,options);var method=this.isNew()?"create":"update",xhr=(this.sync||Backbone.sync).call(this,method,this,options);return options.wait&&this.set(current,silentOptions),xhr},destroy:function(options){options=options?_.clone(options):{};var model=this,success=options.success,triggerDestroy=function(){model.trigger("destroy",model,model.collection,options)};if(this.isNew())return triggerDestroy(),!1;options.success=function(resp){options.wait&&triggerDestroy(),success?success(model,resp):model.trigger("sync",model,resp,options)},options.error=Backbone.wrapError(options.error,model,options);var xhr=(this.sync||Backbone.sync).call(this,"delete",this,options);return options.wait||triggerDestroy(),xhr},url:function(){var base=getValue(this,"urlRoot")||getValue(this.collection,"url")||urlError();return this.isNew()?base:base+("/"==base.charAt(base.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(resp){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(options){options||(options={});var changing=this._changing;this._changing=!0;for(var attr in this._silent)this._pending[attr]=!0;var changes=_.extend({},options.changes,this._silent);this._silent={};for(var attr in changes)this.trigger("change:"+attr,this,this.get(attr),options);if(changing)return this;for(;!_.isEmpty(this._pending);){this._pending={},this.trigger("change",this,options);for(var attr in this.changed)this._pending[attr]||this._silent[attr]||delete this.changed[attr];this._previousAttributes=_.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(attr){return arguments.length?_.has(this.changed,attr):!_.isEmpty(this.changed)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):!1;var val,changed=!1,old=this._previousAttributes;for(var attr in diff)_.isEqual(old[attr],val=diff[attr])||((changed||(changed={}))[attr]=val);return changed},previous:function(attr){return arguments.length&&this._previousAttributes?this._previousAttributes[attr]:null},previousAttributes:function(){return _.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(attrs,options){if(options.silent||!this.validate)return!0;attrs=_.extend({},this.attributes,attrs);var error=this.validate(attrs,options);return error?(options&&options.error?options.error(this,error,options):this.trigger("error",this,error,options),!1):!0}});var Collection=Backbone.Collection=function(models,options){options||(options={}),options.model&&(this.model=options.model),options.comparator&&(this.comparator=options.comparator),this._reset(),this.initialize.apply(this,arguments),models&&this.reset(models,{silent:!0,parse:options.parse})};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},add:function(models,options){var i,index,length,model,cid,id,cids={},ids={},dups=[];for(options||(options={}),models=_.isArray(models)?models.slice():[models],i=0,length=models.length;length>i;i++){if(!(model=models[i]=this._prepareModel(models[i],options)))throw new Error("Can't add an invalid model to a collection");cid=model.cid,id=model.id,cids[cid]||this._byCid[cid]||null!=id&&(ids[id]||this._byId[id])?dups.push(i):cids[cid]=ids[id]=model}for(i=dups.length;i--;)models.splice(dups[i],1);for(i=0,length=models.length;length>i;i++)(model=models[i]).on("all",this._onModelEvent,this),this._byCid[model.cid]=model,null!=model.id&&(this._byId[model.id]=model);if(this.length+=length,index=null!=options.at?options.at:this.models.length,splice.apply(this.models,[index,0].concat(models)),this.comparator&&this.sort({silent:!0}),options.silent)return this;for(i=0,length=this.models.length;length>i;i++)cids[(model=this.models[i]).cid]&&(options.index=i,model.trigger("add",model,this,options));return this},remove:function(models,options){var i,l,index,model;for(options||(options={}),models=_.isArray(models)?models.slice():[models],i=0,l=models.length;l>i;i++)model=this.getByCid(models[i])||this.get(models[i]),model&&(delete this._byId[model.id],delete this._byCid[model.cid],index=this.indexOf(model),this.models.splice(index,1),this.length--,options.silent||(options.index=index,model.trigger("remove",model,this,options)),this._removeReference(model));return this},push:function(model,options){return model=this._prepareModel(model,options),this.add(model,options),model},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options),model},unshift:function(model,options){return model=this._prepareModel(model,options),this.add(model,_.extend({at:0},options)),model},shift:function(options){var model=this.at(0);return this.remove(model,options),model},get:function(id){return null==id?void 0:this._byId[null!=id.id?id.id:id]},getByCid:function(cid){return cid&&this._byCid[cid.cid||cid]},at:function(index){return this.models[index]},where:function(attrs){return _.isEmpty(attrs)?[]:this.filter(function(model){for(var key in attrs)if(attrs[key]!==model.get(key))return!1;return!0})},sort:function(options){if(options||(options={}),!this.comparator)throw new Error("Cannot sort a set without a comparator");var boundComparator=_.bind(this.comparator,this);return 1==this.comparator.length?this.models=this.sortBy(boundComparator):this.models.sort(boundComparator),options.silent||this.trigger("reset",this,options),this},pluck:function(attr){return _.map(this.models,function(model){return model.get(attr)})},reset:function(models,options){models||(models=[]),options||(options={});for(var i=0,l=this.models.length;l>i;i++)this._removeReference(this.models[i]);return this._reset(),this.add(models,_.extend({silent:!0},options)),options.silent||this.trigger("reset",this,options),this},fetch:function(options){options=options?_.clone(options):{},void 0===options.parse&&(options.parse=!0);var collection=this,success=options.success;return options.success=function(resp,status,xhr){collection[options.add?"add":"reset"](collection.parse(resp,xhr),options),success&&success(collection,resp)},options.error=Backbone.wrapError(options.error,collection,options),(this.sync||Backbone.sync).call(this,"read",this,options)},create:function(model,options){var coll=this;if(options=options?_.clone(options):{},model=this._prepareModel(model,options),!model)return!1;options.wait||coll.add(model,options);var success=options.success;return options.success=function(nextModel,resp){options.wait&&coll.add(nextModel,options),success?success(nextModel,resp):nextModel.trigger("sync",model,resp,options)},model.save(null,options),model},parse:function(resp){return resp},chain:function(){return _(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(model,options){if(options||(options={}),model instanceof Model)model.collection||(model.collection=this);else{var attrs=model;options.collection=this,model=new this.model(attrs,options),model._validate(model.attributes,options)||(model=!1)}return model},_removeReference:function(model){this==model.collection&&delete model.collection,model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){("add"!=event&&"remove"!=event||collection==this)&&("destroy"==event&&this.remove(model,options),model&&event==="change:"+model.idAttribute&&(delete this._byId[model.previous(model.idAttribute)],this._byId[model.id]=model),this.trigger.apply(this,arguments))}});var methods=["forForEachItem","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];_.each(methods,function(method){Collection.prototype[method]=function(){return _[method].apply(_,[this.models].concat(_.toArray(arguments)))}});var Router=Backbone.Router=function(options){options||(options={}),options.routes&&(this.routes=options.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},namedParam=/:\w+/g,splatParam=/\*\w+/g,escapeRegExp=/[-[\]{}()+?.,\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){return Backbone.history||(Backbone.history=new History),_.isRegExp(route)||(route=this._routeToRegExp(route)),callback||(callback=this[name]),Backbone.history.route(route,_.bind(function(fragment){var args=this._extractParameters(route,fragment);callback&&callback.apply(this,args),this.trigger.apply(this,["route:"+name].concat(args)),Backbone.history.trigger("route",this,name,args)},this)),this},navigate:function(fragment,options){Backbone.history.navigate(fragment,options)},_bindRoutes:function(){if(this.routes){var routes=[];for(var route in this.routes)routes.unshift([route,this.routes[route]]);for(var i=0,l=routes.length;l>i;i++)this.route(routes[i][0],routes[i][1],this[routes[i][1]])}},_routeToRegExp:function(route){return route=route.replace(escapeRegExp,"\\$&").replace(namedParam,"([^/]+)").replace(splatParam,"(.*?)"),new RegExp("^"+route+"$")},_extractParameters:function(route,fragment){return route.exec(fragment).slice(1)}});var History=Backbone.History=function(){this.handlers=[],_.bindAll(this,"checkUrl")},routeStripper=/^[#\/]/,isExplorer=/msie [\w.]+/;History.started=!1,_.extend(History.prototype,Events,{interval:50,getHash:function(windowOverride){var loc=windowOverride?windowOverride.location:window.location,match=loc.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(null==fragment)if(this._hasPushState||forcePushState){fragment=window.location.pathname;var search=window.location.search;search&&(fragment+=search)}else fragment=this.getHash();return fragment.indexOf(this.options.root)||(fragment=fragment.substr(this.options.root.length)),fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=!0,this.options=_.extend({},{root:"/"},this.options,options),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var fragment=this.getFragment(),docMode=document.documentMode,oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||7>=docMode);oldIE&&(this.iframe=$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(fragment)),this._hasPushState?$(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!oldIE?$(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=fragment;var loc=window.location,atRoot=loc.pathname==this.options.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!atRoot?(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&atRoot&&loc.hash&&(this.fragment=this.getHash().replace(routeStripper,""),window.history.replaceState({},document.title,loc.protocol+"//"+loc.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},stop:function(){$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),History.started=!1},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(){var current=this.getFragment();return current==this.fragment&&this.iframe&&(current=this.getFragment(this.getHash(this.iframe))),current==this.fragment?!1:(this.iframe&&this.navigate(current),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(fragmentOverride){var fragment=this.fragment=this.getFragment(fragmentOverride),matched=_.any(this.handlers,function(handler){return handler.route.test(fragment)?(handler.callback(fragment),!0):void 0});return matched},navigate:function(fragment,options){if(!History.started)return!1;options&&options!==!0||(options={trigger:options});var frag=(fragment||"").replace(routeStripper,"");this.fragment!=frag&&(this._hasPushState?(0!=frag.indexOf(this.options.root)&&(frag=this.options.root+frag),this.fragment=frag,window.history[options.replace?"replaceState":"pushState"]({},document.title,frag)):this._wantsHashChange?(this.fragment=frag,this._updateHash(window.location,frag,options.replace),this.iframe&&frag!=this.getFragment(this.getHash(this.iframe))&&(options.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,frag,options.replace))):window.location.assign(this.options.root+fragment),options.trigger&&this.loadUrl(fragment))},_updateHash:function(location,fragment,replace){replace?location.replace(location.toString().replace(/(javascript:|#).*$/,"")+"#"+fragment):location.hash=fragment}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view"),this._configure(options||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},delegateEventSplitter=/^(\S+)\s*(.*)$/,viewOptions=["model","collection","el","id","attributes","className","tagName"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(tagName,attributes,content){var el=document.createElement(tagName);return attributes&&$(el).attr(attributes),content&&$(el).html(content),el},setElement:function(element,delegate){return this.$el&&this.undelegateEvents(),this.$el=element instanceof $?element:$(element),this.el=this.$el[0],delegate!==!1&&this.delegateEvents(),this},delegateEvents:function(events){if(events||(events=getValue(this,"events"))){this.undelegateEvents();for(var key in events){var method=events[key];if(_.isFunction(method)||(method=this[events[key]]),!method)throw new Error('Method "'+events[key]+'" does not exist');var match=key.match(delegateEventSplitter),eventName=match[1],selector=match[2];method=_.bind(method,this),eventName+=".delegateEvents"+this.cid,""===selector?this.$el.bind(eventName,method):this.$el.delegate(selector,eventName,method)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(options){this.options&&(options=_.extend({},this.options,options));for(var i=0,l=viewOptions.length;l>i;i++){var attr=viewOptions[i];options[attr]&&(this[attr]=options[attr])}this.options=options},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var attrs=getValue(this,"attributes")||{};this.id&&(attrs.id=this.id),this.className&&(attrs["class"]=this.className),this.setElement(this.make(this.tagName,attrs),!1)}}});var extend=function(protoProps,classProps){var child=inherits(this,protoProps,classProps);return child.extend=this.extend,child};Model.extend=Collection.extend=Router.extend=View.extend=extend;var methodMap={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};Backbone.sync=function(method,model,options){var type=methodMap[method];options||(options={});var params={type:type,dataType:"json"};return options.url||(params.url=getValue(model,"url")||urlError()),options.data||!model||"create"!=method&&"update"!=method||(params.contentType="application/json",params.data=JSON.stringify(model.toJSON())),Backbone.emulateJSON&&(params.contentType="application/x-www-form-urlencoded",params.data=params.data?{model:params.data}:{}),Backbone.emulateHTTP&&("PUT"===type||"DELETE"===type)&&(Backbone.emulateJSON&&(params.data._method=type),params.type="POST",params.beforeSend=function(xhr){xhr.setRequestHeader("X-HTTP-Method-Override",type)}),"GET"===params.type||Backbone.emulateJSON||(params.processData=!1),$.ajax(_.extend(params,options))},Backbone.wrapError=function(onError,originalModel,options){return function(model,resp){resp=model===originalModel?resp:model,onError?onError(originalModel,resp,options):originalModel.trigger("error",originalModel,resp,options)}};var ctor=function(){},inherits=function(parent,protoProps,staticProps){var child;return child=protoProps&&protoProps.hasOwnProperty("constructor")?protoProps.constructor:function(){parent.apply(this,arguments)},_.extend(child,parent),ctor.prototype=parent.prototype,child.prototype=new ctor,protoProps&&_.extend(child.prototype,protoProps),staticProps&&_.extend(child,staticProps),child.prototype.constructor=child,child.__super__=parent.prototype,child},getValue=function(object,prop){return object&&object[prop]?_.isFunction(object[prop])?object[prop]():object[prop]:null},urlError=function(){throw new Error('A "url" property or function must be specified')}}.call(this),Backbone.Marionette=function(Backbone,_,$){var Marionette={};Marionette.EventBinder=function(){this._eventBindings=[]},_.extend(Marionette.EventBinder.prototype,{bindTo:function(obj,eventName,callback,context){context=context||this,obj.on(eventName,callback,context);var binding={obj:obj,eventName:eventName,callback:callback,context:context};return this._eventBindings.push(binding),binding},unbindFrom:function(binding){binding.obj.off(binding.eventName,binding.callback,binding.context),this._eventBindings=_.reject(this._eventBindings,function(bind){return bind===binding})},unbindAll:function(){var that=this,bindings=_.map(this._eventBindings,_.identity);_.each(bindings,function(binding){that.unbindFrom(binding)})}}),Marionette.EventBinder.extend=Backbone.View.extend,Marionette.View=Backbone.View.extend({constructor:function(){Backbone.View.prototype.constructor.apply(this,arguments);var eventBinder=new Marionette.EventBinder;_.extend(this,eventBinder),this.bindTo(this,"show",this.onShowCalled,this)},getTemplate:function(){var template;return template=this.options&&this.options.template?this.options.template:this.template},serializeData:function(){var data;return this.model?data=this.model.toJSON():this.collection&&(data={items:this.collection.toJSON()}),data=this.mixinTemplateHelpers(data)},mixinTemplateHelpers:function(target){target=target||{};var templateHelpers=this.templateHelpers;return _.isFunction(templateHelpers)&&(templateHelpers=templateHelpers.call(this)),_.extend(target,templateHelpers)},configureTriggers:function(){if(this.triggers){var triggers=this.triggers,that=this,triggerEvents={};return _.isFunction(triggers)&&(triggers=triggers.call(this)),_.each(triggers,function(value,key){triggerEvents[key]=function(e){e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),that.trigger(value)}}),triggerEvents}},delegateEvents:function(events){events=events||this.events,_.isFunction(events)&&(events=events.call(this));var combinedEvents={},triggers=this.configureTriggers();_.extend(combinedEvents,events,triggers),Backbone.View.prototype.delegateEvents.call(this,combinedEvents)},onShowCalled:function(){},close:function(){this.beforeClose&&this.beforeClose(),this.remove(),this.onClose&&this.onClose(),this.trigger("close"),this.unbindAll(),this.unbind()},bindUIElements:function(){if(this.ui){var that=this;this.uiBindings||(this.uiBindings=this.ui),this.ui={},_.each(_.keys(this.uiBindings),function(key){var selector=that.uiBindings[key];that.ui[key]=that.$(selector)})}}}),Marionette.ItemView=Marionette.View.extend({constructor:function(){Marionette.View.prototype.constructor.apply(this,arguments),this.initialEvents()},initialEvents:function(){this.collection&&this.bindTo(this.collection,"reset",this.render,this)},render:function(){this.beforeRender&&this.beforeRender(),this.trigger("before:render",this),this.trigger("item:before:render",this);var data=this.serializeData(),template=this.getTemplate(),html=Marionette.Renderer.render(template,data);return this.$el.html(html),this.bindUIElements(),this.onRender&&this.onRender(),this.trigger("render",this),this.trigger("item:rendered",this),this},close:function(){this.trigger("item:before:close"),Marionette.View.prototype.close.apply(this,arguments),this.trigger("item:closed")}}),Marionette.CollectionView=Marionette.View.extend({constructor:function(){Marionette.View.prototype.constructor.apply(this,arguments),this.initChildViewStorage(),this.initialEvents(),this.onShowCallbacks=new Marionette.Callbacks},initialEvents:function(){this.collection&&(this.bindTo(this.collection,"add",this.addChildView,this),this.bindTo(this.collection,"remove",this.removeItemView,this),this.bindTo(this.collection,"reset",this.render,this))},addChildView:function(item,collection,options){this.closeEmptyView();var ItemView=this.getItemView();return this.addItemView(item,ItemView,options.index)},onShowCalled:function(){this.onShowCallbacks.run()},triggerBeforeRender:function(){this.beforeRender&&this.beforeRender(),this.trigger("before:render",this),this.trigger("collection:before:render",this)},triggerRendered:function(){this.onRender&&this.onRender(),this.trigger("render",this),this.trigger("collection:rendered",this)},render:function(){return this.triggerBeforeRender(),this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView(),this.triggerRendered(),this},showCollection:function(){var that=this,ItemView=this.getItemView();this.collection.each(function(item,index){that.addItemView(item,ItemView,index)})},showEmptyView:function(){var EmptyView=this.options.emptyView||this.emptyView;if(EmptyView&&!this._showingEmptyView){this._showingEmptyView=!0;var model=new Backbone.Model;this.addItemView(model,EmptyView,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getItemView:function(){var itemView=this.options.itemView||this.itemView;if(!itemView){var err=new Error("An `itemView` must be specified");throw err.name="NoItemViewError",err}return itemView},addItemView:function(item,ItemView,index){var that=this,view=this.buildItemView(item,ItemView);this.storeChild(view),this.onItemAdded&&this.onItemAdded(view),this.trigger("item:added",view);var renderResult=this.renderItemView(view,index);view.onShow&&this.onShowCallbacks.add(view.onShow,view);var childBinding=this.bindTo(view,"all",function(){var args=slice.call(arguments);args[0]="itemview:"+args[0],args.splice(1,0,view),that.trigger.apply(that,args)});return this.childBindings=this.childBindings||{},this.childBindings[view.cid]=childBinding,renderResult},renderItemView:function(view,index){view.render(),this.appendHtml(this,view,index)},buildItemView:function(item,ItemView){var itemViewOptions=_.result(this,"itemViewOptions"),options=_.extend({model:item},itemViewOptions),view=new ItemView(options);return view},removeItemView:function(item){var view=this.children[item.cid];if(view){var childBinding=this.childBindings[view.cid];childBinding&&(this.unbindFrom(childBinding),delete this.childBindings[view.cid]),view.close(),delete this.children[item.cid]}this.collection&&0!==this.collection.length||this.showEmptyView(),this.trigger("item:removed",view)},appendHtml:function(collectionView,itemView){collectionView.$el.append(itemView.el)},storeChild:function(view){this.children[view.model.cid]=view},initChildViewStorage:function(){this.children={}},close:function(){this.trigger("collection:before:close"),this.closeChildren(),Marionette.View.prototype.close.apply(this,arguments),this.trigger("collection:closed")},closeChildren:function(){var that=this;this.children&&_.each(_.clone(this.children),function(childView){that.removeItemView(childView.model)})}}),Marionette.CompositeView=Marionette.CollectionView.extend({constructor:function(){Marionette.CollectionView.apply(this,arguments),this.itemView=this.getItemView()},initialEvents:function(){this.collection&&(this.bindTo(this.collection,"add",this.addChildView,this),this.bindTo(this.collection,"remove",this.removeItemView,this),this.bindTo(this.collection,"reset",this.renderCollection,this))},getItemView:function(){return this.itemView||this.constructor},render:function(){this.resetItemViewContainer();var html=this.renderModel();return this.$el.html(html),this.bindUIElements(),this.trigger("composite:model:rendered"),this.trigger("render"),this.renderCollection(),this.trigger("composite:rendered"),this},renderCollection:function(){Marionette.CollectionView.prototype.render.apply(this,arguments),this.trigger("composite:collection:rendered")},renderModel:function(){var data={};data=this.serializeData();var template=this.getTemplate();return Marionette.Renderer.render(template,data)},appendHtml:function(cv,iv){var $container=this.getItemViewContainer(cv);$container.append(iv.el)},getItemViewContainer:function(containerView){var container;if("$itemViewContainer"in containerView)container=containerView.$itemViewContainer;else{if(containerView.itemViewContainer){if(container=containerView.$(_.result(containerView,"itemViewContainer")),container.length<=0){var err=new Error("Missing `itemViewContainer`");throw err.name="ItemViewContainerMissingError",err}}else container=containerView.$el;containerView.$itemViewContainer=container}return container},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),Marionette.Region=function(options){this.options=options||{};var eventBinder=new Marionette.EventBinder;if(_.extend(this,eventBinder,options),!this.el){var err=new Error("An 'el' must be specified");throw err.name="NoElError",err}this.initialize&&this.initialize.apply(this,arguments)},_.extend(Marionette.Region.prototype,Backbone.Events,{show:function(view){this.ensureEl(),this.close(),view.render(),this.open(view),view.onShow&&view.onShow(),view.trigger("show"),this.onShow&&this.onShow(view),this.trigger("view:show",view),this.currentView=view},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(selector){return $(selector)},open:function(view){this.$el.html(view.el)},close:function(){var view=this.currentView;view&&(view.close&&view.close(),this.trigger("view:closed",view),delete this.currentView)},attachView:function(view){this.currentView=view}}),Marionette.Region.extend=Backbone.View.extend,Marionette.Layout=Marionette.ItemView.extend({regionType:Marionette.Region,constructor:function(){Backbone.Marionette.ItemView.apply(this,arguments),this.initializeRegions()
},render:function(){var result=Marionette.ItemView.prototype.render.apply(this,arguments);return this.render=function(){this.closeRegions(),this.reInitializeRegions();var result=Marionette.ItemView.prototype.render.apply(this,arguments);return result},result},close:function(){this.closeRegions(),this.destroyRegions(),Backbone.Marionette.ItemView.prototype.close.call(this,arguments)},initializeRegions:function(){this.regionManagers||(this.regionManagers={});var that=this;_.each(this.regions,function(region,name){if("string"!=typeof region&&"string"!=typeof region.selector)throw new Exception("Region must be specified as a selector string or an object with selector property");selector="string"==typeof region?region:region.selector;var regionType="undefined"==typeof region.regionType?that.regionType:region.regionType,regionManager=new regionType({el:selector,getEl:function(selector){return that.$(selector)}});that.regionManagers[name]=regionManager,that[name]=regionManager})},reInitializeRegions:function(){this.regionManagers&&0===_.size(this.regionManagers)?this.initializeRegions():_.each(this.regionManagers,function(region){delete region.$el})},closeRegions:function(){_.each(this.regionManagers,function(manager){manager.close()})},destroyRegions:function(){var that=this;_.each(this.regionManagers,function(manager,name){delete that[name]}),this.regionManagers={}}}),Marionette.Application=function(options){this.initCallbacks=new Marionette.Callbacks,this.vent=new Marionette.EventAggregator,this.submodules={};var eventBinder=new Marionette.EventBinder;_.extend(this,eventBinder,options)},_.extend(Marionette.Application.prototype,Backbone.Events,{addInitializer:function(initializer){this.initCallbacks.add(initializer)},start:function(options){this.trigger("initialize:before",options),this.initCallbacks.run(options,this),this.trigger("initialize:after",options),this.trigger("start",options)},addRegions:function(regions){var regionValue,regionObj,region;for(region in regions)regions.hasOwnProperty(region)&&(regionValue=regions[region],regionObj="string"==typeof regionValue?new Marionette.Region({el:regionValue}):new regionValue,this[region]=regionObj)},removeRegion:function(region){this[region].close(),delete this[region]},module:function(){var args=slice.call(arguments);return args.unshift(this),Marionette.Module.create.apply(Marionette.Module,args)}}),Marionette.Application.extend=Backbone.View.extend,Marionette.AppRouter=Backbone.Router.extend({constructor:function(options){if(Backbone.Router.prototype.constructor.call(this,options),this.appRoutes){var controller=this.controller;options&&options.controller&&(controller=options.controller),this.processAppRoutes(controller,this.appRoutes)}},processAppRoutes:function(controller,appRoutes){var method,methodName,route,routesLength,i,routes=[],router=this;for(route in appRoutes)appRoutes.hasOwnProperty(route)&&routes.unshift([route,appRoutes[route]]);for(routesLength=routes.length,i=0;routesLength>i;i++){if(route=routes[i][0],methodName=routes[i][1],method=controller[methodName],!method){var msg="Method '"+methodName+"' was not found on the controller",err=new Error(msg);throw err.name="NoMethodError",err}method=_.bind(method,controller),router.route(route,methodName,method)}}}),Marionette.Module=function(moduleName,app,customArgs){this.moduleName=moduleName,this.submodules={},this._initializerCallbacks=new Marionette.Callbacks,this._finalizerCallbacks=new Marionette.Callbacks,this._config={},this._config.app=app,this._config.customArgs=customArgs,this._config.definitions=[];var eventBinder=new Marionette.EventBinder;_.extend(this,eventBinder)},_.extend(Marionette.Module.prototype,Backbone.Events,{addInitializer:function(callback){this._initializerCallbacks.add(callback)},addFinalizer:function(callback){this._finalizerCallbacks.add(callback)},start:function(options){this._runModuleDefinition(),this._initializerCallbacks.run(options,this),this._isInitialized=!0,this.submodules&&_.each(this.submodules,function(mod){mod.start()})},stop:function(){this._isInitialized&&(this._isInitialized=!1,this._finalizerCallbacks.run(),_.each(this.submodules,function(mod){mod.stop()}))},addDefinition:function(moduleDefinition){this._config.definitions.push(moduleDefinition)},_runModuleDefinition:function(){if(0!==this._config.definitions.length)for(var args=_.flatten([this,this._config.app,Backbone,Marionette,$,_,this._config.customArgs]),definitionCount=this._config.definitions.length-1,i=0;definitionCount>=i;i++){var definition=this._config.definitions[i];definition.apply(this,args)}}}),_.extend(Marionette.Module,{create:function(app,moduleNames,moduleDefinition){var that=this,parentModule=app,moduleNames=moduleNames.split("."),customArgs=slice.apply(arguments);customArgs.splice(0,3);var length=moduleNames.length;return _.each(moduleNames,function(moduleName,i){var isLastModuleInChain=i===length-1,module=parentModule[moduleName];module||(module=new Marionette.Module(moduleName,app,customArgs),parentModule[moduleName]=module,parentModule.submodules[moduleName]=module),isLastModuleInChain&&that._createModuleDefinition(module,moduleDefinition,app),parentModule=module}),parentModule},_createModuleDefinition:function(module,moduleDefinition,app){var moduleOptions=this._getModuleDefinitionOptions(moduleDefinition);moduleOptions.definition&&module.addDefinition(moduleOptions.definition),moduleOptions.startWithApp&&app.addInitializer(function(options){module.start(options)})},_getModuleDefinitionOptions:function(moduleDefinition){var options={startWithApp:!0};return moduleDefinition?(_.isFunction(moduleDefinition)?options.definition=moduleDefinition:(options.definition=moduleDefinition.define,moduleDefinition.hasOwnProperty("startWithApp")&&(options.startWithApp=moduleDefinition.startWithApp)),options):options}}),Marionette.TemplateCache=function(templateId){this.templateId=templateId},_.extend(Marionette.TemplateCache,{templateCaches:{},get:function(templateId,url,data){var cachedTemplate=this.templateCaches[templateId];return cachedTemplate||(cachedTemplate=new Marionette.TemplateCache(templateId),cachedTemplate.url=url,cachedTemplate.data=data,this.templateCaches[templateId]=cachedTemplate),cachedTemplate.load()},clear:function(){var i,length=arguments.length;if(length>0)for(i=0;length>i;i++)delete this.templateCaches[arguments[i]];else this.templateCaches={}}}),_.extend(Marionette.TemplateCache.prototype,{load:function(){var that=this,dfd=new $.Deferred;return this.compiledTemplate?(dfd.resolve(this.compiledTemplate),dfd.promise()):($.when(this.loadTemplate(this.templateId)).then(function(template){that.compiledTemplate=that.compileTemplate(template),dfd.resolve(that.compiledTemplate)}),dfd.promise())},loadTemplate:function(templateId){var template=$(templateId).html();if(!template||0===template.length){var msg="Could not find template: '"+templateId+"'",err=new Error(msg);throw err.name="NoTemplateError",err}return template},compileTemplate:function(rawTemplate){return _.template(rawTemplate)}}),Marionette.Renderer={render:function(template,data){var templateFunc=Marionette.TemplateCache.get(template),html=templateFunc(data);return html}},Marionette.Callbacks=function(){this.deferred=$.Deferred(),this.promise=this.deferred.promise()},_.extend(Marionette.Callbacks.prototype,{add:function(callback,contextOverride){this.promise.done(function(context,options){contextOverride&&(context=contextOverride),callback.call(context,options)})},run:function(options,context){this.deferred.resolve(context,options)}}),Marionette.EventAggregator=Marionette.EventBinder.extend({constructor:function(options){Marionette.EventBinder.apply(this,arguments),_.extend(this,options)},bindTo:function(eventName,callback,context){return Marionette.EventBinder.prototype.bindTo.call(this,this,eventName,callback,context)}}),_.extend(Marionette.EventAggregator.prototype,Backbone.Events),Marionette.EventAggregator.extend=Backbone.View.extend;var slice=Array.prototype.slice;return Marionette}(Backbone,_,window.jQuery||window.Zepto||window.ender),Highcharts.theme={colors:["#DDDF0D","#55BF3B","#DF5353","#7798BF","#aaeeee","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"],chart:{backgroundColor:{linearGradient:[0,0,250,500],stops:[[0,"rgb(48, 48, 96)"],[1,"rgb(0, 0, 0)"]]},borderColor:"#000000",borderWidth:2,className:"dark-container",plotBackgroundColor:"rgba(255, 255, 255, .1)",plotBorderColor:"#CCCCCC",plotBorderWidth:1},title:{style:{color:"#C0C0C0",font:'bold 16px "Trebuchet MS", Verdana, sans-serif'}},subtitle:{style:{color:"#666666",font:'bold 12px "Trebuchet MS", Verdana, sans-serif'}},xAxis:{gridLineColor:"#333333",gridLineWidth:1,labels:{style:{color:"#A0A0A0"}},lineColor:"#A0A0A0",tickColor:"#A0A0A0",title:{style:{color:"#CCC",fontWeight:"bold",fontSize:"12px",fontFamily:"Trebuchet MS, Verdana, sans-serif"}}},yAxis:{gridLineColor:"#333333",labels:{style:{color:"#A0A0A0"}},lineColor:"#A0A0A0",minorTickInterval:null,tickColor:"#A0A0A0",tickWidth:1,title:{style:{color:"#CCC",fontWeight:"bold",fontSize:"12px",fontFamily:"Trebuchet MS, Verdana, sans-serif"}}},legend:{itemStyle:{font:"9pt Trebuchet MS, Verdana, sans-serif",color:"#A0A0A0"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.75)",style:{color:"#F0F0F0"}},toolbar:{itemStyle:{color:"silver"}},plotOptions:{line:{dataLabels:{color:"#CCC"},marker:{lineColor:"#333"}},spline:{marker:{lineColor:"#333"}},scatter:{marker:{lineColor:"#333"}},candlestick:{lineColor:"white"}},legend:{itemStyle:{color:"#CCC"},itemHoverStyle:{color:"#FFF"},itemHiddenStyle:{color:"#444"}},credits:{style:{color:"#666"}},labels:{style:{color:"#CCC"}},navigation:{buttonOptions:{backgroundColor:{linearGradient:[0,0,0,20],stops:[[.4,"#606060"],[.6,"#333333"]]},borderColor:"#000000",symbolStroke:"#C0C0C0",hoverSymbolStroke:"#FFFFFF"}},exporting:{buttons:{exportButton:{symbolFill:"#55BE3B"},printButton:{symbolFill:"#7797BE"}}},rangeSelector:{buttonTheme:{fill:{linearGradient:[0,0,0,20],stops:[[.4,"#888"],[.6,"#555"]]},stroke:"#000000",style:{color:"#CCC",fontWeight:"bold"},states:{hover:{fill:{linearGradient:[0,0,0,20],stops:[[.4,"#BBB"],[.6,"#888"]]},stroke:"#000000",style:{color:"white"}},select:{fill:{linearGradient:[0,0,0,20],stops:[[.1,"#000"],[.3,"#333"]]},stroke:"#000000",style:{color:"yellow"}}}},inputStyle:{backgroundColor:"#333",color:"silver"},labelStyle:{color:"silver"}},navigator:{handles:{backgroundColor:"#666",borderColor:"#AAA"},outlineColor:"#CCC",maskFill:"rgba(16, 16, 16, 0.5)",series:{color:"#7798BF",lineColor:"#A6C7ED"}},scrollbar:{barBackgroundColor:{linearGradient:[0,0,0,20],stops:[[.4,"#888"],[.6,"#555"]]},barBorderColor:"#CCC",buttonArrowColor:"#CCC",buttonBackgroundColor:{linearGradient:[0,0,0,20],stops:[[.4,"#888"],[.6,"#555"]]},buttonBorderColor:"#CCC",rifleColor:"#FFF",trackBackgroundColor:{linearGradient:[0,0,0,10],stops:[[0,"#000"],[1,"#333"]]},trackBorderColor:"#666"},legendBackgroundColor:"rgba(0, 0, 0, 0.5)",legendBackgroundColorSolid:"rgb(35, 35, 70)",dataLabelsColor:"#444",textColor:"#C0C0C0",maskColor:"rgba(255,255,255,0.3)"};var highchartsOptions=Highcharts.setOptions(Highcharts.theme);!function($,undefined){function setDefaults(d){$.extend(!0,defaults,d)}function Calendar(element,options,eventSources){function render(inc){content?(calcSize(),markSizesDirty(),markEventsDirty(),renderView(inc)):initialRender()}function initialRender(){tm=options.theme?"ui":"fc",element.addClass("fc"),options.isRTL&&element.addClass("fc-rtl"),options.theme&&element.addClass("ui-widget"),content=$("<div class='fc-content' style='position:relative'/>").prependTo(element),header=new Header(t,options),headerElement=header.render(),headerElement&&element.prepend(headerElement),changeView(options.defaultView),$(window).resize(windowResize),bodyVisible()||lateRender()}function lateRender(){setTimeout(function(){!currentView.start&&bodyVisible()&&renderView()},0)}function destroy(){$(window).unbind("resize",windowResize),header.destroy(),content.remove(),element.removeClass("fc fc-rtl ui-widget")}function elementVisible(){return 0!==_element.offsetWidth}function bodyVisible(){return 0!==$("body")[0].offsetWidth}function changeView(newViewName){if(!currentView||newViewName!=currentView.name){ignoreWindowResize++,unselect();var newViewElement,oldView=currentView;oldView?((oldView.beforeHide||noop)(),setMinHeight(content,content.height()),oldView.element.hide()):setMinHeight(content,1),content.css("overflow","hidden"),currentView=viewInstances[newViewName],currentView?currentView.element.show():currentView=viewInstances[newViewName]=new fcViews[newViewName](newViewElement=absoluteViewElement=$("<div class='fc-view fc-view-"+newViewName+"' style='position:absolute'/>").appendTo(content),t),oldView&&header.deactivateButton(oldView.name),header.activateButton(newViewName),renderView(),content.css("overflow",""),oldView&&setMinHeight(content,1),newViewElement||(currentView.afterShow||noop)(),ignoreWindowResize--}}function renderView(inc){if(elementVisible()){ignoreWindowResize++,unselect(),suggestedViewHeight===undefined&&calcSize();var forceEventRender=!1;!currentView.start||inc||date<currentView.start||date>=currentView.end?(currentView.render(date,inc||0),setSize(!0),forceEventRender=!0):currentView.sizeDirty?(currentView.clearEvents(),setSize(),forceEventRender=!0):currentView.eventsDirty&&(currentView.clearEvents(),forceEventRender=!0),currentView.sizeDirty=!1,currentView.eventsDirty=!1,updateEvents(forceEventRender),elementOuterWidth=element.outerWidth(),header.updateTitle(currentView.title);var today=new Date;today>=currentView.start&&today<currentView.end?header.disableButton("today"):header.enableButton("today"),ignoreWindowResize--,currentView.trigger("viewDisplay",_element)}}function updateSize(){markSizesDirty(),elementVisible()&&(calcSize(),setSize(),unselect(),currentView.clearEvents(),currentView.renderEvents(events),currentView.sizeDirty=!1)}function markSizesDirty(){$.each(viewInstances,function(i,inst){inst.sizeDirty=!0})}function calcSize(){suggestedViewHeight=options.contentHeight?options.contentHeight:options.height?options.height-(headerElement?headerElement.height():0)-vsides(content):Math.round(content.width()/Math.max(options.aspectRatio,.5))}function setSize(dateChanged){ignoreWindowResize++,currentView.setHeight(suggestedViewHeight,dateChanged),absoluteViewElement&&(absoluteViewElement.css("position","relative"),absoluteViewElement=null),currentView.setWidth(content.width(),dateChanged),ignoreWindowResize--}function windowResize(){if(!ignoreWindowResize)if(currentView.start){var uid=++resizeUID;setTimeout(function(){uid==resizeUID&&!ignoreWindowResize&&elementVisible()&&elementOuterWidth!=(elementOuterWidth=element.outerWidth())&&(ignoreWindowResize++,updateSize(),currentView.trigger("windowResize",_element),ignoreWindowResize--)},200)}else lateRender()}function updateEvents(forceRender){!options.lazyFetching||isFetchNeeded(currentView.visStart,currentView.visEnd)?refetchEvents():forceRender&&rerenderEvents()}function refetchEvents(){fetchEvents(currentView.visStart,currentView.visEnd)}function reportEvents(_events){events=_events,rerenderEvents()}function reportEventChange(eventID){rerenderEvents(eventID)}function rerenderEvents(modifiedEventID){markEventsDirty(),elementVisible()&&(currentView.clearEvents(),currentView.renderEvents(events,modifiedEventID),currentView.eventsDirty=!1)}function markEventsDirty(){$.each(viewInstances,function(i,inst){inst.eventsDirty=!0})}function select(start,end,allDay){currentView.select(start,end,allDay===undefined?!0:allDay)}function unselect(){currentView&&currentView.unselect()}function prev(){renderView(-1)}function next(){renderView(1)}function prevYear(){addYears(date,-1),renderView()}function nextYear(){addYears(date,1),renderView()}function today(){date=new Date,renderView()}function gotoDate(year,month,dateOfMonth){year instanceof Date?date=cloneDate(year):setYMD(date,year,month,dateOfMonth),renderView()}function incrementDate(years,months,days){years!==undefined&&addYears(date,years),months!==undefined&&addMonths(date,months),days!==undefined&&addDays(date,days),renderView()}function getDate(){return cloneDate(date)}function getView(){return currentView}function option(name,value){return value===undefined?options[name]:void(("height"==name||"contentHeight"==name||"aspectRatio"==name)&&(options[name]=value,updateSize()))}function trigger(name,thisObj){return options[name]?options[name].apply(thisObj||_element,Array.prototype.slice.call(arguments,2)):void 0}var t=this;t.options=options,t.render=render,t.destroy=destroy,t.refetchEvents=refetchEvents,t.reportEvents=reportEvents,t.reportEventChange=reportEventChange,t.rerenderEvents=rerenderEvents,t.changeView=changeView,t.select=select,t.unselect=unselect,t.prev=prev,t.next=next,t.prevYear=prevYear,t.nextYear=nextYear,t.today=today,t.gotoDate=gotoDate,t.incrementDate=incrementDate,t.formatDate=function(format,date){return formatDate(format,date,options)},t.formatDates=function(format,date1,date2){return formatDates(format,date1,date2,options)},t.getDate=getDate,t.getView=getView,t.option=option,t.trigger=trigger,EventManager.call(t,options,eventSources);var header,headerElement,content,tm,currentView,elementOuterWidth,suggestedViewHeight,absoluteViewElement,_dragElement,isFetchNeeded=t.isFetchNeeded,fetchEvents=t.fetchEvents,_element=element[0],viewInstances={},resizeUID=0,ignoreWindowResize=0,date=new Date,events=[];setYMD(date,options.year,options.month,options.date),options.droppable&&$(document).bind("dragstart",function(ev,ui){var _e=ev.target,e=$(_e);if(!e.parents(".fc").length){var accept=options.dropAccept;($.isFunction(accept)?accept.call(_e,e):e.is(accept))&&(_dragElement=_e,currentView.dragStart(_dragElement,ev,ui))}}).bind("dragstop",function(ev,ui){_dragElement&&(currentView.dragStop(_dragElement,ev,ui),_dragElement=null)})}function Header(calendar,options){function render(){tm=options.theme?"ui":"fc";var sections=options.header;return sections?element=$("<table class='fc-header' style='width:100%'/>").append($("<tr/>").append(renderSection("left")).append(renderSection("center")).append(renderSection("right"))):void 0}function destroy(){element.remove()}function renderSection(position){var e=$("<td class='fc-header-"+position+"'/>"),buttonStr=options.header[position];return buttonStr&&$.each(buttonStr.split(" "),function(i){i>0&&e.append("<span class='fc-header-space'/>");var prevButton;$.each(this.split(","),function(j,buttonName){if("title"==buttonName)e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),prevButton&&prevButton.addClass(tm+"-corner-right"),prevButton=null;else{var buttonClick;if(calendar[buttonName]?buttonClick=calendar[buttonName]:fcViews[buttonName]&&(buttonClick=function(){button.removeClass(tm+"-state-hover"),calendar.changeView(buttonName)}),buttonClick){var icon=options.theme?smartProperty(options.buttonIcons,buttonName):null,text=smartProperty(options.buttonText,buttonName),button=$("<span class='fc-button fc-button-"+buttonName+" "+tm+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(icon?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+icon+"'/></span>":text)+"</span><span class='fc-button-effect'><span></span></span></span></span>");button&&(button.click(function(){button.hasClass(tm+"-state-disabled")||buttonClick()}).mousedown(function(){button.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-down")}).mouseup(function(){button.removeClass(tm+"-state-down")}).hover(function(){button.not("."+tm+"-state-active").not("."+tm+"-state-disabled").addClass(tm+"-state-hover")},function(){button.removeClass(tm+"-state-hover").removeClass(tm+"-state-down")}).appendTo(e),prevButton||button.addClass(tm+"-corner-left"),prevButton=button)}}}),prevButton&&prevButton.addClass(tm+"-corner-right")}),e}function updateTitle(html){element.find("h2").html(html)}function activateButton(buttonName){element.find("span.fc-button-"+buttonName).addClass(tm+"-state-active")}function deactivateButton(buttonName){element.find("span.fc-button-"+buttonName).removeClass(tm+"-state-active")}function disableButton(buttonName){element.find("span.fc-button-"+buttonName).addClass(tm+"-state-disabled")}function enableButton(buttonName){element.find("span.fc-button-"+buttonName).removeClass(tm+"-state-disabled")}var t=this;t.render=render,t.destroy=destroy,t.updateTitle=updateTitle,t.activateButton=activateButton,t.deactivateButton=deactivateButton,t.disableButton=disableButton,t.enableButton=enableButton;var tm,element=$([])}function EventManager(options,_sources){function isFetchNeeded(start,end){return!rangeStart||rangeStart>start||end>rangeEnd}function fetchEvents(start,end){rangeStart=start,rangeEnd=end,cache=[];var fetchID=++currentFetchID,len=sources.length;pendingSourceCnt=len;for(var i=0;len>i;i++)fetchEventSource(sources[i],fetchID)}function fetchEventSource(source,fetchID){_fetchEventSource(source,function(events){if(fetchID==currentFetchID){if(events){for(var i=0;i<events.length;i++)events[i].source=source,normalizeEvent(events[i]);cache=cache.concat(events)}pendingSourceCnt--,pendingSourceCnt||reportEvents(cache)}})}function _fetchEventSource(source,callback){var i,res,fetchers=fc.sourceFetchers;for(i=0;i<fetchers.length;i++){if(res=fetchers[i](source,rangeStart,rangeEnd,callback),res===!0)return;if("object"==typeof res)return void _fetchEventSource(res,callback)}var events=source.events;if(events)$.isFunction(events)?(pushLoading(),events(cloneDate(rangeStart),cloneDate(rangeEnd),function(events){callback(events),popLoading()})):$.isArray(events)?callback(events):callback();else{var url=source.url;if(url){var success=source.success,error=source.error,complete=source.complete,data=$.extend({},source.data||{}),startParam=firstDefined(source.startParam,options.startParam),endParam=firstDefined(source.endParam,options.endParam);startParam&&(data[startParam]=Math.round(+rangeStart/1e3)),endParam&&(data[endParam]=Math.round(+rangeEnd/1e3)),pushLoading(),$.ajax($.extend({},ajaxDefaults,source,{data:data,success:function(events){events=events||[];var res=applyAll(success,this,arguments);$.isArray(res)&&(events=res),callback(events)},error:function(){applyAll(error,this,arguments),callback()},complete:function(){applyAll(complete,this,arguments),popLoading()}}))}else callback()}}function addEventSource(source){source=_addEventSource(source),source&&(pendingSourceCnt++,fetchEventSource(source,currentFetchID))}function _addEventSource(source){return $.isFunction(source)||$.isArray(source)?source={events:source}:"string"==typeof source&&(source={url:source}),"object"==typeof source?(normalizeSource(source),sources.push(source),source):void 0}function replaceEventSource(source){sources=[source]}function removeEventSource(source){sources=$.grep(sources,function(src){return!isSourcesEqual(src,source)}),cache=$.grep(cache,function(e){return!isSourcesEqual(e.source,source)}),reportEvents(cache)}function updateEvent(event){var i,e,len=cache.length,defaultEventEnd=getView().defaultEventEnd,startDelta=event.start-event._start,endDelta=event.end?event.end-(event._end||defaultEventEnd(event)):0;for(i=0;len>i;i++)e=cache[i],e._id==event._id&&e!=event&&(e.start=new Date(+e.start+startDelta),e.end=event.end?new Date(e.end?+e.end+endDelta:+defaultEventEnd(e)+endDelta):null,e.title=event.title,e.url=event.url,e.allDay=event.allDay,e.className=event.className,e.editable=event.editable,e.color=event.color,e.backgroudColor=event.backgroudColor,e.borderColor=event.borderColor,e.textColor=event.textColor,normalizeEvent(e));normalizeEvent(event),reportEvents(cache)}function renderEvent(event,stick){normalizeEvent(event),event.source||(stick&&(stickySource.events.push(event),event.source=stickySource),cache.push(event)),reportEvents(cache)}function removeEvents(filter){if(filter){if(!$.isFunction(filter)){var id=filter+"";filter=function(e){return e._id==id}}cache=$.grep(cache,filter,!0);for(var i=0;i<sources.length;i++)$.isArray(sources[i].events)&&(sources[i].events=$.grep(sources[i].events,filter,!0))}else{cache=[];for(var i=0;i<sources.length;i++)$.isArray(sources[i].events)&&(sources[i].events=[])}reportEvents(cache)}function clientEvents(filter){return $.isFunction(filter)?$.grep(cache,filter):filter?(filter+="",$.grep(cache,function(e){return e._id==filter})):cache}function pushLoading(){loadingLevel++||trigger("loading",null,!0)}function popLoading(){--loadingLevel||trigger("loading",null,!1)}function normalizeEvent(event){var source=event.source||{},ignoreTimezone=firstDefined(source.ignoreTimezone,options.ignoreTimezone);event._id=event._id||(event.id===undefined?"_fc"+eventGUID++:event.id+""),event.date&&(event.start||(event.start=event.date),delete event.date),event._start=cloneDate(event.start=parseDate(event.start,ignoreTimezone)),event.end=parseDate(event.end,ignoreTimezone),event.end&&event.end<=event.start&&(event.end=null),event._end=event.end?cloneDate(event.end):null,event.allDay===undefined&&(event.allDay=firstDefined(source.allDayDefault,options.allDayDefault)),event.className?"string"==typeof event.className&&(event.className=event.className.split(/\s+/)):event.className=[]}function normalizeSource(source){source.className?"string"==typeof source.className&&(source.className=source.className.split(/\s+/)):source.className=[];for(var normalizers=fc.sourceNormalizers,i=0;i<normalizers.length;i++)normalizers[i](source)}function isSourcesEqual(source1,source2){return source1&&source2&&getSourcePrimitive(source1)==getSourcePrimitive(source2)}function getSourcePrimitive(source){return("object"==typeof source?source.events||source.url:"")||source}var t=this;t.isFetchNeeded=isFetchNeeded,t.fetchEvents=fetchEvents,t.addEventSource=addEventSource,t.removeEventSource=removeEventSource,t.replaceEventSource=replaceEventSource,t.updateEvent=updateEvent,t.renderEvent=renderEvent,t.removeEvents=removeEvents,t.clientEvents=clientEvents,t.normalizeEvent=normalizeEvent;for(var rangeStart,rangeEnd,trigger=t.trigger,getView=t.getView,reportEvents=t.reportEvents,stickySource={events:[]},sources=[stickySource],currentFetchID=0,pendingSourceCnt=0,loadingLevel=0,cache=[],i=0;i<_sources.length;i++)_addEventSource(_sources[i])}function addYears(d,n,keepTime){return d.setFullYear(d.getFullYear()+n),keepTime||clearTime(d),d}function addMonths(d,n,keepTime){if(+d){var m=d.getMonth()+n,check=cloneDate(d);for(check.setDate(1),check.setMonth(m),d.setMonth(m),keepTime||clearTime(d);d.getMonth()!=check.getMonth();)d.setDate(d.getDate()+(check>d?1:-1))}return d}function addDays(d,n,keepTime){if(+d){var dd=d.getDate()+n,check=cloneDate(d);check.setHours(9),check.setDate(dd),d.setDate(dd),keepTime||clearTime(d),fixDate(d,check)}return d}function fixDate(d,check){if(+d)for(;d.getDate()!=check.getDate();)d.setTime(+d+(check>d?1:-1)*HOUR_MS)}function addMinutes(d,n){return d.setMinutes(d.getMinutes()+n),d}function clearTime(d){return d.setHours(0),d.setMinutes(0),d.setSeconds(0),d.setMilliseconds(0),d}function cloneDate(d,dontKeepTime){return dontKeepTime?clearTime(new Date(+d)):new Date(+d)}function zeroDate(){var d,i=0;do d=new Date(1970,i++,1);while(d.getHours());return d}function skipWeekend(date,inc,excl){for(inc=inc||1;!date.getDay()||excl&&1==date.getDay()||!excl&&6==date.getDay();)addDays(date,inc);return date}function dayDiff(d1,d2){return Math.round((cloneDate(d1,!0)-cloneDate(d2,!0))/DAY_MS)}function setYMD(date,y,m,d){y!==undefined&&y!=date.getFullYear()&&(date.setDate(1),date.setMonth(0),date.setFullYear(y)),m!==undefined&&m!=date.getMonth()&&(date.setDate(1),date.setMonth(m)),d!==undefined&&date.setDate(d)}function parseDate(s,ignoreTimezone){return"object"==typeof s?s:"number"==typeof s?new Date(1e3*s):"string"==typeof s?s.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(s)):(ignoreTimezone===undefined&&(ignoreTimezone=!0),parseISO8601(s,ignoreTimezone)||(s?new Date(s):null)):null}function parseISO8601(s,ignoreTimezone){var m=s.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!m)return null;var date=new Date(m[1],0,1);if(ignoreTimezone||!m[13]){var check=new Date(m[1],0,1,9,0);m[3]&&(date.setMonth(m[3]-1),check.setMonth(m[3]-1)),m[5]&&(date.setDate(m[5]),check.setDate(m[5])),fixDate(date,check),m[7]&&date.setHours(m[7]),m[8]&&date.setMinutes(m[8]),m[10]&&date.setSeconds(m[10]),m[12]&&date.setMilliseconds(1e3*Number("0."+m[12])),fixDate(date,check)}else if(date.setUTCFullYear(m[1],m[3]?m[3]-1:0,m[5]||1),date.setUTCHours(m[7]||0,m[8]||0,m[10]||0,m[12]?1e3*Number("0."+m[12]):0),m[14]){var offset=60*Number(m[16])+(m[18]?Number(m[18]):0);offset*="-"==m[15]?1:-1,date=new Date(+date+60*offset*1e3)}return date}function parseTime(s){if("number"==typeof s)return 60*s;if("object"==typeof s)return 60*s.getHours()+s.getMinutes();var m=s.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(m){var h=parseInt(m[1],10);return m[3]&&(h%=12,"p"==m[3].toLowerCase().charAt(0)&&(h+=12)),60*h+(m[2]?parseInt(m[2],10):0)}}function formatDate(date,format,options){return formatDates(date,null,format,options)}function formatDates(date1,date2,format,options){options=options||defaults;var i,c,i2,formatter,date=date1,otherDate=date2,len=format.length,res="";for(i=0;len>i;i++)if(c=format.charAt(i),"'"==c){for(i2=i+1;len>i2;i2++)if("'"==format.charAt(i2)){date&&(res+=i2==i+1?"'":format.substring(i+1,i2),i=i2);break}}else if("("==c){for(i2=i+1;len>i2;i2++)if(")"==format.charAt(i2)){var subres=formatDate(date,format.substring(i+1,i2),options);parseInt(subres.replace(/\D/,""),10)&&(res+=subres),i=i2;break}}else if("["==c){for(i2=i+1;len>i2;i2++)if("]"==format.charAt(i2)){var subformat=format.substring(i+1,i2),subres=formatDate(date,subformat,options);subres!=formatDate(otherDate,subformat,options)&&(res+=subres),i=i2;break}}else if("{"==c)date=date2,otherDate=date1;else if("}"==c)date=date1,otherDate=date2;else{for(i2=len;i2>i;i2--)if(formatter=dateFormatters[format.substring(i,i2)]){date&&(res+=formatter(date,options)),i=i2-1;break}i2==i&&date&&(res+=c)}return res}function exclEndDay(event){return event.end?_exclEndDay(event.end,event.allDay):addDays(cloneDate(event.start),1)}function _exclEndDay(end,allDay){return end=cloneDate(end),allDay||end.getHours()||end.getMinutes()?addDays(end,1):clearTime(end)}function segCmp(a,b){return 100*(b.msLength-a.msLength)+(a.event.start-b.event.start)}function segsCollide(seg1,seg2){return seg1.end>seg2.start&&seg1.start<seg2.end}function sliceSegs(events,visEventEnds,start,end){var i,event,eventStart,eventEnd,segStart,segEnd,isStart,isEnd,segs=[],len=events.length;for(i=0;len>i;i++)event=events[i],eventStart=event.start,eventEnd=visEventEnds[i],eventEnd>start&&end>eventStart&&(start>eventStart?(segStart=cloneDate(start),isStart=!1):(segStart=eventStart,isStart=!0),eventEnd>end?(segEnd=cloneDate(end),isEnd=!1):(segEnd=eventEnd,isEnd=!0),segs.push({event:event,start:segStart,end:segEnd,isStart:isStart,isEnd:isEnd,msLength:segEnd-segStart}));return segs.sort(segCmp)}function stackSegs(segs){var i,seg,j,collide,k,levels=[],len=segs.length;for(i=0;len>i;i++){for(seg=segs[i],j=0;;){if(collide=!1,levels[j])for(k=0;k<levels[j].length;k++)if(segsCollide(levels[j][k],seg)){collide=!0;break}if(!collide)break;j++}levels[j]?levels[j].push(seg):levels[j]=[seg]}return levels}function lazySegBind(container,segs,bindHandlers){container.unbind("mouseover").mouseover(function(ev){for(var e,i,seg,parent=ev.target;parent!=this;)e=parent,parent=parent.parentNode;(i=e._fci)!==undefined&&(e._fci=undefined,seg=segs[i],bindHandlers(seg.event,seg.element,seg),$(ev.target).trigger(ev)),ev.stopPropagation()})}function setOuterWidth(element,width,includeMargins){for(var e,i=0;i<element.length;i++)e=$(element[i]),e.width(Math.max(0,width-hsides(e,includeMargins)))}function setOuterHeight(element,height,includeMargins){for(var e,i=0;i<element.length;i++)e=$(element[i]),e.height(Math.max(0,height-vsides(e,includeMargins)))
}function hsides(element,includeMargins){return hpadding(element)+hborders(element)+(includeMargins?hmargins(element):0)}function hpadding(element){return(parseFloat($.css(element[0],"paddingLeft",!0))||0)+(parseFloat($.css(element[0],"paddingRight",!0))||0)}function hmargins(element){return(parseFloat($.css(element[0],"marginLeft",!0))||0)+(parseFloat($.css(element[0],"marginRight",!0))||0)}function hborders(element){return(parseFloat($.css(element[0],"borderLeftWidth",!0))||0)+(parseFloat($.css(element[0],"borderRightWidth",!0))||0)}function vsides(element,includeMargins){return vpadding(element)+vborders(element)+(includeMargins?vmargins(element):0)}function vpadding(element){return(parseFloat($.css(element[0],"paddingTop",!0))||0)+(parseFloat($.css(element[0],"paddingBottom",!0))||0)}function vmargins(element){return(parseFloat($.css(element[0],"marginTop",!0))||0)+(parseFloat($.css(element[0],"marginBottom",!0))||0)}function vborders(element){return(parseFloat($.css(element[0],"borderTopWidth",!0))||0)+(parseFloat($.css(element[0],"borderBottomWidth",!0))||0)}function setMinHeight(element,height){height="number"==typeof height?height+"px":height,element.each(function(i,_element){_element.style.cssText+=";min-height:"+height+";_height:"+height})}function noop(){}function cmp(a,b){return a-b}function arrayMax(a){return Math.max.apply(Math,a)}function zeroPad(n){return(10>n?"0":"")+n}function smartProperty(obj,name){if(obj[name]!==undefined)return obj[name];for(var res,parts=name.split(/(?=[A-Z])/),i=parts.length-1;i>=0;i--)if(res=obj[parts[i].toLowerCase()],res!==undefined)return res;return obj[""]}function htmlEscape(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function cssKey(_element){return _element.id+"/"+_element.className+"/"+_element.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function disableTextSelection(element){element.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function markFirstLast(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function setDayID(cell,date){cell.each(function(i,_cell){_cell.className=_cell.className.replace(/^fc-\w*/,"fc-"+dayIDs[date.getDay()])})}function getSkinCss(event,opt){var source=event.source||{},eventColor=event.color,sourceColor=source.color,optionColor=opt("eventColor"),backgroundColor=event.backgroundColor||eventColor||source.backgroundColor||sourceColor||opt("eventBackgroundColor")||optionColor,borderColor=event.borderColor||eventColor||source.borderColor||sourceColor||opt("eventBorderColor")||optionColor,textColor=event.textColor||source.textColor||opt("eventTextColor"),statements=[];return backgroundColor&&statements.push("background-color:"+backgroundColor),borderColor&&statements.push("border-color:"+borderColor),textColor&&statements.push("color:"+textColor),statements.join(";")}function applyAll(functions,thisObj,args){if($.isFunction(functions)&&(functions=[functions]),functions){var i,ret;for(i=0;i<functions.length;i++)ret=functions[i].apply(thisObj,args)||ret;return ret}}function firstDefined(){for(var i=0;i<arguments.length;i++)if(arguments[i]!==undefined)return arguments[i]}function MonthView(element,calendar){function render(date,delta){delta&&(addMonths(date,delta),date.setDate(1));var start=cloneDate(date,!0);start.setDate(1);var end=addMonths(cloneDate(start),1),visStart=cloneDate(start),visEnd=cloneDate(end),firstDay=opt("firstDay"),nwe=opt("weekends")?0:1;nwe&&(skipWeekend(visStart),skipWeekend(visEnd,-1,!0)),addDays(visStart,-((visStart.getDay()-Math.max(firstDay,nwe)+7)%7)),addDays(visEnd,(7-visEnd.getDay()+Math.max(firstDay,nwe))%7);var rowCnt=Math.round((visEnd-visStart)/(7*DAY_MS));"fixed"==opt("weekMode")&&(addDays(visEnd,7*(6-rowCnt)),rowCnt=6),t.title=formatDate(start,opt("titleFormat")),t.start=start,t.end=end,t.visStart=visStart,t.visEnd=visEnd,renderBasic(6,rowCnt,nwe?5:7,!0)}var t=this;t.render=render,BasicView.call(t,element,calendar,"month");var opt=t.opt,renderBasic=t.renderBasic,formatDate=calendar.formatDate}function BasicWeekView(element,calendar){function render(date,delta){delta&&addDays(date,7*delta);var start=addDays(cloneDate(date),-((date.getDay()-opt("firstDay")+7)%7)),end=addDays(cloneDate(start),7),visStart=cloneDate(start),visEnd=cloneDate(end),weekends=opt("weekends");weekends||(skipWeekend(visStart),skipWeekend(visEnd,-1,!0)),t.title=formatDates(visStart,addDays(cloneDate(visEnd),-1),opt("titleFormat")),t.start=start,t.end=end,t.visStart=visStart,t.visEnd=visEnd,renderBasic(1,1,weekends?7:5,!1)}var t=this;t.render=render,BasicView.call(t,element,calendar,"basicWeek");var opt=t.opt,renderBasic=t.renderBasic,formatDates=calendar.formatDates}function BasicDayView(element,calendar){function render(date,delta){delta&&(addDays(date,delta),opt("weekends")||skipWeekend(date,0>delta?-1:1)),t.title=formatDate(date,opt("titleFormat")),t.start=t.visStart=cloneDate(date,!0),t.end=t.visEnd=addDays(cloneDate(t.start),1),renderBasic(1,1,1,!1)}var t=this;t.render=render,BasicView.call(t,element,calendar,"basicDay");var opt=t.opt,renderBasic=t.renderBasic,formatDate=calendar.formatDate}function BasicView(element,calendar,viewName){function renderBasic(maxr,r,c,showNumbers){rowCnt=r,colCnt=c,updateOptions();var firstTime=!body;firstTime?buildSkeleton(maxr,showNumbers):clearEvents(),updateCells(firstTime)}function updateOptions(){rtl=opt("isRTL"),rtl?(dis=-1,dit=colCnt-1):(dis=1,dit=0),firstDay=opt("firstDay"),nwe=opt("weekends")?0:1,tm=opt("theme")?"ui":"fc",colFormat=opt("columnFormat")}function buildSkeleton(maxRowCnt,showNumbers){var s,i,j,table,headerClass=tm+"-widget-header",contentClass=tm+"-widget-content";for(s="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>",i=0;colCnt>i;i++)s+="<th class='fc- "+headerClass+"'/>";for(s+="</tr></thead><tbody>",i=0;maxRowCnt>i;i++){for(s+="<tr class='fc-week"+i+"'>",j=0;colCnt>j;j++)s+="<td class='fc- "+contentClass+" fc-day"+(i*colCnt+j)+"'><div>"+(showNumbers?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";s+="</tr>"}s+="</tbody></table>",table=$(s).appendTo(element),head=table.find("thead"),headCells=head.find("th"),body=table.find("tbody"),bodyRows=body.find("tr"),bodyCells=body.find("td"),bodyFirstCells=bodyCells.filter(":first-child"),bodyCellTopInners=bodyRows.eq(0).find("div.fc-day-content div"),markFirstLast(head.add(head.find("tr"))),markFirstLast(bodyRows),bodyRows.eq(0).addClass("fc-first"),dayBind(bodyCells),daySegmentContainer=$("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(element)}function updateCells(firstTime){var cell,date,row,dowDirty=firstTime||1==rowCnt,month=t.start.getMonth(),today=clearTime(new Date);dowDirty&&headCells.each(function(i,_cell){cell=$(_cell),date=indexDate(i),cell.html(formatDate(date,colFormat)),setDayID(cell,date)}),bodyCells.each(function(i,_cell){cell=$(_cell),date=indexDate(i),date.getMonth()==month?cell.removeClass("fc-other-month"):cell.addClass("fc-other-month"),+date==+today?cell.addClass(tm+"-state-highlight fc-today"):cell.removeClass(tm+"-state-highlight fc-today"),cell.find("div.fc-day-number").text(date.getDate()),dowDirty&&setDayID(cell,date)}),bodyRows.each(function(i,_row){row=$(_row),rowCnt>i?(row.show(),i==rowCnt-1?row.addClass("fc-last"):row.removeClass("fc-last")):row.hide()})}function setHeight(height){viewHeight=height;var rowHeight,rowHeightLast,cell,bodyHeight=viewHeight-head.height();"variable"==opt("weekMode")?rowHeight=rowHeightLast=Math.floor(bodyHeight/(1==rowCnt?2:6)):(rowHeight=Math.floor(bodyHeight/rowCnt),rowHeightLast=bodyHeight-rowHeight*(rowCnt-1)),bodyFirstCells.each(function(i,_cell){rowCnt>i&&(cell=$(_cell),setMinHeight(cell.find("> div"),(i==rowCnt-1?rowHeightLast:rowHeight)-vsides(cell)))})}function setWidth(width){viewWidth=width,colContentPositions.clear(),colWidth=Math.floor(viewWidth/colCnt),setOuterWidth(headCells.slice(0,-1),colWidth)}function dayBind(days){days.click(dayClick).mousedown(daySelectionMousedown)}function dayClick(ev){if(!opt("selectable")){var index=parseInt(this.className.match(/fc\-day(\d+)/)[1]),date=indexDate(index);trigger("dayClick",this,date,!0,ev)}}function renderDayOverlay(overlayStart,overlayEnd,refreshCoordinateGrid){refreshCoordinateGrid&&coordinateGrid.build();for(var rowStart=cloneDate(t.visStart),rowEnd=addDays(cloneDate(rowStart),colCnt),i=0;rowCnt>i;i++){var stretchStart=new Date(Math.max(rowStart,overlayStart)),stretchEnd=new Date(Math.min(rowEnd,overlayEnd));if(stretchEnd>stretchStart){var colStart,colEnd;rtl?(colStart=dayDiff(stretchEnd,rowStart)*dis+dit+1,colEnd=dayDiff(stretchStart,rowStart)*dis+dit+1):(colStart=dayDiff(stretchStart,rowStart),colEnd=dayDiff(stretchEnd,rowStart)),dayBind(renderCellOverlay(i,colStart,i,colEnd-1))}addDays(rowStart,7),addDays(rowEnd,7)}}function renderCellOverlay(row0,col0,row1,col1){var rect=coordinateGrid.rect(row0,col0,row1,col1,element);return renderOverlay(rect,element)}function defaultSelectionEnd(startDate){return cloneDate(startDate)}function renderSelection(startDate,endDate){renderDayOverlay(startDate,addDays(cloneDate(endDate),1),!0)}function clearSelection(){clearOverlays()}function reportDayClick(date,allDay,ev){var cell=dateCell(date),_element=bodyCells[cell.row*colCnt+cell.col];trigger("dayClick",_element,date,allDay,ev)}function dragStart(_dragElement,ev){hoverListener.start(function(cell){clearOverlays(),cell&&renderCellOverlay(cell.row,cell.col,cell.row,cell.col)},ev)}function dragStop(_dragElement,ev,ui){var cell=hoverListener.stop();if(clearOverlays(),cell){var d=cellDate(cell);trigger("drop",_dragElement,d,!0,ev,ui)}}function defaultEventEnd(event){return cloneDate(event.start)}function colContentLeft(col){return colContentPositions.left(col)}function colContentRight(col){return colContentPositions.right(col)}function dateCell(date){return{row:Math.floor(dayDiff(date,t.visStart)/7),col:dayOfWeekCol(date.getDay())}}function cellDate(cell){return _cellDate(cell.row,cell.col)}function _cellDate(row,col){return addDays(cloneDate(t.visStart),7*row+col*dis+dit)}function indexDate(index){return _cellDate(Math.floor(index/colCnt),index%colCnt)}function dayOfWeekCol(dayOfWeek){return(dayOfWeek-Math.max(firstDay,nwe)+colCnt)%colCnt*dis+dit}function allDayRow(i){return bodyRows.eq(i)}function allDayBounds(){return{left:0,right:viewWidth}}var t=this;t.renderBasic=renderBasic,t.setHeight=setHeight,t.setWidth=setWidth,t.renderDayOverlay=renderDayOverlay,t.defaultSelectionEnd=defaultSelectionEnd,t.renderSelection=renderSelection,t.clearSelection=clearSelection,t.reportDayClick=reportDayClick,t.dragStart=dragStart,t.dragStop=dragStop,t.defaultEventEnd=defaultEventEnd,t.getHoverListener=function(){return hoverListener},t.colContentLeft=colContentLeft,t.colContentRight=colContentRight,t.dayOfWeekCol=dayOfWeekCol,t.dateCell=dateCell,t.cellDate=cellDate,t.cellIsAllDay=function(){return!0},t.allDayRow=allDayRow,t.allDayBounds=allDayBounds,t.getRowCnt=function(){return rowCnt},t.getColCnt=function(){return colCnt},t.getColWidth=function(){return colWidth},t.getDaySegmentContainer=function(){return daySegmentContainer},View.call(t,element,calendar,viewName),OverlayManager.call(t),SelectionManager.call(t),BasicEventRenderer.call(t);var head,headCells,body,bodyRows,bodyCells,bodyFirstCells,bodyCellTopInners,daySegmentContainer,viewWidth,viewHeight,colWidth,rowCnt,colCnt,coordinateGrid,hoverListener,colContentPositions,rtl,dis,dit,firstDay,nwe,tm,colFormat,opt=t.opt,trigger=t.trigger,clearEvents=t.clearEvents,renderOverlay=t.renderOverlay,clearOverlays=t.clearOverlays,daySelectionMousedown=t.daySelectionMousedown,formatDate=calendar.formatDate;disableTextSelection(element.addClass("fc-grid")),coordinateGrid=new CoordinateGrid(function(rows,cols){var e,n,p;headCells.each(function(i,_e){e=$(_e),n=e.offset().left,i&&(p[1]=n),p=[n],cols[i]=p}),p[1]=n+e.outerWidth(),bodyRows.each(function(i,_e){rowCnt>i&&(e=$(_e),n=e.offset().top,i&&(p[1]=n),p=[n],rows[i]=p)}),p[1]=n+e.outerHeight()}),hoverListener=new HoverListener(coordinateGrid),colContentPositions=new HorizontalPositionCache(function(col){return bodyCellTopInners.eq(col)})}function BasicEventRenderer(){function renderEvents(events,modifiedEventId){reportEvents(events),renderDaySegs(compileSegs(events),modifiedEventId)}function clearEvents(){reportEventClear(),getDaySegmentContainer().empty()}function compileSegs(events){var i,row,j,level,k,seg,rowCnt=getRowCnt(),colCnt=getColCnt(),d1=cloneDate(t.visStart),d2=addDays(cloneDate(d1),colCnt),visEventsEnds=$.map(events,exclEndDay),segs=[];for(i=0;rowCnt>i;i++){for(row=stackSegs(sliceSegs(events,visEventsEnds,d1,d2)),j=0;j<row.length;j++)for(level=row[j],k=0;k<level.length;k++)seg=level[k],seg.row=i,seg.level=j,segs.push(seg);addDays(d1,7),addDays(d2,7)}return segs}function bindDaySeg(event,eventElement,seg){isEventDraggable(event)&&draggableDayEvent(event,eventElement),seg.isEnd&&isEventResizable(event)&&resizableDayEvent(event,eventElement,seg),eventElementHandlers(event,eventElement)}function draggableDayEvent(event,eventElement){var dayDelta,hoverListener=getHoverListener();eventElement.draggable({zIndex:9,delay:50,opacity:opt("dragOpacity"),revertDuration:opt("dragRevertDuration"),start:function(ev,ui){trigger("eventDragStart",eventElement,event,ev,ui),hideEvents(event,eventElement),hoverListener.start(function(cell,origCell,rowDelta,colDelta){eventElement.draggable("option","revert",!cell||!rowDelta&&!colDelta),clearOverlays(),cell?(dayDelta=7*rowDelta+colDelta*(opt("isRTL")?-1:1),renderDayOverlay(addDays(cloneDate(event.start),dayDelta),addDays(exclEndDay(event),dayDelta))):dayDelta=0},ev,"drag")},stop:function(ev,ui){hoverListener.stop(),clearOverlays(),trigger("eventDragStop",eventElement,event,ev,ui),dayDelta?eventDrop(this,event,dayDelta,0,event.allDay,ev,ui):(eventElement.css("filter",""),showEvents(event,eventElement))}})}var t=this;t.renderEvents=renderEvents,t.compileDaySegs=compileSegs,t.clearEvents=clearEvents,t.bindDaySeg=bindDaySeg,DayEventRenderer.call(t);var opt=t.opt,trigger=t.trigger,isEventDraggable=t.isEventDraggable,isEventResizable=t.isEventResizable,reportEvents=t.reportEvents,reportEventClear=t.reportEventClear,eventElementHandlers=t.eventElementHandlers,showEvents=t.showEvents,hideEvents=t.hideEvents,eventDrop=t.eventDrop,getDaySegmentContainer=t.getDaySegmentContainer,getHoverListener=t.getHoverListener,renderDayOverlay=t.renderDayOverlay,clearOverlays=t.clearOverlays,getRowCnt=t.getRowCnt,getColCnt=t.getColCnt,renderDaySegs=t.renderDaySegs,resizableDayEvent=t.resizableDayEvent}function AgendaWeekView(element,calendar){function render(date,delta){delta&&addDays(date,7*delta);var start=addDays(cloneDate(date),-((date.getDay()-opt("firstDay")+7)%7)),end=addDays(cloneDate(start),7),visStart=cloneDate(start),visEnd=cloneDate(end),weekends=opt("weekends");weekends||(skipWeekend(visStart),skipWeekend(visEnd,-1,!0)),t.title=formatDates(visStart,addDays(cloneDate(visEnd),-1),opt("titleFormat")),t.start=start,t.end=end,t.visStart=visStart,t.visEnd=visEnd,renderAgenda(weekends?7:5)}var t=this;t.render=render,AgendaView.call(t,element,calendar,"agendaWeek");var opt=t.opt,renderAgenda=t.renderAgenda,formatDates=calendar.formatDates}function AgendaDayView(element,calendar){function render(date,delta){delta&&(addDays(date,delta),opt("weekends")||skipWeekend(date,0>delta?-1:1));var start=cloneDate(date,!0),end=addDays(cloneDate(start),1);t.title=formatDate(date,opt("titleFormat")),t.start=t.visStart=start,t.end=t.visEnd=end,renderAgenda(1)}var t=this;t.render=render,AgendaView.call(t,element,calendar,"agendaDay");var opt=t.opt,renderAgenda=t.renderAgenda,formatDate=calendar.formatDate}function AgendaView(element,calendar,viewName){function renderAgenda(c){colCnt=c,updateOptions(),dayTable?clearEvents():buildSkeleton(),updateCells()}function updateOptions(){tm=opt("theme")?"ui":"fc",nwe=opt("weekends")?0:1,firstDay=opt("firstDay"),(rtl=opt("isRTL"))?(dis=-1,dit=colCnt-1):(dis=1,dit=0),minMinute=parseTime(opt("minTime")),maxMinute=parseTime(opt("maxTime")),colFormat=opt("columnFormat")}function buildSkeleton(){var s,i,d,maxd,minutes,headerClass=tm+"-widget-header",contentClass=tm+"-widget-content",slotNormal=opt("slotMinutes")%15==0;for(s="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+headerClass+"'>&nbsp;</th>",i=0;colCnt>i;i++)s+="<th class='fc- fc-col"+i+" "+headerClass+"'/>";for(s+="<th class='fc-agenda-gutter "+headerClass+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+headerClass+"'>&nbsp;</th>",i=0;colCnt>i;i++)s+="<td class='fc- fc-col"+i+" "+contentClass+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";for(s+="<td class='fc-agenda-gutter "+contentClass+"'>&nbsp;</td></tr></tbody></table>",dayTable=$(s).appendTo(element),dayHead=dayTable.find("thead"),dayHeadCells=dayHead.find("th").slice(1,-1),dayBody=dayTable.find("tbody"),dayBodyCells=dayBody.find("td").slice(0,-1),dayBodyCellInners=dayBodyCells.find("div.fc-day-content div"),dayBodyFirstCell=dayBodyCells.eq(0),dayBodyFirstCellStretcher=dayBodyFirstCell.find("> div"),markFirstLast(dayHead.add(dayHead.find("tr"))),markFirstLast(dayBody.add(dayBody.find("tr"))),axisFirstCells=dayHead.find("th:first"),gutterCells=dayTable.find(".fc-agenda-gutter"),slotLayer=$("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(element),opt("allDaySlot")?(daySegmentContainer=$("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(slotLayer),s="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+headerClass+" fc-agenda-axis'>"+opt("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+headerClass+" fc-agenda-gutter'>&nbsp;</th></tr></table>",allDayTable=$(s).appendTo(slotLayer),allDayRow=allDayTable.find("tr"),dayBind(allDayRow.find("td")),axisFirstCells=axisFirstCells.add(allDayTable.find("th:first")),gutterCells=gutterCells.add(allDayTable.find("th.fc-agenda-gutter")),slotLayer.append("<div class='fc-agenda-divider "+headerClass+"'><div class='fc-agenda-divider-inner'/></div>")):daySegmentContainer=$([]),slotScroller=$("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(slotLayer),slotContent=$("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(slotScroller),slotSegmentContainer=$("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(slotContent),s="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",d=zeroDate(),maxd=addMinutes(cloneDate(d),maxMinute),addMinutes(d,minMinute),slotCnt=0,i=0;maxd>d;i++)minutes=d.getMinutes(),s+="<tr class='fc-slot"+i+" "+(minutes?"fc-minor":"")+"'><th class='fc-agenda-axis "+headerClass+"'>"+(slotNormal&&minutes?"&nbsp;":formatDate(d,opt("axisFormat")))+"</th><td class='"+contentClass+"'><div style='position:relative'>&nbsp;</div></td></tr>",addMinutes(d,opt("slotMinutes")),slotCnt++;s+="</tbody></table>",slotTable=$(s).appendTo(slotContent),slotTableFirstInner=slotTable.find("div:first"),slotBind(slotTable.find("td")),axisFirstCells=axisFirstCells.add(slotTable.find("th:first"))}function updateCells(){var i,headCell,bodyCell,date,today=clearTime(new Date);for(i=0;colCnt>i;i++)date=colDate(i),headCell=dayHeadCells.eq(i),headCell.html(formatDate(date,colFormat)),bodyCell=dayBodyCells.eq(i),+date==+today?bodyCell.addClass(tm+"-state-highlight fc-today"):bodyCell.removeClass(tm+"-state-highlight fc-today"),setDayID(headCell.add(bodyCell),date)}function setHeight(height,dateChanged){height===undefined&&(height=viewHeight),viewHeight=height,slotTopCache={};var headHeight=dayBody.position().top,allDayHeight=slotScroller.position().top,bodyHeight=Math.min(height-headHeight,slotTable.height()+allDayHeight+1);dayBodyFirstCellStretcher.height(bodyHeight-vsides(dayBodyFirstCell)),slotLayer.css("top",headHeight),slotScroller.height(bodyHeight-allDayHeight-1),slotHeight=slotTableFirstInner.height()+1,dateChanged&&resetScroll()}function setWidth(width){viewWidth=width,colContentPositions.clear(),axisWidth=0,setOuterWidth(axisFirstCells.width("").each(function(i,_cell){axisWidth=Math.max(axisWidth,$(_cell).outerWidth())}),axisWidth);var slotTableWidth=slotScroller[0].clientWidth;gutterWidth=slotScroller.width()-slotTableWidth,gutterWidth?(setOuterWidth(gutterCells,gutterWidth),gutterCells.show().prev().removeClass("fc-last")):gutterCells.hide().prev().addClass("fc-last"),colWidth=Math.floor((slotTableWidth-axisWidth)/colCnt),setOuterWidth(dayHeadCells.slice(0,-1),colWidth)}function resetScroll(){function scroll(){slotScroller.scrollTop(top)}var d0=zeroDate(),scrollDate=cloneDate(d0);scrollDate.setHours(opt("firstHour"));var top=timePosition(d0,scrollDate)+1;scroll(),setTimeout(scroll,0)}function beforeHide(){savedScrollTop=slotScroller.scrollTop()}function afterShow(){slotScroller.scrollTop(savedScrollTop)}function dayBind(cells){cells.click(slotClick).mousedown(daySelectionMousedown)}function slotBind(cells){cells.click(slotClick).mousedown(slotSelectionMousedown)}function slotClick(ev){if(!opt("selectable")){var col=Math.min(colCnt-1,Math.floor((ev.pageX-dayTable.offset().left-axisWidth)/colWidth)),date=colDate(col),rowMatch=this.parentNode.className.match(/fc-slot(\d+)/);if(rowMatch){var mins=parseInt(rowMatch[1])*opt("slotMinutes"),hours=Math.floor(mins/60);date.setHours(hours),date.setMinutes(mins%60+minMinute),trigger("dayClick",dayBodyCells[col],date,!1,ev)}else trigger("dayClick",dayBodyCells[col],date,!0,ev)}}function renderDayOverlay(startDate,endDate,refreshCoordinateGrid){refreshCoordinateGrid&&coordinateGrid.build();var startCol,endCol,visStart=cloneDate(t.visStart);rtl?(startCol=dayDiff(endDate,visStart)*dis+dit+1,endCol=dayDiff(startDate,visStart)*dis+dit+1):(startCol=dayDiff(startDate,visStart),endCol=dayDiff(endDate,visStart)),startCol=Math.max(0,startCol),endCol=Math.min(colCnt,endCol),endCol>startCol&&dayBind(renderCellOverlay(0,startCol,0,endCol-1))}function renderCellOverlay(row0,col0,row1,col1){var rect=coordinateGrid.rect(row0,col0,row1,col1,slotLayer);return renderOverlay(rect,slotLayer)}function renderSlotOverlay(overlayStart,overlayEnd){for(var dayStart=cloneDate(t.visStart),dayEnd=addDays(cloneDate(dayStart),1),i=0;colCnt>i;i++){var stretchStart=new Date(Math.max(dayStart,overlayStart)),stretchEnd=new Date(Math.min(dayEnd,overlayEnd));if(stretchEnd>stretchStart){var col=i*dis+dit,rect=coordinateGrid.rect(0,col,0,col,slotContent),top=timePosition(dayStart,stretchStart),bottom=timePosition(dayStart,stretchEnd);rect.top=top,rect.height=bottom-top,slotBind(renderOverlay(rect,slotContent))}addDays(dayStart,1),addDays(dayEnd,1)}}function colContentLeft(col){return colContentPositions.left(col)}function colContentRight(col){return colContentPositions.right(col)}function dateCell(date){return{row:Math.floor(dayDiff(date,t.visStart)/7),col:dayOfWeekCol(date.getDay())}}function cellDate(cell){var d=colDate(cell.col),slotIndex=cell.row;return opt("allDaySlot")&&slotIndex--,slotIndex>=0&&addMinutes(d,minMinute+slotIndex*opt("slotMinutes")),d}function colDate(col){return addDays(cloneDate(t.visStart),col*dis+dit)}function cellIsAllDay(cell){return opt("allDaySlot")&&!cell.row}function dayOfWeekCol(dayOfWeek){return(dayOfWeek-Math.max(firstDay,nwe)+colCnt)%colCnt*dis+dit}function timePosition(day,time){if(day=cloneDate(day,!0),time<addMinutes(cloneDate(day),minMinute))return 0;if(time>=addMinutes(cloneDate(day),maxMinute))return slotTable.height();var slotMinutes=opt("slotMinutes"),minutes=60*time.getHours()+time.getMinutes()-minMinute,slotI=Math.floor(minutes/slotMinutes),slotTop=slotTopCache[slotI];return slotTop===undefined&&(slotTop=slotTopCache[slotI]=slotTable.find("tr:eq("+slotI+") td div")[0].offsetTop),Math.max(0,Math.round(slotTop-1+slotHeight*(minutes%slotMinutes/slotMinutes)))}function allDayBounds(){return{left:axisWidth,right:viewWidth-gutterWidth}}function getAllDayRow(){return allDayRow}function defaultEventEnd(event){var start=cloneDate(event.start);return event.allDay?start:addMinutes(start,opt("defaultEventMinutes"))}function defaultSelectionEnd(startDate,allDay){return allDay?cloneDate(startDate):addMinutes(cloneDate(startDate),opt("slotMinutes"))}function renderSelection(startDate,endDate,allDay){allDay?opt("allDaySlot")&&renderDayOverlay(startDate,addDays(cloneDate(endDate),1),!0):renderSlotSelection(startDate,endDate)}function renderSlotSelection(startDate,endDate){var helperOption=opt("selectHelper");if(coordinateGrid.build(),helperOption){var col=dayDiff(startDate,t.visStart)*dis+dit;if(col>=0&&colCnt>col){var rect=coordinateGrid.rect(0,col,0,col,slotContent),top=timePosition(startDate,startDate),bottom=timePosition(startDate,endDate);if(bottom>top){if(rect.top=top,rect.height=bottom-top,rect.left+=2,rect.width-=5,$.isFunction(helperOption)){var helperRes=helperOption(startDate,endDate);helperRes&&(rect.position="absolute",rect.zIndex=8,selectionHelper=$(helperRes).css(rect).appendTo(slotContent))}else rect.isStart=!0,rect.isEnd=!0,selectionHelper=$(slotSegHtml({title:"",start:startDate,end:endDate,className:["fc-select-helper"],editable:!1},rect)),selectionHelper.css("opacity",opt("dragOpacity"));selectionHelper&&(slotBind(selectionHelper),slotContent.append(selectionHelper),setOuterWidth(selectionHelper,rect.width,!0),setOuterHeight(selectionHelper,rect.height,!0))}}}else renderSlotOverlay(startDate,endDate)}function clearSelection(){clearOverlays(),selectionHelper&&(selectionHelper.remove(),selectionHelper=null)}function slotSelectionMousedown(ev){if(1==ev.which&&opt("selectable")){unselect(ev);var dates;hoverListener.start(function(cell,origCell){if(clearSelection(),cell&&cell.col==origCell.col&&!cellIsAllDay(cell)){var d1=cellDate(origCell),d2=cellDate(cell);dates=[d1,addMinutes(cloneDate(d1),opt("slotMinutes")),d2,addMinutes(cloneDate(d2),opt("slotMinutes"))].sort(cmp),renderSlotSelection(dates[0],dates[3])}else dates=null},ev),$(document).one("mouseup",function(ev){hoverListener.stop(),dates&&(+dates[0]==+dates[1]&&reportDayClick(dates[0],!1,ev),reportSelection(dates[0],dates[3],!1,ev))})}}function reportDayClick(date,allDay,ev){trigger("dayClick",dayBodyCells[dayOfWeekCol(date.getDay())],date,allDay,ev)}function dragStart(_dragElement,ev){hoverListener.start(function(cell){if(clearOverlays(),cell)if(cellIsAllDay(cell))renderCellOverlay(cell.row,cell.col,cell.row,cell.col);else{var d1=cellDate(cell),d2=addMinutes(cloneDate(d1),opt("defaultEventMinutes"));renderSlotOverlay(d1,d2)}},ev)}function dragStop(_dragElement,ev,ui){var cell=hoverListener.stop();clearOverlays(),cell&&trigger("drop",_dragElement,cellDate(cell),cellIsAllDay(cell),ev,ui)}var t=this;t.renderAgenda=renderAgenda,t.setWidth=setWidth,t.setHeight=setHeight,t.beforeHide=beforeHide,t.afterShow=afterShow,t.defaultEventEnd=defaultEventEnd,t.timePosition=timePosition,t.dayOfWeekCol=dayOfWeekCol,t.dateCell=dateCell,t.cellDate=cellDate,t.cellIsAllDay=cellIsAllDay,t.allDayRow=getAllDayRow,t.allDayBounds=allDayBounds,t.getHoverListener=function(){return hoverListener},t.colContentLeft=colContentLeft,t.colContentRight=colContentRight,t.getDaySegmentContainer=function(){return daySegmentContainer},t.getSlotSegmentContainer=function(){return slotSegmentContainer},t.getMinMinute=function(){return minMinute},t.getMaxMinute=function(){return maxMinute},t.getBodyContent=function(){return slotContent},t.getRowCnt=function(){return 1},t.getColCnt=function(){return colCnt},t.getColWidth=function(){return colWidth},t.getSlotHeight=function(){return slotHeight},t.defaultSelectionEnd=defaultSelectionEnd,t.renderDayOverlay=renderDayOverlay,t.renderSelection=renderSelection,t.clearSelection=clearSelection,t.reportDayClick=reportDayClick,t.dragStart=dragStart,t.dragStop=dragStop,View.call(t,element,calendar,viewName),OverlayManager.call(t),SelectionManager.call(t),AgendaEventRenderer.call(t);var dayTable,dayHead,dayHeadCells,dayBody,dayBodyCells,dayBodyCellInners,dayBodyFirstCell,dayBodyFirstCellStretcher,slotLayer,daySegmentContainer,allDayTable,allDayRow,slotScroller,slotContent,slotSegmentContainer,slotTable,slotTableFirstInner,axisFirstCells,gutterCells,selectionHelper,viewWidth,viewHeight,axisWidth,colWidth,gutterWidth,slotHeight,savedScrollTop,colCnt,slotCnt,coordinateGrid,hoverListener,colContentPositions,tm,firstDay,nwe,rtl,dis,dit,minMinute,maxMinute,colFormat,opt=t.opt,trigger=t.trigger,clearEvents=t.clearEvents,renderOverlay=t.renderOverlay,clearOverlays=t.clearOverlays,reportSelection=t.reportSelection,unselect=t.unselect,daySelectionMousedown=t.daySelectionMousedown,slotSegHtml=t.slotSegHtml,formatDate=calendar.formatDate,slotTopCache={};disableTextSelection(element.addClass("fc-agenda")),coordinateGrid=new CoordinateGrid(function(rows,cols){function constrain(n){return Math.max(slotScrollerTop,Math.min(slotScrollerBottom,n))}var e,n,p;dayHeadCells.each(function(i,_e){e=$(_e),n=e.offset().left,i&&(p[1]=n),p=[n],cols[i]=p}),p[1]=n+e.outerWidth(),opt("allDaySlot")&&(e=allDayRow,n=e.offset().top,rows[0]=[n,n+e.outerHeight()]);for(var slotTableTop=slotContent.offset().top,slotScrollerTop=slotScroller.offset().top,slotScrollerBottom=slotScrollerTop+slotScroller.outerHeight(),i=0;slotCnt>i;i++)rows.push([constrain(slotTableTop+slotHeight*i),constrain(slotTableTop+slotHeight*(i+1))])}),hoverListener=new HoverListener(coordinateGrid),colContentPositions=new HorizontalPositionCache(function(col){return dayBodyCellInners.eq(col)})}function AgendaEventRenderer(){function renderEvents(events,modifiedEventId){reportEvents(events);var i,len=events.length,dayEvents=[],slotEvents=[];for(i=0;len>i;i++)events[i].allDay?dayEvents.push(events[i]):slotEvents.push(events[i]);opt("allDaySlot")&&(renderDaySegs(compileDaySegs(dayEvents),modifiedEventId),setHeight()),renderSlotSegs(compileSlotSegs(slotEvents),modifiedEventId)}function clearEvents(){reportEventClear(),getDaySegmentContainer().empty(),getSlotSegmentContainer().empty()}function compileDaySegs(events){var i,level,j,seg,levels=stackSegs(sliceSegs(events,$.map(events,exclEndDay),t.visStart,t.visEnd)),levelCnt=levels.length,segs=[];for(i=0;levelCnt>i;i++)for(level=levels[i],j=0;j<level.length;j++)seg=level[j],seg.row=0,seg.level=i,segs.push(seg);return segs}function compileSlotSegs(events){var i,col,j,level,k,seg,colCnt=getColCnt(),minMinute=getMinMinute(),maxMinute=getMaxMinute(),d=addMinutes(cloneDate(t.visStart),minMinute),visEventEnds=$.map(events,slotEventEnd),segs=[];for(i=0;colCnt>i;i++){for(col=stackSegs(sliceSegs(events,visEventEnds,d,addMinutes(cloneDate(d),maxMinute-minMinute))),countForwardSegs(col),j=0;j<col.length;j++)for(level=col[j],k=0;k<level.length;k++)seg=level[k],seg.col=i,seg.level=j,segs.push(seg);addDays(d,1,!0)}return segs}function slotEventEnd(event){return event.end?cloneDate(event.end):addMinutes(cloneDate(event.start),opt("defaultEventMinutes"))}function renderSlotSegs(segs,modifiedEventId){var i,seg,event,top,bottom,colI,levelI,forward,leftmost,availWidth,outerWidth,left,eventElements,eventElement,triggerRes,key,val,contentElement,height,rtl,dis,dit,segCnt=segs.length,html="",vsideCache={},hsideCache={},slotSegmentContainer=getSlotSegmentContainer(),colCnt=getColCnt();for((rtl=opt("isRTL"))?(dis=-1,dit=colCnt-1):(dis=1,dit=0),i=0;segCnt>i;i++)seg=segs[i],event=seg.event,top=timePosition(seg.start,seg.start),bottom=timePosition(seg.start,seg.end),colI=seg.col,levelI=seg.level,forward=seg.forward||0,leftmost=colContentLeft(colI*dis+dit),availWidth=colContentRight(colI*dis+dit)-leftmost,availWidth=Math.min(availWidth-6,.95*availWidth),outerWidth=levelI?availWidth/(levelI+forward+1):forward?2*(availWidth/(forward+1)-6):availWidth,left=leftmost+availWidth/(levelI+forward+1)*levelI*dis+(rtl?availWidth-outerWidth:0),seg.top=top,seg.left=left,seg.outerWidth=outerWidth,seg.outerHeight=bottom-top,html+=slotSegHtml(event,seg);
for(slotSegmentContainer[0].innerHTML=html,eventElements=slotSegmentContainer.children(),i=0;segCnt>i;i++)seg=segs[i],event=seg.event,eventElement=$(eventElements[i]),triggerRes=trigger("eventRender",event,event,eventElement),triggerRes===!1?eventElement.remove():(triggerRes&&triggerRes!==!0&&(eventElement.remove(),eventElement=$(triggerRes).css({position:"absolute",top:seg.top,left:seg.left}).appendTo(slotSegmentContainer)),seg.element=eventElement,event._id===modifiedEventId?bindSlotSeg(event,eventElement,seg):eventElement[0]._fci=i,reportEventElement(event,eventElement));for(lazySegBind(slotSegmentContainer,segs,bindSlotSeg),i=0;segCnt>i;i++)seg=segs[i],(eventElement=seg.element)&&(val=vsideCache[key=seg.key=cssKey(eventElement[0])],seg.vsides=val===undefined?vsideCache[key]=vsides(eventElement,!0):val,val=hsideCache[key],seg.hsides=val===undefined?hsideCache[key]=hsides(eventElement,!0):val,contentElement=eventElement.find("div.fc-event-content"),contentElement.length&&(seg.contentTop=contentElement[0].offsetTop));for(i=0;segCnt>i;i++)seg=segs[i],(eventElement=seg.element)&&(eventElement[0].style.width=Math.max(0,seg.outerWidth-seg.hsides)+"px",height=Math.max(0,seg.outerHeight-seg.vsides),eventElement[0].style.height=height+"px",event=seg.event,seg.contentTop!==undefined&&height-seg.contentTop<10&&(eventElement.find("div.fc-event-time").text(formatDate(event.start,opt("timeFormat"))+" - "+event.title),eventElement.find("div.fc-event-title").remove()),trigger("eventAfterRender",event,event,eventElement))}function slotSegHtml(event,seg){var html="<",url=event.url,skinCss=getSkinCss(event,opt),skinCssAttr=skinCss?" style='"+skinCss+"'":"",classes=["fc-event","fc-event-skin","fc-event-vert"];return isEventDraggable(event)&&classes.push("fc-event-draggable"),seg.isStart&&classes.push("fc-corner-top"),seg.isEnd&&classes.push("fc-corner-bottom"),classes=classes.concat(event.className),event.source&&(classes=classes.concat(event.source.className||[])),html+=url?"a href='"+htmlEscape(event.url)+"'":"div",html+=" class='"+classes.join(" ")+"' style='position:absolute;z-index:8;top:"+seg.top+"px;left:"+seg.left+"px;"+skinCss+"'><div class='fc-event-inner fc-event-skin'"+skinCssAttr+"><div class='fc-event-head fc-event-skin'"+skinCssAttr+"><div class='fc-event-time'>"+htmlEscape(formatDates(event.start,event.end,opt("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+htmlEscape(event.title)+"</div></div><div class='fc-event-bg'></div></div>",seg.isEnd&&isEventResizable(event)&&(html+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),html+="</"+(url?"a":"div")+">"}function bindDaySeg(event,eventElement,seg){isEventDraggable(event)&&draggableDayEvent(event,eventElement,seg.isStart),seg.isEnd&&isEventResizable(event)&&resizableDayEvent(event,eventElement,seg),eventElementHandlers(event,eventElement)}function bindSlotSeg(event,eventElement,seg){var timeElement=eventElement.find("div.fc-event-time");isEventDraggable(event)&&draggableSlotEvent(event,eventElement,timeElement),seg.isEnd&&isEventResizable(event)&&resizableSlotEvent(event,eventElement,timeElement),eventElementHandlers(event,eventElement)}function draggableDayEvent(event,eventElement,isStart){function resetElement(){allDay||(eventElement.width(origWidth).height("").draggable("option","grid",null),allDay=!0)}var origWidth,revert,dayDelta,allDay=!0,dis=opt("isRTL")?-1:1,hoverListener=getHoverListener(),colWidth=getColWidth(),slotHeight=getSlotHeight(),minMinute=getMinMinute();eventElement.draggable({zIndex:9,opacity:opt("dragOpacity","month"),revertDuration:opt("dragRevertDuration"),start:function(ev,ui){trigger("eventDragStart",eventElement,event,ev,ui),hideEvents(event,eventElement),origWidth=eventElement.width(),hoverListener.start(function(cell,origCell,rowDelta,colDelta){clearOverlays(),cell?(revert=!1,dayDelta=colDelta*dis,cell.row?isStart?allDay&&(eventElement.width(colWidth-10),setOuterHeight(eventElement,slotHeight*Math.round((event.end?(event.end-event.start)/MINUTE_MS:opt("defaultEventMinutes"))/opt("slotMinutes"))),eventElement.draggable("option","grid",[colWidth,1]),allDay=!1):revert=!0:(renderDayOverlay(addDays(cloneDate(event.start),dayDelta),addDays(exclEndDay(event),dayDelta)),resetElement()),revert=revert||allDay&&!dayDelta):(resetElement(),revert=!0),eventElement.draggable("option","revert",revert)},ev,"drag")},stop:function(ev,ui){if(hoverListener.stop(),clearOverlays(),trigger("eventDragStop",eventElement,event,ev,ui),revert)resetElement(),eventElement.css("filter",""),showEvents(event,eventElement);else{var minuteDelta=0;allDay||(minuteDelta=Math.round((eventElement.offset().top-getBodyContent().offset().top)/slotHeight)*opt("slotMinutes")+minMinute-(60*event.start.getHours()+event.start.getMinutes())),eventDrop(this,event,dayDelta,minuteDelta,allDay,ev,ui)}}})}function draggableSlotEvent(event,eventElement,timeElement){function updateTimeText(minuteDelta){var newEnd,newStart=addMinutes(cloneDate(event.start),minuteDelta);event.end&&(newEnd=addMinutes(cloneDate(event.end),minuteDelta)),timeElement.text(formatDates(newStart,newEnd,opt("timeFormat")))}function resetElement(){allDay&&(timeElement.css("display",""),eventElement.draggable("option","grid",[colWidth,slotHeight]),allDay=!1)}var origPosition,dayDelta,minuteDelta,prevMinuteDelta,allDay=!1,dis=opt("isRTL")?-1:1,hoverListener=getHoverListener(),colCnt=getColCnt(),colWidth=getColWidth(),slotHeight=getSlotHeight();eventElement.draggable({zIndex:9,scroll:!1,grid:[colWidth,slotHeight],axis:1==colCnt?"y":!1,opacity:opt("dragOpacity"),revertDuration:opt("dragRevertDuration"),start:function(ev,ui){trigger("eventDragStart",eventElement,event,ev,ui),hideEvents(event,eventElement),origPosition=eventElement.position(),minuteDelta=prevMinuteDelta=0,hoverListener.start(function(cell,origCell,rowDelta,colDelta){eventElement.draggable("option","revert",!cell),clearOverlays(),cell&&(dayDelta=colDelta*dis,opt("allDaySlot")&&!cell.row?(allDay||(allDay=!0,timeElement.hide(),eventElement.draggable("option","grid",null)),renderDayOverlay(addDays(cloneDate(event.start),dayDelta),addDays(exclEndDay(event),dayDelta))):resetElement())},ev,"drag")},drag:function(ev,ui){minuteDelta=Math.round((ui.position.top-origPosition.top)/slotHeight)*opt("slotMinutes"),minuteDelta!=prevMinuteDelta&&(allDay||updateTimeText(minuteDelta),prevMinuteDelta=minuteDelta)},stop:function(ev,ui){var cell=hoverListener.stop();clearOverlays(),trigger("eventDragStop",eventElement,event,ev,ui),cell&&(dayDelta||minuteDelta||allDay)?eventDrop(this,event,dayDelta,allDay?0:minuteDelta,allDay,ev,ui):(resetElement(),eventElement.css("filter",""),eventElement.css(origPosition),updateTimeText(0),showEvents(event,eventElement))}})}function resizableSlotEvent(event,eventElement,timeElement){var slotDelta,prevSlotDelta,slotHeight=getSlotHeight();eventElement.resizable({handles:{s:"div.ui-resizable-s"},grid:slotHeight,start:function(ev,ui){slotDelta=prevSlotDelta=0,hideEvents(event,eventElement),eventElement.css("z-index",9),trigger("eventResizeStart",this,event,ev,ui)},resize:function(ev,ui){slotDelta=Math.round((Math.max(slotHeight,eventElement.height())-ui.originalSize.height)/slotHeight),slotDelta!=prevSlotDelta&&(timeElement.text(formatDates(event.start,slotDelta||event.end?addMinutes(eventEnd(event),opt("slotMinutes")*slotDelta):null,opt("timeFormat"))),prevSlotDelta=slotDelta)},stop:function(ev,ui){trigger("eventResizeStop",this,event,ev,ui),slotDelta?eventResize(this,event,0,opt("slotMinutes")*slotDelta,ev,ui):(eventElement.css("z-index",8),showEvents(event,eventElement))}})}var t=this;t.renderEvents=renderEvents,t.compileDaySegs=compileDaySegs,t.clearEvents=clearEvents,t.slotSegHtml=slotSegHtml,t.bindDaySeg=bindDaySeg,DayEventRenderer.call(t);var opt=t.opt,trigger=t.trigger,isEventDraggable=t.isEventDraggable,isEventResizable=t.isEventResizable,eventEnd=t.eventEnd,reportEvents=t.reportEvents,reportEventClear=t.reportEventClear,eventElementHandlers=t.eventElementHandlers,setHeight=t.setHeight,getDaySegmentContainer=t.getDaySegmentContainer,getSlotSegmentContainer=t.getSlotSegmentContainer,getHoverListener=t.getHoverListener,getMaxMinute=t.getMaxMinute,getMinMinute=t.getMinMinute,timePosition=t.timePosition,colContentLeft=t.colContentLeft,colContentRight=t.colContentRight,renderDaySegs=t.renderDaySegs,resizableDayEvent=t.resizableDayEvent,getColCnt=t.getColCnt,getColWidth=t.getColWidth,getSlotHeight=t.getSlotHeight,getBodyContent=t.getBodyContent,reportEventElement=t.reportEventElement,showEvents=t.showEvents,hideEvents=t.hideEvents,eventDrop=t.eventDrop,eventResize=t.eventResize,renderDayOverlay=t.renderDayOverlay,clearOverlays=t.clearOverlays,calendar=t.calendar,formatDate=calendar.formatDate,formatDates=calendar.formatDates}function countForwardSegs(levels){var i,j,k,level,segForward,segBack;for(i=levels.length-1;i>0;i--)for(level=levels[i],j=0;j<level.length;j++)for(segForward=level[j],k=0;k<levels[i-1].length;k++)segBack=levels[i-1][k],segsCollide(segForward,segBack)&&(segBack.forward=Math.max(segBack.forward||0,(segForward.forward||0)+1))}function View(element,calendar,viewName){function opt(name,viewNameOverride){var v=options[name];return"object"==typeof v?smartProperty(v,viewNameOverride||viewName):v}function trigger(name,thisObj){return calendar.trigger.apply(calendar,[name,thisObj||t].concat(Array.prototype.slice.call(arguments,2),[t]))}function isEventDraggable(event){return isEventEditable(event)&&!opt("disableDragging")}function isEventResizable(event){return isEventEditable(event)&&!opt("disableResizing")}function isEventEditable(event){return firstDefined(event.editable,(event.source||{}).editable,opt("editable"))}function reportEvents(events){eventsByID={};var i,event,len=events.length;for(i=0;len>i;i++)event=events[i],eventsByID[event._id]?eventsByID[event._id].push(event):eventsByID[event._id]=[event]}function eventEnd(event){return event.end?cloneDate(event.end):defaultEventEnd(event)}function reportEventElement(event,element){eventElements.push(element),eventElementsByID[event._id]?eventElementsByID[event._id].push(element):eventElementsByID[event._id]=[element]}function reportEventClear(){eventElements=[],eventElementsByID={}}function eventElementHandlers(event,eventElement){eventElement.click(function(ev){return eventElement.hasClass("ui-draggable-dragging")||eventElement.hasClass("ui-resizable-resizing")?void 0:trigger("eventClick",this,event,ev)}).hover(function(ev){trigger("eventMouseover",this,event,ev)},function(ev){trigger("eventMouseout",this,event,ev)})}function showEvents(event,exceptElement){eachEventElement(event,exceptElement,"show")}function hideEvents(event,exceptElement){eachEventElement(event,exceptElement,"hide")}function eachEventElement(event,exceptElement,funcName){var i,elements=eventElementsByID[event._id],len=elements.length;for(i=0;len>i;i++)exceptElement&&elements[i][0]==exceptElement[0]||elements[i][funcName]()}function eventDrop(e,event,dayDelta,minuteDelta,allDay,ev,ui){var oldAllDay=event.allDay,eventId=event._id;moveEvents(eventsByID[eventId],dayDelta,minuteDelta,allDay),trigger("eventDrop",e,event,dayDelta,minuteDelta,allDay,function(){moveEvents(eventsByID[eventId],-dayDelta,-minuteDelta,oldAllDay),reportEventChange(eventId)},ev,ui),reportEventChange(eventId)}function eventResize(e,event,dayDelta,minuteDelta,ev,ui){var eventId=event._id;elongateEvents(eventsByID[eventId],dayDelta,minuteDelta),trigger("eventResize",e,event,dayDelta,minuteDelta,function(){elongateEvents(eventsByID[eventId],-dayDelta,-minuteDelta),reportEventChange(eventId)},ev,ui),reportEventChange(eventId)}function moveEvents(events,dayDelta,minuteDelta,allDay){minuteDelta=minuteDelta||0;for(var e,len=events.length,i=0;len>i;i++)e=events[i],allDay!==undefined&&(e.allDay=allDay),addMinutes(addDays(e.start,dayDelta,!0),minuteDelta),e.end&&(e.end=addMinutes(addDays(e.end,dayDelta,!0),minuteDelta)),normalizeEvent(e,options)}function elongateEvents(events,dayDelta,minuteDelta){minuteDelta=minuteDelta||0;for(var e,len=events.length,i=0;len>i;i++)e=events[i],e.end=addMinutes(addDays(eventEnd(e),dayDelta,!0),minuteDelta),normalizeEvent(e,options)}var t=this;t.element=element,t.calendar=calendar,t.name=viewName,t.opt=opt,t.trigger=trigger,t.isEventDraggable=isEventDraggable,t.isEventResizable=isEventResizable,t.reportEvents=reportEvents,t.eventEnd=eventEnd,t.reportEventElement=reportEventElement,t.reportEventClear=reportEventClear,t.eventElementHandlers=eventElementHandlers,t.showEvents=showEvents,t.hideEvents=hideEvents,t.eventDrop=eventDrop,t.eventResize=eventResize;var defaultEventEnd=t.defaultEventEnd,normalizeEvent=calendar.normalizeEvent,reportEventChange=calendar.reportEventChange,eventsByID={},eventElements=[],eventElementsByID={},options=calendar.options}function DayEventRenderer(){function renderDaySegs(segs,modifiedEventId){var rowDivs,rowI,levelI,colHeights,j,seg,top,k,segmentContainer=getDaySegmentContainer(),rowCnt=getRowCnt(),colCnt=getColCnt(),i=0,segCnt=segs.length;for(segmentContainer[0].innerHTML=daySegHTML(segs),daySegElementResolve(segs,segmentContainer.children()),daySegElementReport(segs),daySegHandlers(segs,segmentContainer,modifiedEventId),daySegCalcHSides(segs),daySegSetWidths(segs),daySegCalcHeights(segs),rowDivs=getRowDivs(),rowI=0;rowCnt>rowI;rowI++){for(levelI=0,colHeights=[],j=0;colCnt>j;j++)colHeights[j]=0;for(;segCnt>i&&(seg=segs[i]).row==rowI;){for(top=arrayMax(colHeights.slice(seg.startCol,seg.endCol)),seg.top=top,top+=seg.outerHeight,k=seg.startCol;k<seg.endCol;k++)colHeights[k]=top;i++}rowDivs[rowI].height(arrayMax(colHeights))}daySegSetTops(segs,getRowTops(rowDivs))}function renderTempDaySegs(segs,adjustRow,adjustTop){var elements,i,element,tempContainer=$("<div/>"),segmentContainer=getDaySegmentContainer(),segCnt=segs.length;for(tempContainer[0].innerHTML=daySegHTML(segs),elements=tempContainer.children(),segmentContainer.append(elements),daySegElementResolve(segs,elements),daySegCalcHSides(segs),daySegSetWidths(segs),daySegCalcHeights(segs),daySegSetTops(segs,getRowTops(getRowDivs())),elements=[],i=0;segCnt>i;i++)element=segs[i].element,element&&(segs[i].row===adjustRow&&element.css("top",adjustTop),elements.push(element[0]));return $(elements)}function daySegHTML(segs){var i,seg,event,url,classes,leftCol,rightCol,left,right,skinCss,rtl=opt("isRTL"),segCnt=segs.length,bounds=allDayBounds(),minLeft=bounds.left,maxLeft=bounds.right,html="";for(i=0;segCnt>i;i++)seg=segs[i],event=seg.event,classes=["fc-event","fc-event-skin","fc-event-hori"],isEventDraggable(event)&&classes.push("fc-event-draggable"),rtl?(seg.isStart&&classes.push("fc-corner-right"),seg.isEnd&&classes.push("fc-corner-left"),leftCol=dayOfWeekCol(seg.end.getDay()-1),rightCol=dayOfWeekCol(seg.start.getDay()),left=seg.isEnd?colContentLeft(leftCol):minLeft,right=seg.isStart?colContentRight(rightCol):maxLeft):(seg.isStart&&classes.push("fc-corner-left"),seg.isEnd&&classes.push("fc-corner-right"),leftCol=dayOfWeekCol(seg.start.getDay()),rightCol=dayOfWeekCol(seg.end.getDay()-1),left=seg.isStart?colContentLeft(leftCol):minLeft,right=seg.isEnd?colContentRight(rightCol):maxLeft),classes=classes.concat(event.className),event.source&&(classes=classes.concat(event.source.className||[])),url=event.url,skinCss=getSkinCss(event,opt),html+=url?"<a href='"+htmlEscape(url)+"'":"<div",html+=" class='"+classes.join(" ")+"' style='position:absolute;z-index:8;left:"+left+"px;"+skinCss+"'><div class='fc-event-inner fc-event-skin'"+(skinCss?" style='"+skinCss+"'":"")+">",!event.allDay&&seg.isStart&&(html+="<span class='fc-event-time'>"+htmlEscape(formatDates(event.start,event.end,opt("timeFormat")))+"</span>"),html+="<span class='fc-event-title'>"+htmlEscape(event.title)+"</span></div>",seg.isEnd&&isEventResizable(event)&&(html+="<div class='ui-resizable-handle ui-resizable-"+(rtl?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),html+="</"+(url?"a":"div")+">",seg.left=left,seg.outerWidth=right-left,seg.startCol=leftCol,seg.endCol=rightCol+1;return html}function daySegElementResolve(segs,elements){var i,seg,event,element,triggerRes,segCnt=segs.length;for(i=0;segCnt>i;i++)seg=segs[i],event=seg.event,element=$(elements[i]),triggerRes=trigger("eventRender",event,event,element),triggerRes===!1?element.remove():(triggerRes&&triggerRes!==!0&&(triggerRes=$(triggerRes).css({position:"absolute",left:seg.left}),element.replaceWith(triggerRes),element=triggerRes),seg.element=element)}function daySegElementReport(segs){var i,seg,element,segCnt=segs.length;for(i=0;segCnt>i;i++)seg=segs[i],element=seg.element,element&&reportEventElement(seg.event,element)}function daySegHandlers(segs,segmentContainer,modifiedEventId){var i,seg,element,event,segCnt=segs.length;for(i=0;segCnt>i;i++)seg=segs[i],element=seg.element,element&&(event=seg.event,event._id===modifiedEventId?bindDaySeg(event,element,seg):element[0]._fci=i);lazySegBind(segmentContainer,segs,bindDaySeg)}function daySegCalcHSides(segs){var i,seg,element,key,val,segCnt=segs.length,hsideCache={};for(i=0;segCnt>i;i++)seg=segs[i],element=seg.element,element&&(key=seg.key=cssKey(element[0]),val=hsideCache[key],val===undefined&&(val=hsideCache[key]=hsides(element,!0)),seg.hsides=val)}function daySegSetWidths(segs){var i,seg,element,segCnt=segs.length;for(i=0;segCnt>i;i++)seg=segs[i],element=seg.element,element&&(element[0].style.width=Math.max(0,seg.outerWidth-seg.hsides)+"px")}function daySegCalcHeights(segs){var i,seg,element,key,val,segCnt=segs.length,vmarginCache={};for(i=0;segCnt>i;i++)seg=segs[i],element=seg.element,element&&(key=seg.key,val=vmarginCache[key],val===undefined&&(val=vmarginCache[key]=vmargins(element)),seg.outerHeight=element[0].offsetHeight+val)}function getRowDivs(){var i,rowCnt=getRowCnt(),rowDivs=[];for(i=0;rowCnt>i;i++)rowDivs[i]=allDayRow(i).find("td:first div.fc-day-content > div");return rowDivs}function getRowTops(rowDivs){var i,rowCnt=rowDivs.length,tops=[];for(i=0;rowCnt>i;i++)tops[i]=rowDivs[i][0].offsetTop;return tops}function daySegSetTops(segs,rowTops){var i,seg,element,event,segCnt=segs.length;for(i=0;segCnt>i;i++)seg=segs[i],element=seg.element,element&&(element[0].style.top=rowTops[seg.row]+(seg.top||0)+"px",event=seg.event,trigger("eventAfterRender",event,event,element))}function resizableDayEvent(event,element,seg){var rtl=opt("isRTL"),direction=rtl?"w":"e",handle=element.find("div.ui-resizable-"+direction),isResizing=!1;disableTextSelection(element),element.mousedown(function(ev){ev.preventDefault()}).click(function(ev){isResizing&&(ev.preventDefault(),ev.stopImmediatePropagation())}),handle.mousedown(function(ev){function mouseup(ev){trigger("eventResizeStop",this,event,ev),$("body").css("cursor",""),hoverListener.stop(),clearOverlays(),dayDelta&&eventResize(this,event,dayDelta,0,ev),setTimeout(function(){isResizing=!1},0)}if(1==ev.which){isResizing=!0;var dayDelta,helpers,hoverListener=t.getHoverListener(),rowCnt=getRowCnt(),colCnt=getColCnt(),dis=rtl?-1:1,dit=rtl?colCnt-1:0,elementTop=element.css("top"),eventCopy=$.extend({},event),minCell=dateCell(event.start);clearSelection(),$("body").css("cursor",direction+"-resize").one("mouseup",mouseup),trigger("eventResizeStart",this,event,ev),hoverListener.start(function(cell,origCell){if(cell){var r=Math.max(minCell.row,cell.row),c=cell.col;1==rowCnt&&(r=0),r==minCell.row&&(c=rtl?Math.min(minCell.col,c):Math.max(minCell.col,c)),dayDelta=7*r+c*dis+dit-(7*origCell.row+origCell.col*dis+dit);var newEnd=addDays(eventEnd(event),dayDelta,!0);if(dayDelta){eventCopy.end=newEnd;var oldHelpers=helpers;helpers=renderTempDaySegs(compileDaySegs([eventCopy]),seg.row,elementTop),helpers.find("*").css("cursor",direction+"-resize"),oldHelpers&&oldHelpers.remove(),hideEvents(event)}else helpers&&(showEvents(event),helpers.remove(),helpers=null);clearOverlays(),renderDayOverlay(event.start,addDays(cloneDate(newEnd),1))}},ev)}})}var t=this;t.renderDaySegs=renderDaySegs,t.resizableDayEvent=resizableDayEvent;var opt=t.opt,trigger=t.trigger,isEventDraggable=t.isEventDraggable,isEventResizable=t.isEventResizable,eventEnd=t.eventEnd,reportEventElement=t.reportEventElement,showEvents=t.showEvents,hideEvents=t.hideEvents,eventResize=t.eventResize,getRowCnt=t.getRowCnt,getColCnt=t.getColCnt,allDayRow=(t.getColWidth,t.allDayRow),allDayBounds=t.allDayBounds,colContentLeft=t.colContentLeft,colContentRight=t.colContentRight,dayOfWeekCol=t.dayOfWeekCol,dateCell=t.dateCell,compileDaySegs=t.compileDaySegs,getDaySegmentContainer=t.getDaySegmentContainer,bindDaySeg=t.bindDaySeg,formatDates=t.calendar.formatDates,renderDayOverlay=t.renderDayOverlay,clearOverlays=t.clearOverlays,clearSelection=t.clearSelection}function SelectionManager(){function select(startDate,endDate,allDay){unselect(),endDate||(endDate=defaultSelectionEnd(startDate,allDay)),renderSelection(startDate,endDate,allDay),reportSelection(startDate,endDate,allDay)}function unselect(ev){selected&&(selected=!1,clearSelection(),trigger("unselect",null,ev))}function reportSelection(startDate,endDate,allDay,ev){selected=!0,trigger("select",null,startDate,endDate,allDay,ev)}function daySelectionMousedown(ev){var cellDate=t.cellDate,cellIsAllDay=t.cellIsAllDay,hoverListener=t.getHoverListener(),reportDayClick=t.reportDayClick;if(1==ev.which&&opt("selectable")){unselect(ev);var dates;hoverListener.start(function(cell,origCell){clearSelection(),cell&&cellIsAllDay(cell)?(dates=[cellDate(origCell),cellDate(cell)].sort(cmp),renderSelection(dates[0],dates[1],!0)):dates=null},ev),$(document).one("mouseup",function(ev){hoverListener.stop(),dates&&(+dates[0]==+dates[1]&&reportDayClick(dates[0],!0,ev),reportSelection(dates[0],dates[1],!0,ev))})}}var t=this;t.select=select,t.unselect=unselect,t.reportSelection=reportSelection,t.daySelectionMousedown=daySelectionMousedown;var opt=t.opt,trigger=t.trigger,defaultSelectionEnd=t.defaultSelectionEnd,renderSelection=t.renderSelection,clearSelection=t.clearSelection,selected=!1;opt("selectable")&&opt("unselectAuto")&&$(document).mousedown(function(ev){var ignore=opt("unselectCancel");ignore&&$(ev.target).parents(ignore).length||unselect(ev)})}function OverlayManager(){function renderOverlay(rect,parent){var e=unusedOverlays.shift();return e||(e=$("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),e[0].parentNode!=parent[0]&&e.appendTo(parent),usedOverlays.push(e.css(rect).show()),e}function clearOverlays(){for(var e;e=usedOverlays.shift();)unusedOverlays.push(e.hide().unbind())}var t=this;t.renderOverlay=renderOverlay,t.clearOverlays=clearOverlays;var usedOverlays=[],unusedOverlays=[]}function CoordinateGrid(buildFunc){var rows,cols,t=this;t.build=function(){rows=[],cols=[],buildFunc(rows,cols)},t.cell=function(x,y){var i,rowCnt=rows.length,colCnt=cols.length,r=-1,c=-1;for(i=0;rowCnt>i;i++)if(y>=rows[i][0]&&y<rows[i][1]){r=i;break}for(i=0;colCnt>i;i++)if(x>=cols[i][0]&&x<cols[i][1]){c=i;break}return r>=0&&c>=0?{row:r,col:c}:null},t.rect=function(row0,col0,row1,col1,originElement){var origin=originElement.offset();return{top:rows[row0][0]-origin.top,left:cols[col0][0]-origin.left,width:cols[col1][1]-cols[col0][0],height:rows[row1][1]-rows[row0][0]}}}function HoverListener(coordinateGrid){function mouse(ev){var newCell=coordinateGrid.cell(ev.pageX,ev.pageY);(!newCell!=!cell||newCell&&(newCell.row!=cell.row||newCell.col!=cell.col))&&(newCell?(firstCell||(firstCell=newCell),change(newCell,firstCell,newCell.row-firstCell.row,newCell.col-firstCell.col)):change(newCell,firstCell),cell=newCell)}var bindType,change,firstCell,cell,t=this;t.start=function(_change,ev,_bindType){change=_change,firstCell=cell=null,coordinateGrid.build(),mouse(ev),bindType=_bindType||"mousemove",$(document).bind(bindType,mouse)},t.stop=function(){return $(document).unbind(bindType,mouse),cell}}function HorizontalPositionCache(getElement){function e(i){return elements[i]=elements[i]||getElement(i)}var t=this,elements={},lefts={},rights={};t.left=function(i){return lefts[i]=lefts[i]===undefined?e(i).position().left:lefts[i]},t.right=function(i){return rights[i]=rights[i]===undefined?t.left(i)+e(i).width():rights[i]},t.clear=function(){elements={},lefts={},rights={}}}var defaults={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},fc=$.fullCalendar={version:"1.5.2"},fcViews=fc.views={};$.fn.fullCalendar=function(options){if("string"==typeof options){var res,args=Array.prototype.slice.call(arguments,1);return this.each(function(){var calendar=$.data(this,"fullCalendar");if(calendar&&$.isFunction(calendar[options])){var r=calendar[options].apply(calendar,args);res===undefined&&(res=r),"destroy"==options&&$.removeData(this,"fullCalendar")}}),res!==undefined?res:this}var eventSources=options.eventSources||[];return delete options.eventSources,options.events&&(eventSources.push(options.events),delete options.events),options=$.extend(!0,{},defaults,options.isRTL||options.isRTL===undefined&&defaults.isRTL?rtlDefaults:{},options),this.each(function(i,_element){var element=$(_element),calendar=new Calendar(element,options,eventSources);element.data("fullCalendar",calendar),calendar.render()}),this},fc.sourceNormalizers=[],fc.sourceFetchers=[];var ajaxDefaults={dataType:"json",cache:!1},eventGUID=1;fc.addDays=addDays,fc.cloneDate=cloneDate,fc.parseDate=parseDate,fc.parseISO8601=parseISO8601,fc.parseTime=parseTime,fc.formatDate=formatDate,fc.formatDates=formatDates;var dayIDs=["sun","mon","tue","wed","thu","fri","sat"],DAY_MS=864e5,HOUR_MS=36e5,MINUTE_MS=6e4,dateFormatters={s:function(d){return d.getSeconds()},ss:function(d){return zeroPad(d.getSeconds())},m:function(d){return d.getMinutes()},mm:function(d){return zeroPad(d.getMinutes())},h:function(d){return d.getHours()%12||12},hh:function(d){return zeroPad(d.getHours()%12||12)},H:function(d){return d.getHours()},HH:function(d){return zeroPad(d.getHours())},d:function(d){return d.getDate()},dd:function(d){return zeroPad(d.getDate())},ddd:function(d,o){return o.dayNamesShort[d.getDay()]},dddd:function(d,o){return o.dayNames[d.getDay()]},M:function(d){return d.getMonth()+1},MM:function(d){return zeroPad(d.getMonth()+1)},MMM:function(d,o){return o.monthNamesShort[d.getMonth()]},MMMM:function(d,o){return o.monthNames[d.getMonth()]},yy:function(d){return(d.getFullYear()+"").substring(2)},yyyy:function(d){return d.getFullYear()},t:function(d){return d.getHours()<12?"a":"p"},tt:function(d){return d.getHours()<12?"am":"pm"},T:function(d){return d.getHours()<12?"A":"P"},TT:function(d){return d.getHours()<12?"AM":"PM"},u:function(d){return formatDate(d,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(d){var date=d.getDate();return date>10&&20>date?"th":["st","nd","rd"][date%10-1]||"th"}};fc.applyAll=applyAll,fcViews.month=MonthView,fcViews.basicWeek=BasicWeekView,fcViews.basicDay=BasicDayView,setDefaults({weekMode:"fixed"}),fcViews.agendaWeek=AgendaWeekView,fcViews.agendaDay=AgendaDayView,setDefaults({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}(jQuery),this.JSON||(JSON=function(){function f(n){return 10>n?"0"+n:n}function quote(string){return escapeable.lastIndex=0,escapeable.test(string)?'"'+string.replace(escapeable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+(+a.charCodeAt(0)).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,partial,mind=gap,value=holder[key];switch(value&&"object"==typeof value&&"function"==typeof value.toJSON&&(value=value.toJSON(key)),"function"==typeof rep&&(value=rep.call(holder,key,value)),typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"number"==typeof value.length&&!value.propertyIsEnumerable("length")){for(length=value.length,i=0;length>i;i+=1)partial[i]=str(i,value)||"null";return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&"object"==typeof rep)for(length=rep.length,i=0;length>i;i+=1)k=rep[i],"string"==typeof k&&(v=str(k,value,rep),v&&partial.push(quote(k)+(gap?": ":":")+v));else for(k in value)Object.hasOwnProperty.call(value,k)&&(v=str(k,value,rep),v&&partial.push(quote(k)+(gap?": ":":")+v));return v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapeable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;return{stringify:function(value,replacer,space){var i;if(gap="",indent="","number"==typeof space)for(i=0;space>i;i+=1)indent+=" ";else"string"==typeof space&&(indent=space);if(rep=replacer,replacer&&"function"!=typeof replacer&&("object"!=typeof replacer||"number"!=typeof replacer.length))throw new Error("JSON.stringify");return str("",{"":value})},parse:function(text,reviver){function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+(+a.charCodeAt(0)).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}}()),function(window,document,navigator,undefined){var DEBUG=!0;!function(factory){if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){var target=module.exports||exports;factory(target)}else"function"==typeof define&&define.amd?define(["exports"],factory):factory(window.ko={})}(function(koExports){function applyExtenders(requestedExtenders){var target=this;if(requestedExtenders)for(var key in requestedExtenders){var extenderHandler=ko.extenders[key];"function"==typeof extenderHandler&&(target=extenderHandler(target,requestedExtenders[key]))}return target}function ensureDropdownSelectionIsConsistentWithModelValue(element,modelValue,preferModelValue){preferModelValue&&modelValue!==ko.selectExtensions.readValue(element)&&ko.selectExtensions.writeValue(element,modelValue),modelValue!==ko.selectExtensions.readValue(element)&&ko.utils.triggerEvent(element,"change")
}var ko="undefined"!=typeof koExports?koExports:{};ko.exportSymbol=function(koPath,object){for(var tokens=koPath.split("."),target=ko,i=0;i<tokens.length-1;i++)target=target[tokens[i]];target[tokens[tokens.length-1]]=object},ko.exportProperty=function(owner,publicName,object){owner[publicName]=object},ko.version="2.1.0",ko.exportSymbol("version",ko.version),ko.utils=new function(){function isClickOnCheckableElement(element,eventType){if("input"!==ko.utils.tagNameLower(element)||!element.type)return!1;if("click"!=eventType.toLowerCase())return!1;var inputType=element.type;return"checkbox"==inputType||"radio"==inputType}var stringTrimRegex=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,knownEvents={},knownEventTypesByEventName={},keyEventTypeName=/Firefox\/2/i.test(navigator.userAgent)?"KeyboardEvent":"UIEvents";knownEvents[keyEventTypeName]=["keyup","keydown","keypress"],knownEvents.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"];for(var eventType in knownEvents){var knownEventsForType=knownEvents[eventType];if(knownEventsForType.length)for(var i=0,j=knownEventsForType.length;j>i;i++)knownEventTypesByEventName[knownEventsForType[i]]=eventType}var eventsThatMustBeRegisteredUsingAttachEvent={propertychange:!0},ieVersion=function(){for(var version=3,div=document.createElement("div"),iElems=div.getElementsByTagName("i");div.innerHTML="<!--[if gt IE "+ ++version+"]><i></i><![endif]-->",iElems[0];);return version>4?version:undefined}(),isIe6=6===ieVersion,isIe7=7===ieVersion;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(array,action){for(var i=0,j=array.length;j>i;i++)action(array[i])},arrayIndexOf:function(array,item){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(array,item);for(var i=0,j=array.length;j>i;i++)if(array[i]===item)return i;return-1},arrayFirst:function(array,predicate,predicateOwner){for(var i=0,j=array.length;j>i;i++)if(predicate.call(predicateOwner,array[i]))return array[i];return null},arrayRemoveItem:function(array,itemToRemove){var index=ko.utils.arrayIndexOf(array,itemToRemove);index>=0&&array.splice(index,1)},arrayGetDistinctValues:function(array){array=array||[];for(var result=[],i=0,j=array.length;j>i;i++)ko.utils.arrayIndexOf(result,array[i])<0&&result.push(array[i]);return result},arrayMap:function(array,mapping){array=array||[];for(var result=[],i=0,j=array.length;j>i;i++)result.push(mapping(array[i]));return result},arrayFilter:function(array,predicate){array=array||[];for(var result=[],i=0,j=array.length;j>i;i++)predicate(array[i])&&result.push(array[i]);return result},arrayPushAll:function(array,valuesToPush){if(valuesToPush instanceof Array)array.push.apply(array,valuesToPush);else for(var i=0,j=valuesToPush.length;j>i;i++)array.push(valuesToPush[i]);return array},extend:function(target,source){if(source)for(var prop in source)source.hasOwnProperty(prop)&&(target[prop]=source[prop]);return target},emptyDomNode:function(domNode){for(;domNode.firstChild;)ko.removeNode(domNode.firstChild)},moveCleanedNodesToContainerElement:function(nodes){for(var nodesArray=ko.utils.makeArray(nodes),container=document.createElement("div"),i=0,j=nodesArray.length;j>i;i++)ko.cleanNode(nodesArray[i]),container.appendChild(nodesArray[i]);return container},setDomNodeChildren:function(domNode,childNodes){if(ko.utils.emptyDomNode(domNode),childNodes)for(var i=0,j=childNodes.length;j>i;i++)domNode.appendChild(childNodes[i])},replaceDomNodes:function(nodeToReplaceOrNodeArray,newNodesArray){var nodesToReplaceArray=nodeToReplaceOrNodeArray.nodeType?[nodeToReplaceOrNodeArray]:nodeToReplaceOrNodeArray;if(nodesToReplaceArray.length>0){for(var insertionPoint=nodesToReplaceArray[0],parent=insertionPoint.parentNode,i=0,j=newNodesArray.length;j>i;i++)parent.insertBefore(newNodesArray[i],insertionPoint);for(var i=0,j=nodesToReplaceArray.length;j>i;i++)ko.removeNode(nodesToReplaceArray[i])}},setOptionNodeSelectionState:function(optionNode,isSelected){navigator.userAgent.indexOf("MSIE 6")>=0?optionNode.setAttribute("selected",isSelected):optionNode.selected=isSelected},stringTrim:function(string){return(string||"").replace(stringTrimRegex,"")},stringTokenize:function(string,delimiter){for(var result=[],tokens=(string||"").split(delimiter),i=0,j=tokens.length;j>i;i++){var trimmed=ko.utils.stringTrim(tokens[i]);""!==trimmed&&result.push(trimmed)}return result},stringStartsWith:function(string,startsWith){return string=string||"",startsWith.length>string.length?!1:string.substring(0,startsWith.length)===startsWith},buildEvalWithinScopeFunction:function(expression,scopeLevels){for(var functionBody="return ("+expression+")",i=0;scopeLevels>i;i++)functionBody="with(sc["+i+"]) { "+functionBody+" } ";return new Function("sc",functionBody)},domNodeIsContainedBy:function(node,containedByNode){if(containedByNode.compareDocumentPosition)return 16==(16&containedByNode.compareDocumentPosition(node));for(;null!=node;){if(node==containedByNode)return!0;node=node.parentNode}return!1},domNodeIsAttachedToDocument:function(node){return ko.utils.domNodeIsContainedBy(node,node.ownerDocument)},tagNameLower:function(element){return element&&element.tagName&&element.tagName.toLowerCase()},registerEventHandler:function(element,eventType,handler){var mustUseAttachEvent=ieVersion&&eventsThatMustBeRegisteredUsingAttachEvent[eventType];if(mustUseAttachEvent||"undefined"==typeof jQuery)if(mustUseAttachEvent||"function"!=typeof element.addEventListener){if("undefined"==typeof element.attachEvent)throw new Error("Browser doesn't support addEventListener or attachEvent");element.attachEvent("on"+eventType,function(event){handler.call(element,event)})}else element.addEventListener(eventType,handler,!1);else{if(isClickOnCheckableElement(element,eventType)){var originalHandler=handler;handler=function(event,eventData){var jQuerySuppliedCheckedState=this.checked;eventData&&(this.checked=eventData.checkedStateBeforeEvent!==!0),originalHandler.call(this,event),this.checked=jQuerySuppliedCheckedState}}jQuery(element).bind(eventType,handler)}},triggerEvent:function(element,eventType){if(!element||!element.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");if("undefined"!=typeof jQuery){var eventData=[];isClickOnCheckableElement(element,eventType)&&eventData.push({checkedStateBeforeEvent:element.checked}),jQuery(element).trigger(eventType,eventData)}else if("function"==typeof document.createEvent){if("function"!=typeof element.dispatchEvent)throw new Error("The supplied element doesn't support dispatchEvent");var eventCategory=knownEventTypesByEventName[eventType]||"HTMLEvents",event=document.createEvent(eventCategory);event.initEvent(eventType,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,element),element.dispatchEvent(event)}else{if("undefined"==typeof element.fireEvent)throw new Error("Browser doesn't support triggering events");isClickOnCheckableElement(element,eventType)&&(element.checked=element.checked!==!0),element.fireEvent("on"+eventType)}},unwrapObservable:function(value){return ko.isObservable(value)?value():value},toggleDomNodeCssClass:function(node,className,shouldHaveClass){var currentClassNames=(node.className||"").split(/\s+/),hasClass=ko.utils.arrayIndexOf(currentClassNames,className)>=0;if(shouldHaveClass&&!hasClass)node.className+=(currentClassNames[0]?" ":"")+className;else if(hasClass&&!shouldHaveClass){for(var newClassName="",i=0;i<currentClassNames.length;i++)currentClassNames[i]!=className&&(newClassName+=currentClassNames[i]+" ");node.className=ko.utils.stringTrim(newClassName)}},setTextContent:function(element,textContent){var value=ko.utils.unwrapObservable(textContent);(null===value||value===undefined)&&(value=""),"innerText"in element?element.innerText=value:element.textContent=value,ieVersion>=9&&(element.style.display=element.style.display)},ensureSelectElementIsRenderedCorrectly:function(selectElement){if(ieVersion>=9){var originalWidth=selectElement.style.width;selectElement.style.width=0,selectElement.style.width=originalWidth}},range:function(min,max){min=ko.utils.unwrapObservable(min),max=ko.utils.unwrapObservable(max);for(var result=[],i=min;max>=i;i++)result.push(i);return result},makeArray:function(arrayLikeObject){for(var result=[],i=0,j=arrayLikeObject.length;j>i;i++)result.push(arrayLikeObject[i]);return result},isIe6:isIe6,isIe7:isIe7,ieVersion:ieVersion,getFormFields:function(form,fieldName){for(var fields=ko.utils.makeArray(form.getElementsByTagName("input")).concat(ko.utils.makeArray(form.getElementsByTagName("textarea"))),isMatchingField="string"==typeof fieldName?function(field){return field.name===fieldName}:function(field){return fieldName.test(field.name)},matches=[],i=fields.length-1;i>=0;i--)isMatchingField(fields[i])&&matches.push(fields[i]);return matches},parseJson:function(jsonString){return"string"==typeof jsonString&&(jsonString=ko.utils.stringTrim(jsonString))?window.JSON&&window.JSON.parse?window.JSON.parse(jsonString):new Function("return "+jsonString)():null},stringifyJson:function(data,replacer,space){if("undefined"==typeof JSON||"undefined"==typeof JSON.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return JSON.stringify(ko.utils.unwrapObservable(data),replacer,space)},postJson:function(urlOrForm,data,options){options=options||{};var params=options.params||{},includeFields=options.includeFields||this.fieldsIncludedWithJsonPost,url=urlOrForm;if("object"==typeof urlOrForm&&"form"===ko.utils.tagNameLower(urlOrForm)){var originalForm=urlOrForm;url=originalForm.action;for(var i=includeFields.length-1;i>=0;i--)for(var fields=ko.utils.getFormFields(originalForm,includeFields[i]),j=fields.length-1;j>=0;j--)params[fields[j].name]=fields[j].value}data=ko.utils.unwrapObservable(data);var form=document.createElement("form");form.style.display="none",form.action=url,form.method="post";for(var key in data){var input=document.createElement("input");input.name=key,input.value=ko.utils.stringifyJson(ko.utils.unwrapObservable(data[key])),form.appendChild(input)}for(var key in params){var input=document.createElement("input");input.name=key,input.value=params[key],form.appendChild(input)}document.body.appendChild(form),options.submitter?options.submitter(form):form.submit(),setTimeout(function(){form.parentNode.removeChild(form)},0)}}},ko.exportSymbol("utils",ko.utils),ko.exportSymbol("utils.arrayForEach",ko.utils.arrayForEach),ko.exportSymbol("utils.arrayFirst",ko.utils.arrayFirst),ko.exportSymbol("utils.arrayFilter",ko.utils.arrayFilter),ko.exportSymbol("utils.arrayGetDistinctValues",ko.utils.arrayGetDistinctValues),ko.exportSymbol("utils.arrayIndexOf",ko.utils.arrayIndexOf),ko.exportSymbol("utils.arrayMap",ko.utils.arrayMap),ko.exportSymbol("utils.arrayPushAll",ko.utils.arrayPushAll),ko.exportSymbol("utils.arrayRemoveItem",ko.utils.arrayRemoveItem),ko.exportSymbol("utils.extend",ko.utils.extend),ko.exportSymbol("utils.fieldsIncludedWithJsonPost",ko.utils.fieldsIncludedWithJsonPost),ko.exportSymbol("utils.getFormFields",ko.utils.getFormFields),ko.exportSymbol("utils.postJson",ko.utils.postJson),ko.exportSymbol("utils.parseJson",ko.utils.parseJson),ko.exportSymbol("utils.registerEventHandler",ko.utils.registerEventHandler),ko.exportSymbol("utils.stringifyJson",ko.utils.stringifyJson),ko.exportSymbol("utils.range",ko.utils.range),ko.exportSymbol("utils.toggleDomNodeCssClass",ko.utils.toggleDomNodeCssClass),ko.exportSymbol("utils.triggerEvent",ko.utils.triggerEvent),ko.exportSymbol("utils.unwrapObservable",ko.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(object){var originalFunction=this,args=Array.prototype.slice.call(arguments),object=args.shift();return function(){return originalFunction.apply(object,args.concat(Array.prototype.slice.call(arguments)))}}),ko.utils.domData=new function(){var uniqueId=0,dataStoreKeyExpandoPropertyName="__ko__"+(new Date).getTime(),dataStore={};return{get:function(node,key){var allDataForNode=ko.utils.domData.getAll(node,!1);return allDataForNode===undefined?undefined:allDataForNode[key]},set:function(node,key,value){if(value!==undefined||ko.utils.domData.getAll(node,!1)!==undefined){var allDataForNode=ko.utils.domData.getAll(node,!0);allDataForNode[key]=value}},getAll:function(node,createIfNotFound){var dataStoreKey=node[dataStoreKeyExpandoPropertyName],hasExistingDataStore=dataStoreKey&&"null"!==dataStoreKey;if(!hasExistingDataStore){if(!createIfNotFound)return undefined;dataStoreKey=node[dataStoreKeyExpandoPropertyName]="ko"+uniqueId++,dataStore[dataStoreKey]={}}return dataStore[dataStoreKey]},clear:function(node){var dataStoreKey=node[dataStoreKeyExpandoPropertyName];dataStoreKey&&(delete dataStore[dataStoreKey],node[dataStoreKeyExpandoPropertyName]=null)}}},ko.exportSymbol("utils.domData",ko.utils.domData),ko.exportSymbol("utils.domData.clear",ko.utils.domData.clear),ko.utils.domNodeDisposal=new function(){function getDisposeCallbacksCollection(node,createIfNotFound){var allDisposeCallbacks=ko.utils.domData.get(node,domDataKey);return allDisposeCallbacks===undefined&&createIfNotFound&&(allDisposeCallbacks=[],ko.utils.domData.set(node,domDataKey,allDisposeCallbacks)),allDisposeCallbacks}function destroyCallbacksCollection(node){ko.utils.domData.set(node,domDataKey,undefined)}function cleanSingleNode(node){var callbacks=getDisposeCallbacksCollection(node,!1);if(callbacks){callbacks=callbacks.slice(0);for(var i=0;i<callbacks.length;i++)callbacks[i](node)}ko.utils.domData.clear(node),"function"==typeof jQuery&&"function"==typeof jQuery.cleanData&&jQuery.cleanData([node]),cleanableNodeTypesWithDescendants[node.nodeType]&&cleanImmediateCommentTypeChildren(node)}function cleanImmediateCommentTypeChildren(nodeWithChildren){for(var child,nextChild=nodeWithChildren.firstChild;child=nextChild;)nextChild=child.nextSibling,8===child.nodeType&&cleanSingleNode(child)}var domDataKey="__ko_domNodeDisposal__"+(new Date).getTime(),cleanableNodeTypes={1:!0,8:!0,9:!0},cleanableNodeTypesWithDescendants={1:!0,9:!0};return{addDisposeCallback:function(node,callback){if("function"!=typeof callback)throw new Error("Callback must be a function");getDisposeCallbacksCollection(node,!0).push(callback)},removeDisposeCallback:function(node,callback){var callbacksCollection=getDisposeCallbacksCollection(node,!1);callbacksCollection&&(ko.utils.arrayRemoveItem(callbacksCollection,callback),0==callbacksCollection.length&&destroyCallbacksCollection(node))},cleanNode:function(node){if(cleanableNodeTypes[node.nodeType]&&(cleanSingleNode(node),cleanableNodeTypesWithDescendants[node.nodeType])){var descendants=[];ko.utils.arrayPushAll(descendants,node.getElementsByTagName("*"));for(var i=0,j=descendants.length;j>i;i++)cleanSingleNode(descendants[i])}},removeNode:function(node){ko.cleanNode(node),node.parentNode&&node.parentNode.removeChild(node)}}},ko.cleanNode=ko.utils.domNodeDisposal.cleanNode,ko.removeNode=ko.utils.domNodeDisposal.removeNode,ko.exportSymbol("cleanNode",ko.cleanNode),ko.exportSymbol("removeNode",ko.removeNode),ko.exportSymbol("utils.domNodeDisposal",ko.utils.domNodeDisposal),ko.exportSymbol("utils.domNodeDisposal.addDisposeCallback",ko.utils.domNodeDisposal.addDisposeCallback),ko.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",ko.utils.domNodeDisposal.removeDisposeCallback),function(){function simpleHtmlParse(html){var tags=ko.utils.stringTrim(html).toLowerCase(),div=document.createElement("div"),wrap=tags.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!tags.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!tags.indexOf("<td")||!tags.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],markup="ignored<div>"+wrap[1]+html+wrap[2]+"</div>";for("function"==typeof window.innerShiv?div.appendChild(window.innerShiv(markup)):div.innerHTML=markup;wrap[0]--;)div=div.lastChild;return ko.utils.makeArray(div.lastChild.childNodes)}function jQueryHtmlParse(html){var elems=jQuery.clean([html]);if(elems&&elems[0]){for(var elem=elems[0];elem.parentNode&&11!==elem.parentNode.nodeType;)elem=elem.parentNode;elem.parentNode&&elem.parentNode.removeChild(elem)}return elems}ko.utils.parseHtmlFragment=function(html){return"undefined"!=typeof jQuery?jQueryHtmlParse(html):simpleHtmlParse(html)},ko.utils.setHtml=function(node,html){if(ko.utils.emptyDomNode(node),null!==html&&html!==undefined)if("string"!=typeof html&&(html=html.toString()),"undefined"!=typeof jQuery)jQuery(node).html(html);else for(var parsedNodes=ko.utils.parseHtmlFragment(html),i=0;i<parsedNodes.length;i++)node.appendChild(parsedNodes[i])}}(),ko.exportSymbol("utils.parseHtmlFragment",ko.utils.parseHtmlFragment),ko.exportSymbol("utils.setHtml",ko.utils.setHtml),ko.memoization=function(){function randomMax8HexChars(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}function generateRandomId(){return randomMax8HexChars()+randomMax8HexChars()}function findMemoNodes(rootNode,appendToArray){if(rootNode)if(8==rootNode.nodeType){var memoId=ko.memoization.parseMemoText(rootNode.nodeValue);null!=memoId&&appendToArray.push({domNode:rootNode,memoId:memoId})}else if(1==rootNode.nodeType)for(var i=0,childNodes=rootNode.childNodes,j=childNodes.length;j>i;i++)findMemoNodes(childNodes[i],appendToArray)}var memos={};return{memoize:function(callback){if("function"!=typeof callback)throw new Error("You can only pass a function to ko.memoization.memoize()");var memoId=generateRandomId();return memos[memoId]=callback,"<!--[ko_memo:"+memoId+"]-->"},unmemoize:function(memoId,callbackParams){var callback=memos[memoId];if(callback===undefined)throw new Error("Couldn't find any memo with ID "+memoId+". Perhaps it's already been unmemoized.");try{return callback.apply(null,callbackParams||[]),!0}finally{delete memos[memoId]}},unmemoizeDomNodeAndDescendants:function(domNode,extraCallbackParamsArray){var memos=[];findMemoNodes(domNode,memos);for(var i=0,j=memos.length;j>i;i++){var node=memos[i].domNode,combinedParams=[node];extraCallbackParamsArray&&ko.utils.arrayPushAll(combinedParams,extraCallbackParamsArray),ko.memoization.unmemoize(memos[i].memoId,combinedParams),node.nodeValue="",node.parentNode&&node.parentNode.removeChild(node)}},parseMemoText:function(memoText){var match=memoText.match(/^\[ko_memo\:(.*?)\]$/);return match?match[1]:null}}}(),ko.exportSymbol("memoization",ko.memoization),ko.exportSymbol("memoization.memoize",ko.memoization.memoize),ko.exportSymbol("memoization.unmemoize",ko.memoization.unmemoize),ko.exportSymbol("memoization.parseMemoText",ko.memoization.parseMemoText),ko.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",ko.memoization.unmemoizeDomNodeAndDescendants),ko.extenders={throttle:function(target,timeout){target.throttleEvaluation=timeout;var writeTimeoutInstance=null;return ko.dependentObservable({read:target,write:function(value){clearTimeout(writeTimeoutInstance),writeTimeoutInstance=setTimeout(function(){target(value)},timeout)}})},notify:function(target,notifyWhen){return target.equalityComparer="always"==notifyWhen?function(){return!1}:ko.observable.fn.equalityComparer,target}},ko.exportSymbol("extenders",ko.extenders),ko.subscription=function(target,callback,disposeCallback){this.target=target,this.callback=callback,this.disposeCallback=disposeCallback,ko.exportProperty(this,"dispose",this.dispose)},ko.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},ko.subscribable=function(){this._subscriptions={},ko.utils.extend(this,ko.subscribable.fn),ko.exportProperty(this,"subscribe",this.subscribe),ko.exportProperty(this,"extend",this.extend),ko.exportProperty(this,"getSubscriptionsCount",this.getSubscriptionsCount)};var defaultEvent="change";ko.subscribable.fn={subscribe:function(callback,callbackTarget,event){event=event||defaultEvent;var boundCallback=callbackTarget?callback.bind(callbackTarget):callback,subscription=new ko.subscription(this,boundCallback,function(){ko.utils.arrayRemoveItem(this._subscriptions[event],subscription)}.bind(this));return this._subscriptions[event]||(this._subscriptions[event]=[]),this._subscriptions[event].push(subscription),subscription},notifySubscribers:function(valueToNotify,event){event=event||defaultEvent,this._subscriptions[event]&&ko.utils.arrayForEach(this._subscriptions[event].slice(0),function(subscription){subscription&&subscription.isDisposed!==!0&&subscription.callback(valueToNotify)})},getSubscriptionsCount:function(){var total=0;for(var eventName in this._subscriptions)this._subscriptions.hasOwnProperty(eventName)&&(total+=this._subscriptions[eventName].length);return total},extend:applyExtenders},ko.isSubscribable=function(instance){return"function"==typeof instance.subscribe&&"function"==typeof instance.notifySubscribers},ko.exportSymbol("subscribable",ko.subscribable),ko.exportSymbol("isSubscribable",ko.isSubscribable),ko.dependencyDetection=function(){var _frames=[];return{begin:function(callback){_frames.push({callback:callback,distinctDependencies:[]})},end:function(){_frames.pop()},registerDependency:function(subscribable){if(!ko.isSubscribable(subscribable))throw new Error("Only subscribable things can act as dependencies");if(_frames.length>0){var topFrame=_frames[_frames.length-1];if(ko.utils.arrayIndexOf(topFrame.distinctDependencies,subscribable)>=0)return;topFrame.distinctDependencies.push(subscribable),topFrame.callback(subscribable)}}}}();var primitiveTypes={undefined:!0,"boolean":!0,number:!0,string:!0};ko.observable=function(initialValue){function observable(){return arguments.length>0?(observable.equalityComparer&&observable.equalityComparer(_latestValue,arguments[0])||(observable.valueWillMutate(),_latestValue=arguments[0],DEBUG&&(observable._latestValue=_latestValue),observable.valueHasMutated()),this):(ko.dependencyDetection.registerDependency(observable),_latestValue)}var _latestValue=initialValue;return DEBUG&&(observable._latestValue=_latestValue),ko.subscribable.call(observable),observable.valueHasMutated=function(){observable.notifySubscribers(_latestValue)},observable.valueWillMutate=function(){observable.notifySubscribers(_latestValue,"beforeChange")},ko.utils.extend(observable,ko.observable.fn),ko.exportProperty(observable,"valueHasMutated",observable.valueHasMutated),ko.exportProperty(observable,"valueWillMutate",observable.valueWillMutate),observable},ko.observable.fn={equalityComparer:function(a,b){var oldValueIsPrimitive=null===a||typeof a in primitiveTypes;return oldValueIsPrimitive?a===b:!1}};var protoProperty=ko.observable.protoProperty="__ko_proto__";ko.observable.fn[protoProperty]=ko.observable,ko.hasPrototype=function(instance,prototype){return null===instance||instance===undefined||instance[protoProperty]===undefined?!1:instance[protoProperty]===prototype?!0:ko.hasPrototype(instance[protoProperty],prototype)},ko.isObservable=function(instance){return ko.hasPrototype(instance,ko.observable)},ko.isWriteableObservable=function(instance){return"function"==typeof instance&&instance[protoProperty]===ko.observable?!0:"function"==typeof instance&&instance[protoProperty]===ko.dependentObservable&&instance.hasWriteFunction?!0:!1},ko.exportSymbol("observable",ko.observable),ko.exportSymbol("isObservable",ko.isObservable),ko.exportSymbol("isWriteableObservable",ko.isWriteableObservable),ko.observableArray=function(initialValues){if(0==arguments.length&&(initialValues=[]),null!==initialValues&&initialValues!==undefined&&!("length"in initialValues))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var result=ko.observable(initialValues);return ko.utils.extend(result,ko.observableArray.fn),result},ko.observableArray.fn={remove:function(valueOrPredicate){for(var underlyingArray=this(),removedValues=[],predicate="function"==typeof valueOrPredicate?valueOrPredicate:function(value){return value===valueOrPredicate},i=0;i<underlyingArray.length;i++){var value=underlyingArray[i];predicate(value)&&(0===removedValues.length&&this.valueWillMutate(),removedValues.push(value),underlyingArray.splice(i,1),i--)}return removedValues.length&&this.valueHasMutated(),removedValues},removeAll:function(arrayOfValues){if(arrayOfValues===undefined){var underlyingArray=this(),allValues=underlyingArray.slice(0);return this.valueWillMutate(),underlyingArray.splice(0,underlyingArray.length),this.valueHasMutated(),allValues}return arrayOfValues?this.remove(function(value){return ko.utils.arrayIndexOf(arrayOfValues,value)>=0}):[]},destroy:function(valueOrPredicate){var underlyingArray=this(),predicate="function"==typeof valueOrPredicate?valueOrPredicate:function(value){return value===valueOrPredicate};this.valueWillMutate();for(var i=underlyingArray.length-1;i>=0;i--){var value=underlyingArray[i];predicate(value)&&(underlyingArray[i]._destroy=!0)}this.valueHasMutated()},destroyAll:function(arrayOfValues){return arrayOfValues===undefined?this.destroy(function(){return!0}):arrayOfValues?this.destroy(function(value){return ko.utils.arrayIndexOf(arrayOfValues,value)>=0}):[]},indexOf:function(item){var underlyingArray=this();return ko.utils.arrayIndexOf(underlyingArray,item)},replace:function(oldItem,newItem){var index=this.indexOf(oldItem);index>=0&&(this.valueWillMutate(),this()[index]=newItem,this.valueHasMutated())}},ko.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(methodName){ko.observableArray.fn[methodName]=function(){var underlyingArray=this();this.valueWillMutate();var methodCallResult=underlyingArray[methodName].apply(underlyingArray,arguments);return this.valueHasMutated(),methodCallResult}}),ko.utils.arrayForEach(["slice"],function(methodName){ko.observableArray.fn[methodName]=function(){var underlyingArray=this();return underlyingArray[methodName].apply(underlyingArray,arguments)}}),ko.exportSymbol("observableArray",ko.observableArray),ko.dependentObservable=function(evaluatorFunctionOrOptions,evaluatorFunctionTarget,options){function disposeAllSubscriptionsToDependencies(){ko.utils.arrayForEach(_subscriptionsToDependencies,function(subscription){subscription.dispose()}),_subscriptionsToDependencies=[]}function evaluatePossiblyAsync(){var throttleEvaluationTimeout=dependentObservable.throttleEvaluation;throttleEvaluationTimeout&&throttleEvaluationTimeout>=0?(clearTimeout(evaluationTimeoutInstance),evaluationTimeoutInstance=setTimeout(evaluateImmediate,throttleEvaluationTimeout)):evaluateImmediate()}function evaluateImmediate(){if(!_isBeingEvaluated){if(_hasBeenEvaluated&&disposeWhen())return void dispose();_isBeingEvaluated=!0;try{var disposalCandidates=ko.utils.arrayMap(_subscriptionsToDependencies,function(item){return item.target});ko.dependencyDetection.begin(function(subscribable){var inOld;(inOld=ko.utils.arrayIndexOf(disposalCandidates,subscribable))>=0?disposalCandidates[inOld]=undefined:_subscriptionsToDependencies.push(subscribable.subscribe(evaluatePossiblyAsync))});for(var newValue=readFunction.call(evaluatorFunctionTarget),i=disposalCandidates.length-1;i>=0;i--)disposalCandidates[i]&&_subscriptionsToDependencies.splice(i,1)[0].dispose();_hasBeenEvaluated=!0,dependentObservable.notifySubscribers(_latestValue,"beforeChange"),_latestValue=newValue,DEBUG&&(dependentObservable._latestValue=_latestValue)}finally{ko.dependencyDetection.end()}dependentObservable.notifySubscribers(_latestValue),_isBeingEvaluated=!1}}function dependentObservable(){return arguments.length>0?void set.apply(dependentObservable,arguments):get()}function set(){if("function"!=typeof writeFunction)throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");writeFunction.apply(evaluatorFunctionTarget,arguments)}function get(){return _hasBeenEvaluated||evaluateImmediate(),ko.dependencyDetection.registerDependency(dependentObservable),_latestValue}var _latestValue,_hasBeenEvaluated=!1,_isBeingEvaluated=!1,readFunction=evaluatorFunctionOrOptions;if(readFunction&&"object"==typeof readFunction?(options=readFunction,readFunction=options.read):(options=options||{},readFunction||(readFunction=options.read)),"function"!=typeof readFunction)throw new Error("Pass a function that returns the value of the ko.computed");var writeFunction=options.write;evaluatorFunctionTarget||(evaluatorFunctionTarget=options.owner);var _subscriptionsToDependencies=[],dispose=disposeAllSubscriptionsToDependencies,disposeWhenNodeIsRemoved="object"==typeof options.disposeWhenNodeIsRemoved?options.disposeWhenNodeIsRemoved:null,disposeWhen=options.disposeWhen||function(){return!1};if(disposeWhenNodeIsRemoved){dispose=function(){ko.utils.domNodeDisposal.removeDisposeCallback(disposeWhenNodeIsRemoved,arguments.callee),disposeAllSubscriptionsToDependencies()},ko.utils.domNodeDisposal.addDisposeCallback(disposeWhenNodeIsRemoved,dispose);var existingDisposeWhenFunction=disposeWhen;disposeWhen=function(){return!ko.utils.domNodeIsAttachedToDocument(disposeWhenNodeIsRemoved)||existingDisposeWhenFunction()}}var evaluationTimeoutInstance=null;return dependentObservable.getDependenciesCount=function(){return _subscriptionsToDependencies.length},dependentObservable.hasWriteFunction="function"==typeof options.write,dependentObservable.dispose=function(){dispose()},ko.subscribable.call(dependentObservable),ko.utils.extend(dependentObservable,ko.dependentObservable.fn),options.deferEvaluation!==!0&&evaluateImmediate(),ko.exportProperty(dependentObservable,"dispose",dependentObservable.dispose),ko.exportProperty(dependentObservable,"getDependenciesCount",dependentObservable.getDependenciesCount),dependentObservable},ko.isComputed=function(instance){return ko.hasPrototype(instance,ko.dependentObservable)};var protoProp=ko.observable.protoProperty;ko.dependentObservable[protoProp]=ko.observable,ko.dependentObservable.fn={},ko.dependentObservable.fn[protoProp]=ko.dependentObservable,ko.exportSymbol("dependentObservable",ko.dependentObservable),ko.exportSymbol("computed",ko.dependentObservable),ko.exportSymbol("isComputed",ko.isComputed),function(){function mapJsObjectGraph(rootObject,mapInputCallback,visitedObjects){visitedObjects=visitedObjects||new objectLookup,rootObject=mapInputCallback(rootObject);var canHaveProperties="object"==typeof rootObject&&null!==rootObject&&rootObject!==undefined&&!(rootObject instanceof Date);if(!canHaveProperties)return rootObject;var outputProperties=rootObject instanceof Array?[]:{};return visitedObjects.save(rootObject,outputProperties),visitPropertiesOrArrayEntries(rootObject,function(indexer){var propertyValue=mapInputCallback(rootObject[indexer]);switch(typeof propertyValue){case"boolean":case"number":case"string":case"function":outputProperties[indexer]=propertyValue;break;case"object":case"undefined":var previouslyMappedValue=visitedObjects.get(propertyValue);outputProperties[indexer]=previouslyMappedValue!==undefined?previouslyMappedValue:mapJsObjectGraph(propertyValue,mapInputCallback,visitedObjects)}}),outputProperties}function visitPropertiesOrArrayEntries(rootObject,visitorCallback){if(rootObject instanceof Array){for(var i=0;i<rootObject.length;i++)visitorCallback(i);"function"==typeof rootObject.toJSON&&visitorCallback("toJSON")}else for(var propertyName in rootObject)visitorCallback(propertyName)}function objectLookup(){var keys=[],values=[];this.save=function(key,value){var existingIndex=ko.utils.arrayIndexOf(keys,key);existingIndex>=0?values[existingIndex]=value:(keys.push(key),values.push(value))},this.get=function(key){var existingIndex=ko.utils.arrayIndexOf(keys,key);return existingIndex>=0?values[existingIndex]:undefined}}var maxNestedObservableDepth=10;ko.toJS=function(rootObject){if(0==arguments.length)throw new Error("When calling ko.toJS, pass the object you want to convert.");
return mapJsObjectGraph(rootObject,function(valueToMap){for(var i=0;ko.isObservable(valueToMap)&&maxNestedObservableDepth>i;i++)valueToMap=valueToMap();return valueToMap})},ko.toJSON=function(rootObject,replacer,space){var plainJavaScriptObject=ko.toJS(rootObject);return ko.utils.stringifyJson(plainJavaScriptObject,replacer,space)}}(),ko.exportSymbol("toJS",ko.toJS),ko.exportSymbol("toJSON",ko.toJSON),function(){var hasDomDataExpandoProperty="__ko__hasDomDataOptionValue__";ko.selectExtensions={readValue:function(element){switch(ko.utils.tagNameLower(element)){case"option":return element[hasDomDataExpandoProperty]===!0?ko.utils.domData.get(element,ko.bindingHandlers.options.optionValueDomDataKey):element.getAttribute("value");case"select":return element.selectedIndex>=0?ko.selectExtensions.readValue(element.options[element.selectedIndex]):undefined;default:return element.value}},writeValue:function(element,value){switch(ko.utils.tagNameLower(element)){case"option":switch(typeof value){case"string":ko.utils.domData.set(element,ko.bindingHandlers.options.optionValueDomDataKey,undefined),hasDomDataExpandoProperty in element&&delete element[hasDomDataExpandoProperty],element.value=value;break;default:ko.utils.domData.set(element,ko.bindingHandlers.options.optionValueDomDataKey,value),element[hasDomDataExpandoProperty]=!0,element.value="number"==typeof value?value:""}break;case"select":for(var i=element.options.length-1;i>=0;i--)if(ko.selectExtensions.readValue(element.options[i])==value){element.selectedIndex=i;break}break;default:(null===value||value===undefined)&&(value=""),element.value=value}}}}(),ko.exportSymbol("selectExtensions",ko.selectExtensions),ko.exportSymbol("selectExtensions.readValue",ko.selectExtensions.readValue),ko.exportSymbol("selectExtensions.writeValue",ko.selectExtensions.writeValue),ko.jsonExpressionRewriting=function(){function restoreTokens(string,tokens){for(var prevValue=null;string!=prevValue;)prevValue=string,string=string.replace(restoreCapturedTokensRegex,function(match,tokenIndex){return tokens[tokenIndex]});return string}function isWriteableValue(expression){return ko.utils.arrayIndexOf(javaScriptReservedWords,ko.utils.stringTrim(expression).toLowerCase())>=0?!1:null!==expression.match(javaScriptAssignmentTarget)}function ensureQuoted(key){var trimmedKey=ko.utils.stringTrim(key);switch(trimmedKey.length&&trimmedKey.charAt(0)){case"'":case'"':return key;default:return"'"+trimmedKey+"'"}}var restoreCapturedTokensRegex=/\@ko_token_(\d+)\@/g,javaScriptAssignmentTarget=/^[\_$a-z][\_$a-z0-9]*(\[.*?\])*(\.[\_$a-z][\_$a-z0-9]*(\[.*?\])*)*$/i,javaScriptReservedWords=["true","false"];return{bindingRewriteValidators:[],parseObjectLiteral:function(objectLiteralString){var str=ko.utils.stringTrim(objectLiteralString);if(str.length<3)return[];"{"===str.charAt(0)&&(str=str.substring(1,str.length-1));for(var tokenEndChar,tokens=[],tokenStart=null,position=0;position<str.length;position++){var c=str.charAt(position);if(null===tokenStart)switch(c){case'"':case"'":case"/":tokenStart=position,tokenEndChar=c}else if(c==tokenEndChar&&"\\"!==str.charAt(position-1)){var token=str.substring(tokenStart,position+1);tokens.push(token);var replacement="@ko_token_"+(tokens.length-1)+"@";str=str.substring(0,tokenStart)+replacement+str.substring(position+1),position-=token.length-replacement.length,tokenStart=null}}tokenStart=null,tokenEndChar=null;for(var tokenDepth=0,tokenStartChar=null,position=0;position<str.length;position++){var c=str.charAt(position);if(null===tokenStart)switch(c){case"{":tokenStart=position,tokenStartChar=c,tokenEndChar="}";break;case"(":tokenStart=position,tokenStartChar=c,tokenEndChar=")";break;case"[":tokenStart=position,tokenStartChar=c,tokenEndChar="]"}if(c===tokenStartChar)tokenDepth++;else if(c===tokenEndChar&&(tokenDepth--,0===tokenDepth)){var token=str.substring(tokenStart,position+1);tokens.push(token);var replacement="@ko_token_"+(tokens.length-1)+"@";str=str.substring(0,tokenStart)+replacement+str.substring(position+1),position-=token.length-replacement.length,tokenStart=null}}for(var result=[],keyValuePairs=str.split(","),i=0,j=keyValuePairs.length;j>i;i++){var pair=keyValuePairs[i],colonPos=pair.indexOf(":");if(colonPos>0&&colonPos<pair.length-1){var key=pair.substring(0,colonPos),value=pair.substring(colonPos+1);result.push({key:restoreTokens(key,tokens),value:restoreTokens(value,tokens)})}else result.push({unknown:restoreTokens(pair,tokens)})}return result},insertPropertyAccessorsIntoJson:function(objectLiteralStringOrKeyValueArray){for(var keyValueEntry,keyValueArray="string"==typeof objectLiteralStringOrKeyValueArray?ko.jsonExpressionRewriting.parseObjectLiteral(objectLiteralStringOrKeyValueArray):objectLiteralStringOrKeyValueArray,resultStrings=[],propertyAccessorResultStrings=[],i=0;keyValueEntry=keyValueArray[i];i++)if(resultStrings.length>0&&resultStrings.push(","),keyValueEntry.key){var quotedKey=ensureQuoted(keyValueEntry.key),val=keyValueEntry.value;resultStrings.push(quotedKey),resultStrings.push(":"),resultStrings.push(val),isWriteableValue(ko.utils.stringTrim(val))&&(propertyAccessorResultStrings.length>0&&propertyAccessorResultStrings.push(", "),propertyAccessorResultStrings.push(quotedKey+" : function(__ko_value) { "+val+" = __ko_value; }"))}else keyValueEntry.unknown&&resultStrings.push(keyValueEntry.unknown);var combinedResult=resultStrings.join("");if(propertyAccessorResultStrings.length>0){var allPropertyAccessors=propertyAccessorResultStrings.join("");combinedResult=combinedResult+", '_ko_property_writers' : { "+allPropertyAccessors+" } "}return combinedResult},keyValueArrayContainsKey:function(keyValueArray,key){for(var i=0;i<keyValueArray.length;i++)if(ko.utils.stringTrim(keyValueArray[i].key)==key)return!0;return!1},writeValueToProperty:function(property,allBindingsAccessor,key,value,checkIfDifferent){if(property&&ko.isWriteableObservable(property))checkIfDifferent&&property()===value||property(value);else{var propWriters=allBindingsAccessor()._ko_property_writers;propWriters&&propWriters[key]&&propWriters[key](value)}}}}(),ko.exportSymbol("jsonExpressionRewriting",ko.jsonExpressionRewriting),ko.exportSymbol("jsonExpressionRewriting.bindingRewriteValidators",ko.jsonExpressionRewriting.bindingRewriteValidators),ko.exportSymbol("jsonExpressionRewriting.parseObjectLiteral",ko.jsonExpressionRewriting.parseObjectLiteral),ko.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson),function(){function isStartComment(node){return 8==node.nodeType&&(commentNodesHaveTextProperty?node.text:node.nodeValue).match(startCommentRegex)}function isEndComment(node){return 8==node.nodeType&&(commentNodesHaveTextProperty?node.text:node.nodeValue).match(endCommentRegex)}function getVirtualChildren(startComment,allowUnbalanced){for(var currentNode=startComment,depth=1,children=[];currentNode=currentNode.nextSibling;){if(isEndComment(currentNode)&&(depth--,0===depth))return children;children.push(currentNode),isStartComment(currentNode)&&depth++}if(!allowUnbalanced)throw new Error("Cannot find closing comment tag to match: "+startComment.nodeValue);return null}function getMatchingEndComment(startComment,allowUnbalanced){var allVirtualChildren=getVirtualChildren(startComment,allowUnbalanced);return allVirtualChildren?allVirtualChildren.length>0?allVirtualChildren[allVirtualChildren.length-1].nextSibling:startComment.nextSibling:null}function getUnbalancedChildTags(node){var childNode=node.firstChild,captureRemaining=null;if(childNode)do if(captureRemaining)captureRemaining.push(childNode);else if(isStartComment(childNode)){var matchingEndComment=getMatchingEndComment(childNode,!0);matchingEndComment?childNode=matchingEndComment:captureRemaining=[childNode]}else isEndComment(childNode)&&(captureRemaining=[childNode]);while(childNode=childNode.nextSibling);return captureRemaining}var commentNodesHaveTextProperty="<!--test-->"===document.createComment("test").text,startCommentRegex=commentNodesHaveTextProperty?/^<!--\s*ko\s+(.*\:.*)\s*-->$/:/^\s*ko\s+(.*\:.*)\s*$/,endCommentRegex=commentNodesHaveTextProperty?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,htmlTagsWithOptionallyClosingChildren={ul:!0,ol:!0};ko.virtualElements={allowedBindings:{},childNodes:function(node){return isStartComment(node)?getVirtualChildren(node):node.childNodes},emptyNode:function(node){if(isStartComment(node))for(var virtualChildren=ko.virtualElements.childNodes(node),i=0,j=virtualChildren.length;j>i;i++)ko.removeNode(virtualChildren[i]);else ko.utils.emptyDomNode(node)},setDomNodeChildren:function(node,childNodes){if(isStartComment(node)){ko.virtualElements.emptyNode(node);for(var endCommentNode=node.nextSibling,i=0,j=childNodes.length;j>i;i++)endCommentNode.parentNode.insertBefore(childNodes[i],endCommentNode)}else ko.utils.setDomNodeChildren(node,childNodes)},prepend:function(containerNode,nodeToPrepend){isStartComment(containerNode)?containerNode.parentNode.insertBefore(nodeToPrepend,containerNode.nextSibling):containerNode.firstChild?containerNode.insertBefore(nodeToPrepend,containerNode.firstChild):containerNode.appendChild(nodeToPrepend)},insertAfter:function(containerNode,nodeToInsert,insertAfterNode){isStartComment(containerNode)?containerNode.parentNode.insertBefore(nodeToInsert,insertAfterNode.nextSibling):insertAfterNode.nextSibling?containerNode.insertBefore(nodeToInsert,insertAfterNode.nextSibling):containerNode.appendChild(nodeToInsert)},firstChild:function(node){return isStartComment(node)?!node.nextSibling||isEndComment(node.nextSibling)?null:node.nextSibling:node.firstChild},nextSibling:function(node){return isStartComment(node)&&(node=getMatchingEndComment(node)),node.nextSibling&&isEndComment(node.nextSibling)?null:node.nextSibling},virtualNodeBindingValue:function(node){var regexMatch=isStartComment(node);return regexMatch?regexMatch[1]:null},normaliseVirtualElementDomStructure:function(elementVerified){if(htmlTagsWithOptionallyClosingChildren[ko.utils.tagNameLower(elementVerified)]){var childNode=elementVerified.firstChild;if(childNode)do if(1===childNode.nodeType){var unbalancedTags=getUnbalancedChildTags(childNode);if(unbalancedTags)for(var nodeToInsertBefore=childNode.nextSibling,i=0;i<unbalancedTags.length;i++)nodeToInsertBefore?elementVerified.insertBefore(unbalancedTags[i],nodeToInsertBefore):elementVerified.appendChild(unbalancedTags[i])}while(childNode=childNode.nextSibling)}}}}(),ko.exportSymbol("virtualElements",ko.virtualElements),ko.exportSymbol("virtualElements.allowedBindings",ko.virtualElements.allowedBindings),ko.exportSymbol("virtualElements.emptyNode",ko.virtualElements.emptyNode),ko.exportSymbol("virtualElements.insertAfter",ko.virtualElements.insertAfter),ko.exportSymbol("virtualElements.prepend",ko.virtualElements.prepend),ko.exportSymbol("virtualElements.setDomNodeChildren",ko.virtualElements.setDomNodeChildren),function(){function createBindingsStringEvaluatorViaCache(bindingsString,scopesCount,cache){var cacheKey=scopesCount+"_"+bindingsString;return cache[cacheKey]||(cache[cacheKey]=createBindingsStringEvaluator(bindingsString,scopesCount))}function createBindingsStringEvaluator(bindingsString,scopesCount){var rewrittenBindings=" { "+ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson(bindingsString)+" } ";return ko.utils.buildEvalWithinScopeFunction(rewrittenBindings,scopesCount)}var defaultBindingAttributeName="data-bind";ko.bindingProvider=function(){this.bindingCache={}},ko.utils.extend(ko.bindingProvider.prototype,{nodeHasBindings:function(node){switch(node.nodeType){case 1:return null!=node.getAttribute(defaultBindingAttributeName);case 8:return null!=ko.virtualElements.virtualNodeBindingValue(node);default:return!1}},getBindings:function(node,bindingContext){var bindingsString=this.getBindingsString(node,bindingContext);return bindingsString?this.parseBindingsString(bindingsString,bindingContext):null},getBindingsString:function(node){switch(node.nodeType){case 1:return node.getAttribute(defaultBindingAttributeName);case 8:return ko.virtualElements.virtualNodeBindingValue(node);default:return null}},parseBindingsString:function(bindingsString,bindingContext){try{var viewModel=bindingContext.$data,scopes="object"==typeof viewModel&&null!=viewModel?[viewModel,bindingContext]:[bindingContext],bindingFunction=createBindingsStringEvaluatorViaCache(bindingsString,scopes.length,this.bindingCache);return bindingFunction(scopes)}catch(ex){throw new Error("Unable to parse bindings.\nMessage: "+ex+";\nBindings value: "+bindingsString)}}}),ko.bindingProvider.instance=new ko.bindingProvider}(),ko.exportSymbol("bindingProvider",ko.bindingProvider),function(){function validateThatBindingIsAllowedForVirtualElements(bindingName){var validator=ko.virtualElements.allowedBindings[bindingName];if(!validator)throw new Error("The binding '"+bindingName+"' cannot be used with virtual elements")}function applyBindingsToDescendantsInternal(viewModel,elementOrVirtualElement,bindingContextsMayDifferFromDomParentElement){for(var currentChild,nextInQueue=ko.virtualElements.firstChild(elementOrVirtualElement);currentChild=nextInQueue;)nextInQueue=ko.virtualElements.nextSibling(currentChild),applyBindingsToNodeAndDescendantsInternal(viewModel,currentChild,bindingContextsMayDifferFromDomParentElement)}function applyBindingsToNodeAndDescendantsInternal(viewModel,nodeVerified,bindingContextMayDifferFromDomParentElement){var shouldBindDescendants=!0,isElement=1===nodeVerified.nodeType;isElement&&ko.virtualElements.normaliseVirtualElementDomStructure(nodeVerified);var shouldApplyBindings=isElement&&bindingContextMayDifferFromDomParentElement||ko.bindingProvider.instance.nodeHasBindings(nodeVerified);shouldApplyBindings&&(shouldBindDescendants=applyBindingsToNodeInternal(nodeVerified,null,viewModel,bindingContextMayDifferFromDomParentElement).shouldBindDescendants),shouldBindDescendants&&applyBindingsToDescendantsInternal(viewModel,nodeVerified,!isElement)}function applyBindingsToNodeInternal(node,bindings,viewModelOrBindingContext,bindingContextMayDifferFromDomParentElement){function makeValueAccessor(bindingKey){return function(){return parsedBindings[bindingKey]}}function parsedBindingsAccessor(){return parsedBindings}var parsedBindings,bindingHandlerThatControlsDescendantBindings,initPhase=0;return ko.dependentObservable(function(){var bindingContextInstance=viewModelOrBindingContext&&viewModelOrBindingContext instanceof ko.bindingContext?viewModelOrBindingContext:new ko.bindingContext(ko.utils.unwrapObservable(viewModelOrBindingContext)),viewModel=bindingContextInstance.$data;bindingContextMayDifferFromDomParentElement&&ko.storedBindingContextForNode(node,bindingContextInstance);var evaluatedBindings="function"==typeof bindings?bindings():bindings;if(parsedBindings=evaluatedBindings||ko.bindingProvider.instance.getBindings(node,bindingContextInstance)){if(0===initPhase){initPhase=1;for(var bindingKey in parsedBindings){var binding=ko.bindingHandlers[bindingKey];if(binding&&8===node.nodeType&&validateThatBindingIsAllowedForVirtualElements(bindingKey),binding&&"function"==typeof binding.init){var handlerInitFn=binding.init,initResult=handlerInitFn(node,makeValueAccessor(bindingKey),parsedBindingsAccessor,viewModel,bindingContextInstance);if(initResult&&initResult.controlsDescendantBindings){if(bindingHandlerThatControlsDescendantBindings!==undefined)throw new Error("Multiple bindings ("+bindingHandlerThatControlsDescendantBindings+" and "+bindingKey+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");bindingHandlerThatControlsDescendantBindings=bindingKey}}}initPhase=2}if(2===initPhase)for(var bindingKey in parsedBindings){var binding=ko.bindingHandlers[bindingKey];if(binding&&"function"==typeof binding.update){var handlerUpdateFn=binding.update;handlerUpdateFn(node,makeValueAccessor(bindingKey),parsedBindingsAccessor,viewModel,bindingContextInstance)}}}},null,{disposeWhenNodeIsRemoved:node}),{shouldBindDescendants:bindingHandlerThatControlsDescendantBindings===undefined}}ko.bindingHandlers={},ko.bindingContext=function(dataItem,parentBindingContext){parentBindingContext?(ko.utils.extend(this,parentBindingContext),this.$parentContext=parentBindingContext,this.$parent=parentBindingContext.$data,this.$parents=(parentBindingContext.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=dataItem),this.$data=dataItem},ko.bindingContext.prototype.createChildContext=function(dataItem){return new ko.bindingContext(dataItem,this)},ko.bindingContext.prototype.extend=function(properties){var clone=ko.utils.extend(new ko.bindingContext,this);return ko.utils.extend(clone,properties)};var storedBindingContextDomDataKey="__ko_bindingContext__";ko.storedBindingContextForNode=function(node,bindingContext){return 2!=arguments.length?ko.utils.domData.get(node,storedBindingContextDomDataKey):void ko.utils.domData.set(node,storedBindingContextDomDataKey,bindingContext)},ko.applyBindingsToNode=function(node,bindings,viewModel){return 1===node.nodeType&&ko.virtualElements.normaliseVirtualElementDomStructure(node),applyBindingsToNodeInternal(node,bindings,viewModel,!0)},ko.applyBindingsToDescendants=function(viewModel,rootNode){(1===rootNode.nodeType||8===rootNode.nodeType)&&applyBindingsToDescendantsInternal(viewModel,rootNode,!0)},ko.applyBindings=function(viewModel,rootNode){if(rootNode&&1!==rootNode.nodeType&&8!==rootNode.nodeType)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");rootNode=rootNode||window.document.body,applyBindingsToNodeAndDescendantsInternal(viewModel,rootNode,!0)},ko.contextFor=function(node){switch(node.nodeType){case 1:case 8:var context=ko.storedBindingContextForNode(node);if(context)return context;if(node.parentNode)return ko.contextFor(node.parentNode)}return undefined},ko.dataFor=function(node){var context=ko.contextFor(node);return context?context.$data:undefined},ko.exportSymbol("bindingHandlers",ko.bindingHandlers),ko.exportSymbol("applyBindings",ko.applyBindings),ko.exportSymbol("applyBindingsToDescendants",ko.applyBindingsToDescendants),ko.exportSymbol("applyBindingsToNode",ko.applyBindingsToNode),ko.exportSymbol("contextFor",ko.contextFor),ko.exportSymbol("dataFor",ko.dataFor)}();var eventHandlersWithShortcuts=["click"];ko.utils.arrayForEach(eventHandlersWithShortcuts,function(eventName){ko.bindingHandlers[eventName]={init:function(element,valueAccessor,allBindingsAccessor,viewModel){var newValueAccessor=function(){var result={};return result[eventName]=valueAccessor(),result};return ko.bindingHandlers.event.init.call(this,element,newValueAccessor,allBindingsAccessor,viewModel)}}}),ko.bindingHandlers.event={init:function(element,valueAccessor,allBindingsAccessor,viewModel){var eventsToHandle=valueAccessor()||{};for(var eventNameOutsideClosure in eventsToHandle)!function(){var eventName=eventNameOutsideClosure;"string"==typeof eventName&&ko.utils.registerEventHandler(element,eventName,function(event){var handlerReturnValue,handlerFunction=valueAccessor()[eventName];if(handlerFunction){var allBindings=allBindingsAccessor();try{var argsForHandler=ko.utils.makeArray(arguments);argsForHandler.unshift(viewModel),handlerReturnValue=handlerFunction.apply(viewModel,argsForHandler)}finally{handlerReturnValue!==!0&&(event.preventDefault?event.preventDefault():event.returnValue=!1)}var bubble=allBindings[eventName+"Bubble"]!==!1;bubble||(event.cancelBubble=!0,event.stopPropagation&&event.stopPropagation())}})}()}},ko.bindingHandlers.submit={init:function(element,valueAccessor,allBindingsAccessor,viewModel){if("function"!=typeof valueAccessor())throw new Error("The value for a submit binding must be a function");ko.utils.registerEventHandler(element,"submit",function(event){var handlerReturnValue,value=valueAccessor();try{handlerReturnValue=value.call(viewModel,element)}finally{handlerReturnValue!==!0&&(event.preventDefault?event.preventDefault():event.returnValue=!1)}})}},ko.bindingHandlers.visible={update:function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor()),isCurrentlyVisible=!("none"==element.style.display);value&&!isCurrentlyVisible?element.style.display="":!value&&isCurrentlyVisible&&(element.style.display="none")}},ko.bindingHandlers.enable={update:function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());value&&element.disabled?element.removeAttribute("disabled"):value||element.disabled||(element.disabled=!0)}},ko.bindingHandlers.disable={update:function(element,valueAccessor){ko.bindingHandlers.enable.update(element,function(){return!ko.utils.unwrapObservable(valueAccessor())})}},ko.bindingHandlers.value={init:function(element,valueAccessor,allBindingsAccessor){var eventsToCatch=["change"],requestedEventsToCatch=allBindingsAccessor().valueUpdate;requestedEventsToCatch&&("string"==typeof requestedEventsToCatch&&(requestedEventsToCatch=[requestedEventsToCatch]),ko.utils.arrayPushAll(eventsToCatch,requestedEventsToCatch),eventsToCatch=ko.utils.arrayGetDistinctValues(eventsToCatch));var valueUpdateHandler=function(){var modelValue=valueAccessor(),elementValue=ko.selectExtensions.readValue(element);ko.jsonExpressionRewriting.writeValueToProperty(modelValue,allBindingsAccessor,"value",elementValue,!0)},ieAutoCompleteHackNeeded=ko.utils.ieVersion&&"input"==element.tagName.toLowerCase()&&"text"==element.type&&"off"!=element.autocomplete&&(!element.form||"off"!=element.form.autocomplete);if(ieAutoCompleteHackNeeded&&-1==ko.utils.arrayIndexOf(eventsToCatch,"propertychange")){var propertyChangedFired=!1;ko.utils.registerEventHandler(element,"propertychange",function(){propertyChangedFired=!0}),ko.utils.registerEventHandler(element,"blur",function(){propertyChangedFired&&(propertyChangedFired=!1,valueUpdateHandler())})}ko.utils.arrayForEach(eventsToCatch,function(eventName){var handler=valueUpdateHandler;ko.utils.stringStartsWith(eventName,"after")&&(handler=function(){setTimeout(valueUpdateHandler,0)},eventName=eventName.substring("after".length)),ko.utils.registerEventHandler(element,eventName,handler)})},update:function(element,valueAccessor){var valueIsSelectOption="select"===ko.utils.tagNameLower(element),newValue=ko.utils.unwrapObservable(valueAccessor()),elementValue=ko.selectExtensions.readValue(element),valueHasChanged=newValue!=elementValue;if(0===newValue&&0!==elementValue&&"0"!==elementValue&&(valueHasChanged=!0),valueHasChanged){var applyValueAction=function(){ko.selectExtensions.writeValue(element,newValue)};applyValueAction();var alsoApplyAsynchronously=valueIsSelectOption;alsoApplyAsynchronously&&setTimeout(applyValueAction,0)}valueIsSelectOption&&element.length>0&&ensureDropdownSelectionIsConsistentWithModelValue(element,newValue,!1)}},ko.bindingHandlers.options={update:function(element,valueAccessor,allBindingsAccessor){if("select"!==ko.utils.tagNameLower(element))throw new Error("options binding applies only to SELECT elements");var selectWasPreviouslyEmpty=0==element.length,previousSelectedValues=ko.utils.arrayMap(ko.utils.arrayFilter(element.childNodes,function(node){return node.tagName&&"option"===ko.utils.tagNameLower(node)&&node.selected}),function(node){return ko.selectExtensions.readValue(node)||node.innerText||node.textContent}),previousScrollTop=element.scrollTop,value=ko.utils.unwrapObservable(valueAccessor());for(element.value;element.length>0;)ko.cleanNode(element.options[0]),element.remove(0);if(value){var allBindings=allBindingsAccessor();if("number"!=typeof value.length&&(value=[value]),allBindings.optionsCaption){var option=document.createElement("option");ko.utils.setHtml(option,allBindings.optionsCaption),ko.selectExtensions.writeValue(option,undefined),element.appendChild(option)}for(var i=0,j=value.length;j>i;i++){var option=document.createElement("option"),optionValue="string"==typeof allBindings.optionsValue?value[i][allBindings.optionsValue]:value[i];optionValue=ko.utils.unwrapObservable(optionValue),ko.selectExtensions.writeValue(option,optionValue);var optionText,optionsTextValue=allBindings.optionsText;optionText="function"==typeof optionsTextValue?optionsTextValue(value[i]):"string"==typeof optionsTextValue?value[i][optionsTextValue]:optionValue,(null===optionText||optionText===undefined)&&(optionText=""),ko.utils.setTextContent(option,optionText),element.appendChild(option)}for(var newOptions=element.getElementsByTagName("option"),countSelectionsRetained=0,i=0,j=newOptions.length;j>i;i++)ko.utils.arrayIndexOf(previousSelectedValues,ko.selectExtensions.readValue(newOptions[i]))>=0&&(ko.utils.setOptionNodeSelectionState(newOptions[i],!0),countSelectionsRetained++);element.scrollTop=previousScrollTop,selectWasPreviouslyEmpty&&"value"in allBindings&&ensureDropdownSelectionIsConsistentWithModelValue(element,ko.utils.unwrapObservable(allBindings.value),!0),ko.utils.ensureSelectElementIsRenderedCorrectly(element)}}},ko.bindingHandlers.options.optionValueDomDataKey="__ko.optionValueDomData__",ko.bindingHandlers.selectedOptions={getSelectedValuesFromSelectNode:function(selectNode){for(var result=[],nodes=selectNode.childNodes,i=0,j=nodes.length;j>i;i++){var node=nodes[i],tagName=ko.utils.tagNameLower(node);if("option"==tagName&&node.selected)result.push(ko.selectExtensions.readValue(node));else if("optgroup"==tagName){var selectedValuesFromOptGroup=ko.bindingHandlers.selectedOptions.getSelectedValuesFromSelectNode(node);Array.prototype.splice.apply(result,[result.length,0].concat(selectedValuesFromOptGroup))}}return result},init:function(element,valueAccessor,allBindingsAccessor){ko.utils.registerEventHandler(element,"change",function(){var value=valueAccessor(),valueToWrite=ko.bindingHandlers.selectedOptions.getSelectedValuesFromSelectNode(this);ko.jsonExpressionRewriting.writeValueToProperty(value,allBindingsAccessor,"value",valueToWrite)})},update:function(element,valueAccessor){if("select"!=ko.utils.tagNameLower(element))throw new Error("values binding applies only to SELECT elements");var newValue=ko.utils.unwrapObservable(valueAccessor());if(newValue&&"number"==typeof newValue.length)for(var nodes=element.childNodes,i=0,j=nodes.length;j>i;i++){var node=nodes[i];"option"===ko.utils.tagNameLower(node)&&ko.utils.setOptionNodeSelectionState(node,ko.utils.arrayIndexOf(newValue,ko.selectExtensions.readValue(node))>=0)}}},ko.bindingHandlers.text={update:function(element,valueAccessor){ko.utils.setTextContent(element,valueAccessor())}},ko.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());ko.utils.setHtml(element,value)}},ko.bindingHandlers.css={update:function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor()||{});for(var className in value)if("string"==typeof className){var shouldHaveClass=ko.utils.unwrapObservable(value[className]);ko.utils.toggleDomNodeCssClass(element,className,shouldHaveClass)}}},ko.bindingHandlers.style={update:function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor()||{});for(var styleName in value)if("string"==typeof styleName){var styleValue=ko.utils.unwrapObservable(value[styleName]);element.style[styleName]=styleValue||""}}},ko.bindingHandlers.uniqueName={init:function(element,valueAccessor){valueAccessor()&&(element.name="ko_unique_"+ ++ko.bindingHandlers.uniqueName.currentIndex,(ko.utils.isIe6||ko.utils.isIe7)&&element.mergeAttributes(document.createElement("<input name='"+element.name+"'/>"),!1))}},ko.bindingHandlers.uniqueName.currentIndex=0,ko.bindingHandlers.checked={init:function(element,valueAccessor,allBindingsAccessor){var updateHandler=function(){var valueToWrite;if("checkbox"==element.type)valueToWrite=element.checked;else{if("radio"!=element.type||!element.checked)return;valueToWrite=element.value}var modelValue=valueAccessor();if("checkbox"==element.type&&ko.utils.unwrapObservable(modelValue)instanceof Array){var existingEntryIndex=ko.utils.arrayIndexOf(ko.utils.unwrapObservable(modelValue),element.value);element.checked&&0>existingEntryIndex?modelValue.push(element.value):!element.checked&&existingEntryIndex>=0&&modelValue.splice(existingEntryIndex,1)}else ko.jsonExpressionRewriting.writeValueToProperty(modelValue,allBindingsAccessor,"checked",valueToWrite,!0)};ko.utils.registerEventHandler(element,"click",updateHandler),"radio"!=element.type||element.name||ko.bindingHandlers.uniqueName.init(element,function(){return!0})},update:function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());"checkbox"==element.type?element.checked=value instanceof Array?ko.utils.arrayIndexOf(value,element.value)>=0:value:"radio"==element.type&&(element.checked=element.value==value)}};var attrHtmlToJavascriptMap={"class":"className","for":"htmlFor"};ko.bindingHandlers.attr={update:function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor())||{};for(var attrName in value)if("string"==typeof attrName){var attrValue=ko.utils.unwrapObservable(value[attrName]),toRemove=attrValue===!1||null===attrValue||attrValue===undefined;toRemove&&element.removeAttribute(attrName),ko.utils.ieVersion<=8&&attrName in attrHtmlToJavascriptMap?(attrName=attrHtmlToJavascriptMap[attrName],toRemove?element.removeAttribute(attrName):element[attrName]=attrValue):toRemove||element.setAttribute(attrName,attrValue.toString())}}},ko.bindingHandlers.hasfocus={init:function(element,valueAccessor,allBindingsAccessor){var writeValue=function(valueToWrite){var modelValue=valueAccessor();ko.jsonExpressionRewriting.writeValueToProperty(modelValue,allBindingsAccessor,"hasfocus",valueToWrite,!0)};ko.utils.registerEventHandler(element,"focus",function(){writeValue(!0)}),ko.utils.registerEventHandler(element,"focusin",function(){writeValue(!0)}),ko.utils.registerEventHandler(element,"blur",function(){writeValue(!1)}),ko.utils.registerEventHandler(element,"focusout",function(){writeValue(!1)})},update:function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());value?element.focus():element.blur(),ko.utils.triggerEvent(element,value?"focusin":"focusout")}},ko.bindingHandlers["with"]={makeTemplateValueAccessor:function(valueAccessor){return function(){var value=valueAccessor();return{"if":value,data:value,templateEngine:ko.nativeTemplateEngine.instance}}},init:function(element,valueAccessor){return ko.bindingHandlers.template.init(element,ko.bindingHandlers["with"].makeTemplateValueAccessor(valueAccessor))},update:function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){return ko.bindingHandlers.template.update(element,ko.bindingHandlers["with"].makeTemplateValueAccessor(valueAccessor),allBindingsAccessor,viewModel,bindingContext)}},ko.jsonExpressionRewriting.bindingRewriteValidators["with"]=!1,ko.virtualElements.allowedBindings["with"]=!0,ko.bindingHandlers["if"]={makeTemplateValueAccessor:function(valueAccessor){return function(){return{"if":valueAccessor(),templateEngine:ko.nativeTemplateEngine.instance}}},init:function(element,valueAccessor){return ko.bindingHandlers.template.init(element,ko.bindingHandlers["if"].makeTemplateValueAccessor(valueAccessor))},update:function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){return ko.bindingHandlers.template.update(element,ko.bindingHandlers["if"].makeTemplateValueAccessor(valueAccessor),allBindingsAccessor,viewModel,bindingContext)}},ko.jsonExpressionRewriting.bindingRewriteValidators["if"]=!1,ko.virtualElements.allowedBindings["if"]=!0,ko.bindingHandlers.ifnot={makeTemplateValueAccessor:function(valueAccessor){return function(){return{ifnot:valueAccessor(),templateEngine:ko.nativeTemplateEngine.instance}}},init:function(element,valueAccessor){return ko.bindingHandlers.template.init(element,ko.bindingHandlers.ifnot.makeTemplateValueAccessor(valueAccessor))
},update:function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){return ko.bindingHandlers.template.update(element,ko.bindingHandlers.ifnot.makeTemplateValueAccessor(valueAccessor),allBindingsAccessor,viewModel,bindingContext)}},ko.jsonExpressionRewriting.bindingRewriteValidators.ifnot=!1,ko.virtualElements.allowedBindings.ifnot=!0,ko.bindingHandlers.foreach={makeTemplateValueAccessor:function(valueAccessor){return function(){var bindingValue=ko.utils.unwrapObservable(valueAccessor());return bindingValue&&"number"!=typeof bindingValue.length?{foreach:bindingValue.data,includeDestroyed:bindingValue.includeDestroyed,afterAdd:bindingValue.afterAdd,beforeRemove:bindingValue.beforeRemove,afterRender:bindingValue.afterRender,templateEngine:ko.nativeTemplateEngine.instance}:{foreach:bindingValue,templateEngine:ko.nativeTemplateEngine.instance}}},init:function(element,valueAccessor){return ko.bindingHandlers.template.init(element,ko.bindingHandlers.foreach.makeTemplateValueAccessor(valueAccessor))},update:function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){return ko.bindingHandlers.template.update(element,ko.bindingHandlers.foreach.makeTemplateValueAccessor(valueAccessor),allBindingsAccessor,viewModel,bindingContext)}},ko.jsonExpressionRewriting.bindingRewriteValidators.foreach=!1,ko.virtualElements.allowedBindings.foreach=!0,ko.templateEngine=function(){},ko.templateEngine.prototype.renderTemplateSource=function(){throw new Error("Override renderTemplateSource")},ko.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(){throw new Error("Override createJavaScriptEvaluatorBlock")},ko.templateEngine.prototype.makeTemplateSource=function(template,templateDocument){if("string"==typeof template){templateDocument=templateDocument||document;var elem=templateDocument.getElementById(template);if(!elem)throw new Error("Cannot find template with ID "+template);return new ko.templateSources.domElement(elem)}if(1==template.nodeType||8==template.nodeType)return new ko.templateSources.anonymousTemplate(template);throw new Error("Unknown template type: "+template)},ko.templateEngine.prototype.renderTemplate=function(template,bindingContext,options,templateDocument){var templateSource=this.makeTemplateSource(template,templateDocument);return this.renderTemplateSource(templateSource,bindingContext,options)},ko.templateEngine.prototype.isTemplateRewritten=function(template,templateDocument){if(this.allowTemplateRewriting===!1)return!0;var templateIsInExternalDocument=templateDocument&&templateDocument!=document;return!templateIsInExternalDocument&&this.knownRewrittenTemplates&&this.knownRewrittenTemplates[template]?!0:this.makeTemplateSource(template,templateDocument).data("isRewritten")},ko.templateEngine.prototype.rewriteTemplate=function(template,rewriterCallback,templateDocument){var templateSource=this.makeTemplateSource(template,templateDocument),rewritten=rewriterCallback(templateSource.text());templateSource.text(rewritten),templateSource.data("isRewritten",!0);var templateIsInExternalDocument=templateDocument&&templateDocument!=document;templateIsInExternalDocument||"string"!=typeof template||(this.knownRewrittenTemplates=this.knownRewrittenTemplates||{},this.knownRewrittenTemplates[template]=!0)},ko.exportSymbol("templateEngine",ko.templateEngine),ko.templateRewriting=function(){function validateDataBindValuesForRewriting(keyValueArray){for(var allValidators=ko.jsonExpressionRewriting.bindingRewriteValidators,i=0;i<keyValueArray.length;i++){var key=keyValueArray[i].key;if(allValidators.hasOwnProperty(key)){var validator=allValidators[key];if("function"==typeof validator){var possibleErrorMessage=validator(keyValueArray[i].value);if(possibleErrorMessage)throw new Error(possibleErrorMessage)}else if(!validator)throw new Error("This template engine does not support the '"+key+"' binding within its templates")}}}function constructMemoizedTagReplacement(dataBindAttributeValue,tagToRetain,templateEngine){var dataBindKeyValueArray=ko.jsonExpressionRewriting.parseObjectLiteral(dataBindAttributeValue);validateDataBindValuesForRewriting(dataBindKeyValueArray);var rewrittenDataBindAttributeValue=ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson(dataBindKeyValueArray),applyBindingsToNextSiblingScript="ko.templateRewriting.applyMemoizedBindingsToNextSibling(function() {             return (function() { return { "+rewrittenDataBindAttributeValue+" } })()         })";return templateEngine.createJavaScriptEvaluatorBlock(applyBindingsToNextSiblingScript)+tagToRetain}var memoizeDataBindingAttributeSyntaxRegex=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi,memoizeVirtualContainerBindingSyntaxRegex=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(template,templateEngine,templateDocument){templateEngine.isTemplateRewritten(template,templateDocument)||templateEngine.rewriteTemplate(template,function(htmlString){return ko.templateRewriting.memoizeBindingAttributeSyntax(htmlString,templateEngine)},templateDocument)},memoizeBindingAttributeSyntax:function(htmlString,templateEngine){return htmlString.replace(memoizeDataBindingAttributeSyntaxRegex,function(){return constructMemoizedTagReplacement(arguments[6],arguments[1],templateEngine)}).replace(memoizeVirtualContainerBindingSyntaxRegex,function(){return constructMemoizedTagReplacement(arguments[1],"<!-- ko -->",templateEngine)})},applyMemoizedBindingsToNextSibling:function(bindings){return ko.memoization.memoize(function(domNode,bindingContext){domNode.nextSibling&&ko.applyBindingsToNode(domNode.nextSibling,bindings,bindingContext)})}}}(),ko.exportSymbol("templateRewriting",ko.templateRewriting),ko.exportSymbol("templateRewriting.applyMemoizedBindingsToNextSibling",ko.templateRewriting.applyMemoizedBindingsToNextSibling),function(){ko.templateSources={},ko.templateSources.domElement=function(element){this.domElement=element},ko.templateSources.domElement.prototype.text=function(){var tagNameLower=ko.utils.tagNameLower(this.domElement),elemContentsProperty="script"===tagNameLower?"text":"textarea"===tagNameLower?"value":"innerHTML";if(0==arguments.length)return this.domElement[elemContentsProperty];var valueToWrite=arguments[0];"innerHTML"===elemContentsProperty?ko.utils.setHtml(this.domElement,valueToWrite):this.domElement[elemContentsProperty]=valueToWrite},ko.templateSources.domElement.prototype.data=function(key){return 1===arguments.length?ko.utils.domData.get(this.domElement,"templateSourceData_"+key):void ko.utils.domData.set(this.domElement,"templateSourceData_"+key,arguments[1])};var anonymousTemplatesDomDataKey="__ko_anon_template__";ko.templateSources.anonymousTemplate=function(element){this.domElement=element},ko.templateSources.anonymousTemplate.prototype=new ko.templateSources.domElement,ko.templateSources.anonymousTemplate.prototype.text=function(){if(0==arguments.length){var templateData=ko.utils.domData.get(this.domElement,anonymousTemplatesDomDataKey)||{};return templateData.textData===undefined&&templateData.containerData&&(templateData.textData=templateData.containerData.innerHTML),templateData.textData}var valueToWrite=arguments[0];ko.utils.domData.set(this.domElement,anonymousTemplatesDomDataKey,{textData:valueToWrite})},ko.templateSources.domElement.prototype.nodes=function(){if(0==arguments.length){var templateData=ko.utils.domData.get(this.domElement,anonymousTemplatesDomDataKey)||{};return templateData.containerData}var valueToWrite=arguments[0];ko.utils.domData.set(this.domElement,anonymousTemplatesDomDataKey,{containerData:valueToWrite})},ko.exportSymbol("templateSources",ko.templateSources),ko.exportSymbol("templateSources.domElement",ko.templateSources.domElement),ko.exportSymbol("templateSources.anonymousTemplate",ko.templateSources.anonymousTemplate)}(),function(){function invokeForEachNodeOrCommentInContinuousRange(firstNode,lastNode,action){for(var node,nextInQueue=firstNode,firstOutOfRangeNode=ko.virtualElements.nextSibling(lastNode);nextInQueue&&(node=nextInQueue)!==firstOutOfRangeNode;)nextInQueue=ko.virtualElements.nextSibling(node),(1===node.nodeType||8===node.nodeType)&&action(node)}function activateBindingsOnContinuousNodeArray(continuousNodeArray,bindingContext){if(continuousNodeArray.length){var firstNode=continuousNodeArray[0],lastNode=continuousNodeArray[continuousNodeArray.length-1];invokeForEachNodeOrCommentInContinuousRange(firstNode,lastNode,function(node){ko.applyBindings(bindingContext,node)}),invokeForEachNodeOrCommentInContinuousRange(firstNode,lastNode,function(node){ko.memoization.unmemoizeDomNodeAndDescendants(node,[bindingContext])})}}function getFirstNodeFromPossibleArray(nodeOrNodeArray){return nodeOrNodeArray.nodeType?nodeOrNodeArray:nodeOrNodeArray.length>0?nodeOrNodeArray[0]:null}function executeTemplate(targetNodeOrNodeArray,renderMode,template,bindingContext,options){options=options||{};var firstTargetNode=targetNodeOrNodeArray&&getFirstNodeFromPossibleArray(targetNodeOrNodeArray),templateDocument=firstTargetNode&&firstTargetNode.ownerDocument,templateEngineToUse=options.templateEngine||_templateEngine;ko.templateRewriting.ensureTemplateIsRewritten(template,templateEngineToUse,templateDocument);var renderedNodesArray=templateEngineToUse.renderTemplate(template,bindingContext,options,templateDocument);if("number"!=typeof renderedNodesArray.length||renderedNodesArray.length>0&&"number"!=typeof renderedNodesArray[0].nodeType)throw new Error("Template engine must return an array of DOM nodes");var haveAddedNodesToParent=!1;switch(renderMode){case"replaceChildren":ko.virtualElements.setDomNodeChildren(targetNodeOrNodeArray,renderedNodesArray),haveAddedNodesToParent=!0;break;case"replaceNode":ko.utils.replaceDomNodes(targetNodeOrNodeArray,renderedNodesArray),haveAddedNodesToParent=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+renderMode)}return haveAddedNodesToParent&&(activateBindingsOnContinuousNodeArray(renderedNodesArray,bindingContext),options.afterRender&&options.afterRender(renderedNodesArray,bindingContext.$data)),renderedNodesArray}function disposeOldSubscriptionAndStoreNewOne(element,newSubscription){var oldSubscription=ko.utils.domData.get(element,templateSubscriptionDomDataKey);oldSubscription&&"function"==typeof oldSubscription.dispose&&oldSubscription.dispose(),ko.utils.domData.set(element,templateSubscriptionDomDataKey,newSubscription)}var _templateEngine;ko.setTemplateEngine=function(templateEngine){if(templateEngine!=undefined&&!(templateEngine instanceof ko.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");_templateEngine=templateEngine},ko.renderTemplate=function(template,dataOrBindingContext,options,targetNodeOrNodeArray,renderMode){if(options=options||{},(options.templateEngine||_templateEngine)==undefined)throw new Error("Set a template engine before calling renderTemplate");if(renderMode=renderMode||"replaceChildren",targetNodeOrNodeArray){var firstTargetNode=getFirstNodeFromPossibleArray(targetNodeOrNodeArray),whenToDispose=function(){return!firstTargetNode||!ko.utils.domNodeIsAttachedToDocument(firstTargetNode)},activelyDisposeWhenNodeIsRemoved=firstTargetNode&&"replaceNode"==renderMode?firstTargetNode.parentNode:firstTargetNode;return ko.dependentObservable(function(){var bindingContext=dataOrBindingContext&&dataOrBindingContext instanceof ko.bindingContext?dataOrBindingContext:new ko.bindingContext(ko.utils.unwrapObservable(dataOrBindingContext)),templateName="function"==typeof template?template(bindingContext.$data):template,renderedNodesArray=executeTemplate(targetNodeOrNodeArray,renderMode,templateName,bindingContext,options);"replaceNode"==renderMode&&(targetNodeOrNodeArray=renderedNodesArray,firstTargetNode=getFirstNodeFromPossibleArray(targetNodeOrNodeArray))},null,{disposeWhen:whenToDispose,disposeWhenNodeIsRemoved:activelyDisposeWhenNodeIsRemoved})}return ko.memoization.memoize(function(domNode){ko.renderTemplate(template,dataOrBindingContext,options,domNode,"replaceNode")})},ko.renderTemplateForEach=function(template,arrayOrObservableArray,options,targetNode,parentBindingContext){var arrayItemContext,executeTemplateForArrayItem=function(arrayValue,index){var templateName="function"==typeof template?template(arrayValue):template;return arrayItemContext=parentBindingContext.createChildContext(ko.utils.unwrapObservable(arrayValue)),arrayItemContext.$index=index,executeTemplate(null,"ignoreTargetNode",templateName,arrayItemContext,options)},activateBindingsCallback=function(arrayValue,addedNodesArray){activateBindingsOnContinuousNodeArray(addedNodesArray,arrayItemContext),options.afterRender&&options.afterRender(addedNodesArray,arrayValue)};return ko.dependentObservable(function(){var unwrappedArray=ko.utils.unwrapObservable(arrayOrObservableArray)||[];"undefined"==typeof unwrappedArray.length&&(unwrappedArray=[unwrappedArray]);var filteredArray=ko.utils.arrayFilter(unwrappedArray,function(item){return options.includeDestroyed||item===undefined||null===item||!ko.utils.unwrapObservable(item._destroy)});ko.utils.setDomNodeChildrenFromArrayMapping(targetNode,filteredArray,executeTemplateForArrayItem,options,activateBindingsCallback)},null,{disposeWhenNodeIsRemoved:targetNode})};var templateSubscriptionDomDataKey="__ko__templateSubscriptionDomDataKey__";ko.bindingHandlers.template={init:function(element,valueAccessor){var bindingValue=ko.utils.unwrapObservable(valueAccessor());if("string"!=typeof bindingValue&&!bindingValue.name&&(1==element.nodeType||8==element.nodeType)){var templateNodes=1==element.nodeType?element.childNodes:ko.virtualElements.childNodes(element),container=ko.utils.moveCleanedNodesToContainerElement(templateNodes);new ko.templateSources.anonymousTemplate(element).nodes(container)}return{controlsDescendantBindings:!0}},update:function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){var templateName,bindingValue=ko.utils.unwrapObservable(valueAccessor()),shouldDisplay=!0;"string"==typeof bindingValue?templateName=bindingValue:(templateName=bindingValue.name,"if"in bindingValue&&(shouldDisplay=shouldDisplay&&ko.utils.unwrapObservable(bindingValue["if"])),"ifnot"in bindingValue&&(shouldDisplay=shouldDisplay&&!ko.utils.unwrapObservable(bindingValue.ifnot)));var templateSubscription=null;if("object"==typeof bindingValue&&"foreach"in bindingValue){var dataArray=shouldDisplay&&bindingValue.foreach||[];templateSubscription=ko.renderTemplateForEach(templateName||element,dataArray,bindingValue,element,bindingContext)}else if(shouldDisplay){var innerBindingContext="object"==typeof bindingValue&&"data"in bindingValue?bindingContext.createChildContext(ko.utils.unwrapObservable(bindingValue.data)):bindingContext;templateSubscription=ko.renderTemplate(templateName||element,innerBindingContext,bindingValue,element)}else ko.virtualElements.emptyNode(element);disposeOldSubscriptionAndStoreNewOne(element,templateSubscription)}},ko.jsonExpressionRewriting.bindingRewriteValidators.template=function(bindingValue){var parsedBindingValue=ko.jsonExpressionRewriting.parseObjectLiteral(bindingValue);return 1==parsedBindingValue.length&&parsedBindingValue[0].unknown?null:ko.jsonExpressionRewriting.keyValueArrayContainsKey(parsedBindingValue,"name")?null:"This template engine does not support anonymous templates nested within its templates"},ko.virtualElements.allowedBindings.template=!0}(),ko.exportSymbol("setTemplateEngine",ko.setTemplateEngine),ko.exportSymbol("renderTemplate",ko.renderTemplate),function(){function calculateEditDistanceMatrix(oldArray,newArray,maxAllowedDistance){for(var distances=[],i=0;i<=newArray.length;i++)distances[i]=[];for(var i=0,j=Math.min(oldArray.length,maxAllowedDistance);j>=i;i++)distances[0][i]=i;for(var i=1,j=Math.min(newArray.length,maxAllowedDistance);j>=i;i++)distances[i][0]=i;var oldIndex,newIndex,oldIndexMax=oldArray.length,newIndexMax=newArray.length;for(oldIndex=1;oldIndexMax>=oldIndex;oldIndex++){var newIndexMinForRow=Math.max(1,oldIndex-maxAllowedDistance),newIndexMaxForRow=Math.min(newIndexMax,oldIndex+maxAllowedDistance);for(newIndex=newIndexMinForRow;newIndexMaxForRow>=newIndex;newIndex++)if(oldArray[oldIndex-1]===newArray[newIndex-1])distances[newIndex][oldIndex]=distances[newIndex-1][oldIndex-1];else{var northDistance=distances[newIndex-1][oldIndex]===undefined?Number.MAX_VALUE:distances[newIndex-1][oldIndex]+1,westDistance=distances[newIndex][oldIndex-1]===undefined?Number.MAX_VALUE:distances[newIndex][oldIndex-1]+1;distances[newIndex][oldIndex]=Math.min(northDistance,westDistance)}}return distances}function findEditScriptFromEditDistanceMatrix(editDistanceMatrix,oldArray,newArray){var oldIndex=oldArray.length,newIndex=newArray.length,editScript=[],maxDistance=editDistanceMatrix[newIndex][oldIndex];if(maxDistance===undefined)return null;for(;oldIndex>0||newIndex>0;){var me=editDistanceMatrix[newIndex][oldIndex],distanceViaAdd=newIndex>0?editDistanceMatrix[newIndex-1][oldIndex]:maxDistance+1,distanceViaDelete=oldIndex>0?editDistanceMatrix[newIndex][oldIndex-1]:maxDistance+1,distanceViaRetain=newIndex>0&&oldIndex>0?editDistanceMatrix[newIndex-1][oldIndex-1]:maxDistance+1;(distanceViaAdd===undefined||me-1>distanceViaAdd)&&(distanceViaAdd=maxDistance+1),(distanceViaDelete===undefined||me-1>distanceViaDelete)&&(distanceViaDelete=maxDistance+1),me-1>distanceViaRetain&&(distanceViaRetain=maxDistance+1),distanceViaDelete>=distanceViaAdd&&distanceViaRetain>distanceViaAdd?(editScript.push({status:"added",value:newArray[newIndex-1]}),newIndex--):distanceViaAdd>distanceViaDelete&&distanceViaRetain>distanceViaDelete?(editScript.push({status:"deleted",value:oldArray[oldIndex-1]}),oldIndex--):(editScript.push({status:"retained",value:oldArray[oldIndex-1]}),newIndex--,oldIndex--)}return editScript.reverse()}ko.utils.compareArrays=function(oldArray,newArray,maxEditsToConsider){if(maxEditsToConsider===undefined)return ko.utils.compareArrays(oldArray,newArray,1)||ko.utils.compareArrays(oldArray,newArray,10)||ko.utils.compareArrays(oldArray,newArray,Number.MAX_VALUE);oldArray=oldArray||[],newArray=newArray||[];var editDistanceMatrix=calculateEditDistanceMatrix(oldArray,newArray,maxEditsToConsider);return findEditScriptFromEditDistanceMatrix(editDistanceMatrix,oldArray,newArray)}}(),ko.exportSymbol("utils.compareArrays",ko.utils.compareArrays),function(){function fixUpVirtualElements(contiguousNodeArray){if(contiguousNodeArray.length>2){for(var current=contiguousNodeArray[0],last=contiguousNodeArray[contiguousNodeArray.length-1],newContiguousSet=[current];current!==last;){if(current=current.nextSibling,!current)return;newContiguousSet.push(current)}Array.prototype.splice.apply(contiguousNodeArray,[0,contiguousNodeArray.length].concat(newContiguousSet))}}function mapNodeAndRefreshWhenChanged(containerNode,mapping,valueToMap,callbackAfterAddingNodes,index){var mappedNodes=[],dependentObservable=ko.dependentObservable(function(){var newMappedNodes=mapping(valueToMap,index)||[];mappedNodes.length>0&&(fixUpVirtualElements(mappedNodes),ko.utils.replaceDomNodes(mappedNodes,newMappedNodes),callbackAfterAddingNodes&&callbackAfterAddingNodes(valueToMap,newMappedNodes)),mappedNodes.splice(0,mappedNodes.length),ko.utils.arrayPushAll(mappedNodes,newMappedNodes)},null,{disposeWhenNodeIsRemoved:containerNode,disposeWhen:function(){return 0==mappedNodes.length||!ko.utils.domNodeIsAttachedToDocument(mappedNodes[0])}});return{mappedNodes:mappedNodes,dependentObservable:dependentObservable}}var lastMappingResultDomDataKey="setDomNodeChildrenFromArrayMapping_lastMappingResult";ko.utils.setDomNodeChildrenFromArrayMapping=function(domNode,array,mapping,options,callbackAfterAddingNodes){array=array||[],options=options||{};for(var isFirstExecution=ko.utils.domData.get(domNode,lastMappingResultDomDataKey)===undefined,lastMappingResult=ko.utils.domData.get(domNode,lastMappingResultDomDataKey)||[],lastArray=ko.utils.arrayMap(lastMappingResult,function(x){return x.arrayEntry}),editScript=ko.utils.compareArrays(lastArray,array),newMappingResult=[],lastMappingResultIndex=0,nodesToDelete=[],newMappingResultIndex=0,nodesAdded=[],insertAfterNode=null,i=0,j=editScript.length;j>i;i++)switch(editScript[i].status){case"retained":var dataToRetain=lastMappingResult[lastMappingResultIndex];dataToRetain.indexObservable(newMappingResultIndex),newMappingResultIndex=newMappingResult.push(dataToRetain),dataToRetain.domNodes.length>0&&(insertAfterNode=dataToRetain.domNodes[dataToRetain.domNodes.length-1]),lastMappingResultIndex++;break;case"deleted":lastMappingResult[lastMappingResultIndex].dependentObservable.dispose(),fixUpVirtualElements(lastMappingResult[lastMappingResultIndex].domNodes),ko.utils.arrayForEach(lastMappingResult[lastMappingResultIndex].domNodes,function(node){nodesToDelete.push({element:node,index:i,value:editScript[i].value}),insertAfterNode=node}),lastMappingResultIndex++;break;case"added":var valueToMap=editScript[i].value,indexObservable=ko.observable(newMappingResultIndex),mapData=mapNodeAndRefreshWhenChanged(domNode,mapping,valueToMap,callbackAfterAddingNodes,indexObservable),mappedNodes=mapData.mappedNodes;newMappingResultIndex=newMappingResult.push({arrayEntry:editScript[i].value,domNodes:mappedNodes,dependentObservable:mapData.dependentObservable,indexObservable:indexObservable});for(var nodeIndex=0,nodeIndexMax=mappedNodes.length;nodeIndexMax>nodeIndex;nodeIndex++){var node=mappedNodes[nodeIndex];nodesAdded.push({element:node,index:i,value:editScript[i].value}),null==insertAfterNode?ko.virtualElements.prepend(domNode,node):ko.virtualElements.insertAfter(domNode,node,insertAfterNode),insertAfterNode=node}callbackAfterAddingNodes&&callbackAfterAddingNodes(valueToMap,mappedNodes,indexObservable)}ko.utils.arrayForEach(nodesToDelete,function(node){ko.cleanNode(node.element)});var invokedBeforeRemoveCallback=!1;if(!isFirstExecution){if(options.afterAdd)for(var i=0;i<nodesAdded.length;i++)options.afterAdd(nodesAdded[i].element,nodesAdded[i].index,nodesAdded[i].value);if(options.beforeRemove){for(var i=0;i<nodesToDelete.length;i++)options.beforeRemove(nodesToDelete[i].element,nodesToDelete[i].index,nodesToDelete[i].value);invokedBeforeRemoveCallback=!0}}if(!invokedBeforeRemoveCallback&&nodesToDelete.length)for(var i=0;i<nodesToDelete.length;i++){var element=nodesToDelete[i].element;element.parentNode&&element.parentNode.removeChild(element)}ko.utils.domData.set(domNode,lastMappingResultDomDataKey,newMappingResult)}}(),ko.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",ko.utils.setDomNodeChildrenFromArrayMapping),ko.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},ko.nativeTemplateEngine.prototype=new ko.templateEngine,ko.nativeTemplateEngine.prototype.renderTemplateSource=function(templateSource){var useNodesIfAvailable=!(ko.utils.ieVersion<9),templateNodesFunc=useNodesIfAvailable?templateSource.nodes:null,templateNodes=templateNodesFunc?templateSource.nodes():null;if(templateNodes)return ko.utils.makeArray(templateNodes.cloneNode(!0).childNodes);var templateText=templateSource.text();return ko.utils.parseHtmlFragment(templateText)},ko.nativeTemplateEngine.instance=new ko.nativeTemplateEngine,ko.setTemplateEngine(ko.nativeTemplateEngine.instance),ko.exportSymbol("nativeTemplateEngine",ko.nativeTemplateEngine),function(){ko.jqueryTmplTemplateEngine=function(){function ensureHasReferencedJQueryTemplates(){if(2>jQueryTmplVersion)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}function executeTemplate(compiledTemplate,data,jQueryTemplateOptions){return jQuery.tmpl(compiledTemplate,data,jQueryTemplateOptions)}var jQueryTmplVersion=this.jQueryTmplVersion=function(){if("undefined"==typeof jQuery||!jQuery.tmpl)return 0;try{if(jQuery.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(ex){}return 1}();this.renderTemplateSource=function(templateSource,bindingContext,options){options=options||{},ensureHasReferencedJQueryTemplates();var precompiled=templateSource.data("precompiled");if(!precompiled){var templateText=templateSource.text()||"";templateText="{{ko_with $item.koBindingContext}}"+templateText+"{{/ko_with}}",precompiled=jQuery.template(null,templateText),templateSource.data("precompiled",precompiled)}var data=[bindingContext.$data],jQueryTemplateOptions=jQuery.extend({koBindingContext:bindingContext},options.templateOptions),resultNodes=executeTemplate(precompiled,data,jQueryTemplateOptions);return resultNodes.appendTo(document.createElement("div")),jQuery.fragments={},resultNodes},this.createJavaScriptEvaluatorBlock=function(script){return"{{ko_code ((function() { return "+script+" })()) }}"},this.addTemplate=function(templateName,templateMarkup){document.write("<script type='text/html' id='"+templateName+"'>"+templateMarkup+"</script>")},jQueryTmplVersion>0&&(jQuery.tmpl.tag.ko_code={open:"__.push($1 || '');"},jQuery.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},ko.jqueryTmplTemplateEngine.prototype=new ko.templateEngine;var jqueryTmplTemplateEngineInstance=new ko.jqueryTmplTemplateEngine;jqueryTmplTemplateEngineInstance.jQueryTmplVersion>0&&ko.setTemplateEngine(jqueryTmplTemplateEngineInstance),ko.exportSymbol("jqueryTmplTemplateEngine",ko.jqueryTmplTemplateEngine)}()})}(window,document,navigator),function(factory){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?factory(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],factory):factory(ko,ko.mapping={})}(function(ko,exports){function extendObject(destination,source){for(var key in source)source.hasOwnProperty(key)&&source[key]&&(key&&destination[key]&&"array"!==exports.getType(destination[key])?extendObject(destination[key],source[key]):destination[key]=source[key])}function merge(obj1,obj2){var merged={};return extendObject(merged,obj1),extendObject(merged,obj2),merged}function fillOptions(rawOptions,otherOptions){options=merge({},rawOptions);for(var i=recognizedRootProperties.length-1;i>=0;i--){var property=recognizedRootProperties[i];options[property]&&(options[""]instanceof Object||(options[""]={}),options[""][property]=options[property],delete options[property])}return otherOptions&&(options.ignore=mergeArrays(otherOptions.ignore,options.ignore),options.include=mergeArrays(otherOptions.include,options.include),options.copy=mergeArrays(otherOptions.copy,options.copy)),options.ignore=mergeArrays(options.ignore,defaultOptions.ignore),options.include=mergeArrays(options.include,defaultOptions.include),options.copy=mergeArrays(options.copy,defaultOptions.copy),options.mappedProperties=options.mappedProperties||{},options}function mergeArrays(a,b){return"array"!==exports.getType(a)&&(a="undefined"===exports.getType(a)?[]:[a]),"array"!==exports.getType(b)&&(b="undefined"===exports.getType(b)?[]:[b]),ko.utils.arrayGetDistinctValues(a.concat(b))}function withProxyDependentObservable(dependentObservables,callback){var localDO=ko.dependentObservable;ko.dependentObservable=function(read,owner,options){options=options||{},read&&"object"==typeof read&&(options=read);var realDeferEvaluation=options.deferEvaluation,isRemoved=!1,wrap=function(DO){var wrapped=realKoDependentObservable({read:function(){return isRemoved||(ko.utils.arrayRemoveItem(dependentObservables,DO),isRemoved=!0),DO.apply(DO,arguments)},write:DO.hasWriteFunction&&function(val){return DO(val)},deferEvaluation:!0});return DEBUG&&(wrapped._wrapper=!0),wrapped};options.deferEvaluation=!0;var realDependentObservable=new realKoDependentObservable(read,owner,options);return realDeferEvaluation||(realDependentObservable=wrap(realDependentObservable),dependentObservables.push(realDependentObservable)),realDependentObservable},ko.dependentObservable.fn=realKoDependentObservable.fn,ko.computed=ko.dependentObservable;var result=callback();return ko.dependentObservable=localDO,ko.computed=ko.dependentObservable,result}function updateViewModel(mappedRootObject,rootObject,options,parentName,parent,parentPropertyName){var isArray="array"===exports.getType(ko.utils.unwrapObservable(rootObject));if(parentPropertyName=parentPropertyName||"",exports.isMapped(mappedRootObject)){var previousMapping=ko.utils.unwrapObservable(mappedRootObject)[mappingProperty];options=merge(previousMapping,options)}var callbackParams={data:rootObject,parent:parent},hasCreateCallback=function(){return options[parentName]&&options[parentName].create instanceof Function},createCallback=function(data){return withProxyDependentObservable(dependentObservables,function(){return options[parentName].create({data:data||callbackParams.data,parent:callbackParams.parent})})},hasUpdateCallback=function(){return options[parentName]&&options[parentName].update instanceof Function},updateCallback=function(obj,data){var params={data:data||callbackParams.data,parent:callbackParams.parent,target:ko.utils.unwrapObservable(obj)};return ko.isWriteableObservable(obj)&&(params.observable=obj),options[parentName].update(params)},alreadyMapped=visitedObjects.get(rootObject);if(alreadyMapped)return alreadyMapped;if(parentName=parentName||"",isArray){var changes=[],hasKeyCallback=!1,keyCallback=function(x){return x};options[parentName]&&options[parentName].key&&(keyCallback=options[parentName].key,hasKeyCallback=!0),ko.isObservable(mappedRootObject)||(mappedRootObject=ko.observableArray([]),mappedRootObject.mappedRemove=function(valueOrPredicate){var predicate="function"==typeof valueOrPredicate?valueOrPredicate:function(value){return value===keyCallback(valueOrPredicate)};return mappedRootObject.remove(function(item){return predicate(keyCallback(item))})},mappedRootObject.mappedRemoveAll=function(arrayOfValues){var arrayOfKeys=filterArrayByKey(arrayOfValues,keyCallback);return mappedRootObject.remove(function(item){return-1!=ko.utils.arrayIndexOf(arrayOfKeys,keyCallback(item))})},mappedRootObject.mappedDestroy=function(valueOrPredicate){var predicate="function"==typeof valueOrPredicate?valueOrPredicate:function(value){return value===keyCallback(valueOrPredicate)};return mappedRootObject.destroy(function(item){return predicate(keyCallback(item))})},mappedRootObject.mappedDestroyAll=function(arrayOfValues){var arrayOfKeys=filterArrayByKey(arrayOfValues,keyCallback);return mappedRootObject.destroy(function(item){return-1!=ko.utils.arrayIndexOf(arrayOfKeys,keyCallback(item))})},mappedRootObject.mappedIndexOf=function(item){var keys=filterArrayByKey(mappedRootObject(),keyCallback),key=keyCallback(item);return ko.utils.arrayIndexOf(keys,key)},mappedRootObject.mappedCreate=function(value){if(-1!==mappedRootObject.mappedIndexOf(value))throw new Error("There already is an object with the key that you specified.");var item=hasCreateCallback()?createCallback(value):value;if(hasUpdateCallback()){var newValue=updateCallback(item,value);ko.isWriteableObservable(item)?item(newValue):item=newValue}return mappedRootObject.push(item),item});var currentArrayKeys=filterArrayByKey(ko.utils.unwrapObservable(mappedRootObject),keyCallback).sort(),newArrayKeys=filterArrayByKey(rootObject,keyCallback);hasKeyCallback&&newArrayKeys.sort();var i,j,editScript=ko.utils.compareArrays(currentArrayKeys,newArrayKeys),ignoreIndexOf={},unwrappedRootObject=ko.utils.unwrapObservable(rootObject),itemsByKey={},optimizedKeys=!0;for(i=0,j=unwrappedRootObject.length;j>i;i++){var key=keyCallback(unwrappedRootObject[i]);if(void 0===key||key instanceof Object){optimizedKeys=!1;break}itemsByKey[key]=unwrappedRootObject[i]}var newContents=[];for(i=0,j=editScript.length;j>i;i++){var mappedItem,key=editScript[i],fullPropertyName=parentPropertyName+"["+i+"]";switch(key.status){case"added":var item=optimizedKeys?itemsByKey[key.value]:getItemByKey(ko.utils.unwrapObservable(rootObject),key.value,keyCallback);mappedItem=updateViewModel(void 0,item,options,parentName,mappedRootObject,fullPropertyName),hasCreateCallback()||(mappedItem=ko.utils.unwrapObservable(mappedItem));
var index=ignorableIndexOf(ko.utils.unwrapObservable(rootObject),item,ignoreIndexOf);newContents[index]=mappedItem,ignoreIndexOf[index]=!0;break;case"retained":var item=optimizedKeys?itemsByKey[key.value]:getItemByKey(ko.utils.unwrapObservable(rootObject),key.value,keyCallback);mappedItem=getItemByKey(mappedRootObject,key.value,keyCallback),updateViewModel(mappedItem,item,options,parentName,mappedRootObject,fullPropertyName);var index=ignorableIndexOf(ko.utils.unwrapObservable(rootObject),item,ignoreIndexOf);newContents[index]=mappedItem,ignoreIndexOf[index]=!0;break;case"deleted":mappedItem=getItemByKey(mappedRootObject,key.value,keyCallback)}changes.push({event:key.status,item:mappedItem})}mappedRootObject(newContents),options[parentName]&&options[parentName].arrayChanged&&ko.utils.arrayForEach(changes,function(change){options[parentName].arrayChanged(change.event,change.item)})}else if(canHaveProperties(rootObject)){if(mappedRootObject=ko.utils.unwrapObservable(mappedRootObject),!mappedRootObject){if(hasCreateCallback()){var result=createCallback();return hasUpdateCallback()&&(result=updateCallback(result)),result}if(hasUpdateCallback())return updateCallback(result);mappedRootObject={}}hasUpdateCallback()&&(mappedRootObject=updateCallback(mappedRootObject)),visitedObjects.save(rootObject,mappedRootObject),visitPropertiesOrArrayEntries(rootObject,function(indexer){var fullPropertyName=parentPropertyName.length?parentPropertyName+"."+indexer:indexer;if(-1==ko.utils.arrayIndexOf(options.ignore,fullPropertyName)){if(-1!=ko.utils.arrayIndexOf(options.copy,fullPropertyName))return void(mappedRootObject[indexer]=rootObject[indexer]);var prevMappedProperty=visitedObjects.get(rootObject[indexer]),value=prevMappedProperty||updateViewModel(mappedRootObject[indexer],rootObject[indexer],options,indexer,mappedRootObject,fullPropertyName);ko.isWriteableObservable(mappedRootObject[indexer])?mappedRootObject[indexer](ko.utils.unwrapObservable(value)):mappedRootObject[indexer]=value,options.mappedProperties[fullPropertyName]=!0}})}else switch(exports.getType(rootObject)){case"function":hasUpdateCallback()?ko.isWriteableObservable(rootObject)?(rootObject(updateCallback(rootObject)),mappedRootObject=rootObject):mappedRootObject=updateCallback(rootObject):mappedRootObject=rootObject;break;default:ko.isWriteableObservable(mappedRootObject)?mappedRootObject(hasUpdateCallback()?updateCallback(mappedRootObject):ko.utils.unwrapObservable(rootObject)):(mappedRootObject=hasCreateCallback()?createCallback():ko.observable(ko.utils.unwrapObservable(rootObject)),hasUpdateCallback()&&mappedRootObject(updateCallback(mappedRootObject)))}return mappedRootObject}function ignorableIndexOf(array,item,ignoreIndices){for(var i=0,j=array.length;j>i;i++)if(ignoreIndices[i]!==!0&&array[i]===item)return i;return null}function mapKey(item,callback){var mappedItem;return callback&&(mappedItem=callback(item)),"undefined"===exports.getType(mappedItem)&&(mappedItem=item),ko.utils.unwrapObservable(mappedItem)}function getItemByKey(array,key,callback){array=ko.utils.unwrapObservable(array);for(var i=0,j=array.length;j>i;i++){var item=array[i];if(mapKey(item,callback)===key)return item}throw new Error("When calling ko.update*, the key '"+key+"' was not found!")}function filterArrayByKey(array,callback){return ko.utils.arrayMap(ko.utils.unwrapObservable(array),function(item){return callback?mapKey(item,callback):item})}function visitPropertiesOrArrayEntries(rootObject,visitorCallback){if("array"===exports.getType(rootObject))for(var i=0;i<rootObject.length;i++)visitorCallback(i);else for(var propertyName in rootObject)visitorCallback(propertyName)}function canHaveProperties(object){var type=exports.getType(object);return("object"===type||"array"===type)&&null!==object}function getPropertyName(parentName,parent,indexer){var propertyName=parentName||"";return"array"===exports.getType(parent)?parentName&&(propertyName+="["+indexer+"]"):(parentName&&(propertyName+="."),propertyName+=indexer),propertyName}function simpleObjectLookup(){var keys=[],values=[];this.save=function(key,value){var existingIndex=ko.utils.arrayIndexOf(keys,key);existingIndex>=0?values[existingIndex]=value:(keys.push(key),values.push(value))},this.get=function(key){var existingIndex=ko.utils.arrayIndexOf(keys,key),value=existingIndex>=0?values[existingIndex]:void 0;return value}}function objectLookup(){var buckets={},findBucket=function(key){var bucketKey;try{bucketKey=JSON.stringify(key)}catch(e){bucketKey="$$$"}var bucket=buckets[bucketKey];return void 0===bucket&&(bucket=new simpleObjectLookup,buckets[bucketKey]=bucket),bucket};this.save=function(key,value){findBucket(key).save(key,value)},this.get=function(key){return findBucket(key).get(key)}}var dependentObservables,visitedObjects,DEBUG=!0,mappingProperty="__ko_mapping__",realKoDependentObservable=ko.dependentObservable,mappingNesting=0,recognizedRootProperties=["create","update","key","arrayChanged"],_defaultOptions={include:["_destroy"],ignore:[],copy:[]},defaultOptions=_defaultOptions;exports.isMapped=function(viewModel){var unwrapped=ko.utils.unwrapObservable(viewModel);return unwrapped&&unwrapped[mappingProperty]},exports.fromJS=function(jsObject){if(0==arguments.length)throw new Error("When calling ko.fromJS, pass the object you want to convert.");window.setTimeout(function(){mappingNesting=0},0),mappingNesting++||(dependentObservables=[],visitedObjects=new objectLookup);var options,target;2==arguments.length&&(arguments[1][mappingProperty]?target=arguments[1]:options=arguments[1]),3==arguments.length&&(options=arguments[1],target=arguments[2]),target&&(options=merge(options,target[mappingProperty])),options=fillOptions(options);var result=updateViewModel(target,jsObject,options);return target&&(result=target),--mappingNesting||window.setTimeout(function(){for(;dependentObservables.length;){var DO=dependentObservables.pop();DO&&DO()}},0),result[mappingProperty]=merge(result[mappingProperty],options),result},exports.fromJSON=function(jsonString){var parsed=ko.utils.parseJson(jsonString);return arguments[0]=parsed,exports.fromJS.apply(this,arguments)},exports.updateFromJS=function(){throw new Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!")},exports.updateFromJSON=function(){throw new Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!")},exports.toJS=function(rootObject,options){if(defaultOptions||exports.resetDefaultOptions(),0==arguments.length)throw new Error("When calling ko.mapping.toJS, pass the object you want to convert.");if("array"!==exports.getType(defaultOptions.ignore))throw new Error("ko.mapping.defaultOptions().ignore should be an array.");if("array"!==exports.getType(defaultOptions.include))throw new Error("ko.mapping.defaultOptions().include should be an array.");if("array"!==exports.getType(defaultOptions.copy))throw new Error("ko.mapping.defaultOptions().copy should be an array.");return options=fillOptions(options,rootObject[mappingProperty]),exports.visitModel(rootObject,function(x){return ko.utils.unwrapObservable(x)},options)},exports.toJSON=function(rootObject,options){var plainJavaScriptObject=exports.toJS(rootObject,options);return ko.utils.stringifyJson(plainJavaScriptObject)},exports.defaultOptions=function(){return arguments.length>0?void(defaultOptions=arguments[0]):defaultOptions},exports.resetDefaultOptions=function(){defaultOptions={include:_defaultOptions.include.slice(0),ignore:_defaultOptions.ignore.slice(0),copy:_defaultOptions.copy.slice(0)}},exports.getType=function(x){if(x&&"object"==typeof x){if(x.constructor==(new Date).constructor)return"date";if("[object Array]"===Object.prototype.toString.call(x))return"array"}return typeof x},exports.visitModel=function(rootObject,callback,options){options=options||{},options.visitedObjects=options.visitedObjects||new objectLookup;var mappedRootObject,unwrappedRootObject=ko.utils.unwrapObservable(rootObject);if(!canHaveProperties(unwrappedRootObject))return callback(rootObject,options.parentName);options=fillOptions(options,unwrappedRootObject[mappingProperty]),callback(rootObject,options.parentName),mappedRootObject="array"===exports.getType(unwrappedRootObject)?[]:{},options.visitedObjects.save(rootObject,mappedRootObject);var parentName=options.parentName;return visitPropertiesOrArrayEntries(unwrappedRootObject,function(indexer){if(!options.ignore||-1==ko.utils.arrayIndexOf(options.ignore,indexer)){var propertyValue=unwrappedRootObject[indexer];if(options.parentName=getPropertyName(parentName,unwrappedRootObject,indexer),-1!==ko.utils.arrayIndexOf(options.copy,indexer)||-1!==ko.utils.arrayIndexOf(options.include,indexer)||!unwrappedRootObject[mappingProperty]||!unwrappedRootObject[mappingProperty].mappedProperties||unwrappedRootObject[mappingProperty].mappedProperties[indexer]||"array"===exports.getType(unwrappedRootObject)){switch(exports.getType(ko.utils.unwrapObservable(propertyValue))){case"object":case"array":case"undefined":var previouslyMappedValue=options.visitedObjects.get(propertyValue);mappedRootObject[indexer]="undefined"!==exports.getType(previouslyMappedValue)?previouslyMappedValue:exports.visitModel(propertyValue,callback,options);break;default:mappedRootObject[indexer]=callback(propertyValue,options.parentName)}}}}),mappedRootObject}}),function($){$.fn.superfish=function(op){var sf=$.fn.superfish,c=sf.c,$arrow=$(['<span class="',c.arrowClass,'"> &#187;</span>'].join("")),over=function(){var $$=$(this),menu=getMenu($$);clearTimeout(menu.sfTimer),$$.showSuperfishUl().siblings().hideSuperfishUl()},out=function(){var $$=$(this),menu=getMenu($$),o=sf.op;clearTimeout(menu.sfTimer),menu.sfTimer=setTimeout(function(){o.retainPath=$.inArray($$[0],o.$path)>-1,$$.hideSuperfishUl(),o.$path.length&&$$.parents(["li.",o.hoverClass].join("")).length<1&&over.call(o.$path)},o.delay)},getMenu=function($menu){var menu=$menu.parents(["ul.",c.menuClass,":first"].join(""))[0];return sf.op=sf.o[menu.serial],menu},addArrow=function($a){$a.addClass(c.anchorClass).append($arrow.clone())};return this.each(function(){var s=this.serial=sf.o.length,o=$.extend({},sf.defaults,op);o.$path=$("li."+o.pathClass,this).slice(0,o.pathLevels).each(function(){$(this).addClass([o.hoverClass,c.bcClass].join(" ")).filter("li:has(ul)").removeClass(o.pathClass)}),sf.o[s]=sf.op=o,$("li:has(ul)",this)[$.fn.hoverIntent&&!o.disableHI?"hoverIntent":"hover"](over,out).each(function(){o.autoArrows&&addArrow($(">a:first-child",this))}).not("."+c.bcClass).hideSuperfishUl();var $a=$("a",this);$a.each(function(i){var $li=$a.eq(i).parents("li");$a.eq(i).focus(function(){over.call($li)}).blur(function(){out.call($li)})}),o.onInit.call(this)}).each(function(){var menuClasses=[c.menuClass];!sf.op.dropShadows||$.browser.msie&&$.browser.version<7||menuClasses.push(c.shadowClass),$(this).addClass(menuClasses.join(" "))})};var sf=$.fn.superfish;sf.o=[],sf.op={},sf.IE7fix=function(){var o=sf.op;$.browser.msie&&$.browser.version>6&&o.dropShadows&&void 0!=o.animation.opacity&&this.toggleClass(sf.c.shadowClass+"-off")},sf.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator",shadowClass:"sf-shadow"},sf.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},speed:"normal",autoArrows:!0,dropShadows:!0,disableHI:!1,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}},$.fn.extend({hideSuperfishUl:function(){var o=sf.op,not=o.retainPath===!0?o.$path:"";o.retainPath=!1;var $ul=$(["li.",o.hoverClass].join(""),this).add(this).not(not).removeClass(o.hoverClass).find(">ul").hide().css("visibility","hidden");return o.onHide.call($ul),this},showSuperfishUl:function(){var o=sf.op,$ul=(sf.c.shadowClass+"-off",this.addClass(o.hoverClass).find(">ul:hidden").css("visibility","visible"));return sf.IE7fix.call($ul),o.onBeforeShow.call($ul),$ul.animate(o.animation,o.speed,function(){sf.IE7fix.call($ul),o.onShow.call($ul)}),this}})}(jQuery),function(){function eq(a,b,stack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;if(a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped),a.isEqual&&_.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&_.isFunction(b.isEqual))return b.isEqual(a);var className=toString.call(a);if(className!=toString.call(b))return!1;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var length=stack.length;length--;)if(stack[length]==a)return!0;stack.push(a);var size=0,result=!0;if("[object Array]"==className){if(size=a.length,result=size==b.length)for(;size--&&(result=size in a==size in b&&eq(a[size],b[size],stack)););}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var key in a)if(_.has(a,key)&&(size++,!(result=_.has(b,key)&&eq(a[key],b[key],stack))))break;if(result){for(key in b)if(_.has(b,key)&&!size--)break;result=!size}}return stack.pop(),result}var root=this,previousUnderscore=root._,breaker={},ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,slice=ArrayProto.slice,unshift=ArrayProto.unshift,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,_=function(obj){return new wrapper(obj)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):root._=_,_.VERSION="1.3.3";var each=_.each=_.forEach=function(obj,iterator,context){if(null!=obj)if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,l=obj.length;l>i;i++)if(i in obj&&iterator.call(context,obj[i],i,obj)===breaker)return}else for(var key in obj)if(_.has(obj,key)&&iterator.call(context,obj[key],key,obj)===breaker)return};_.map=_.collect=function(obj,iterator,context){var results=[];return null==obj?results:nativeMap&&obj.map===nativeMap?obj.map(iterator,context):(each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)}),obj.length===+obj.length&&(results.length=obj.length),results)},_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduce&&obj.reduce===nativeReduce)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduce(iterator,memo):obj.reduce(iterator);if(each(obj,function(value,index,list){initial?memo=iterator.call(context,memo,value,index,list):(memo=value,initial=!0)}),!initial)throw new TypeError("Reduce of empty array with no initial value");return memo},_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj&&(obj=[]),nativeReduceRight&&obj.reduceRight===nativeReduceRight)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);var reversed=_.toArray(obj).reverse();return context&&!initial&&(iterator=_.bind(iterator,context)),initial?_.reduce(reversed,iterator,memo,context):_.reduce(reversed,iterator)},_.find=_.detect=function(obj,iterator,context){var result;return any(obj,function(value,index,list){return iterator.call(context,value,index,list)?(result=value,!0):void 0}),result},_.filter=_.select=function(obj,iterator,context){var results=[];return null==obj?results:nativeFilter&&obj.filter===nativeFilter?obj.filter(iterator,context):(each(obj,function(value,index,list){iterator.call(context,value,index,list)&&(results[results.length]=value)}),results)},_.reject=function(obj,iterator,context){var results=[];return null==obj?results:(each(obj,function(value,index,list){iterator.call(context,value,index,list)||(results[results.length]=value)}),results)},_.every=_.all=function(obj,iterator,context){var result=!0;return null==obj?result:nativeEvery&&obj.every===nativeEvery?obj.every(iterator,context):(each(obj,function(value,index,list){return(result=result&&iterator.call(context,value,index,list))?void 0:breaker}),!!result)};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=!1;return null==obj?result:nativeSome&&obj.some===nativeSome?obj.some(iterator,context):(each(obj,function(value,index,list){return result||(result=iterator.call(context,value,index,list))?breaker:void 0}),!!result)};_.include=_.contains=function(obj,target){var found=!1;return null==obj?found:nativeIndexOf&&obj.indexOf===nativeIndexOf?-1!=obj.indexOf(target):found=any(obj,function(value){return value===target})},_.invoke=function(obj,method){var args=slice.call(arguments,2);return _.map(obj,function(value){return(_.isFunction(method)?method||value:value[method]).apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})},_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0])return Math.max.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return-1/0;var result={computed:-1/0};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed})}),result.value},_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0])return Math.min.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return 1/0;var result={computed:1/0};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})}),result.value},_.shuffle=function(obj){var rand,shuffled=[];return each(obj,function(value,index){rand=Math.floor(Math.random()*(index+1)),shuffled[index]=shuffled[rand],shuffled[rand]=value}),shuffled},_.sortBy=function(obj,val,context){var iterator=_.isFunction(val)?val:function(obj){return obj[val]};return _.pluck(_.map(obj,function(value,index,list){return{value:value,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;return void 0===a?1:void 0===b?-1:b>a?-1:a>b?1:0}),"value")},_.groupBy=function(obj,val){var result={},iterator=_.isFunction(val)?val:function(obj){return obj[val]};return each(obj,function(value,index){var key=iterator(value,index);(result[key]||(result[key]=[])).push(value)}),result},_.sortedIndex=function(array,obj,iterator){iterator||(iterator=_.identity);for(var low=0,high=array.length;high>low;){var mid=low+high>>1;iterator(array[mid])<iterator(obj)?low=mid+1:high=mid}return low},_.toArray=function(obj){return obj?_.isArray(obj)?slice.call(obj):_.isArguments(obj)?slice.call(obj):obj.toArray&&_.isFunction(obj.toArray)?obj.toArray():_.values(obj):[]},_.size=function(obj){return _.isArray(obj)?obj.length:_.keys(obj).length},_.first=_.head=_.take=function(array,n,guard){return null==n||guard?array[0]:slice.call(array,0,n)},_.initial=function(array,n,guard){return slice.call(array,0,array.length-(null==n||guard?1:n))},_.last=function(array,n,guard){return null==n||guard?array[array.length-1]:slice.call(array,Math.max(array.length-n,0))},_.rest=_.tail=function(array,index,guard){return slice.call(array,null==index||guard?1:index)},_.compact=function(array){return _.filter(array,function(value){return!!value})},_.flatten=function(array,shallow){return _.reduce(array,function(memo,value){return _.isArray(value)?memo.concat(shallow?value:_.flatten(value)):(memo[memo.length]=value,memo)},[])},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.uniq=_.unique=function(array,isSorted,iterator){var initial=iterator?_.map(array,iterator):array,results=[];return array.length<3&&(isSorted=!0),_.reduce(initial,function(memo,value,index){return(isSorted?_.last(memo)===value&&memo.length:_.include(memo,value))||(memo.push(value),results.push(array[index])),memo},[]),results},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=_.intersect=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})},_.difference=function(array){var rest=_.flatten(slice.call(arguments,1),!0);return _.filter(array,function(value){return!_.include(rest,value)})},_.zip=function(){for(var args=slice.call(arguments),length=_.max(_.pluck(args,"length")),results=new Array(length),i=0;length>i;i++)results[i]=_.pluck(args,""+i);return results},_.indexOf=function(array,item,isSorted){if(null==array)return-1;var i,l;if(isSorted)return i=_.sortedIndex(array,item),array[i]===item?i:-1;if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item);for(i=0,l=array.length;l>i;i++)if(i in array&&array[i]===item)return i;return-1},_.lastIndexOf=function(array,item){if(null==array)return-1;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return array.lastIndexOf(item);for(var i=array.length;i--;)if(i in array&&array[i]===item)return i;return-1},_.range=function(start,stop,step){arguments.length<=1&&(stop=start||0,start=0),step=arguments[2]||1;for(var len=Math.max(Math.ceil((stop-start)/step),0),idx=0,range=new Array(len);len>idx;)range[idx++]=start,start+=step;return range};var ctor=function(){};_.bind=function(func,context){var bound,args;if(func.bind===nativeBind&&nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;return args=slice.call(arguments,2),bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor,result=func.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}},_.bindAll=function(obj){var funcs=slice.call(arguments,1);return 0==funcs.length&&(funcs=_.functions(obj)),each(funcs,function(f){obj[f]=_.bind(obj[f],obj)}),obj},_.memoize=function(func,hasher){var memo={};return hasher||(hasher=_.identity),function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))},_.throttle=function(func,wait){var context,args,timeout,throttling,more,result,whenDone=_.debounce(function(){more=throttling=!1},wait);return function(){context=this,args=arguments;var later=function(){timeout=null,more&&func.apply(context,args),whenDone()};return timeout||(timeout=setTimeout(later,wait)),throttling?more=!0:result=func.apply(context,args),whenDone(),throttling=!0,result}},_.debounce=function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)};immediate&&!timeout&&func.apply(context,args),clearTimeout(timeout),timeout=setTimeout(later,wait)}},_.once=function(func){var memo,ran=!1;return function(){return ran?memo:(ran=!0,memo=func.apply(this,arguments))}},_.wrap=function(func,wrapper){return function(){var args=[func].concat(slice.call(arguments,0));return wrapper.apply(this,args)}},_.compose=function(){var funcs=arguments;return function(){for(var args=arguments,i=funcs.length-1;i>=0;i--)args=[funcs[i].apply(this,args)];return args[0]}},_.after=function(times,func){return 0>=times?func():function(){return--times<1?func.apply(this,arguments):void 0}},_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)_.has(obj,key)&&(keys[keys.length]=key);return keys},_.values=function(obj){return _.map(obj,_.identity)},_.functions=_.methods=function(obj){var names=[];for(var key in obj)_.isFunction(obj[key])&&names.push(key);return names.sort()},_.extend=function(obj){return each(slice.call(arguments,1),function(source){for(var prop in source)obj[prop]=source[prop]}),obj},_.pick=function(obj){var result={};return each(_.flatten(slice.call(arguments,1)),function(key){key in obj&&(result[key]=obj[key])}),result},_.defaults=function(obj){return each(slice.call(arguments,1),function(source){for(var prop in source)null==obj[prop]&&(obj[prop]=source[prop])}),obj},_.clone=function(obj){return _.isObject(obj)?_.isArray(obj)?obj.slice():_.extend({},obj):obj},_.tap=function(obj,interceptor){return interceptor(obj),obj},_.isEqual=function(a,b){return eq(a,b,[])},_.isEmpty=function(obj){if(null==obj)return!0;if(_.isArray(obj)||_.isString(obj))return 0===obj.length;for(var key in obj)if(_.has(obj,key))return!1;return!0},_.isElement=function(obj){return!(!obj||1!=obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"==toString.call(obj)},_.isObject=function(obj){return obj===Object(obj)},_.isArguments=function(obj){return"[object Arguments]"==toString.call(obj)},_.isArguments(arguments)||(_.isArguments=function(obj){return!(!obj||!_.has(obj,"callee"))}),_.isFunction=function(obj){return"[object Function]"==toString.call(obj)},_.isString=function(obj){return"[object String]"==toString.call(obj)},_.isNumber=function(obj){return"[object Number]"==toString.call(obj)},_.isFinite=function(obj){return _.isNumber(obj)&&isFinite(obj)},_.isNaN=function(obj){return obj!==obj},_.isBoolean=function(obj){return obj===!0||obj===!1||"[object Boolean]"==toString.call(obj)},_.isDate=function(obj){return"[object Date]"==toString.call(obj)},_.isRegExp=function(obj){return"[object RegExp]"==toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,key){return hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.times=function(n,iterator,context){for(var i=0;n>i;i++)iterator.call(context,i)},_.escape=function(string){return(""+string).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},_.result=function(object,property){if(null==object)return null;var value=object[property];return _.isFunction(value)?value.call(object):value},_.mixin=function(obj){each(_.functions(obj),function(name){addToWrapper(name,_[name]=obj[name])})};var idCounter=0;_.uniqueId=function(prefix){var id=idCounter++;return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/.^/,escapes={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var p in escapes)escapes[escapes[p]]=p;var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g,unescaper=/\\(\\|'|r|n|t|u2028|u2029)/g,unescape=function(code){return code.replace(unescaper,function(match,escape){return escapes[escape]})};_.template=function(text,data,settings){settings=_.defaults(settings||{},_.templateSettings);var source="__p+='"+text.replace(escaper,function(match){return"\\"+escapes[match]}).replace(settings.escape||noMatch,function(match,code){return"'+\n_.escape("+unescape(code)+")+\n'"}).replace(settings.interpolate||noMatch,function(match,code){return"'+\n("+unescape(code)+")+\n'"}).replace(settings.evaluate||noMatch,function(match,code){return"';\n"+unescape(code)+"\n;__p+='"})+"';\n";settings.variable||(source="with(obj||{}){\n"+source+"}\n"),source="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+source+"return __p;\n";var render=new Function(settings.variable||"obj","_",source);if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};return template.source="function("+(settings.variable||"obj")+"){\n"+source+"}",template},_.chain=function(obj){return _(obj).chain()};var wrapper=function(obj){this._wrapped=obj};_.prototype=wrapper.prototype;var result=function(obj,chain){return chain?_(obj).chain():obj},addToWrapper=function(name,func){wrapper.prototype[name]=function(){var args=slice.call(arguments);return unshift.call(args,this._wrapped),result(func.apply(_,args),this._chain)}};_.mixin(_),each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){var wrapped=this._wrapped;method.apply(wrapped,arguments);var length=wrapped.length;return"shift"!=name&&"splice"!=name||0!==length||delete wrapped[0],result(wrapped,this._chain)}}),each(["concat","join","slice"],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){return result(method.apply(this._wrapped,arguments),this._chain)}}),wrapper.prototype.chain=function(){return this._chain=!0,this},wrapper.prototype.value=function(){return this._wrapped}}.call(this);var XDate=function(g,m,A,p){function f(){var d,a=this instanceof f?this:new f,c=arguments,b=c.length;if("boolean"==typeof c[b-1]&&(d=c[--b],c=q(c,0,b)),b)if(1==b){if(b=c[0],b instanceof g||"number"==typeof b)a[0]=new g(+b);else if(b instanceof f){var c=a,h=new g(+b[0]);l(b)&&(h.toString=w),c[0]=h}else if("string"==typeof b){a[0]=new g(0);a:{for(var e,c=b,b=d||!1,h=f.parsers,r=0;r<h.length;r++)if(e=h[r](c,b,a)){a=e;break a}a[0]=new g(c)}}}else a[0]=new g(n.apply(g,c)),d||(a[0]=s(a[0]));else a[0]=new g;return"boolean"==typeof d&&B(a,d),a}function l(a){return a[0].toString===w}function B(a,c,b){return c?l(a)||(b&&(a[0]=new g(n(a[0].getFullYear(),a[0].getMonth(),a[0].getDate(),a[0].getHours(),a[0].getMinutes(),a[0].getSeconds(),a[0].getMilliseconds()))),a[0].toString=w):l(a)&&(a[0]=b?s(a[0]):new g(+a[0])),a}function C(a,c,b,d,h){var e=k(j,a[0],h),a=k(D,a[0],h),h=1==c?b%12:e(1),f=!1;2==d.length&&"boolean"==typeof d[1]&&(f=d[1],d=[b]),a(c,d),f&&e(1)!=h&&(a(1,[e(1)-1]),a(2,[E(e(0),e(1))]))}function F(a,c,b,d){var b=Number(b),h=m.floor(b);a["set"+o[c]](a["get"+o[c]]()+h,d||!1),h!=b&&6>c&&F(a,c+1,(b-h)*G[c],d)}function H(a,c,b){var a=a.clone().setUTCMode(!0,!0),c=f(c).setUTCMode(!0,!0),d=0;if(0==b||1==b){for(var h=6;h>=b;h--)d/=G[h],d+=j(c,!1,h)-j(a,!1,h);1==b&&(d+=12*(c.getFullYear()-a.getFullYear()))}else 2==b?(b=a.toDate().setUTCHours(0,0,0,0),d=c.toDate().setUTCHours(0,0,0,0),d=m.round((d-b)/864e5)+(c-d-(a-b))/864e5):d=(c-a)/[36e5,6e4,1e3,1][b-3];return d}function t(a){var c=a(0),b=a(1),a=a(2),b=new g(n(c,b,a)),d=u(c),a=d;return d>b?a=u(c-1):(c=u(c+1),b>=c&&(a=c)),m.floor(m.round((b-a)/864e5)/7)+1}function u(a){return a=new g(n(a,0,4)),a.setUTCDate(a.getUTCDate()-(a.getUTCDay()+6)%7),a}function I(a,c,b,d){var h=k(j,a,d),e=k(D,a,d),b=u(b===p?h(0):b);d||(b=s(b)),a.setTime(+b),e(2,[h(2)+7*(c-1)])}function J(a,c,b,d,e){var r=f.locales,g=r[f.defaultLocale]||{},i=k(j,a,e),b=("string"==typeof b?r[b]:b)||{};return x(a,c,function(a){if(d)for(var b=(7==a?2:a)-1;b>=0;b--)d.push(i(b));return i(a)},function(a){return b[a]||g[a]},e)}function x(a,c,b,d,e){for(var f,g,i="";f=c.match(M);){if(i+=c.substr(0,f.index),f[1]){g=i;for(var i=a,j=f[1],l=b,m=d,n=e,k=j.length,o=void 0,q="";k>0;)o=N(i,j.substr(0,k),l,m,n),o!==p?(q+=o,j=j.substr(k),k=j.length):k--;i=g+(q+j)}else f[3]?(g=x(a,f[4],b,d,e),parseInt(g.replace(/\D/g,""),10)&&(i+=g)):i+=f[7]||"'";c=c.substr(f.index+f[0].length)}return i+c}function N(a,c,b,d,e){var g=f.formatters[c];if("string"==typeof g)return x(a,g,b,d,e);if("function"==typeof g)return g(a,e||!1,d);switch(c){case"fff":return i(b(6),3);case"s":return b(5);case"ss":return i(b(5));case"m":return b(4);case"mm":return i(b(4));
case"h":return b(3)%12||12;case"hh":return i(b(3)%12||12);case"H":return b(3);case"HH":return i(b(3));case"d":return b(2);case"dd":return i(b(2));case"ddd":return d("dayNamesShort")[b(7)]||"";case"dddd":return d("dayNames")[b(7)]||"";case"M":return b(1)+1;case"MM":return i(b(1)+1);case"MMM":return d("monthNamesShort")[b(1)]||"";case"MMMM":return d("monthNames")[b(1)]||"";case"yy":return(b(0)+"").substring(2);case"yyyy":return b(0);case"t":return v(b,d).substr(0,1).toLowerCase();case"tt":return v(b,d).toLowerCase();case"T":return v(b,d).substr(0,1);case"TT":return v(b,d);case"z":case"zz":case"zzz":return e?c="Z":(d=a.getTimezoneOffset(),a=0>d?"+":"-",b=m.floor(m.abs(d)/60),d=m.abs(d)%60,e=b,"zz"==c?e=i(b):"zzz"==c&&(e=i(b)+":"+i(d)),c=a+e),c;case"w":return t(b);case"ww":return i(t(b));case"S":return c=b(2),c>10&&20>c?"th":["st","nd","rd"][c%10-1]||"th"}}function v(a,c){return c(a(3)<12?"amDesignator":"pmDesignator")}function y(a){return!isNaN(+a[0])}function j(a,c,b){return a["get"+(c?"UTC":"")+o[b]]()}function D(a,c,b,d){a["set"+(c?"UTC":"")+o[b]].apply(a,d)}function s(a){return new g(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())}function E(a,c){return 32-new g(n(a,c,32)).getUTCDate()}function z(a){return function(){return a.apply(p,[this].concat(q(arguments)))}}function k(a){var c=q(arguments,1);return function(){return a.apply(p,c.concat(q(arguments)))}}function q(a,c,b){return A.prototype.slice.call(a,c||0,b===p?a.length:b)}function K(a,c){for(var b=0;b<a.length;b++)c(a[b],b)}function i(a,c){for(c=c||2,a+="";a.length<c;)a="0"+a;return a}var o="FullYear,Month,Date,Hours,Minutes,Seconds,Milliseconds,Day,Year".split(","),L=["Years","Months","Days"],G=[12,31,24,60,60,1e3,1],M=/(([a-zA-Z])\2*)|(\((('.*?'|\(.*?\)|.)*?)\))|('(.*?)')/,n=g.UTC,w=g.prototype.toUTCString,e=f.prototype;return e.length=1,e.splice=A.prototype.splice,e.getUTCMode=z(l),e.setUTCMode=z(B),e.getTimezoneOffset=function(){return l(this)?0:this[0].getTimezoneOffset()},K(o,function(a,c){e["get"+a]=function(){return j(this[0],l(this),c)},8!=c&&(e["getUTC"+a]=function(){return j(this[0],!0,c)}),7!=c&&(e["set"+a]=function(a){return C(this,c,a,arguments,l(this)),this},8!=c&&(e["setUTC"+a]=function(a){return C(this,c,a,arguments,!0),this},e["add"+(L[c]||a)]=function(a,d){return F(this,c,a,d),this},e["diff"+(L[c]||a)]=function(a){return H(this,a,c)}))}),e.getWeek=function(){return t(k(j,this,!1))},e.getUTCWeek=function(){return t(k(j,this,!0))},e.setWeek=function(a,c){return I(this,a,c,!1),this},e.setUTCWeek=function(a,c){return I(this,a,c,!0),this},e.addWeeks=function(a){return this.addDays(7*Number(a))},e.diffWeeks=function(a){return H(this,a,2)/7},f.parsers=[function(a,c,b){if(a=a.match(/^(\d{4})(-(\d{2})(-(\d{2})([T ](\d{2}):(\d{2})(:(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/)){var d=new g(n(a[1],a[3]?a[3]-1:0,a[5]||1,a[7]||0,a[8]||0,a[10]||0,a[12]?1e3*Number("0."+a[12]):0));return a[13]?a[14]&&d.setUTCMinutes(d.getUTCMinutes()+("-"==a[15]?1:-1)*(60*Number(a[16])+(a[18]?Number(a[18]):0))):c||(d=s(d)),b.setTime(+d)}}],f.parse=function(a){return+f(""+a)},e.toString=function(a,c,b){return a!==p&&y(this)?J(this,a,c,b,l(this)):this[0].toString()},e.toUTCString=e.toGMTString=function(a,c,b){return a!==p&&y(this)?J(this,a,c,b,!0):this[0].toUTCString()},e.toISOString=function(){return this.toUTCString("yyyy-MM-dd'T'HH:mm:ss(.fff)zzz")},f.defaultLocale="",f.locales={"":{monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),dayNamesShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),amDesignator:"AM",pmDesignator:"PM"}},f.formatters={i:"yyyy-MM-dd'T'HH:mm:ss(.fff)",u:"yyyy-MM-dd'T'HH:mm:ss(.fff)zzz"},K("getTime,valueOf,toDateString,toTimeString,toLocaleString,toLocaleDateString,toLocaleTimeString,toJSON".split(","),function(a){e[a]=function(){return this[0][a]()}}),e.setTime=function(a){return this[0].setTime(a),this},e.valid=z(y),e.clone=function(){return new f(this)},e.clearTime=function(){return this.setHours(0,0,0,0)},e.toDate=function(){return new g(+this[0])},f.now=function(){return+new g},f.today=function(){return(new f).clearTime()},f.UTC=n,f.getDaysInMonth=E,"undefined"!=typeof module&&module.exports&&(module.exports=f),f}(Date,Math,Array);if(XDate.parsers.push(parseMdyyyyHHmmTT),XDate.parsers.push(parseMdyyyyHHmmTTSlashes),$.fn.ccMenu=function(options){if(this){var myOptions=options;$(this).each(function(){var m=new CCMenu(this,myOptions);return $(this).data().ccMenu=m,m.showMenu(),myOptions.startingTokens&&m.goToItem(myOptions.startingTokens),this})}},CCMenu.prototype.drilldown=function(container,options){function showNext(e,noAnimation){var target=e.currentTarget,nextList=$(target).next(),parentUl=$(target).parents("ul:eq(0)"),parentLeft=parentUl.is(".fg-menu-content")?0:parseFloat(topList.css("left")),nextLeftVal=Math.round(parentLeft-parseFloat(container.width())),footer=$(".fg-menu-footer");resetChildMenu(parentUl),checkMenuHeight(nextList),noAnimation?topList.css("left",nextLeftVal):topList.animate({left:nextLeftVal},options.crossSpeed),nextList.show().addClass("fg-menu-current").attr("aria-expanded","true");var setPrevMenu=function(backlink){var b=backlink,c=$(".fg-menu-current"),prevList=c.parents("ul:eq(0)");c.hide().attr("aria-expanded","false"),resetChildMenu(c),checkMenuHeight(prevList),prevList.addClass("fg-menu-current").attr("aria-expanded","true"),prevList.hasClass("fg-menu-content")&&(b.remove(),footer.hide())};if(options.backLink)0==footer.find("a").size()&&(footer.show(),$('<a href="#"><span class="ui-icon ui-icon-triangle-1-w"></span> <span>Back</span></a>').appendTo(footer).click(function(){var b=$(this),prevLeftVal=parseFloat(topList.css("left"))+container.width();return topList.animate({left:prevLeftVal},options.crossSpeed,function(){setPrevMenu(b)}),!1}));else{1==breadcrumb.find("li").size()&&(breadcrumb.empty().append(firstCrumb),firstCrumb.find("a").click(function(){return menu.resetDrilldownMenu(),!1})),$(".fg-menu-current-crumb").removeClass("fg-menu-current-crumb");var crumbText=$(this).find("span:eq(0)").text(),newCrumb=$('<li class="fg-menu-current-crumb"><a href="javascript://" class="fg-menu-crumb">'+crumbText+"</a></li>");breadcrumb.show(),$($(newCrumb).find("a")[0]).data().representsList=parentUl,newCrumb.appendTo(breadcrumb).find("a").click(function(){if($(this).parent().is(".fg-menu-current-crumb"))menu.chooseItem(this);else{for(var lis=$(this).parents("ul:eq(0)").find("li"),index=lis.size()-lis.index($(this).parent());index>1;){var current=parseFloat(topList.css("left"));index>2?(topList.css("left",current+container.width()),setPrevMenu()):topList.animate({left:current+container.width()},options.crossSpeed,function(){setPrevMenu()}),index--}$(this).parent().addClass("fg-menu-current-crumb").find("span").remove(),$(this).parent().nextAll().remove()}return!1}),newCrumb.prev().append(' <span class="ui-icon '+options.nextCrumbLink+'"></span>')}return!1}var menu=this,topList=container.find(".fg-menu"),breadcrumb=$('<ul class="fg-menu-breadcrumb ui-widget-header ui-corner-all ui-helper-clearfix"></ul>'),crumbDefaultHeader=$('<li class="fg-menu-breadcrumb-text">'+options.crumbDefaultText+"</li>"),firstCrumbText=options.backLink?options.backLinkText:options.topLinkText,firstCrumbClass=options.backLink?"fg-menu-prev-list":"fg-menu-all-lists",firstCrumbLinkClass=options.backLink?"ui-state-default ui-corner-all":"",firstCrumbIcon=options.backLink?'<span class="ui-icon ui-icon-triangle-1-w"></span>':"",firstCrumb=$('<li class="'+firstCrumbClass+'"><a href="#" class="'+firstCrumbLinkClass+'">'+firstCrumbIcon+firstCrumbText+"</a></li>");container.addClass("fg-menu-ipod"),options.backLink?breadcrumb.addClass("fg-menu-footer").appendTo(container).hide():breadcrumb.addClass("fg-menu-header").prependTo(container),breadcrumb.append(crumbDefaultHeader);var checkMenuHeight=function(el){el.height()>options.maxHeight&&el.addClass("fg-menu-scroll"),el.css({height:options.maxHeight})},resetChildMenu=function(el){el.removeClass("fg-menu-scroll").removeClass("fg-menu-current").height("auto")};this.getTopList=function(){return topList},this.resetDrilldownMenu=function(){$("."+options.callerOnState).removeClass(options.callerOnState),$(".fg-menu-current").removeClass("fg-menu-current"),topList.animate({left:0},options.crossSpeed,function(){$(this).find("ul").each(function(){$(this).hide(),resetChildMenu($(this))}),topList.addClass("fg-menu-current")}),$(".fg-menu-all-lists").find("span").remove(),breadcrumb.empty().append(crumbDefaultHeader),breadcrumb.hide(),$(".fg-menu-footer").empty().hide(),checkMenuHeight(topList)},topList.addClass("fg-menu-content fg-menu-current ui-widget-content ui-helper-clearfix").css({width:container.width()}).find("ul").css({width:container.width(),left:container.width()}).addClass("ui-widget-content").hide(),checkMenuHeight(topList),topList.find("a").each(function(){$(this).next().is("ul")?$(this).addClass("fg-menu-indicator").each(function(){$(this).html("<span>"+$(this).text()+'</span><span class="ui-icon '+options.nextMenuLink+'"></span>')}).click(showNext):$(this).click(function(){return menu.chooseItem(this),!1})})},CCMenu.prototype.setPosition=function(widget,caller,options){var xVal,yVal,el=widget,referrer=caller,dims={refX:referrer.offset().left,refY:referrer.offset().top,refW:referrer.getTotalWidth(),refH:referrer.getTotalHeight()},options=options;switch(options.positionOpts.posX){case"left":xVal=0;break;case"center":xVal=dims.refW/2;break;case"right":xVal=dims.refW}switch(options.positionOpts.posY){case"top":yVal=0;break;case"center":yVal=dims.refH/2;break;case"bottom":yVal=dims.refH}xVal+=options.positionOpts.offsetX,yVal+=options.positionOpts.offsetY,"up"==options.positionOpts.directionV?(el.css({top:"auto",bottom:yVal}),options.positionOpts.detectV&&!fitVertical(el)&&el.css({bottom:"auto",top:yVal})):(el.css({bottom:"auto",top:yVal}),options.positionOpts.detectV&&!fitVertical(el)&&el.css({top:"auto",bottom:yVal})),"left"==options.positionOpts.directionH?(el.css({left:"auto",right:xVal}),options.positionOpts.detectH&&!fitHorizontal(el)&&el.css({right:"auto",left:xVal})):(el.css({right:"auto",left:xVal}),options.positionOpts.detectH&&!fitHorizontal(el)&&el.css({left:"auto",right:xVal}))},jQuery.fn.getTotalWidth=function(){return $(this).width()+parseInt($(this).css("paddingRight"))+parseInt($(this).css("paddingLeft"))+parseInt($(this).css("borderRightWidth"))+parseInt($(this).css("borderLeftWidth"))},jQuery.fn.getTotalHeight=function(){return $(this).height()+parseInt($(this).css("paddingTop"))+parseInt($(this).css("paddingBottom"))+parseInt($(this).css("borderTopWidth"))+parseInt($(this).css("borderBottomWidth"))},Number.prototype.pxToEm=String.prototype.pxToEm=function(settings){settings=jQuery.extend({scope:"body",reverse:!1},settings);var scopeVal,pxVal=""==this?0:parseFloat(this),getWindowWidth=function(){var de=document.documentElement;return self.innerWidth||de&&de.clientWidth||document.body.clientWidth};if("body"==settings.scope&&$.browser.msie&&(parseFloat($("body").css("font-size"))/getWindowWidth()).toFixed(1)>0){var calcFontSize=function(){return 16*(parseFloat($("body").css("font-size"))/getWindowWidth()).toFixed(3)};scopeVal=calcFontSize()}else scopeVal=parseFloat(jQuery(settings.scope).css("font-size"));var result=1==settings.reverse?(pxVal*scopeVal).toFixed(2)+"px":(pxVal/scopeVal).toFixed(2)+"em";return result},"undefined"==typeof cc)var cc={};if("undefined"==typeof cc.grid&&(cc.grid={}),cc.grid.columnService=function(){return{columnNames:function(gridDefinition){return $.map(gridDefinition.Columns,function(item){return item.header})},columnModel:function(gridDefinition){var map=$.map(gridDefinition.Columns,function(item){return item.formatoptions&&"string"==typeof item.formatoptions&&(item.formatoptions=JSON.parse(item.formatoptions)),item.hidden="true"==item.hidden,item.search="false"!=item.search,item.sortable="false"!=item.sortable,item.width||(item.width="100%"),item.editRules&&(item.editable=!0),item.sortable&&item.sortColumn&&(item.index=item.sortColumn),item});return map}}}(),cc.gridMultiSelect=function(){return{getCheckedBoxes:function(gridContainerName){var name=gridContainerName?"#"+gridContainerName:"#gridContainer",ids=[];return $($(name).jqGrid("getGridParam","selarrrow")).each(function(idx,item){ids.push(item)}),ids}}}(),cc.gridHelper=function(){return{adjustSize:function($gridSelector){var $el=$gridSelector.parents(".content-inner:eq(0)"),h=$(window).height()-$("#main-header").height();$el.height(h-80),$gridSelector.setGridHeight($el.height()-31),$gridSelector.setGridWidth($el.width()-2)},adjustSortStyles:function(){$(".ui-jqgrid th").removeClass("is-sorted"),$('.ui-jqgrid th[aria-selected="true"]').addClass("is-sorted")},getCheckedBoxes:function($gridContainer){var ids=[];return $($gridContainer.jqGrid("getGridParam","selarrrow")).each(function(idx,item){ids.push(item)}),ids}}}(),"undefined"==typeof cc&&(cc=function(){}),"undefined"==typeof cc.grid&&(cc.grid=function(){}),function($){$.fn.AsGrid=function(gridDefinition,userOptions){if(this){var gridDefaultOptions={url:gridDefinition.Url,datatype:"json",mtype:"GET",colNames:cc.grid.columnService.columnNames(gridDefinition),colModel:cc.grid.columnService.columnModel(gridDefinition),rowNum:1e4,scroll:!1,altRows:!0,width:"100%",autowidth:!0,multiselect:!0,beforeSubmitCell:function(rowid,celname,value){return{RootId:rootId,ParentId:entityId,EntityId:rowid,rowId:rowid,cellName:celname,cellValue:value}},afterSubmitCell:function(serverresponse,rowid,cellname,value,iRow,iCol){return eval("var cellEditResult ="+serverresponse.responseText),[cellEditResult.success,cellEditResult.message]},loadtext:"",gridComplete:function(){$(this).find(".cbox").parent().addClass("jqg_cb"),$("div.form-scroll-inner").height(window.innerHeight-180),$(this).setGridHeight($("div.form-scroll-inner").height()-36),MF.vent.trigger("gridComplete")},sortorder:"asc",sortname:gridDefinition.DefaultSortColumn?gridDefinition.DefaultSortColumn:"",onSortCol:function(index,iCol,sortorder){cc.gridHelper.adjustSortStyles(index,iCol,sortorder)},jsonReader:{repeatitems:!0,root:"items",cell:"cell",id:"id"}};gridDefinition.EditUrl&&$.extend(gridDefaultOptions,{cellEdit:!0,cellurl:gridDefinition.EditUrl}||{}),cc.gridHelper.adjustSortStyles();var gridOptions=$.extend(gridDefaultOptions,userOptions||{}),grid=this;return grid.jqGrid(gridOptions),grid}}}(jQuery),function($){$.fn.asCalendar=function(calendarDefinition,userOptions){var calendarDefaultOptions={header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},defaultView:"agendaWeek",editable:!0,theme:!0,firstDay:1,allDaySlot:!1,allDayDefault:!1,slotMinutes:15,minTime:4,maxTime:22,events:{url:calendarDefinition.Url,data:{Loc:$("[name=Location]").val()}},dayClick:function(date,allDay,jsEvent,view){MF.vent.trigger("calendar:"+calendarDefinition.id+":dayClick",date,allDay,jsEvent,view)},eventClick:function(calEvent,jsEvent,view){MF.vent.trigger("calendar:"+calendarDefinition.id+":eventClick",calEvent,jsEvent,view)},eventDrop:function(event,dayDelta,minuteDelta,allDay,revertFunc){MF.vent.trigger("calendar:"+calendarDefinition.id+":eventDrop",event,dayDelta,minuteDelta,allDay,revertFunc)},eventResize:function(event,dayDelta,minuteDelta,revertFunc,jsEvent,ui,view){MF.vent.trigger("calendar:"+calendarDefinition.id+":eventResize",event,dayDelta,minuteDelta,revertFunc,jsEvent,ui,view)}},calendarOptions=$.extend(calendarDefaultOptions,userOptions||{}),calendar=this;return calendar.fullCalendar(calendarOptions),calendar}}(jQuery),$.fn.gridSearch=function(opts){var defaults={default_empty_message:"Start typing to search",lightFontColor:"#CCCCCC",fontColor:"#000000",onClear:function(){},onSubmit:function(){},searchSelector:".search"};return this.each(function(){function init(){context.render(),context.registerEventHandlers()}var button,lastSubmitted,context=this,$context=$(this);context.options=$.extend(defaults,opts);var $searchElement=$context.find(context.options.searchSelector);this.render=function(){$searchElement.parent().append('<img class="clear-search" src="/content/images/clear-search.png">'),button=$searchElement.parent().find("img.clear-search"),""==$.trim($searchElement.val())&&$searchElement.val(context.options.default_empty_message),$searchElement.val()==context.options.default_empty_message?$searchElement.css("color",context.options.lightFontColor):$searchElement.css("color",context.options.fontColor)},this.registerEventHandlers=function(){$searchElement.keyup(function(event){"13"==event.keyCode?(context.submitSearch($(this).val()),$searchElement.next().focus()):(""!=$.trim($(this).val())&&$(this).val()!=context.options.default_empty_message?button.show():button.hide(),lastSubmitted=null)}),$searchElement.blur(function(){""==$.trim($(this).val())?($searchElement.val(context.options.default_empty_message).css("color",context.options.lightFontColor),button.hide()):this.submitSearch($searchElement.val())}),$searchElement.focus(function(){$(this).val()==context.options.default_empty_message&&$searchElement.val("").css("color",context.options.fontColor)}),button.click(function(){context.clearSearch()})},this.clearSearch=function(){$searchElement.val(""),$searchElement.focus(),context.options.onClear()},this.submitSearch=function(v){""!=v&&v!=context.options.default_empty_message&&v!=lastSubmitted&&(this.options.onSubmit(v),lastSubmitted=v)},init()})},"undefined"==typeof MF)var MF={};MF.repository=function(){var repositoryCallback=function(result){return result.LoggedOut?(window.location.replace(result.RedirectUrl),null):(clearTimeout(MF.throbberTimeout),MF.showThrob=!1,$("#ajaxLoading").hide(),result)},throbber=function(){MF.showThrob=!0,MF.throbberTimeout||(MF.throbberTimeout=setTimeout(function(){MF.showThrob&&$("#ajaxLoading").show()},500))};return{ajaxPost:function(url,data){throbber(),$.post(url,data).done(repositoryCallback)},ajaxGet:function(url,data){return throbber(),$.get(url,data).done(repositoryCallback)},ajaxPostModel:function(url,data){return throbber(),$.ajax({type:"post",url:url,data:data,contentType:"application/json; charset=utf-8",traditional:!0}).done(repositoryCallback)}}}(),function($){var DEFAULT_SETTINGS={hintText:"Type in a search term",noResultsText:"No results",searchingText:"Searching...",deleteText:"&times;",searchDelay:300,minChars:1,tokenLimit:null,jsonContainer:null,method:"GET",contentType:"json",queryParam:"q",tokenDelimiter:",",preventDuplicates:!0,prePopulate:null,processPrePopulate:!1,animateDropdown:!0,onResult:null,onAdd:null,onDelete:null,idPrefix:"token-input-",internalTokenMarkup:function(item){return"<p>"+item.name+"</p>"},afterTokenSelectedFunction:function(){},beforeTokenAddedFunction:function(){}},DEFAULT_CLASSES={tokenList:"token-input-list",token:"token-input-token",tokenDelete:"token-input-delete-token",selectedToken:"token-input-selected-token",highlightedToken:"token-input-highlighted-token",dropdown:"token-input-dropdown",dropdownItem:"token-input-dropdown-item",dropdownItem2:"token-input-dropdown-item2",selectedDropdownItem:"token-input-selected-dropdown-item",inputToken:"token-input-container",tokenInput:"token-input-Input"},KEY={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUMPAD_ENTER:108,COMMA:188};$.fn.tokenInput=function(viewmodel,options){var settings=$.extend({},DEFAULT_SETTINGS,options||{});return this.each(function(){$(this).data("tokenInputObject",new $.TokenList(this,viewmodel,settings))})},$.TokenList=function(_input,_viewModel,_settings){var input=_input,viewModel=_viewModel,settings=_settings;this.init=function(binding){return this.binding=binding,this},this.render=function(options){function checkTokenLimit(){null!==settings.tokenLimit&&token_count()>=settings.tokenLimit?(input_box.hide(),hide_dropdown()):input_box.focus()}function add_modelItem_to_selected(item){var clone={id:ko.observable(item.id()),name:ko.observable(item.name())};return settings.beforeTokenAddedFunction(clone),settings.viewModel.selectedItems.push(clone),settings.afterTokenSelectedFunction(clone),clone}function add_listItem_to_selected(item){var callback=settings.onAdd;if(token_count()>0&&settings.preventDuplicates){var found_existing_item=_.find(settings.viewModel.selectedItems(),function(target){return item.id()===target.id()});if(found_existing_item){var token=selected_token_list.find("li[id='"+found_existing_item.id()+"']");return highlight_selected_listItem(token),input_box.focus(),void hide_dropdown()}}add_modelItem_to_selected(item);var newToken=selected_token_list.find("li[id='"+item.id()+"']");highlight_selected_listItem(newToken),checkTokenLimit(),input_box.val(""),hide_dropdown(),MF.vent.trigger(id+":tokenizer:add",settings.viewModel.selectedItems()),$.isFunction(callback)&&callback.call(item)}function delete_selected_listItem(token){var modelItem=find_modelItem_for_selected_listItem(token),callback=settings.onDelete;settings.viewModel.selectedItems.remove(modelItem),input_box.focus(),null!==settings.tokenLimit&&input_box.show().val("").focus(),MF.vent.trigger(id+":tokenizer:remove",settings.viewModel.selectedItems()),$.isFunction(callback)&&callback.call(args)}function find_modelItem_for_selected_listItem(token){return _.find(settings.viewModel.selectedItems(),function(item){return $(token).find("p").text().indexOf(item.name())>-1})}function find_modelItem_for_available_listItem(token){return _.find(settings.viewModel._availableItems(),function(item){return $(token).attr("id")===item.id()})}function toggle_select_token(token){var previous_selected_token=selected_token().get(0);previous_selected_token===token.get(0)?token.removeClass(settings.classes.selectedToken):highlight_selected_listItem(token),input_box.val("")}function highlight_selected_listItem(token){selected_token_list.find("li."+settings.classes.selectedToken).removeClass(settings.classes.selectedToken),token.addClass(settings.classes.selectedToken)}function highlight_available_item(item){item&&(selected_dropdown_item().length&&unhighlight_available_item(selected_dropdown_item()),$(item).addClass(settings.classes.selectedDropdownItem))}function unhighlight_available_item(item){item.removeClass(settings.classes.selectedDropdownItem)}function highlight_term(value,term){return term&&(value=value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term+")(?![^<>]*>)(?![^&;]+;)","gi"),"<b>$1</b>")),value}function populate_resultsModel(source){$(dropdown).children("*").not("ul").remove(),settings.viewModel._resultsItems.removeAll(),_.each(source,function(item){settings.viewModel._resultsItems.push(item)})}function hide_dropdown(){dropdown.hide(),$(dropdown_ul).html(),$(dropdown).children("*").not("ul").remove(),dropdown_ul.find("li."+settings.classes.selectedDropdownItem).removeClass(settings.classes.selectedDropdownItem)}function show_dropdown(){function autoHideDropdown(){var t=setTimeout(function(){hide_dropdown()},8e3);dropdown.mouseenter(function(){clearTimeout(t)})}dropdown.show().mouseleave(function(){autoHideDropdown()}),settings.animateDropdown?dropdown_ul.slideDown("fast"):dropdown_ul.show("slow"),autoHideDropdown()}function decorate_dropdown(query){settings.viewModel._resultsItems().length>0?$.each($(dropdown_ul).find("li"),function(index,li){var $li=$(li);$li.html(highlight_term($li.text(),query)),$li.addClass(index%2?settings.classes.dropdownItem:settings.classes.dropdownItem2),0===index&&highlight_available_item(li)}):settings.noResultsText&&$(dropdown).append("<p>"+settings.noResultsText+"</p>")}function show_dropdown_results(){var query=input_box.val().toLowerCase();return query&&query.length?void(query.length>=settings.minChars&&run_search(query)):(populate_resultsModel(settings.viewModel._availableItems()),decorate_dropdown(""),void show_dropdown())}function run_search(query){var results=$.grep(settings.viewModel._availableItems(),function(row){return row.name().toLowerCase().indexOf(query.toLowerCase())>-1});if(populate_resultsModel(results),$.isFunction(settings.onResult)){var callbackResult=settings.onResult.call(settings.viewModel._resultsItems);callbackResult&&populate_resultsModel(callbackResult)}decorate_dropdown(query),show_dropdown()}$.extend(settings,options||{});var id=$(input).attr("name"),controlContainer=$("<div></div>").attr("id",id+"_container");$(input).after(controlContainer),$(input).hide(),settings.viewModel=viewModel,settings.classes?settings.classes=$.extend({},DEFAULT_CLASSES,settings.classes):settings.theme?(settings.classes={},$.each(DEFAULT_CLASSES,function(key,value){settings.classes[key]=value+"-"+settings.theme})):settings.classes=DEFAULT_CLASSES;{var token_count=function(){return settings.viewModel.selectedItems().length},selected_token=function(){return $(selected_token_list).find("li."+settings.classes.selectedToken)},selected_dropdown_item=function(){return $(dropdown_ul).find("li."+settings.classes.selectedDropdownItem)},selected_token_list=$("<ul />").addClass(settings.classes.tokenList).attr("data-bind","foreach: selectedItems").delegate("span","click",function(){delete_selected_listItem($(this).parent())}).delegate("li","click",function(){var $li=$(this);toggle_select_token($li),input_box.focus(),MF.vent.trigger(id+":tokenizer:selectedClick",$li.attr("id"))}).delegate("li","mouseover",function(){var $li=$(this);selected_token()!==this&&$li.addClass(settings.classes.highlightedToken)}).delegate("li","mouseout",function(){var $li=$(this);selected_token()!==this&&$li.removeClass(settings.classes.highlightedToken)}).appendTo(controlContainer),li=$("<li>").addClass(settings.classes.token).attr("data-bind","attr:{id:id}").append(settings.internalTokenMarkup());$("<span>"+settings.deleteText+"</span>").addClass(settings.classes.tokenDelete).appendTo(li)}selected_token_list.append(li);var input_box=$('<input type="text"  autocomplete="off">').addClass(settings.classes.tokenInput).css({outline:"none"}).attr("id",settings.idPrefix+input.id).blur(function(){hide_dropdown(),$(this).val("")}).keydown(function(event){var previous_token,next_token,_selectedToken=selected_dropdown_item();switch(event.keyCode){case KEY.LEFT:case KEY.RIGHT:case KEY.UP:case KEY.DOWN:if($(this).val()){var dropdown_item=null;return dropdown_item=event.keyCode===KEY.DOWN||event.keyCode===KEY.RIGHT?_selectedToken.next():_selectedToken.prev(),dropdown_item().length&&highlight_available_item(dropdown_item),!1}previous_token=_selectedToken.prev(),next_token=_selectedToken.next(),event.keyCode!==KEY.LEFT&&event.keyCode!==KEY.UP||!previous_token.length?event.keyCode!==KEY.RIGHT&&event.keyCode!==KEY.DOWN||!next_token.length||highlight_available_item($(next_token.get(0))):highlight_available_item($(previous_token.get(0)));break;case KEY.TAB:case KEY.ENTER:case KEY.NUMPAD_ENTER:case KEY.COMMA:if(selected_dropdown_item().length){var modelItem=find_modelItem_for_available_listItem(selected_dropdown_item());return add_listItem_to_selected(modelItem),hide_dropdown(),!1}break;case KEY.ESCAPE:return hide_dropdown(),!0;default:String.fromCharCode(event.which)&&setTimeout(function(){show_dropdown_results()},5)}}),sprite_div=$("<div />").addClass("token-input-sprite"),input_div=$("<div/>").click(function(){(null===settings.tokenLimit||settings.tokenLimit!==token_count())&&show_dropdown_results()}).addClass(settings.classes.inputToken).append(input_box).append(sprite_div).insertAfter(selected_token_list),dropdown=$("<div>").addClass(settings.classes.dropdown).hide().insertAfter(input_div),dropdown_ul=$("<ul>").attr("data-bind","foreach: _resultsItems").delegate("li","mouseover",function(){highlight_available_item($(this))}).delegate("li","mousedown",function(){var modelItem=find_modelItem_for_available_listItem(this);return add_listItem_to_selected(modelItem),!1}).hide().appendTo(dropdown);$("<li>").attr("data-bind","text:name, attr:{id:id}").appendTo(dropdown_ul),this.getSelectedItems=function(){return settings.viewModel.selectedItems()},this.clear=function(){selected_token_list.children("li").each(delete_selected_listItem)},this.add=function(item){add_listItem_to_selected(item)},this.remove=function(item){selected_token_list.children("li").each(function(){var currToken=$(this).data("tokeninput"),match=!0;for(var prop in item)if(item[prop]!==currToken[prop]){match=!1;break}match&&delete_selected_listItem($(this))})},this.addToAvailableList=function(item){_.any(settings.viewModel._availableItems,function(i,existingItem){return existingItem.id()==item.id})||settings.viewModel._availableItems.push(item)},this.binding()}}}(jQuery),function($){$.jgrid={defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}"},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:["equal","not equal","less","less or equal","greater","greater or equal","begins with","does not begin with","is in","is not in","ends with","does not end with","contains","does not contain"],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],matchText:" match",rulesText:" rules"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:" ",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:" ",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:" ",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(j){return 11>j||j>13?["st","nd","rd","th"][Math.min((j-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"d/m/Y",masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y"},reformatAfterEdit:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0},idName:"id"}}}(jQuery),function(window,undefined){function createFlags(flags){var i,length,object=flagsCache[flags]={};for(flags=flags.split(/\s+/),i=0,length=flags.length;length>i;i++)object[flags[i]]=!0;return object
}function dataAttr(elem,key,data){if(data===undefined&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if(data=elem.getAttribute(name),"string"==typeof data){try{data="true"===data?!0:"false"===data?!1:"null"===data?null:jQuery.isNumeric(data)?parseFloat(data):rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}function isEmptyDataObject(obj){for(var name in obj)if(("data"!==name||!jQuery.isEmptyObject(obj[name]))&&"toJSON"!==name)return!1;return!0}function handleQueueMarkDefer(elem,type,src){var deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",defer=jQuery._data(elem,deferDataKey);!defer||"queue"!==src&&jQuery._data(elem,queueDataKey)||"mark"!==src&&jQuery._data(elem,markDataKey)||setTimeout(function(){jQuery._data(elem,queueDataKey)||jQuery._data(elem,markDataKey)||(jQuery.removeData(elem,deferDataKey,!0),defer.fire())},0)}function returnFalse(){return!1}function returnTrue(){return!0}function isDisconnected(node){return!node||!node.parentNode||11===node.parentNode.nodeType}function winnow(elements,qualifier,keep){if(qualifier=qualifier||0,jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier===keep});if("string"==typeof qualifier){var filtered=jQuery.grep(elements,function(elem){return 1===elem.nodeType});if(isSimple.test(qualifier))return jQuery.filter(qualifier,filtered,!keep);qualifier=jQuery.filter(qualifier,filtered)}return jQuery.grep(elements,function(elem){return jQuery.inArray(elem,qualifier)>=0===keep})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop());return safeFrag}function root(elem){return jQuery.nodeName(elem,"table")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function cloneCopyEvent(src,dest){if(1===dest.nodeType&&jQuery.hasData(src)){var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle,curData.events={};for(type in events)for(i=0,l=events[type].length;l>i;i++)jQuery.event.add(dest,type+(events[type][i].namespace?".":"")+events[type][i].namespace,events[type][i],events[type][i].data)}curData.data&&(curData.data=jQuery.extend({},curData.data))}}function cloneFixAttributes(src,dest){var nodeName;1===dest.nodeType&&(dest.clearAttributes&&dest.clearAttributes(),dest.mergeAttributes&&dest.mergeAttributes(src),nodeName=dest.nodeName.toLowerCase(),"object"===nodeName?dest.outerHTML=src.outerHTML:"input"!==nodeName||"checkbox"!==src.type&&"radio"!==src.type?"option"===nodeName?dest.selected=src.defaultSelected:("input"===nodeName||"textarea"===nodeName)&&(dest.defaultValue=src.defaultValue):(src.checked&&(dest.defaultChecked=dest.checked=src.checked),dest.value!==src.value&&(dest.value=src.value)),dest.removeAttribute(jQuery.expando))}function getAll(elem){return"undefined"!=typeof elem.getElementsByTagName?elem.getElementsByTagName("*"):"undefined"!=typeof elem.querySelectorAll?elem.querySelectorAll("*"):[]}function fixDefaultChecked(elem){("checkbox"===elem.type||"radio"===elem.type)&&(elem.defaultChecked=elem.checked)}function findInputs(elem){var nodeName=(elem.nodeName||"").toLowerCase();"input"===nodeName?fixDefaultChecked(elem):"script"!==nodeName&&"undefined"!=typeof elem.getElementsByTagName&&jQuery.grep(elem.getElementsByTagName("input"),fixDefaultChecked)}function shimCloneNode(elem){var div=document.createElement("div");return safeFragment.appendChild(div),div.innerHTML=elem.outerHTML,div.firstChild}function evalScript(i,elem){elem.src?jQuery.ajax({url:elem.src,async:!1,dataType:"script"}):jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,"/*$0*/")),elem.parentNode&&elem.parentNode.removeChild(elem)}function getWH(elem,name,extra){var val="width"===name?elem.offsetWidth:elem.offsetHeight,which="width"===name?cssWidth:cssHeight,i=0,len=which.length;if(val>0){if("border"!==extra)for(;len>i;i++)extra||(val-=parseFloat(jQuery.css(elem,"padding"+which[i]))||0),"margin"===extra?val+=parseFloat(jQuery.css(elem,extra+which[i]))||0:val-=parseFloat(jQuery.css(elem,"border"+which[i]+"Width"))||0;return val+"px"}if(val=curCSS(elem,name,name),(0>val||null==val)&&(val=elem.style[name]||0),val=parseFloat(val)||0,extra)for(;len>i;i++)val+=parseFloat(jQuery.css(elem,"padding"+which[i]))||0,"padding"!==extra&&(val+=parseFloat(jQuery.css(elem,"border"+which[i]+"Width"))||0),"margin"===extra&&(val+=parseFloat(jQuery.css(elem,extra+which[i]))||0);return val+"px"}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if("string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*"),jQuery.isFunction(func))for(var dataType,list,placeBefore,dataTypes=dataTypeExpression.toLowerCase().split(rspacesAjax),i=0,length=dataTypes.length;length>i;i++)dataType=dataTypes[i],placeBefore=/^\+/.test(dataType),placeBefore&&(dataType=dataType.substr(1)||"*"),list=structure[dataType]=structure[dataType]||[],list[placeBefore?"unshift":"push"](func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){dataType=dataType||options.dataTypes[0],inspected=inspected||{},inspected[dataType]=!0;for(var selection,list=structure[dataType],i=0,length=list?list.length:0,executeOnly=structure===prefilters;length>i&&(executeOnly||!selection);i++)selection=list[i](options,originalOptions,jqXHR),"string"==typeof selection&&(!executeOnly||inspected[selection]?selection=undefined:(options.dataTypes.unshift(selection),selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected)));return!executeOnly&&selection||inspected["*"]||(selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,"*",inspected)),selection}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)src[key]!==undefined&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);deep&&jQuery.extend(!0,target,deep)}function buildParams(prefix,obj,traditional,add){if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v||jQuery.isArray(v)?i:"")+"]",v,traditional,add)});else if(traditional||null==obj||"object"!=typeof obj)add(prefix,obj);else for(var name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields;for(type in responseFields)type in responses&&(jqXHR[responseFields[type]]=responses[type]);for(;"*"===dataTypes[0];)dataTypes.shift(),ct===undefined&&(ct=s.mimeType||jqXHR.getResponseHeader("content-type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}return finalDataType?(finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]):void 0}function ajaxConvert(s,response){s.dataFilter&&(response=s.dataFilter(response,s.dataType));var i,key,tmp,prev,conversion,conv,conv1,conv2,dataTypes=s.dataTypes,converters={},length=dataTypes.length,current=dataTypes[0];for(i=1;length>i;i++){if(1===i)for(key in s.converters)"string"==typeof key&&(converters[key.toLowerCase()]=s.converters[key]);if(prev=current,current=dataTypes[i],"*"===current)current=prev;else if("*"!==prev&&prev!==current){if(conversion=prev+" "+current,conv=converters[conversion]||converters["* "+current],!conv){conv2=undefined;for(conv1 in converters)if(tmp=conv1.split(" "),(tmp[0]===prev||"*"===tmp[0])&&(conv2=converters[tmp[1]+" "+current])){conv1=converters[conv1],conv1===!0?conv=conv2:conv2===!0&&(conv=conv1);break}}conv||conv2||jQuery.error("No conversion from "+conversion.replace(" "," to ")),conv!==!0&&(response=conv?conv(response):conv2(conv1(response)))}}return response}function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function createFxNow(){return setTimeout(clearFxNow,0),fxNow=jQuery.now()}function clearFxNow(){fxNow=undefined}function genFx(type,num){var obj={};return jQuery.each(fxAttrs.concat.apply([],fxAttrs.slice(0,num)),function(){obj[this]=type}),obj}function defaultDisplay(nodeName){if(!elemdisplay[nodeName]){var body=document.body,elem=jQuery("<"+nodeName+">").appendTo(body),display=elem.css("display");elem.remove(),("none"===display||""===display)&&(iframe||(iframe=document.createElement("iframe"),iframe.frameBorder=iframe.width=iframe.height=0),body.appendChild(iframe),iframeDoc&&iframe.createElement||(iframeDoc=(iframe.contentWindow||iframe.contentDocument).document,iframeDoc.write(("CSS1Compat"===document.compatMode?"<!doctype html>":"")+"<html><body>"),iframeDoc.close()),elem=iframeDoc.createElement(nodeName),iframeDoc.body.appendChild(elem),display=jQuery.css(elem,"display"),body.removeChild(iframe)),elemdisplay[nodeName]=display}return elemdisplay[nodeName]}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType?elem.defaultView||elem.parentWindow:!1}var document=window.document,navigator=window.navigator,location=window.location,jQuery=function(){function doScrollCheck(){if(!jQuery.isReady){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(doScrollCheck,1)}jQuery.ready()}}var rootjQuery,browserMatch,readyList,DOMContentLoaded,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},_jQuery=window.jQuery,_$=window.$,quickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rnotwhite=/\S/,trimLeft=/^\s+/,trimRight=/\s+$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rwebkit=/(webkit)[ \/]([\w.]+)/,ropera=/(opera)(?:.*version)?[ \/]([\w.]+)/,rmsie=/(msie) ([\w.]+)/,rmozilla=/(mozilla)(?:.*? rv:([\w.]+))?/,rdashAlpha=/-([a-z]|[0-9])/gi,rmsPrefix=/^-ms-/,fcamelCase=function(all,letter){return(letter+"").toUpperCase()},userAgent=navigator.userAgent,toString=Object.prototype.toString,hasOwn=Object.prototype.hasOwnProperty,push=Array.prototype.push,slice=Array.prototype.slice,trim=String.prototype.trim,indexOf=Array.prototype.indexOf,class2type={};return jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,ret,doc;if(!selector)return this;if(selector.nodeType)return this.context=this[0]=selector,this.length=1,this;if("body"===selector&&!context&&document.body)return this.context=document,this[0]=document.body,this.selector=selector,this.length=1,this;if("string"==typeof selector){if(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3?[null,selector,null]:quickExpr.exec(selector),!match||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1])return context=context instanceof jQuery?context[0]:context,doc=context?context.ownerDocument||context:document,ret=rsingleTag.exec(selector),ret?jQuery.isPlainObject(context)?(selector=[document.createElement(ret[1])],jQuery.fn.attr.call(selector,context,!0)):selector=[doc.createElement(ret[1])]:(ret=jQuery.buildFragment([match[1]],[doc]),selector=(ret.cacheable?jQuery.clone(ret.fragment):ret.fragment).childNodes),jQuery.merge(this,selector);if(elem=document.getElementById(match[2]),elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this}return jQuery.isFunction(selector)?rootjQuery.ready(selector):(selector.selector!==undefined&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return slice.call(this,0)},get:function(num){return null==num?this.toArray():0>num?this[this.length+num]:this[num]},pushStack:function(elems,name,selector){var ret=this.constructor();return jQuery.isArray(elems)?push.apply(ret,elems):jQuery.merge(ret,elems),ret.prevObject=this,ret.context=this.context,"find"===name?ret.selector=this.selector+(this.selector?" ":"")+selector:name&&(ret.selector=this.selector+"."+name+"("+selector+")"),ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){return jQuery.bindReady(),readyList.add(fn),this},eq:function(i){return i=+i,-1===i?this.slice(i):this.slice(i,i+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(slice.apply(this,arguments),"slice",slice.call(arguments).join(","))},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:[].sort,splice:[].splice},jQuery.fn.init.prototype=jQuery.fn,jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[1]||{},i=2),"object"==typeof target||jQuery.isFunction(target)||(target={}),length===i&&(target=this,--i);length>i;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):copy!==undefined&&(target[name]=copy));return target},jQuery.extend({noConflict:function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){if(wait===!0&&!--jQuery.readyWait||wait!==!0&&!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready,1);if(jQuery.isReady=!0,wait!==!0&&--jQuery.readyWait>0)return;readyList.fireWith(document,[jQuery]),jQuery.fn.trigger&&jQuery(document).trigger("ready").off("ready")}},bindReady:function(){if(!readyList){if(readyList=jQuery.Callbacks("once memory"),"complete"===document.readyState)return setTimeout(jQuery.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",DOMContentLoaded,!1),window.addEventListener("load",jQuery.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded),window.attachEvent("onload",jQuery.ready);var toplevel=!1;try{toplevel=null==window.frameElement}catch(e){}document.documentElement.doScroll&&toplevel&&doScrollCheck()}}},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return obj&&"object"==typeof obj&&"setInterval"in obj},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return null==obj?String(obj):class2type[toString.call(obj)]||"object"},isPlainObject:function(obj){if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var key;for(key in obj);return key===undefined||hasOwn.call(obj,key)},isEmptyObject:function(obj){for(var name in obj)return!1;return!0},error:function(msg){throw new Error(msg)},parseJSON:function(data){return"string"==typeof data&&data?(data=jQuery.trim(data),window.JSON&&window.JSON.parse?window.JSON.parse(data):rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))?new Function("return "+data)():void jQuery.error("Invalid JSON: "+data)):null},parseXML:function(data){var xml,tmp;try{window.DOMParser?(tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml")):(xml=new ActiveXObject("Microsoft.XMLDOM"),xml.async="false",xml.loadXML(data))}catch(e){xml=undefined}return xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml},noop:function(){},globalEval:function(data){data&&rnotwhite.test(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase()},each:function(object,callback,args){var name,i=0,length=object.length,isObj=length===undefined||jQuery.isFunction(object);if(args)if(isObj){for(name in object)if(callback.apply(object[name],args)===!1)break}else for(;length>i&&callback.apply(object[i++],args)!==!1;);else if(isObj){for(name in object)if(callback.call(object[name],name,object[name])===!1)break}else for(;length>i&&callback.call(object[i],i,object[i++])!==!1;);return object},trim:trim?function(text){return null==text?"":trim.call(text)}:function(text){return null==text?"":text.toString().replace(trimLeft,"").replace(trimRight,"")},makeArray:function(array,results){var ret=results||[];if(null!=array){var type=jQuery.type(array);null==array.length||"string"===type||"function"===type||"regexp"===type||jQuery.isWindow(array)?push.call(ret,array):jQuery.merge(ret,array)}return ret},inArray:function(elem,array,i){var len;if(array){if(indexOf)return indexOf.call(array,elem,i);for(len=array.length,i=i?0>i?Math.max(0,len+i):i:0;len>i;i++)if(i in array&&array[i]===elem)return i}return-1},merge:function(first,second){var i=first.length,j=0;if("number"==typeof second.length)for(var l=second.length;l>j;j++)first[i++]=second[j];else for(;second[j]!==undefined;)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,inv){var retVal,ret=[];inv=!!inv;for(var i=0,length=elems.length;length>i;i++)retVal=!!callback(elems[i],i),inv!==retVal&&ret.push(elems[i]);return ret},map:function(elems,callback,arg){var value,key,ret=[],i=0,length=elems.length,isArray=elems instanceof jQuery||length!==undefined&&"number"==typeof length&&(length>0&&elems[0]&&elems[length-1]||0===length||jQuery.isArray(elems));if(isArray)for(;length>i;i++)value=callback(elems[i],i,arg),null!=value&&(ret[ret.length]=value);else for(key in elems)value=callback(elems[key],key,arg),null!=value&&(ret[ret.length]=value);return ret.concat.apply([],ret)},guid:1,proxy:function(fn,context){if("string"==typeof context){var tmp=fn[context];context=fn,fn=tmp}if(!jQuery.isFunction(fn))return undefined;var args=slice.call(arguments,2),proxy=function(){return fn.apply(context,args.concat(slice.call(arguments)))};return proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++,proxy},access:function(elems,key,value,exec,fn,pass){var length=elems.length;if("object"==typeof key){for(var k in key)jQuery.access(elems,k,key[k],exec,fn,value);return elems}if(value!==undefined){exec=!pass&&exec&&jQuery.isFunction(value);for(var i=0;length>i;i++)fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);return elems}return length?fn(elems[0],key):undefined},now:function(){return(new Date).getTime()},uaMatch:function(ua){ua=ua.toLowerCase();var match=rwebkit.exec(ua)||ropera.exec(ua)||rmsie.exec(ua)||ua.indexOf("compatible")<0&&rmozilla.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}},sub:function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(!0,jQuerySub,this),jQuerySub.superclass=this,jQuerySub.fn=jQuerySub.prototype=this(),jQuerySub.fn.constructor=jQuerySub,jQuerySub.sub=this.sub,jQuerySub.fn.init=function(selector,context){return context&&context instanceof jQuery&&!(context instanceof jQuerySub)&&(context=jQuerySub(context)),jQuery.fn.init.call(this,selector,context,rootjQuerySub)},jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub},browser:{}}),jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}),browserMatch=jQuery.uaMatch(userAgent),browserMatch.browser&&(jQuery.browser[browserMatch.browser]=!0,jQuery.browser.version=browserMatch.version),jQuery.browser.webkit&&(jQuery.browser.safari=!0),rnotwhite.test(" ")&&(trimLeft=/^[\s\xA0]+/,trimRight=/[\s\xA0]+$/),rootjQuery=jQuery(document),document.addEventListener?DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,!1),jQuery.ready()}:document.attachEvent&&(DOMContentLoaded=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",DOMContentLoaded),jQuery.ready())}),jQuery}(),flagsCache={};jQuery.Callbacks=function(flags){flags=flags?flagsCache[flags]||createFlags(flags):{};var memory,firing,firingStart,firingLength,firingIndex,list=[],stack=[],add=function(args){var i,length,elem,type;for(i=0,length=args.length;length>i;i++)elem=args[i],type=jQuery.type(elem),"array"===type?add(elem):"function"===type&&(flags.unique&&self.has(elem)||list.push(elem))},fire=function(context,args){for(args=args||[],memory=!flags.memory||[context,args],firing=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length;list&&firingLength>firingIndex;firingIndex++)if(list[firingIndex].apply(context,args)===!1&&flags.stopOnFalse){memory=!0;break}firing=!1,list&&(flags.once?memory===!0?self.disable():list=[]:stack&&stack.length&&(memory=stack.shift(),self.fireWith(memory[0],memory[1])))},self={add:function(){if(list){var length=list.length;add(arguments),firing?firingLength=list.length:memory&&memory!==!0&&(firingStart=length,fire(memory[0],memory[1]))}return this},remove:function(){if(list)for(var args=arguments,argIndex=0,argLength=args.length;argLength>argIndex;argIndex++)for(var i=0;i<list.length&&(args[argIndex]!==list[i]||(firing&&firingLength>=i&&(firingLength--,firingIndex>=i&&firingIndex--),list.splice(i--,1),!flags.unique));i++);return this},has:function(fn){if(list)for(var i=0,length=list.length;length>i;i++)if(fn===list[i])return!0;return!1},empty:function(){return list=[],this},disable:function(){return list=stack=memory=undefined,this},disabled:function(){return!list},lock:function(){return stack=undefined,memory&&memory!==!0||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return stack&&(firing?flags.once||stack.push([context,args]):flags.once&&memory||fire(context,args)),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!memory}};return self};var sliceDeferred=[].slice;jQuery.extend({Deferred:function(func){var key,doneList=jQuery.Callbacks("once memory"),failList=jQuery.Callbacks("once memory"),progressList=jQuery.Callbacks("memory"),state="pending",lists={resolve:doneList,reject:failList,notify:progressList},promise={done:doneList.add,fail:failList.add,progress:progressList.add,state:function(){return state},isResolved:doneList.fired,isRejected:failList.fired,then:function(doneCallbacks,failCallbacks,progressCallbacks){return deferred.done(doneCallbacks).fail(failCallbacks).progress(progressCallbacks),this},always:function(){return deferred.done.apply(deferred,arguments).fail.apply(deferred,arguments),this},pipe:function(fnDone,fnFail,fnProgress){return jQuery.Deferred(function(newDefer){jQuery.each({done:[fnDone,"resolve"],fail:[fnFail,"reject"],progress:[fnProgress,"notify"]},function(handler,data){var returned,fn=data[0],action=data[1];deferred[handler](jQuery.isFunction(fn)?function(){returned=fn.apply(this,arguments),returned&&jQuery.isFunction(returned.promise)?returned.promise().then(newDefer.resolve,newDefer.reject,newDefer.notify):newDefer[action+"With"](this===deferred?newDefer:this,[returned])}:newDefer[action])})}).promise()},promise:function(obj){if(null==obj)obj=promise;else for(var key in promise)obj[key]=promise[key];return obj}},deferred=promise.promise({});for(key in lists)deferred[key]=lists[key].fire,deferred[key+"With"]=lists[key].fireWith;return deferred.done(function(){state="resolved"},failList.disable,progressList.lock).fail(function(){state="rejected"},doneList.disable,progressList.lock),func&&func.call(deferred,deferred),deferred},when:function(firstParam){function resolveFunc(i){return function(value){args[i]=arguments.length>1?sliceDeferred.call(arguments,0):value,--count||deferred.resolveWith(deferred,args)}}function progressFunc(i){return function(value){pValues[i]=arguments.length>1?sliceDeferred.call(arguments,0):value,deferred.notifyWith(promise,pValues)}}var args=sliceDeferred.call(arguments,0),i=0,length=args.length,pValues=new Array(length),count=length,deferred=1>=length&&firstParam&&jQuery.isFunction(firstParam.promise)?firstParam:jQuery.Deferred(),promise=deferred.promise();if(length>1){for(;length>i;i++)args[i]&&args[i].promise&&jQuery.isFunction(args[i].promise)?args[i].promise().then(resolveFunc(i),deferred.reject,progressFunc(i)):--count;count||deferred.resolveWith(deferred,args)}else deferred!==firstParam&&deferred.resolveWith(deferred,length?[firstParam]:[]);return promise}}),jQuery.support=function(){{var support,all,a,select,opt,input,marginDiv,fragment,tds,eventName,i,isSupported,div=document.createElement("div");document.documentElement}if(div.setAttribute("className","t"),div.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",all=div.getElementsByTagName("*"),a=div.getElementsByTagName("a")[0],!all||!all.length||!a)return{};select=document.createElement("select"),opt=select.appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],support={leadingWhitespace:3===div.firstChild.nodeType,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:"/a"===a.getAttribute("href"),opacity:/^0.55/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:"on"===input.value,optSelected:opt.selected,getSetAttribute:"t"!==div.className,enctype:!!document.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},input.checked=!0,support.noCloneChecked=input.cloneNode(!0).checked,select.disabled=!0,support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=!1}if(!div.addEventListener&&div.attachEvent&&div.fireEvent&&(div.attachEvent("onclick",function(){support.noCloneEvent=!1}),div.cloneNode(!0).fireEvent("onclick")),input=document.createElement("input"),input.value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value,input.setAttribute("checked","checked"),div.appendChild(input),fragment=document.createDocumentFragment(),fragment.appendChild(div.lastChild),support.checkClone=fragment.cloneNode(!0).cloneNode(!0).lastChild.checked,support.appendChecked=input.checked,fragment.removeChild(input),fragment.appendChild(div),div.innerHTML="",window.getComputedStyle&&(marginDiv=document.createElement("div"),marginDiv.style.width="0",marginDiv.style.marginRight="0",div.style.width="2px",div.appendChild(marginDiv),support.reliableMarginRight=0===(parseInt((window.getComputedStyle(marginDiv,null)||{marginRight:0}).marginRight,10)||0)),div.attachEvent)for(i in{submit:1,change:1,focusin:1})eventName="on"+i,isSupported=eventName in div,isSupported||(div.setAttribute(eventName,"return;"),isSupported="function"==typeof div[eventName]),support[i+"Bubbles"]=isSupported;return fragment.removeChild(div),fragment=select=opt=marginDiv=div=input=null,jQuery(function(){var container,outer,inner,td,offsetSupport,conMarginTop,ptlm,vb,style,html,body=document.getElementsByTagName("body")[0];body&&(conMarginTop=1,ptlm="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",vb="visibility:hidden;border:0;",style="style='"+ptlm+"border:5px solid #000;padding:0;'",html="<div "+style+"><div></div></div><table "+style+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",container=document.createElement("div"),container.style.cssText=vb+"width:0;height:0;position:static;top:0;margin-top:"+conMarginTop+"px",body.insertBefore(container,body.firstChild),div=document.createElement("div"),container.appendChild(div),div.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",tds=div.getElementsByTagName("td"),isSupported=0===tds[0].offsetHeight,tds[0].style.display="",tds[1].style.display="none",support.reliableHiddenOffsets=isSupported&&0===tds[0].offsetHeight,div.innerHTML="",div.style.width=div.style.paddingLeft="1px",jQuery.boxModel=support.boxModel=2===div.offsetWidth,"undefined"!=typeof div.style.zoom&&(div.style.display="inline",div.style.zoom=1,support.inlineBlockNeedsLayout=2===div.offsetWidth,div.style.display="",div.innerHTML="<div style='width:4px;'></div>",support.shrinkWrapBlocks=2!==div.offsetWidth),div.style.cssText=ptlm+vb,div.innerHTML=html,outer=div.firstChild,inner=outer.firstChild,td=outer.nextSibling.firstChild.firstChild,offsetSupport={doesNotAddBorder:5!==inner.offsetTop,doesAddBorderForTableAndCells:5===td.offsetTop},inner.style.position="fixed",inner.style.top="20px",offsetSupport.fixedPosition=20===inner.offsetTop||15===inner.offsetTop,inner.style.position=inner.style.top="",outer.style.overflow="hidden",outer.style.position="relative",offsetSupport.subtractsBorderForOverflowNotVisible=-5===inner.offsetTop,offsetSupport.doesNotIncludeMarginInBodyOffset=body.offsetTop!==conMarginTop,body.removeChild(container),div=container=null,jQuery.extend(support,offsetSupport))}),support}();var rbrace=/^(?:\{.*\}|\[.*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},uuid:0,expando:"jQuery"+(jQuery.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(elem){return elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando],!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data,pvt){if(jQuery.acceptData(elem)){var privateCache,thisCache,ret,internalKey=jQuery.expando,getByName="string"==typeof name,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey,isEvents="events"===name;if(id&&cache[id]&&(isEvents||pvt||cache[id].data)||!getByName||data!==undefined)return id||(isNode?elem[internalKey]=id=++jQuery.uuid:id=internalKey),cache[id]||(cache[id]={},isNode||(cache[id].toJSON=jQuery.noop)),("object"==typeof name||"function"==typeof name)&&(pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name)),privateCache=thisCache=cache[id],pvt||(thisCache.data||(thisCache.data={}),thisCache=thisCache.data),data!==undefined&&(thisCache[jQuery.camelCase(name)]=data),isEvents&&!thisCache[name]?privateCache.events:(getByName?(ret=thisCache[name],null==ret&&(ret=thisCache[jQuery.camelCase(name)])):ret=thisCache,ret)}},removeData:function(elem,name,pvt){if(jQuery.acceptData(elem)){var thisCache,i,l,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:internalKey;
if(cache[id]){if(name&&(thisCache=pvt?cache[id]:cache[id].data)){jQuery.isArray(name)||(name in thisCache?name=[name]:(name=jQuery.camelCase(name),name=name in thisCache?[name]:name.split(" ")));for(i=0,l=name.length;l>i;i++)delete thisCache[name[i]];if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache))return}(pvt||(delete cache[id].data,isEmptyDataObject(cache[id])))&&(jQuery.support.deleteExpando||!cache.setInterval?delete cache[id]:cache[id]=null,isNode&&(jQuery.support.deleteExpando?delete elem[internalKey]:elem.removeAttribute?elem.removeAttribute(internalKey):elem[internalKey]=null))}}},_data:function(elem,name,data){return jQuery.data(elem,name,data,!0)},acceptData:function(elem){if(elem.nodeName){var match=jQuery.noData[elem.nodeName.toLowerCase()];if(match)return!(match===!0||elem.getAttribute("classid")!==match)}return!0}}),jQuery.fn.extend({data:function(key,value){var parts,attr,name,data=null;if("undefined"==typeof key){if(this.length&&(data=jQuery.data(this[0]),1===this[0].nodeType&&!jQuery._data(this[0],"parsedAttrs"))){attr=this[0].attributes;for(var i=0,l=attr.length;l>i;i++)name=attr[i].name,0===name.indexOf("data-")&&(name=jQuery.camelCase(name.substring(5)),dataAttr(this[0],name,data[name]));jQuery._data(this[0],"parsedAttrs",!0)}return data}return"object"==typeof key?this.each(function(){jQuery.data(this,key)}):(parts=key.split("."),parts[1]=parts[1]?"."+parts[1]:"",value===undefined?(data=this.triggerHandler("getData"+parts[1]+"!",[parts[0]]),data===undefined&&this.length&&(data=jQuery.data(this[0],key),data=dataAttr(this[0],key,data)),data===undefined&&parts[1]?this.data(parts[0]):data):this.each(function(){var self=jQuery(this),args=[parts[0],value];self.triggerHandler("setData"+parts[1]+"!",args),jQuery.data(this,key,value),self.triggerHandler("changeData"+parts[1]+"!",args)}))},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({_mark:function(elem,type){elem&&(type=(type||"fx")+"mark",jQuery._data(elem,type,(jQuery._data(elem,type)||0)+1))},_unmark:function(force,elem,type){if(force!==!0&&(type=elem,elem=force,force=!1),elem){type=type||"fx";var key=type+"mark",count=force?0:(jQuery._data(elem,key)||1)-1;count?jQuery._data(elem,key,count):(jQuery.removeData(elem,key,!0),handleQueueMarkDefer(elem,type,"mark"))}},queue:function(elem,type,data){var q;return elem?(type=(type||"fx")+"queue",q=jQuery._data(elem,type),data&&(!q||jQuery.isArray(data)?q=jQuery._data(elem,type,jQuery.makeArray(data)):q.push(data)),q||[]):void 0},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),fn=queue.shift(),hooks={};"inprogress"===fn&&(fn=queue.shift()),fn&&("fx"===type&&queue.unshift("inprogress"),jQuery._data(elem,type+".run",hooks),fn.call(elem,function(){jQuery.dequeue(elem,type)},hooks)),queue.length||(jQuery.removeData(elem,type+"queue "+type+".run",!0),handleQueueMarkDefer(elem,type,"queue"))}}),jQuery.fn.extend({queue:function(type,data){return"string"!=typeof type&&(data=type,type="fx"),data===undefined?jQuery.queue(this[0],type):this.each(function(){var queue=jQuery.queue(this,type,data);"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,object){function resolve(){--count||defer.resolveWith(elements,[elements])}"string"!=typeof type&&(object=type,type=undefined),type=type||"fx";for(var tmp,defer=jQuery.Deferred(),elements=this,i=elements.length,count=1,deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark";i--;)(tmp=jQuery.data(elements[i],deferDataKey,undefined,!0)||(jQuery.data(elements[i],queueDataKey,undefined,!0)||jQuery.data(elements[i],markDataKey,undefined,!0))&&jQuery.data(elements[i],deferDataKey,jQuery.Callbacks("once memory"),!0))&&(count++,tmp.add(resolve));return resolve(),defer.promise()}});var nodeHook,boolHook,fixSpecified,rclass=/[\n\t\r]/g,rspace=/\s+/,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea)?$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,name,value,!0,jQuery.attr)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,name,value,!0,jQuery.prop)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=undefined,delete this[name]}catch(e){}})},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(value&&"string"==typeof value)for(classNames=value.split(rspace),i=0,l=this.length;l>i;i++)if(elem=this[i],1===elem.nodeType)if(elem.className||1!==classNames.length){for(setClass=" "+elem.className+" ",c=0,cl=classNames.length;cl>c;c++)~setClass.indexOf(" "+classNames[c]+" ")||(setClass+=classNames[c]+" ");elem.className=jQuery.trim(setClass)}else elem.className=value;return this},removeClass:function(value){var classNames,i,l,elem,className,c,cl;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(value&&"string"==typeof value||value===undefined)for(classNames=(value||"").split(rspace),i=0,l=this.length;l>i;i++)if(elem=this[i],1===elem.nodeType&&elem.className)if(value){for(className=(" "+elem.className+" ").replace(rclass," "),c=0,cl=classNames.length;cl>c;c++)className=className.replace(" "+classNames[c]+" "," ");elem.className=jQuery.trim(className)}else elem.className="";return this},toggleClass:function(value,stateVal){var type=typeof value,isBool="boolean"==typeof stateVal;return this.each(jQuery.isFunction(value)?function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}:function(){if("string"===type)for(var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(rspace);className=classNames[i++];)state=isBool?state:!self.hasClass(className),self[state?"addClass":"removeClass"](className);else("undefined"===type||"boolean"===type)&&(this.className&&jQuery._data(this,"__className__",this.className),this.className=this.className||value===!1?"":jQuery._data(this,"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;l>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>-1)return!0;return!1},val:function(value){var hooks,ret,isFunction,elem=this[0];{if(arguments.length)return isFunction=jQuery.isFunction(value),this.each(function(i){var val,self=jQuery(this);1===this.nodeType&&(val=isFunction?value.call(this,i,self.val()):value,null==val?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),hooks=jQuery.valHooks[this.nodeName.toLowerCase()]||jQuery.valHooks[this.type],hooks&&"set"in hooks&&hooks.set(this,val,"value")!==undefined||(this.value=val))});if(elem)return hooks=jQuery.valHooks[elem.nodeName.toLowerCase()]||jQuery.valHooks[elem.type],hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined?ret:(ret=elem.value,"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret)}}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text}},select:{get:function(elem){var value,i,max,option,index=elem.selectedIndex,values=[],options=elem.options,one="select-one"===elem.type;if(0>index)return null;for(i=one?index:0,max=one?index+1:options.length;max>i;i++)if(option=options[i],!(!option.selected||(jQuery.support.optDisabled?option.disabled:null!==option.getAttribute("disabled"))||option.parentNode.disabled&&jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return one&&!values.length&&options.length?jQuery(options[index]).val():values},set:function(elem,value){var values=jQuery.makeArray(value);return jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0}),values.length||(elem.selectedIndex=-1),values}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(elem,name,value,pass){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return pass&&name in jQuery.attrFn?jQuery(elem)[name](value):"undefined"==typeof elem.getAttribute?jQuery.prop(elem,name,value):(notxml=1!==nType||!jQuery.isXMLDoc(elem),notxml&&(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook)),value!==undefined?null===value?void jQuery.removeAttr(elem,name):hooks&&"set"in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined?ret:(elem.setAttribute(name,""+value),value):hooks&&"get"in hooks&&notxml&&null!==(ret=hooks.get(elem,name))?ret:(ret=elem.getAttribute(name),null===ret?undefined:ret))},removeAttr:function(elem,value){var propName,attrNames,name,l,i=0;if(value&&1===elem.nodeType)for(attrNames=value.toLowerCase().split(rspace),l=attrNames.length;l>i;i++)name=attrNames[i],name&&(propName=jQuery.propFix[name]||name,jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName),rboolean.test(name)&&propName in elem&&(elem[propName]=!1))},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode)jQuery.error("type property can't be changed");else if(!jQuery.support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}},value:{get:function(elem,name){return nodeHook&&jQuery.nodeName(elem,"button")?nodeHook.get(elem,name):name in elem?elem.value:null},set:function(elem,value,name){return nodeHook&&jQuery.nodeName(elem,"button")?nodeHook.set(elem,value,name):void(elem.value=value)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return notxml=1!==nType||!jQuery.isXMLDoc(elem),notxml&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),value!==undefined?hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}}),jQuery.attrHooks.tabindex=jQuery.propHooks.tabIndex,boolHook={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===!0||"boolean"!=typeof property&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==!1?name.toLowerCase():undefined},set:function(elem,value,name){var propName;return value===!1?jQuery.removeAttr(elem,name):(propName=jQuery.propFix[name]||name,propName in elem&&(elem[propName]=!0),elem.setAttribute(name,name.toLowerCase())),name}},getSetAttribute||(fixSpecified={name:!0,id:!0},nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret;return ret=elem.getAttributeNode(name),ret&&(fixSpecified[name]?""!==ret.nodeValue:ret.specified)?ret.nodeValue:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);return ret||(ret=document.createAttribute(name),elem.setAttributeNode(ret)),ret.nodeValue=value+""}},jQuery.attrHooks.tabindex.set=nodeHook.set,jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){return""===value?(elem.setAttribute(name,"auto"),value):void 0}})}),jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){""===value&&(value="false"),nodeHook.set(elem,value,name)}}),jQuery.support.hrefNormalized||jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return null===ret?undefined:ret}})}),jQuery.support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined},set:function(elem,value){return elem.style.cssText=""+value}}),jQuery.support.optSelected||(jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;return parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex),null}})),jQuery.support.enctype||(jQuery.propFix.enctype="encoding"),jQuery.support.checkOn||jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return null===elem.getAttribute("value")?"on":elem.value}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){return jQuery.isArray(value)?elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0:void 0}})});var rformElems=/^(?:textarea|input|select)$/i,rtypenamespace=/^([^\.]*)?(?:\.(.+))?$/,rhoverHack=/\bhover(\.\S+)?\b/,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rquickIs=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,quickParse=function(selector){var quick=rquickIs.exec(selector);return quick&&(quick[1]=(quick[1]||"").toLowerCase(),quick[3]=quick[3]&&new RegExp("(?:^|\\s)"+quick[3]+"(?:\\s|$)")),quick},quickIs=function(elem,m){var attrs=elem.attributes||{};return!(m[1]&&elem.nodeName.toLowerCase()!==m[1]||m[2]&&(attrs.id||{}).value!==m[2]||m[3]&&!m[3].test((attrs["class"]||{}).value))},hoverHack=function(events){return jQuery.event.special.hover?events:events.replace(rhoverHack,"mouseenter$1 mouseleave$1")};jQuery.event={add:function(elem,types,handler,data,selector){var elemData,eventHandle,events,t,tns,type,namespaces,handleObj,handleObjIn,handlers,special;if(3!==elem.nodeType&&8!==elem.nodeType&&types&&handler&&(elemData=jQuery._data(elem))){for(handler.handler&&(handleObjIn=handler,handler=handleObjIn.handler),handler.guid||(handler.guid=jQuery.guid++),events=elemData.events,events||(elemData.events=events={}),eventHandle=elemData.handle,eventHandle||(elemData.handle=eventHandle=function(e){return"undefined"==typeof jQuery||e&&jQuery.event.triggered===e.type?undefined:jQuery.event.dispatch.apply(eventHandle.elem,arguments)},eventHandle.elem=elem),types=jQuery.trim(hoverHack(types)).split(" "),t=0;t<types.length;t++)tns=rtypenamespace.exec(types[t])||[],type=tns[1],namespaces=(tns[2]||"").split(".").sort(),special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:tns[1],data:data,handler:handler,guid:handler.guid,selector:selector,quick:quickParse(selector),namespace:namespaces.join(".")},handleObjIn),handlers=events[type],handlers||(handlers=events[type]=[],handlers.delegateCount=0,special.setup&&special.setup.call(elem,data,namespaces,eventHandle)!==!1||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0;elem=null}},global:{},remove:function(elem,types,handler,selector,mappedTypes){var t,tns,type,origType,namespaces,origCount,j,events,special,handle,eventType,handleObj,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(elemData&&(events=elemData.events)){for(types=jQuery.trim(hoverHack(types||"")).split(" "),t=0;t<types.length;t++)if(tns=rtypenamespace.exec(types[t])||[],type=origType=tns[1],namespaces=tns[2],type){for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,eventType=events[type]||[],origCount=eventType.length,namespaces=namespaces?new RegExp("(^|\\.)"+namespaces.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,j=0;j<eventType.length;j++)handleObj=eventType[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||namespaces&&!namespaces.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(eventType.splice(j--,1),handleObj.selector&&eventType.delegateCount--,special.remove&&special.remove.call(elem,handleObj));0===eventType.length&&origCount!==eventType.length&&(special.teardown&&special.teardown.call(elem,namespaces)!==!1||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(handle=elemData.handle,handle&&(handle.elem=null),jQuery.removeData(elem,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(event,data,elem,onlyHandlers){if(!elem||3!==elem.nodeType&&8!==elem.nodeType){var cache,exclusive,i,cur,old,ontype,special,handle,eventPath,bubbleType,type=event.type||event,namespaces=[];if(!rfocusMorph.test(type+jQuery.event.triggered)&&(type.indexOf("!")>=0&&(type=type.slice(0,-1),exclusive=!0),type.indexOf(".")>=0&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),elem&&!jQuery.event.customEvent[type]||jQuery.event.global[type]))if(event="object"==typeof event?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type),event.type=type,event.isTrigger=!0,event.exclusive=exclusive,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,ontype=type.indexOf(":")<0?"on"+type:"",elem){if(event.result=undefined,event.target||(event.target=elem),data=null!=data?jQuery.makeArray(data):[],data.unshift(event),special=jQuery.event.special[type]||{},!special.trigger||special.trigger.apply(elem,data)!==!1){if(eventPath=[[elem,special.bindType||type]],!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,cur=rfocusMorph.test(bubbleType+type)?elem:elem.parentNode,old=null;cur;cur=cur.parentNode)eventPath.push([cur,bubbleType]),old=cur;old&&old===elem.ownerDocument&&eventPath.push([old.defaultView||old.parentWindow||window,bubbleType])}for(i=0;i<eventPath.length&&!event.isPropagationStopped();i++)cur=eventPath[i][0],event.type=eventPath[i][1],handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"),handle&&handle.apply(cur,data),handle=ontype&&cur[ontype],handle&&jQuery.acceptData(cur)&&handle.apply(cur,data)===!1&&event.preventDefault();return event.type=type,onlyHandlers||event.isDefaultPrevented()||special._default&&special._default.apply(elem.ownerDocument,data)!==!1||"click"===type&&jQuery.nodeName(elem,"a")||!jQuery.acceptData(elem)||ontype&&elem[type]&&("focus"!==type&&"blur"!==type||0!==event.target.offsetWidth)&&!jQuery.isWindow(elem)&&(old=elem[ontype],old&&(elem[ontype]=null),jQuery.event.triggered=type,elem[type](),jQuery.event.triggered=undefined,old&&(elem[ontype]=old)),event.result}}else{cache=jQuery.cache;for(i in cache)cache[i].events&&cache[i].events[type]&&jQuery.event.trigger(event,data,cache[i].handle.elem,!0)}}},dispatch:function(event){event=jQuery.event.fix(event||window.event);var i,j,cur,jqcur,ret,selMatch,matched,matches,handleObj,sel,handlers=(jQuery._data(this,"events")||{})[event.type]||[],delegateCount=handlers.delegateCount,args=[].slice.call(arguments,0),run_all=!event.exclusive&&!event.namespace,handlerQueue=[];if(args[0]=event,event.delegateTarget=this,delegateCount&&!event.target.disabled&&(!event.button||"click"!==event.type))for(jqcur=jQuery(this),jqcur.context=this.ownerDocument||this,cur=event.target;cur!=this;cur=cur.parentNode||this){for(selMatch={},matches=[],jqcur[0]=cur,i=0;delegateCount>i;i++)handleObj=handlers[i],sel=handleObj.selector,selMatch[sel]===undefined&&(selMatch[sel]=handleObj.quick?quickIs(cur,handleObj.quick):jqcur.is(sel)),selMatch[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,matches:matches})}for(handlers.length>delegateCount&&handlerQueue.push({elem:this,matches:handlers.slice(delegateCount)}),i=0;i<handlerQueue.length&&!event.isPropagationStopped();i++)for(matched=handlerQueue[i],event.currentTarget=matched.elem,j=0;j<matched.matches.length&&!event.isImmediatePropagationStopped();j++)handleObj=matched.matches[j],(run_all||!event.namespace&&!handleObj.namespace||event.namespace_re&&event.namespace_re.test(handleObj.namespace))&&(event.data=handleObj.data,event.handleObj=handleObj,ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args),ret!==undefined&&(event.result=ret,ret===!1&&(event.preventDefault(),event.stopPropagation())));return event.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button,fromElement=original.fromElement;return null==event.pageX&&null!=original.clientX&&(eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement),event.which||button===undefined||(event.which=1&button?1:2&button?3:4&button?2:0),event}},fix:function(event){if(event[jQuery.expando])return event;var i,prop,originalEvent=event,fixHook=jQuery.event.fixHooks[event.type]||{},copy=fixHook.props?this.props.concat(fixHook.props):this.props;for(event=jQuery.Event(originalEvent),i=copy.length;i;)prop=copy[--i],event[prop]=originalEvent[prop];return event.target||(event.target=originalEvent.srcElement||document),3===event.target.nodeType&&(event.target=event.target.parentNode),event.metaKey===undefined&&(event.metaKey=event.ctrlKey),fixHook.filter?fixHook.filter(event,originalEvent):event},special:{ready:{setup:jQuery.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(data,namespaces,eventHandle){jQuery.isWindow(this)&&(this.onbeforeunload=eventHandle)},teardown:function(namespaces,eventHandle){this.onbeforeunload===eventHandle&&(this.onbeforeunload=null)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.event.handle=jQuery.event.dispatch,jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){elem.detachEvent&&elem.detachEvent("on"+type,handle)},jQuery.Event=function(src,props){return this instanceof jQuery.Event?(src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||src.returnValue===!1||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),void(this[jQuery.expando]=!0)):new jQuery.Event(src,props)},jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){{var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;handleObj.selector}return(!related||related!==target&&!jQuery.contains(target,related))&&(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),jQuery.support.submitBubbles||(jQuery.event.special.submit={setup:function(){return jQuery.nodeName(this,"form")?!1:void jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;form&&!form._submit_attached&&(jQuery.event.add(form,"submit._submit",function(event){this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event,!0)}),form._submit_attached=!0)})},teardown:function(){return jQuery.nodeName(this,"form")?!1:void jQuery.event.remove(this,"._submit")}}),jQuery.support.changeBubbles||(jQuery.event.special.change={setup:function(){return rformElems.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(jQuery.event.add(this,"propertychange._change",function(event){"checked"===event.originalEvent.propertyName&&(this._just_changed=!0)}),jQuery.event.add(this,"click._change",function(event){this._just_changed&&!event.isTrigger&&(this._just_changed=!1,jQuery.event.simulate("change",this,event,!0))})),!1):void jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;rformElems.test(elem.nodeName)&&!elem._change_attached&&(jQuery.event.add(elem,"change._change",function(event){!this.parentNode||event.isSimulated||event.isTrigger||jQuery.event.simulate("change",this.parentNode,event,!0)}),elem._change_attached=!0)})},handle:function(event){var elem=event.target;return this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type?event.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return jQuery.event.remove(this,"._change"),rformElems.test(this.nodeName)}}),jQuery.support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){0===attaches++&&document.addEventListener(orig,handler,!0)},teardown:function(){0===--attaches&&document.removeEventListener(orig,handler,!0)}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if("object"==typeof types){"string"!=typeof selector&&(data=selector,selector=undefined);for(type in types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=undefined):null==fn&&("string"==typeof selector?(fn=data,data=undefined):(fn=data,data=selector,selector=undefined)),fn===!1)fn=returnFalse;else if(!fn)return this;return 1===one&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on.call(this,types,selector,data,fn,1)},off:function(types,selector,fn){if(types&&types.preventDefault&&types.handleObj){var handleObj=types.handleObj;return jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.type+"."+handleObj.namespace:handleObj.type,handleObj.selector,handleObj.handler),this}if("object"==typeof types){for(var type in types)this.off(type,selector,types[type]);return this}return(selector===!1||"function"==typeof selector)&&(fn=selector,selector=undefined),fn===!1&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)})},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},live:function(types,data,fn){return jQuery(this.context).on(types,this.selector,data,fn),this},die:function(types,fn){return jQuery(this.context).off(types,this.selector||"**",fn),this},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1==arguments.length?this.off(selector,"**"):this.off(types,selector,fn)},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){return this[0]?jQuery.event.trigger(type,data,this[0],!0):void 0},toggle:function(fn){var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;return jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1),event.preventDefault(),args[lastToggle].apply(this,arguments)||!1};for(toggler.guid=guid;i<args.length;)args[i++].guid=guid;return this.click(toggler)},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return null==fn&&(fn=data,data=null),arguments.length>0?this.on(name,null,data,fn):this.trigger(name)},jQuery.attrFn&&(jQuery.attrFn[name]=!0),rkeyEvent.test(name)&&(jQuery.event.fixHooks[name]=jQuery.event.keyHooks),rmouseEvent.test(name)&&(jQuery.event.fixHooks[name]=jQuery.event.mouseHooks)}),function(){function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;l>i;i++){var elem=checkSet[i];if(elem){var match=!1;for(elem=elem[dir];elem;){if(elem[expando]===doneName){match=checkSet[elem.sizset];break}if(1!==elem.nodeType||isXML||(elem[expando]=doneName,elem.sizset=i),elem.nodeName.toLowerCase()===cur){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;l>i;i++){var elem=checkSet[i];if(elem){var match=!1;for(elem=elem[dir];elem;){if(elem[expando]===doneName){match=checkSet[elem.sizset];break}if(1===elem.nodeType)if(isXML||(elem[expando]=doneName,elem.sizset=i),"string"!=typeof cur){if(elem===cur){match=!0;break}}else if(Sizzle.filter(cur,[elem]).length>0){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,expando="sizcache"+(Math.random()+"").replace(".",""),done=0,toString=Object.prototype.toString,hasDuplicate=!1,baseHasDuplicate=!0,rBackslash=/\\/g,rReturn=/\r\n/g,rNonWord=/\W/;[0,0].sort(function(){return baseHasDuplicate=!1,0
});var Sizzle=function(selector,context,results,seed){results=results||[],context=context||document;var origContext=context;if(1!==context.nodeType&&9!==context.nodeType)return[];if(!selector||"string"!=typeof selector)return results;var m,set,checkSet,extra,ret,cur,pop,i,prune=!0,contextXML=Sizzle.isXML(context),parts=[],soFar=selector;do if(chunker.exec(""),m=chunker.exec(soFar),m&&(soFar=m[3],parts.push(m[1]),m[2])){extra=m[3];break}while(m);if(parts.length>1&&origPOS.exec(selector))if(2===parts.length&&Expr.relative[parts[0]])set=posProcess(parts[0]+parts[1],context,seed);else for(set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);parts.length;)selector=parts.shift(),Expr.relative[selector]&&(selector+=parts.shift()),set=posProcess(selector,set,seed);else if(!seed&&parts.length>1&&9===context.nodeType&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])&&(ret=Sizzle.find(parts.shift(),context,contextXML),context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0]),context)for(ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),1!==parts.length||"~"!==parts[0]&&"+"!==parts[0]||!context.parentNode?context:context.parentNode,contextXML),set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set,parts.length>0?checkSet=makeArray(set):prune=!1;parts.length;)cur=parts.pop(),pop=cur,Expr.relative[cur]?pop=parts.pop():cur="",null==pop&&(pop=context),Expr.relative[cur](checkSet,pop,contextXML);else checkSet=parts=[];if(checkSet||(checkSet=set),checkSet||Sizzle.error(cur||selector),"[object Array]"===toString.call(checkSet))if(prune)if(context&&1===context.nodeType)for(i=0;null!=checkSet[i];i++)checkSet[i]&&(checkSet[i]===!0||1===checkSet[i].nodeType&&Sizzle.contains(context,checkSet[i]))&&results.push(set[i]);else for(i=0;null!=checkSet[i];i++)checkSet[i]&&1===checkSet[i].nodeType&&results.push(set[i]);else results.push.apply(results,checkSet);else makeArray(checkSet,results);return extra&&(Sizzle(extra,origContext,results,seed),Sizzle.uniqueSort(results)),results};Sizzle.uniqueSort=function(results){if(sortOrder&&(hasDuplicate=baseHasDuplicate,results.sort(sortOrder),hasDuplicate))for(var i=1;i<results.length;i++)results[i]===results[i-1]&&results.splice(i--,1);return results},Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set)},Sizzle.matchesSelector=function(node,expr){return Sizzle(expr,null,null,[node]).length>0},Sizzle.find=function(expr,context,isXML){var set,i,len,match,type,left;if(!expr)return[];for(i=0,len=Expr.order.length;len>i;i++)if(type=Expr.order[i],(match=Expr.leftMatch[type].exec(expr))&&(left=match[1],match.splice(1,1),"\\"!==left.substr(left.length-1)&&(match[1]=(match[1]||"").replace(rBackslash,""),set=Expr.find[type](match,context,isXML),null!=set))){expr=expr.replace(Expr.match[type],"");break}return set||(set="undefined"!=typeof context.getElementsByTagName?context.getElementsByTagName("*"):[]),{set:set,expr:expr}},Sizzle.filter=function(expr,set,inplace,not){for(var match,anyFound,type,found,item,filter,left,i,pass,old=expr,result=[],curLoop=set,isXMLFilter=set&&set[0]&&Sizzle.isXML(set[0]);expr&&set.length;){for(type in Expr.filter)if(null!=(match=Expr.leftMatch[type].exec(expr))&&match[2]){if(filter=Expr.filter[type],left=match[1],anyFound=!1,match.splice(1,1),"\\"===left.substr(left.length-1))continue;if(curLoop===result&&(result=[]),Expr.preFilter[type])if(match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter)){if(match===!0)continue}else anyFound=found=!0;if(match)for(i=0;null!=(item=curLoop[i]);i++)item&&(found=filter(item,match,i,curLoop),pass=not^found,inplace&&null!=found?pass?anyFound=!0:curLoop[i]=!1:pass&&(result.push(item),anyFound=!0));if(found!==undefined){if(inplace||(curLoop=result),expr=expr.replace(Expr.match[type],""),!anyFound)return[];break}}if(expr===old){if(null!=anyFound)break;Sizzle.error(expr)}old=expr}return curLoop},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};var getText=Sizzle.getText=function(elem){var i,node,nodeType=elem.nodeType,ret="";if(nodeType){if(1===nodeType||9===nodeType){if("string"==typeof elem.textContent)return elem.textContent;if("string"==typeof elem.innerText)return elem.innerText.replace(rReturn,"");for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(i=0;node=elem[i];i++)8!==node.nodeType&&(ret+=getText(node));return ret},Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href")},type:function(elem){return elem.getAttribute("type")}},relative:{"+":function(checkSet,part){var isPartStr="string"==typeof part,isTag=isPartStr&&!rNonWord.test(part),isPartStrNotTag=isPartStr&&!isTag;isTag&&(part=part.toLowerCase());for(var elem,i=0,l=checkSet.length;l>i;i++)if(elem=checkSet[i]){for(;(elem=elem.previousSibling)&&1!==elem.nodeType;);checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||!1:elem===part}isPartStrNotTag&&Sizzle.filter(part,checkSet,!0)},">":function(checkSet,part){var elem,isPartStr="string"==typeof part,i=0,l=checkSet.length;if(isPartStr&&!rNonWord.test(part)){for(part=part.toLowerCase();l>i;i++)if(elem=checkSet[i]){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:!1}}else{for(;l>i;i++)elem=checkSet[i],elem&&(checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part);isPartStr&&Sizzle.filter(part,checkSet,!0)}},"":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;"string"!=typeof part||rNonWord.test(part)||(part=part.toLowerCase(),nodeCheck=part,checkFn=dirNodeCheck),checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML)},"~":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;"string"!=typeof part||rNonWord.test(part)||(part=part.toLowerCase(),nodeCheck=part,checkFn=dirNodeCheck),checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML)}},find:{ID:function(match,context,isXML){if("undefined"!=typeof context.getElementById&&!isXML){var m=context.getElementById(match[1]);return m&&m.parentNode?[m]:[]}},NAME:function(match,context){if("undefined"!=typeof context.getElementsByName){for(var ret=[],results=context.getElementsByName(match[1]),i=0,l=results.length;l>i;i++)results[i].getAttribute("name")===match[1]&&ret.push(results[i]);return 0===ret.length?null:ret}},TAG:function(match,context){return"undefined"!=typeof context.getElementsByTagName?context.getElementsByTagName(match[1]):void 0}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){if(match=" "+match[1].replace(rBackslash,"")+" ",isXML)return match;for(var elem,i=0;null!=(elem=curLoop[i]);i++)elem&&(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n\r]/g," ").indexOf(match)>=0)?inplace||result.push(elem):inplace&&(curLoop[i]=!1));return!1},ID:function(match){return match[1].replace(rBackslash,"")},TAG:function(match){return match[1].replace(rBackslash,"").toLowerCase()},CHILD:function(match){if("nth"===match[1]){match[2]||Sizzle.error(match[0]),match[2]=match[2].replace(/^\+|\s*/g,"");var test=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===match[2]&&"2n"||"odd"===match[2]&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=test[1]+(test[2]||1)-0,match[3]=test[3]-0}else match[2]&&Sizzle.error(match[0]);return match[0]=done++,match},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1]=match[1].replace(rBackslash,"");return!isXML&&Expr.attrMap[name]&&(match[1]=Expr.attrMap[name]),match[4]=(match[4]||match[5]||"").replace(rBackslash,""),"~="===match[2]&&(match[4]=" "+match[4]+" "),match},PSEUDO:function(match,curLoop,inplace,result,not){if("not"===match[1]){if(!((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3]))){var ret=Sizzle.filter(match[3],curLoop,inplace,!0^not);return inplace||result.push.apply(result,ret),!1}match[3]=Sizzle(match[3],null,null,curLoop)}else if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0]))return!0;return match},POS:function(match){return match.unshift(!0),match}},filters:{enabled:function(elem){return elem.disabled===!1&&"hidden"!==elem.type},disabled:function(elem){return elem.disabled===!0},checked:function(elem){return elem.checked===!0},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,elem.selected===!0},parent:function(elem){return!!elem.firstChild},empty:function(elem){return!elem.firstChild},has:function(elem,i,match){return!!Sizzle(match[3],elem).length},header:function(elem){return/h\d/i.test(elem.nodeName)},text:function(elem){var attr=elem.getAttribute("type"),type=elem.type;return"input"===elem.nodeName.toLowerCase()&&"text"===type&&(attr===type||null===attr)},radio:function(elem){return"input"===elem.nodeName.toLowerCase()&&"radio"===elem.type},checkbox:function(elem){return"input"===elem.nodeName.toLowerCase()&&"checkbox"===elem.type},file:function(elem){return"input"===elem.nodeName.toLowerCase()&&"file"===elem.type},password:function(elem){return"input"===elem.nodeName.toLowerCase()&&"password"===elem.type},submit:function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&"submit"===elem.type},image:function(elem){return"input"===elem.nodeName.toLowerCase()&&"image"===elem.type},reset:function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&"reset"===elem.type},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},input:function(elem){return/input|select|textarea|button/i.test(elem.nodeName)},focus:function(elem){return elem===elem.ownerDocument.activeElement}},setFilters:{first:function(elem,i){return 0===i},last:function(elem,i,match,array){return i===array.length-1},even:function(elem,i){return i%2===0},odd:function(elem,i){return i%2===1},lt:function(elem,i,match){return i<match[3]-0},gt:function(elem,i,match){return i>match[3]-0},nth:function(elem,i,match){return match[3]-0===i},eq:function(elem,i,match){return match[3]-0===i}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter)return filter(elem,i,match,array);if("contains"===name)return(elem.textContent||elem.innerText||getText([elem])||"").indexOf(match[3])>=0;if("not"===name){for(var not=match[3],j=0,l=not.length;l>j;j++)if(not[j]===elem)return!1;return!0}Sizzle.error(name)},CHILD:function(elem,match){var first,last,doneName,parent,count,diff,type=match[1],node=elem;switch(type){case"only":case"first":for(;node=node.previousSibling;)if(1===node.nodeType)return!1;if("first"===type)return!0;node=elem;case"last":for(;node=node.nextSibling;)if(1===node.nodeType)return!1;return!0;case"nth":if(first=match[2],last=match[3],1===first&&0===last)return!0;if(doneName=match[0],parent=elem.parentNode,parent&&(parent[expando]!==doneName||!elem.nodeIndex)){for(count=0,node=parent.firstChild;node;node=node.nextSibling)1===node.nodeType&&(node.nodeIndex=++count);parent[expando]=doneName}return diff=elem.nodeIndex-last,0===first?0===diff:diff%first===0&&diff/first>=0}},ID:function(elem,match){return 1===elem.nodeType&&elem.getAttribute("id")===match},TAG:function(elem,match){return"*"===match&&1===elem.nodeType||!!elem.nodeName&&elem.nodeName.toLowerCase()===match},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1},ATTR:function(elem,match){var name=match[1],result=Sizzle.attr?Sizzle.attr(elem,name):Expr.attrHandle[name]?Expr.attrHandle[name](elem):null!=elem[name]?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return null==result?"!="===type:!type&&Sizzle.attr?null!=result:"="===type?value===check:"*="===type?value.indexOf(check)>=0:"~="===type?(" "+value+" ").indexOf(check)>=0:check?"!="===type?value!==check:"^="===type?0===value.indexOf(check):"$="===type?value.substr(value.length-check.length)===check:"|="===type?value===check||value.substr(0,check.length+1)===check+"-":!1:value&&result!==!1},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];return filter?filter(elem,i,match,array):void 0}}},origPOS=Expr.match.POS,fescape=function(all,num){return"\\"+(num-0+1)};for(var type in Expr.match)Expr.match[type]=new RegExp(Expr.match[type].source+/(?![^\[]*\])(?![^\(]*\))/.source),Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,fescape));var makeArray=function(array,results){return array=Array.prototype.slice.call(array,0),results?(results.push.apply(results,array),results):array};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(e){makeArray=function(array,results){var i=0,ret=results||[];if("[object Array]"===toString.call(array))Array.prototype.push.apply(ret,array);else if("number"==typeof array.length)for(var l=array.length;l>i;i++)ret.push(array[i]);else for(;array[i];i++)ret.push(array[i]);return ret}}var sortOrder,siblingCheck;document.documentElement.compareDocumentPosition?sortOrder=function(a,b){return a===b?(hasDuplicate=!0,0):a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b)?-1:1:a.compareDocumentPosition?-1:1}:(sortOrder=function(a,b){if(a===b)return hasDuplicate=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup)return siblingCheck(a,b);if(!aup)return-1;if(!bup)return 1;for(;cur;)ap.unshift(cur),cur=cur.parentNode;for(cur=bup;cur;)bp.unshift(cur),cur=cur.parentNode;al=ap.length,bl=bp.length;for(var i=0;al>i&&bl>i;i++)if(ap[i]!==bp[i])return siblingCheck(ap[i],bp[i]);return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)},siblingCheck=function(a,b,ret){if(a===b)return ret;for(var cur=a.nextSibling;cur;){if(cur===b)return-1;cur=cur.nextSibling}return 1}),function(){var form=document.createElement("div"),id="script"+(new Date).getTime(),root=document.documentElement;form.innerHTML="<a name='"+id+"'/>",root.insertBefore(form,root.firstChild),document.getElementById(id)&&(Expr.find.ID=function(match,context,isXML){if("undefined"!=typeof context.getElementById&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||"undefined"!=typeof m.getAttributeNode&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[]}},Expr.filter.ID=function(elem,match){var node="undefined"!=typeof elem.getAttributeNode&&elem.getAttributeNode("id");return 1===elem.nodeType&&node&&node.nodeValue===match}),root.removeChild(form),root=form=null}(),function(){var div=document.createElement("div");div.appendChild(document.createComment("")),div.getElementsByTagName("*").length>0&&(Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if("*"===match[1]){for(var tmp=[],i=0;results[i];i++)1===results[i].nodeType&&tmp.push(results[i]);results=tmp}return results}),div.innerHTML="<a href='#'></a>",div.firstChild&&"undefined"!=typeof div.firstChild.getAttribute&&"#"!==div.firstChild.getAttribute("href")&&(Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2)}),div=null}(),document.querySelectorAll&&!function(){var oldSizzle=Sizzle,div=document.createElement("div"),id="__sizzle__";if(div.innerHTML="<p class='TEST'></p>",!div.querySelectorAll||0!==div.querySelectorAll(".TEST").length){Sizzle=function(query,context,extra,seed){if(context=context||document,!seed&&!Sizzle.isXML(context)){var match=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(query);if(match&&(1===context.nodeType||9===context.nodeType)){if(match[1])return makeArray(context.getElementsByTagName(query),extra);if(match[2]&&Expr.find.CLASS&&context.getElementsByClassName)return makeArray(context.getElementsByClassName(match[2]),extra)}if(9===context.nodeType){if("body"===query&&context.body)return makeArray([context.body],extra);if(match&&match[3]){var elem=context.getElementById(match[3]);if(!elem||!elem.parentNode)return makeArray([],extra);if(elem.id===match[3])return makeArray([elem],extra)}try{return makeArray(context.querySelectorAll(query),extra)}catch(qsaError){}}else if(1===context.nodeType&&"object"!==context.nodeName.toLowerCase()){var oldContext=context,old=context.getAttribute("id"),nid=old||id,hasParent=context.parentNode,relativeHierarchySelector=/^\s*[+~]/.test(query);old?nid=nid.replace(/'/g,"\\$&"):context.setAttribute("id",nid),relativeHierarchySelector&&hasParent&&(context=context.parentNode);try{if(!relativeHierarchySelector||hasParent)return makeArray(context.querySelectorAll("[id='"+nid+"'] "+query),extra)}catch(pseudoError){}finally{old||oldContext.removeAttribute("id")}}}return oldSizzle(query,context,extra,seed)};for(var prop in oldSizzle)Sizzle[prop]=oldSizzle[prop];div=null}}(),function(){var html=document.documentElement,matches=html.matchesSelector||html.mozMatchesSelector||html.webkitMatchesSelector||html.msMatchesSelector;if(matches){var disconnectedMatch=!matches.call(document.createElement("div"),"div"),pseudoWorks=!1;try{matches.call(document.documentElement,"[test!='']:sizzle")}catch(pseudoError){pseudoWorks=!0}Sizzle.matchesSelector=function(node,expr){if(expr=expr.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!Sizzle.isXML(node))try{if(pseudoWorks||!Expr.match.PSEUDO.test(expr)&&!/!=/.test(expr)){var ret=matches.call(node,expr);if(ret||!disconnectedMatch||node.document&&11!==node.document.nodeType)return ret}}catch(e){}return Sizzle(expr,null,null,[node]).length>0}}}(),function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>",div.getElementsByClassName&&0!==div.getElementsByClassName("e").length&&(div.lastChild.className="e",1!==div.getElementsByClassName("e").length&&(Expr.order.splice(1,0,"CLASS"),Expr.find.CLASS=function(match,context,isXML){return"undefined"==typeof context.getElementsByClassName||isXML?void 0:context.getElementsByClassName(match[1])},div=null))}(),Sizzle.contains=document.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:document.documentElement.compareDocumentPosition?function(a,b){return!!(16&a.compareDocumentPosition(b))}:function(){return!1},Sizzle.isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?"HTML"!==documentElement.nodeName:!1};var posProcess=function(selector,context,seed){for(var match,tmpSet=[],later="",root=context.nodeType?[context]:context;match=Expr.match.PSEUDO.exec(selector);)later+=match[0],selector=selector.replace(Expr.match.PSEUDO,"");selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;l>i;i++)Sizzle(selector,root[i],tmpSet,seed);return Sizzle.filter(later,tmpSet)};Sizzle.attr=jQuery.attr,Sizzle.selectors.attrMap={},jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.filters,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains}();var runtil=/Until$/,rparentsprev=/^(?:parents|prevUntil|prevAll)/,rmultiselector=/,/,isSimple=/^.[^:#\[\.,]*$/,slice=Array.prototype.slice,POS=jQuery.expr.match.POS,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.fn.extend({find:function(selector){var i,l,self=this;if("string"!=typeof selector)return jQuery(selector).filter(function(){for(i=0,l=self.length;l>i;i++)if(jQuery.contains(self[i],this))return!0});var length,n,r,ret=this.pushStack("","find",selector);for(i=0,l=this.length;l>i;i++)if(length=ret.length,jQuery.find(selector,this[i],ret),i>0)for(n=length;n<ret.length;n++)for(r=0;length>r;r++)if(ret[r]===ret[n]){ret.splice(n--,1);break}return ret},has:function(target){var targets=jQuery(target);return this.filter(function(){for(var i=0,l=targets.length;l>i;i++)if(jQuery.contains(this,targets[i]))return!0})},not:function(selector){return this.pushStack(winnow(this,selector,!1),"not",selector)},filter:function(selector){return this.pushStack(winnow(this,selector,!0),"filter",selector)},is:function(selector){return!!selector&&("string"==typeof selector?POS.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0)},closest:function(selectors,context){var i,l,ret=[],cur=this[0];if(jQuery.isArray(selectors)){for(var level=1;cur&&cur.ownerDocument&&cur!==context;){for(i=0;i<selectors.length;i++)jQuery(cur).is(selectors[i])&&ret.push({selector:selectors[i],elem:cur,level:level});cur=cur.parentNode,level++}return ret}var pos=POS.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;for(i=0,l=this.length;l>i;i++)for(cur=this[i];cur;){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break}if(cur=cur.parentNode,!cur||!cur.ownerDocument||cur===context||11===cur.nodeType)break}return ret=ret.length>1?jQuery.unique(ret):ret,this.pushStack(ret,"closest",selectors)},index:function(elem){return elem?"string"==typeof elem?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(selector,context){var set="string"==typeof selector?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all))},andSelf:function(){return this.add(this.prevObject)}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return jQuery.nth(elem,2,"nextSibling")},prev:function(elem){return jQuery.nth(elem,2,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling(elem.parentNode.firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);return runtil.test(name)||(selector=until),selector&&"string"==typeof selector&&(ret=jQuery.filter(selector,ret)),ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret,(this.length>1||rmultiselector.test(selector))&&rparentsprev.test(name)&&(ret=ret.reverse()),this.pushStack(ret,name,slice.call(arguments).join(","))}}),jQuery.extend({filter:function(expr,elems,not){return not&&(expr=":not("+expr+")"),1===elems.length?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(until===undefined||1!==cur.nodeType||!jQuery(cur).is(until));)1===cur.nodeType&&matched.push(cur),cur=cur[dir];return matched},nth:function(cur,result,dir){result=result||1;for(var num=0;cur&&(1!==cur.nodeType||++num!==result);cur=cur[dir]);return cur},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&r.push(n);return r}});var nodeNames="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:\d+|null)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style)/i,rnocache=/<(?:script|object|embed|option|style)/i,rnoshimcache=new RegExp("<(?:"+nodeNames+")","i"),rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)/,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},safeFragment=createSafeFragment(document);wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.support.htmlSerialize||(wrapMap._default=[1,"div<div>","</div>"]),jQuery.fn.extend({text:function(text){return jQuery.isFunction(text)?this.each(function(i){var self=jQuery(this);self.text(text.call(this,i,self.text()))}):"object"!=typeof text&&text!==undefined?this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(text)):jQuery.text(this)},wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){return this.each(jQuery.isFunction(html)?function(i){jQuery(this).wrapInner(html.call(this,i))}:function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(elem){1===this.nodeType&&this.appendChild(elem)})},prepend:function(){return this.domManip(arguments,!0,function(elem){1===this.nodeType&&this.insertBefore(elem,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(elem){this.parentNode.insertBefore(elem,this)});if(arguments.length){var set=jQuery.clean(arguments);return set.push.apply(set,this.toArray()),this.pushStack(set,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(elem){this.parentNode.insertBefore(elem,this.nextSibling)});if(arguments.length){var set=this.pushStack(this,"after",arguments);return set.push.apply(set,jQuery.clean(arguments)),set}},remove:function(selector,keepData){for(var elem,i=0;null!=(elem=this[i]);i++)(!selector||jQuery.filter(selector,[elem]).length)&&(keepData||1!==elem.nodeType||(jQuery.cleanData(elem.getElementsByTagName("*")),jQuery.cleanData([elem])),elem.parentNode&&elem.parentNode.removeChild(elem));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++)for(1===elem.nodeType&&jQuery.cleanData(elem.getElementsByTagName("*"));elem.firstChild;)elem.removeChild(elem.firstChild);return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null==dataAndEvents?!1:dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){if(value===undefined)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(rinlinejQuery,""):null;if("string"!=typeof value||rnoInnerhtml.test(value)||!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(value)||wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()])jQuery.isFunction(value)?this.each(function(i){var self=jQuery(this);self.html(value.call(this,i,self.html()))}):this.empty().append(value);else{value=value.replace(rxhtmlTag,"<$1></$2>");try{for(var i=0,l=this.length;l>i;i++)1===this[i].nodeType&&(jQuery.cleanData(this[i].getElementsByTagName("*")),this[i].innerHTML=value)}catch(e){this.empty().append(value)}}return this},replaceWith:function(value){return this[0]&&this[0].parentNode?jQuery.isFunction(value)?this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old))}):("string"!=typeof value&&(value=jQuery(value).detach()),this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove(),next?jQuery(next).before(value):jQuery(parent).append(value)})):this.length?this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value):this},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,table,callback){var results,first,fragment,parent,value=args[0],scripts=[];if(!jQuery.support.checkClone&&3===arguments.length&&"string"==typeof value&&rchecked.test(value))return this.each(function(){jQuery(this).domManip(args,table,callback,!0)});if(jQuery.isFunction(value))return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined),self.domManip(args,table,callback)});if(this[0]){if(parent=value&&value.parentNode,results=jQuery.support.parentNode&&parent&&11===parent.nodeType&&parent.childNodes.length===this.length?{fragment:parent}:jQuery.buildFragment(args,this,scripts),fragment=results.fragment,first=1===fragment.childNodes.length?fragment=fragment.firstChild:fragment.firstChild){table=table&&jQuery.nodeName(first,"tr");for(var i=0,l=this.length,lastIndex=l-1;l>i;i++)callback.call(table?root(this[i],first):this[i],results.cacheable||l>1&&lastIndex>i?jQuery.clone(fragment,!0,!0):fragment)}scripts.length&&jQuery.each(scripts,evalScript)}return this}}),jQuery.buildFragment=function(args,nodes,scripts){var fragment,cacheable,cacheresults,doc,first=args[0];return nodes&&nodes[0]&&(doc=nodes[0].ownerDocument||nodes[0]),doc.createDocumentFragment||(doc=document),!(1===args.length&&"string"==typeof first&&first.length<512&&doc===document&&"<"===first.charAt(0))||rnocache.test(first)||!jQuery.support.checkClone&&rchecked.test(first)||!jQuery.support.html5Clone&&rnoshimcache.test(first)||(cacheable=!0,cacheresults=jQuery.fragments[first],cacheresults&&1!==cacheresults&&(fragment=cacheresults)),fragment||(fragment=doc.createDocumentFragment(),jQuery.clean(args,doc,fragment,scripts)),cacheable&&(jQuery.fragments[first]=cacheresults?fragment:1),{fragment:fragment,cacheable:cacheable}},jQuery.fragments={},jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),parent=1===this.length&&this[0].parentNode;if(parent&&11===parent.nodeType&&1===parent.childNodes.length&&1===insert.length)return insert[original](this[0]),this;for(var i=0,l=insert.length;l>i;i++){var elems=(i>0?this.clone(!0):this).get();jQuery(insert[i])[original](elems),ret=ret.concat(elems)}return this.pushStack(ret,name,insert.selector)}}),jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var srcElements,destElements,i,clone=jQuery.support.html5Clone||!rnoshimcache.test("<"+elem.nodeName)?elem.cloneNode(!0):shimCloneNode(elem);if(!(jQuery.support.noCloneEvent&&jQuery.support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(cloneFixAttributes(elem,clone),srcElements=getAll(elem),destElements=getAll(clone),i=0;srcElements[i];++i)destElements[i]&&cloneFixAttributes(srcElements[i],destElements[i]);
if(dataAndEvents&&(cloneCopyEvent(elem,clone),deepDataAndEvents))for(srcElements=getAll(elem),destElements=getAll(clone),i=0;srcElements[i];++i)cloneCopyEvent(srcElements[i],destElements[i]);return srcElements=destElements=null,clone},clean:function(elems,context,fragment,scripts){var checkScriptType;context=context||document,"undefined"==typeof context.createElement&&(context=context.ownerDocument||context[0]&&context[0].ownerDocument||document);for(var j,elem,ret=[],i=0;null!=(elem=elems[i]);i++)if("number"==typeof elem&&(elem+=""),elem){if("string"==typeof elem)if(rhtml.test(elem)){elem=elem.replace(rxhtmlTag,"<$1></$2>");var tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,depth=wrap[0],div=context.createElement("div");for(context===document?safeFragment.appendChild(div):createSafeFragment(context).appendChild(div),div.innerHTML=wrap[1]+elem+wrap[2];depth--;)div=div.lastChild;if(!jQuery.support.tbody){var hasBody=rtbody.test(elem),tbody="table"!==tag||hasBody?"<table>"!==wrap[1]||hasBody?[]:div.childNodes:div.firstChild&&div.firstChild.childNodes;for(j=tbody.length-1;j>=0;--j)jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length&&tbody[j].parentNode.removeChild(tbody[j])}!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)&&div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild),elem=div.childNodes}else elem=context.createTextNode(elem);var len;if(!jQuery.support.appendChecked)if(elem[0]&&"number"==typeof(len=elem.length))for(j=0;len>j;j++)findInputs(elem[j]);else findInputs(elem);elem.nodeType?ret.push(elem):ret=jQuery.merge(ret,elem)}if(fragment)for(checkScriptType=function(elem){return!elem.type||rscriptType.test(elem.type)},i=0;ret[i];i++)if(!scripts||!jQuery.nodeName(ret[i],"script")||ret[i].type&&"text/javascript"!==ret[i].type.toLowerCase()){if(1===ret[i].nodeType){var jsTags=jQuery.grep(ret[i].getElementsByTagName("script"),checkScriptType);ret.splice.apply(ret,[i+1,0].concat(jsTags))}fragment.appendChild(ret[i])}else scripts.push(ret[i].parentNode?ret[i].parentNode.removeChild(ret[i]):ret[i]);return ret},cleanData:function(elems){for(var data,id,elem,cache=jQuery.cache,special=jQuery.event.special,deleteExpando=jQuery.support.deleteExpando,i=0;null!=(elem=elems[i]);i++)if((!elem.nodeName||!jQuery.noData[elem.nodeName.toLowerCase()])&&(id=elem[jQuery.expando])){if(data=cache[id],data&&data.events){for(var type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);data.handle&&(data.handle.elem=null)}deleteExpando?delete elem[jQuery.expando]:elem.removeAttribute&&elem.removeAttribute(jQuery.expando),delete cache[id]}}});var curCSS,getComputedStyle,currentStyle,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rupper=/([A-Z]|^ms)/g,rnumpx=/^-?\d+(?:px)?$/i,rnum=/^-?\d/,rrelNum=/^([\-+])=([\-+.\de]+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssWidth=["Left","Right"],cssHeight=["Top","Bottom"];jQuery.fn.css=function(name,value){return 2===arguments.length&&value===undefined?this:jQuery.access(this,name,value,!0,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)})},jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity","opacity");return""===ret?"1":ret}return elem.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,origName=jQuery.camelCase(name),style=elem.style,hooks=jQuery.cssHooks[origName];if(name=jQuery.cssProps[origName]||origName,value===undefined)return hooks&&"get"in hooks&&(ret=hooks.get(elem,!1,extra))!==undefined?ret:style[name];if(type=typeof value,"string"===type&&(ret=rrelNum.exec(value))&&(value=+(ret[1]+1)*+ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),!(null==value||"number"===type&&isNaN(value)||("number"!==type||jQuery.cssNumber[origName]||(value+="px"),hooks&&"set"in hooks&&(value=hooks.set(elem,value))===undefined)))try{style[name]=value}catch(e){}}},css:function(elem,name,extra){var ret,hooks;return name=jQuery.camelCase(name),hooks=jQuery.cssHooks[name],name=jQuery.cssProps[name]||name,"cssFloat"===name&&(name="float"),hooks&&"get"in hooks&&(ret=hooks.get(elem,!0,extra))!==undefined?ret:curCSS?curCSS(elem,name):void 0},swap:function(elem,options,callback){var old={};for(var name in options)old[name]=elem.style[name],elem.style[name]=options[name];callback.call(elem);for(name in options)elem.style[name]=old[name]}}),jQuery.curCSS=jQuery.css,jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){var val;return computed?0!==elem.offsetWidth?getWH(elem,name,extra):(jQuery.swap(elem,cssShow,function(){val=getWH(elem,name,extra)}),val):void 0},set:function(elem,value){return rnumpx.test(value)?(value=parseFloat(value),value>=0?value+"px":void 0):value}}}),jQuery.support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?parseFloat(RegExp.$1)/100+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1,value>=1&&""===jQuery.trim(filter.replace(ralpha,""))&&(style.removeAttribute("filter"),currentStyle&&!currentStyle.filter)||(style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity)}}),jQuery(function(){jQuery.support.reliableMarginRight||(jQuery.cssHooks.marginRight={get:function(elem,computed){var ret;return jQuery.swap(elem,{display:"inline-block"},function(){ret=computed?curCSS(elem,"margin-right","marginRight"):elem.style.marginRight}),ret}})}),document.defaultView&&document.defaultView.getComputedStyle&&(getComputedStyle=function(elem,name){var ret,defaultView,computedStyle;return name=name.replace(rupper,"-$1").toLowerCase(),(defaultView=elem.ownerDocument.defaultView)&&(computedStyle=defaultView.getComputedStyle(elem,null))&&(ret=computedStyle.getPropertyValue(name),""!==ret||jQuery.contains(elem.ownerDocument.documentElement,elem)||(ret=jQuery.style(elem,name))),ret}),document.documentElement.currentStyle&&(currentStyle=function(elem,name){var left,rsLeft,uncomputed,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;return null===ret&&style&&(uncomputed=style[name])&&(ret=uncomputed),!rnumpx.test(ret)&&rnum.test(ret)&&(left=style.left,rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left,rsLeft&&(elem.runtimeStyle.left=elem.currentStyle.left),style.left="fontSize"===name?"1em":ret||0,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(elem.runtimeStyle.left=rsLeft)),""===ret?"auto":ret}),curCSS=getComputedStyle||currentStyle,jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.hidden=function(elem){var width=elem.offsetWidth,height=elem.offsetHeight;return 0===width&&0===height||!jQuery.support.reliableHiddenOffsets&&"none"===(elem.style&&elem.style.display||jQuery.css(elem,"display"))},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)});var ajaxLocation,ajaxLocParts,r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rhash=/#.*$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rinput=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rlocalProtocol=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rquery=/\?/,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rselectTextarea=/^(?:select|textarea)/i,rspacesAjax=/\s+/,rts=/([?&])_=[^&]*/,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,_load=jQuery.fn.load,prefilters={},transports={},allTypes=["*/"]+["*"];try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.fn.extend({load:function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);if(!this.length)return this;var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off)}var type="GET";params&&(jQuery.isFunction(params)?(callback=params,params=undefined):"object"==typeof params&&(params=jQuery.param(params,jQuery.ajaxSettings.traditional),type="POST"));var self=this;return jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(jqXHR,status,responseText){responseText=jqXHR.responseText,jqXHR.isResolved()&&(jqXHR.done(function(r){responseText=r}),self.html(selector?jQuery("<div>").append(responseText.replace(rscript,"")).find(selector):responseText)),callback&&self.each(callback,[responseText,status,jqXHR])}}),this},serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.on(o,f)}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=undefined),jQuery.ajax({type:method,url:url,data:data,success:callback,dataType:type})}}),jQuery.extend({getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},ajaxSetup:function(target,settings){return settings?ajaxExtend(target,jQuery.ajaxSettings):(settings=target,target=jQuery.ajaxSettings),ajaxExtend(target,settings),target},ajaxSettings:{url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":allTypes},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){if(2!==state){state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=undefined,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0;var isSuccess,success,error,lastModified,etag,statusText=nativeStatusText,response=responses?ajaxHandleResponses(s,jqXHR,responses):undefined;if(status>=200&&300>status||304===status)if(s.ifModified&&((lastModified=jqXHR.getResponseHeader("Last-Modified"))&&(jQuery.lastModified[ifModifiedKey]=lastModified),(etag=jqXHR.getResponseHeader("Etag"))&&(jQuery.etag[ifModifiedKey]=etag)),304===status)statusText="notmodified",isSuccess=!0;else try{success=ajaxConvert(s,response),statusText="success",isSuccess=!0}catch(e){statusText="parsererror",error=e}else error=statusText,(!statusText||status)&&(statusText="error",0>status&&(status=0));jqXHR.status=status,jqXHR.statusText=""+(nativeStatusText||statusText),isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=undefined,fireGlobals&&globalEventContext.trigger("ajax"+(isSuccess?"Success":"Error"),[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop"))}}"object"==typeof url&&(options=url,url=undefined),options=options||{};var ifModifiedKey,responseHeadersString,responseHeaders,transport,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof jQuery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value}return this},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return match===undefined?null:match},overrideMimeType:function(type){return state||(s.mimeType=type),this},abort:function(statusText){return statusText=statusText||"abort",transport&&transport.abort(statusText),done(0,statusText),this}};if(deferred.promise(jqXHR),jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,jqXHR.complete=completeDeferred.add,jqXHR.statusCode=function(map){if(map){var tmp;if(2>state)for(tmp in map)statusCode[tmp]=[statusCode[tmp],map[tmp]];else tmp=map[jqXHR.status],jqXHR.then(tmp,tmp)}return this},s.url=((url||s.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().split(rspacesAjax),null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]==ajaxLocParts[1]&&parts[2]==ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?80:443))==(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?80:443)))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return!1;if(fireGlobals=s.global,s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),fireGlobals&&0===jQuery.active++&&jQuery.event.trigger("ajaxStart"),!s.hasContent&&(s.data&&(s.url+=(rquery.test(s.url)?"&":"?")+s.data,delete s.data),ifModifiedKey=s.url,s.cache===!1)){var ts=jQuery.now(),ret=s.url.replace(rts,"$1_="+ts);s.url=ret+(ret===s.url?(rquery.test(s.url)?"&":"?")+"_="+ts:"")}(s.data&&s.hasContent&&s.contentType!==!1||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),s.ifModified&&(ifModifiedKey=ifModifiedKey||s.url,jQuery.lastModified[ifModifiedKey]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[ifModifiedKey]),jQuery.etag[ifModifiedKey]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[ifModifiedKey])),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===!1||2===state))return jqXHR.abort(),!1;for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&s.timeout>0&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(2>state))throw e;done(-1,e)}}else done(-1,"No Transport");return jqXHR},param:function(a,traditional){var s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined&&(traditional=jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(var prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")}}),jQuery.extend({active:0,lastModified:{},etag:{}});var jsc=jQuery.now(),jsre=/(\=)\?(&|$)|\?\?/i;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return jQuery.expando+"_"+jsc++}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var inspectData="application/x-www-form-urlencoded"===s.contentType&&"string"==typeof s.data;if("jsonp"===s.dataTypes[0]||s.jsonp!==!1&&(jsre.test(s.url)||inspectData&&jsre.test(s.data))){var responseContainer,jsonpCallback=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,previous=window[jsonpCallback],url=s.url,data=s.data,replace="$1"+jsonpCallback+"$2";return s.jsonp!==!1&&(url=url.replace(jsre,replace),s.url===url&&(inspectData&&(data=data.replace(jsre,replace)),s.data===data&&(url+=(/\?/.test(url)?"&":"?")+s.jsonp+"="+jsonpCallback))),s.url=url,s.data=data,window[jsonpCallback]=function(response){responseContainer=[response]},jqXHR.always(function(){window[jsonpCallback]=previous,responseContainer&&jQuery.isFunction(previous)&&window[jsonpCallback](responseContainer[0])}),s.converters["script json"]=function(){return responseContainer||jQuery.error(jsonpCallback+" was not called"),responseContainer[0]},s.dataTypes[0]="json","script"}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){s.cache===undefined&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script"),script.async="async",s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,head&&script.parentNode&&head.removeChild(script),script=undefined,isAbort||callback(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(0,1)}}}});var xhrCallbacks,xhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks)xhrCallbacks[key](0,1)}:!1,xhrId=0;jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR()}:createStandardXHR,function(xhr){jQuery.extend(jQuery.support,{ajax:!!xhr,cors:!!xhr&&"withCredentials"in xhr})}(jQuery.ajaxSettings.xhr()),jQuery.support.ajax&&jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var handle,i,xhr=s.xhr();if(s.username?xhr.open(s.type,s.url,s.async,s.username,s.password):xhr.open(s.type,s.url,s.async),s.xhrFields)for(i in s.xhrFields)xhr[i]=s.xhrFields[i];s.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(s.mimeType),s.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");try{for(i in headers)xhr.setRequestHeader(i,headers[i])}catch(_){}xhr.send(s.hasContent&&s.data||null),callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||4===xhr.readyState))if(callback=undefined,handle&&(xhr.onreadystatechange=jQuery.noop,xhrOnUnloadAbort&&delete xhrCallbacks[handle]),isAbort)4!==xhr.readyState&&xhr.abort();else{status=xhr.status,responseHeaders=xhr.getAllResponseHeaders(),responses={},xml=xhr.responseXML,xml&&xml.documentElement&&(responses.xml=xml),responses.text=xhr.responseText;try{statusText=xhr.statusText}catch(e){statusText=""}status||!s.isLocal||s.crossDomain?1223===status&&(status=204):status=responses.text?200:404}}catch(firefoxAccessException){isAbort||complete(-1,firefoxAccessException)}responses&&complete(status,statusText,responses,responseHeaders)},s.async&&4!==xhr.readyState?(handle=++xhrId,xhrOnUnloadAbort&&(xhrCallbacks||(xhrCallbacks={},jQuery(window).unload(xhrOnUnloadAbort)),xhrCallbacks[handle]=callback),xhr.onreadystatechange=callback):callback()},abort:function(){callback&&callback(0,1)}}}});var iframe,iframeDoc,timerId,fxNow,elemdisplay={},rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,fxAttrs=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];jQuery.fn.extend({show:function(speed,easing,callback){var elem,display;if(speed||0===speed)return this.animate(genFx("show",3),speed,easing,callback);for(var i=0,j=this.length;j>i;i++)elem=this[i],elem.style&&(display=elem.style.display,jQuery._data(elem,"olddisplay")||"none"!==display||(display=elem.style.display=""),""===display&&"none"===jQuery.css(elem,"display")&&jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName)));for(i=0;j>i;i++)elem=this[i],elem.style&&(display=elem.style.display,(""===display||"none"===display)&&(elem.style.display=jQuery._data(elem,"olddisplay")||""));return this},hide:function(speed,easing,callback){if(speed||0===speed)return this.animate(genFx("hide",3),speed,easing,callback);for(var elem,display,i=0,j=this.length;j>i;i++)elem=this[i],elem.style&&(display=jQuery.css(elem,"display"),"none"===display||jQuery._data(elem,"olddisplay")||jQuery._data(elem,"olddisplay",display));for(i=0;j>i;i++)this[i].style&&(this[i].style.display="none");return this},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2,callback){var bool="boolean"==typeof fn;return jQuery.isFunction(fn)&&jQuery.isFunction(fn2)?this._toggle.apply(this,arguments):null==fn||bool?this.each(function(){var state=bool?fn:jQuery(this).is(":hidden");jQuery(this)[state?"show":"hide"]()}):this.animate(genFx("toggle",3),fn,fn2,callback),this},fadeTo:function(speed,to,easing,callback){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){function doAnimation(){optall.queue===!1&&jQuery._mark(this);var name,val,p,e,parts,start,end,unit,method,opt=jQuery.extend({},optall),isElement=1===this.nodeType,hidden=isElement&&jQuery(this).is(":hidden");opt.animatedProperties={};for(p in prop){if(name=jQuery.camelCase(p),p!==name&&(prop[name]=prop[p],delete prop[p]),val=prop[name],jQuery.isArray(val)?(opt.animatedProperties[name]=val[1],val=prop[name]=val[0]):opt.animatedProperties[name]=opt.specialEasing&&opt.specialEasing[name]||opt.easing||"swing","hide"===val&&hidden||"show"===val&&!hidden)return opt.complete.call(this);!isElement||"height"!==name&&"width"!==name||(opt.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===jQuery.css(this,"display")&&"none"===jQuery.css(this,"float")&&(jQuery.support.inlineBlockNeedsLayout&&"inline"!==defaultDisplay(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=opt.overflow&&(this.style.overflow="hidden");for(p in prop)e=new jQuery.fx(this,opt,p),val=prop[p],rfxtypes.test(val)?(method=jQuery._data(this,"toggle"+p)||("toggle"===val?hidden?"show":"hide":0),method?(jQuery._data(this,"toggle"+p,"show"===method?"hide":"show"),e[method]()):e[val]()):(parts=rfxnum.exec(val),start=e.cur(),parts?(end=parseFloat(parts[2]),unit=parts[3]||(jQuery.cssNumber[p]?"":"px"),"px"!==unit&&(jQuery.style(this,p,(end||1)+unit),start=(end||1)/e.cur()*start,jQuery.style(this,p,start+unit)),parts[1]&&(end=("-="===parts[1]?-1:1)*end+start),e.custom(start,end,unit)):e.custom(start,val,""));return!0}var optall=jQuery.speed(speed,easing,callback);return jQuery.isEmptyObject(prop)?this.each(optall.complete,[!1]):(prop=jQuery.extend({},prop),optall.queue===!1?this.each(doAnimation):this.queue(optall.queue,doAnimation))},stop:function(type,clearQueue,gotoEnd){return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=undefined),clearQueue&&type!==!1&&this.queue(type||"fx",[]),this.each(function(){function stopQueue(elem,data,index){var hooks=data[index];jQuery.removeData(elem,index,!0),hooks.stop(gotoEnd)}var index,hadTimers=!1,timers=jQuery.timers,data=jQuery._data(this);if(gotoEnd||jQuery._unmark(!0,this),null==type)for(index in data)data[index]&&data[index].stop&&index.indexOf(".run")===index.length-4&&stopQueue(this,data,index);else data[index=type+".run"]&&data[index].stop&&stopQueue(this,data,index);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(gotoEnd?timers[index](!0):timers[index].saveState(),hadTimers=!0,timers.splice(index,1));gotoEnd&&hadTimers||jQuery.dequeue(this,type)})}}),jQuery.each({slideDown:genFx("show",1),slideUp:genFx("hide",1),slideToggle:genFx("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,(null==opt.queue||opt.queue===!0)&&(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(noUnmark){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue?jQuery.dequeue(this,opt.queue):noUnmark!==!1&&jQuery._unmark(this)},opt},easing:{linear:function(p,n,firstNum,diff){return firstNum+diff*p},swing:function(p,n,firstNum,diff){return(-Math.cos(p*Math.PI)/2+.5)*diff+firstNum}},timers:[],fx:function(elem,options,prop){this.options=options,this.elem=elem,this.prop=prop,options.orig=options.orig||{}}}),jQuery.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var parsed,r=jQuery.css(this.elem,this.prop);return isNaN(parsed=parseFloat(r))?r&&"auto"!==r?r:0:parsed},custom:function(from,to,unit){function t(gotoEnd){return self.step(gotoEnd)}var self=this,fx=jQuery.fx;this.startTime=fxNow||createFxNow(),this.end=to,this.now=this.start=from,this.pos=this.state=0,this.unit=unit||this.unit||(jQuery.cssNumber[this.prop]?"":"px"),t.queue=this.options.queue,t.elem=this.elem,t.saveState=function(){self.options.hide&&jQuery._data(self.elem,"fxshow"+self.prop)===undefined&&jQuery._data(self.elem,"fxshow"+self.prop,self.start)},t()&&jQuery.timers.push(t)&&!timerId&&(timerId=setInterval(fx.tick,fx.interval))},show:function(){var dataShow=jQuery._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=dataShow||jQuery.style(this.elem,this.prop),this.options.show=!0,dataShow!==undefined?this.custom(this.cur(),dataShow):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),jQuery(this.elem).show()},hide:function(){this.options.orig[this.prop]=jQuery._data(this.elem,"fxshow"+this.prop)||jQuery.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(gotoEnd){var p,n,complete,t=fxNow||createFxNow(),done=!0,elem=this.elem,options=this.options;if(gotoEnd||t>=options.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),options.animatedProperties[this.prop]=!0;for(p in options.animatedProperties)options.animatedProperties[p]!==!0&&(done=!1);if(done){if(null==options.overflow||jQuery.support.shrinkWrapBlocks||jQuery.each(["","X","Y"],function(index,value){elem.style["overflow"+value]=options.overflow[index]}),options.hide&&jQuery(elem).hide(),options.hide||options.show)for(p in options.animatedProperties)jQuery.style(elem,p,options.orig[p]),jQuery.removeData(elem,"fxshow"+p,!0),jQuery.removeData(elem,"toggle"+p,!0);complete=options.complete,complete&&(options.complete=!1,complete.call(elem))}return!1}return 1/0==options.duration?this.now=t:(n=t-this.startTime,this.state=n/options.duration,this.pos=jQuery.easing[options.animatedProperties[this.prop]](this.state,n,0,1,options.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},jQuery.extend(jQuery.fx,{tick:function(){for(var timer,timers=jQuery.timers,i=0;i<timers.length;i++)timer=timers[i],timer()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop()},interval:13,stop:function(){clearInterval(timerId),timerId=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(fx){jQuery.style(fx.elem,"opacity",fx.now)},_default:function(fx){fx.elem.style&&null!=fx.elem.style[fx.prop]?fx.elem.style[fx.prop]=fx.now+fx.unit:fx.elem[fx.prop]=fx.now}}}),jQuery.each(["width","height"],function(i,prop){jQuery.fx.step[prop]=function(fx){jQuery.style(fx.elem,prop,Math.max(0,fx.now)+fx.unit)}}),jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length});var rtable=/^t(?:able|d|h)$/i,rroot=/^(?:body|html)$/i;jQuery.fn.offset="getBoundingClientRect"in document.documentElement?function(options){var box,elem=this[0];if(options)return this.each(function(i){jQuery.offset.setOffset(this,options,i)});if(!elem||!elem.ownerDocument)return null;if(elem===elem.ownerDocument.body)return jQuery.offset.bodyOffset(elem);try{box=elem.getBoundingClientRect()}catch(e){}var doc=elem.ownerDocument,docElem=doc.documentElement;if(!box||!jQuery.contains(docElem,elem))return box?{top:box.top,left:box.left}:{top:0,left:0};var body=doc.body,win=getWindow(doc),clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,scrollTop=win.pageYOffset||jQuery.support.boxModel&&docElem.scrollTop||body.scrollTop,scrollLeft=win.pageXOffset||jQuery.support.boxModel&&docElem.scrollLeft||body.scrollLeft,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return{top:top,left:left}}:function(options){var elem=this[0];if(options)return this.each(function(i){jQuery.offset.setOffset(this,options,i)});if(!elem||!elem.ownerDocument)return null;if(elem===elem.ownerDocument.body)return jQuery.offset.bodyOffset(elem);for(var computedStyle,offsetParent=elem.offsetParent,prevOffsetParent=elem,doc=elem.ownerDocument,docElem=doc.documentElement,body=doc.body,defaultView=doc.defaultView,prevComputedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top=elem.offsetTop,left=elem.offsetLeft;(elem=elem.parentNode)&&elem!==body&&elem!==docElem&&(!jQuery.support.fixedPosition||"fixed"!==prevComputedStyle.position);)computedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top-=elem.scrollTop,left-=elem.scrollLeft,elem===offsetParent&&(top+=elem.offsetTop,left+=elem.offsetLeft,!jQuery.support.doesNotAddBorder||jQuery.support.doesAddBorderForTableAndCells&&rtable.test(elem.nodeName)||(top+=parseFloat(computedStyle.borderTopWidth)||0,left+=parseFloat(computedStyle.borderLeftWidth)||0),prevOffsetParent=offsetParent,offsetParent=elem.offsetParent),jQuery.support.subtractsBorderForOverflowNotVisible&&"visible"!==computedStyle.overflow&&(top+=parseFloat(computedStyle.borderTopWidth)||0,left+=parseFloat(computedStyle.borderLeftWidth)||0),prevComputedStyle=computedStyle;
return("relative"===prevComputedStyle.position||"static"===prevComputedStyle.position)&&(top+=body.offsetTop,left+=body.offsetLeft),jQuery.support.fixedPosition&&"fixed"===prevComputedStyle.position&&(top+=Math.max(docElem.scrollTop,body.scrollTop),left+=Math.max(docElem.scrollLeft,body.scrollLeft)),{top:top,left:left}},jQuery.offset={bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;return jQuery.support.doesNotIncludeMarginInBodyOffset&&(top+=parseFloat(jQuery.css(body,"marginTop"))||0,left+=parseFloat(jQuery.css(body,"marginLeft"))||0),{top:top,left:left}},setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");"static"===position&&(elem.style.position="relative");var curTop,curLeft,curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={};calculatePosition?(curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({position:function(){if(!this[0])return null;var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();return offset.top-=parseFloat(jQuery.css(elem,"marginTop"))||0,offset.left-=parseFloat(jQuery.css(elem,"marginLeft"))||0,parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],"borderTopWidth"))||0,parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],"borderLeftWidth"))||0,{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||document.body;offsetParent&&!rroot.test(offsetParent.nodeName)&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent})}}),jQuery.each(["Left","Top"],function(i,name){var method="scroll"+name;jQuery.fn[method]=function(val){var elem,win;return val===undefined?(elem=this[0])?(win=getWindow(elem),win?"pageXOffset"in win?win[i?"pageYOffset":"pageXOffset"]:jQuery.support.boxModel&&win.document.documentElement[method]||win.document.body[method]:elem[method]):null:this.each(function(){win=getWindow(this),win?win.scrollTo(i?jQuery(win).scrollLeft():val,i?val:jQuery(win).scrollTop()):this[method]=val})}}),jQuery.each(["Height","Width"],function(i,name){var type=name.toLowerCase();jQuery.fn["inner"+name]=function(){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,"padding")):this[type]():null},jQuery.fn["outer"+name]=function(margin){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,margin?"margin":"border")):this[type]():null},jQuery.fn[type]=function(size){var elem=this[0];if(!elem)return null==size?null:this;if(jQuery.isFunction(size))return this.each(function(i){var self=jQuery(this);self[type](size.call(this,i,self[type]()))});if(jQuery.isWindow(elem)){var docElemProp=elem.document.documentElement["client"+name],body=elem.document.body;return"CSS1Compat"===elem.document.compatMode&&docElemProp||body&&body["client"+name]||docElemProp}if(9===elem.nodeType)return Math.max(elem.documentElement["client"+name],elem.body["scroll"+name],elem.documentElement["scroll"+name],elem.body["offset"+name],elem.documentElement["offset"+name]);if(size===undefined){var orig=jQuery.css(elem,type),ret=parseFloat(orig);return jQuery.isNumeric(ret)?ret:orig}return this.css(type,"string"==typeof size?size:size+"px")}}),window.jQuery=window.$=jQuery,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return jQuery})}(window),function(window,undefined){"use strict";function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);return jQuery.isWindow(obj)?!1:1===obj.nodeType&&length?!0:"array"===type||"function"!==type&&(0===length||"number"==typeof length&&length>0&&length-1 in obj)}function createOptions(options){var object=optionsCache[options]={};return jQuery.each(options.match(core_rnotwhite)||[],function(_,flag){object[flag]=!0}),object}function internalData(elem,name,data,pvt){if(jQuery.acceptData(elem)){var thisCache,ret,internalKey=jQuery.expando,getByName="string"==typeof name,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if(id&&cache[id]&&(pvt||cache[id].data)||!getByName||data!==undefined)return id||(isNode?elem[internalKey]=id=core_deletedIds.pop()||jQuery.guid++:id=internalKey),cache[id]||(cache[id]={},isNode||(cache[id].toJSON=jQuery.noop)),("object"==typeof name||"function"==typeof name)&&(pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name)),thisCache=cache[id],pvt||(thisCache.data||(thisCache.data={}),thisCache=thisCache.data),data!==undefined&&(thisCache[jQuery.camelCase(name)]=data),getByName?(ret=thisCache[name],null==ret&&(ret=thisCache[jQuery.camelCase(name)])):ret=thisCache,ret}}function internalRemoveData(elem,name,pvt){if(jQuery.acceptData(elem)){var thisCache,i,l,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(cache[id]){if(name&&(thisCache=pvt?cache[id]:cache[id].data)){jQuery.isArray(name)?name=name.concat(jQuery.map(name,jQuery.camelCase)):name in thisCache?name=[name]:(name=jQuery.camelCase(name),name=name in thisCache?[name]:name.split(" "));for(i=0,l=name.length;l>i;i++)delete thisCache[name[i]];if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache))return}(pvt||(delete cache[id].data,isEmptyDataObject(cache[id])))&&(isNode?jQuery.cleanData([elem],!0):jQuery.support.deleteExpando||cache!=cache.window?delete cache[id]:cache[id]=null)}}}function dataAttr(elem,key,data){if(data===undefined&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if(data=elem.getAttribute(name),"string"==typeof data){try{data="true"===data?!0:"false"===data?!1:"null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}function isEmptyDataObject(obj){var name;for(name in obj)if(("data"!==name||!jQuery.isEmptyObject(obj[name]))&&"toJSON"!==name)return!1;return!0}function returnTrue(){return!0}function returnFalse(){return!1}function sibling(cur,dir){do cur=cur[dir];while(cur&&1!==cur.nodeType);return cur}function winnow(elements,qualifier,keep){if(qualifier=qualifier||0,jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier===keep});if("string"==typeof qualifier){var filtered=jQuery.grep(elements,function(elem){return 1===elem.nodeType});if(isSimple.test(qualifier))return jQuery.filter(qualifier,filtered,!keep);qualifier=jQuery.filter(qualifier,filtered)}return jQuery.grep(elements,function(elem){return jQuery.inArray(elem,qualifier)>=0===keep})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop());return safeFrag}function findOrAppend(elem,tag){return elem.getElementsByTagName(tag)[0]||elem.appendChild(elem.ownerDocument.createElement(tag))}function disableScript(elem){var attr=elem.getAttributeNode("type");return elem.type=(attr&&attr.specified)+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function setGlobalEval(elems,refElements){for(var elem,i=0;null!=(elem=elems[i]);i++)jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){if(1===dest.nodeType&&jQuery.hasData(src)){var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle,curData.events={};for(type in events)for(i=0,l=events[type].length;l>i;i++)jQuery.event.add(dest,type,events[type][i])}curData.data&&(curData.data=jQuery.extend({},curData.data))}}function fixCloneNodeIssues(src,dest){var nodeName,data,e;if(1===dest.nodeType){if(nodeName=dest.nodeName.toLowerCase(),!jQuery.support.noCloneEvent&&dest[jQuery.expando]){data=jQuery._data(dest);for(e in data.events)jQuery.removeEvent(dest,e,data.handle);dest.removeAttribute(jQuery.expando)}"script"===nodeName&&dest.text!==src.text?(disableScript(dest).text=src.text,restoreScript(dest)):"object"===nodeName?(dest.parentNode&&(dest.outerHTML=src.outerHTML),jQuery.support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML)&&(dest.innerHTML=src.innerHTML)):"input"===nodeName&&manipulation_rcheckableType.test(src.type)?(dest.defaultChecked=dest.checked=src.checked,dest.value!==src.value&&(dest.value=src.value)):"option"===nodeName?dest.defaultSelected=dest.selected=src.defaultSelected:("input"===nodeName||"textarea"===nodeName)&&(dest.defaultValue=src.defaultValue)}}function getAll(context,tag){var elems,elem,i=0,found="undefined"!=typeof context.getElementsByTagName?context.getElementsByTagName(tag||"*"):"undefined"!=typeof context.querySelectorAll?context.querySelectorAll(tag||"*"):undefined;if(!found)for(found=[],elems=context.childNodes||context;null!=(elem=elems[i]);i++)!tag||jQuery.nodeName(elem,tag)?found.push(elem):jQuery.merge(found,getAll(elem,tag));return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found}function fixDefaultChecked(elem){manipulation_rcheckableType.test(elem.type)&&(elem.defaultChecked=elem.checked)}function vendorPropName(style,name){if(name in style)return name;for(var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;)if(name=cssPrefixes[i]+capName,name in style)return name;return origName}function isHidden(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)}function showHide(elements,show){for(var elem,values=[],index=0,length=elements.length;length>index;index++)elem=elements[index],elem.style&&(values[index]=jQuery._data(elem,"olddisplay"),show?(values[index]||"none"!==elem.style.display||(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=jQuery._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName)))):values[index]||isHidden(elem)||jQuery._data(elem,"olddisplay",jQuery.css(elem,"display")));for(index=0;length>index;index++)elem=elements[index],elem.style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;4>i;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(0>=val||null==val){if(val=curCSS(elem,name,styles),(0>val||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(jQuery.support.boxSizingReliable||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function css_defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||(display=actualDisplay(nodeName,doc),"none"!==display&&display||(iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(doc.documentElement),doc=(iframe[0].contentWindow||iframe[0].contentDocument).document,doc.write("<!doctype html><html><body>"),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");return elem.remove(),display}function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(core_rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType[0]?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)}),selected}var inspected={},seekingTransport=structure===transports;return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)src[key]!==undefined&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields;for(type in responseFields)type in responses&&(jqXHR[responseFields[type]]=responses[type]);for(;"*"===dataTypes[0];)dataTypes.shift(),ct===undefined&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}return finalDataType?(finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]):void 0}function ajaxConvert(s,response){var conv,conv2,current,tmp,converters={},i=0,dataTypes=s.dataTypes.slice(),prev=dataTypes[0];if(s.dataFilter&&(response=s.dataFilter(response,s.dataType)),dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(;current=dataTypes[++i];)if("*"!==current){if("*"!==prev&&prev!==current){if(conv=converters[prev+" "+current]||converters["* "+current],!conv)for(conv2 in converters)if(tmp=conv2.split(" "),tmp[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){conv===!0?conv=converters[conv2]:converters[conv2]!==!0&&(current=tmp[0],dataTypes.splice(i--,0,current));break}if(conv!==!0)if(conv&&s["throws"])response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}prev=current}return{state:"success",data:response}}function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function createFxNow(){return setTimeout(function(){fxNow=undefined}),fxNow=jQuery.now()}function createTweens(animation,props){jQuery.each(props,function(prop,value){for(var collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;length>index;index++)if(collection[index].call(animation,prop,value))return})}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;length>index;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),1>percent&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;length>index;index++)animation.tweens[index].run(1);return gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(propFilter(props,animation.opts.specialEasing);length>index;index++)if(result=animationPrefilters[index].call(animation,elem,props,animation.opts))return result;return createTweens(animation,props),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(name=jQuery.camelCase(index),easing=specialEasing[name],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),hooks=jQuery.cssHooks[name],hooks&&"expand"in hooks){value=hooks.expand(value),delete props[name];for(index in value)index in props||(props[index]=value[index],specialEasing[index]=easing)}else specialEasing[name]=easing}function defaultPrefilter(elem,props,opts){var index,prop,value,length,dataShow,toggle,tween,hooks,oldfire,anim=this,style=elem.style,orig={},handled=[],hidden=elem.nodeType&&isHidden(elem);opts.queue||(hooks=jQuery._queueHooks(elem,"fx"),null==hooks.unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})})),1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],"inline"===jQuery.css(elem,"display")&&"none"===jQuery.css(elem,"float")&&(jQuery.support.inlineBlockNeedsLayout&&"inline"!==css_defaultDisplay(elem.nodeName)?style.zoom=1:style.display="inline-block")),opts.overflow&&(style.overflow="hidden",jQuery.support.shrinkWrapBlocks||anim.done(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}));for(index in props)if(value=props[index],rfxtypes.exec(value)){if(delete props[index],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show"))continue;handled.push(index)}if(length=handled.length){dataShow=jQuery._data(elem,"fxshow")||jQuery._data(elem,"fxshow",{}),"hidden"in dataShow&&(hidden=dataShow.hidden),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()}),anim.done(function(){var prop;jQuery._removeData(elem,"fxshow");for(prop in orig)jQuery.style(elem,prop,orig[prop])});for(index=0;length>index;index++)prop=handled[index],tween=anim.createTween(prop,hidden?dataShow[prop]:0),orig[prop]=dataShow[prop]||jQuery.style(elem,prop),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0))}}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}function genFx(type,includeWidth){var which,attrs={height:type},i=0;for(includeWidth=includeWidth?1:0;4>i;i+=2-includeWidth)which=cssExpand[i],attrs["margin"+which]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType?elem.defaultView||elem.parentWindow:!1}var rootjQuery,readyList,document=window.document,location=window.location,_jQuery=window.jQuery,_$=window.$,class2type={},core_deletedIds=[],core_version="1.9.0",core_concat=core_deletedIds.concat,core_push=core_deletedIds.push,core_slice=core_deletedIds.slice,core_indexOf=core_deletedIds.indexOf,core_toString=class2type.toString,core_hasOwn=class2type.hasOwnProperty,core_trim=core_version.trim,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},core_pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,core_rnotwhite=/\S+/g,rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rquickExpr=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()},DOMContentLoaded=function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",DOMContentLoaded,!1),jQuery.ready()):"complete"===document.readyState&&(document.detachEvent("onreadystatechange",DOMContentLoaded),jQuery.ready())};jQuery.fn=jQuery.prototype={jquery:core_version,constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem;if(!selector)return this;if("string"==typeof selector){if(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3?[null,selector,null]:rquickExpr.exec(selector),!match||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}if(elem=document.getElementById(match[2]),elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this}return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?rootjQuery.ready(selector):(selector.selector!==undefined&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return core_slice.call(this)},get:function(num){return null==num?this.toArray():0>num?this[this.length+num]:this[num]},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){return jQuery.ready.promise().done(fn),this},slice:function(){return this.pushStack(core_slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(0>i?len:0);return this.pushStack(j>=0&&len>j?[this[j]]:[])},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:core_push,sort:[].sort,splice:[].splice},jQuery.fn.init.prototype=jQuery.fn,jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[1]||{},i=2),"object"==typeof target||jQuery.isFunction(target)||(target={}),length===i&&(target=this,--i);length>i;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):copy!==undefined&&(target[name]=copy));return target},jQuery.extend({noConflict:function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){if(wait===!0?!--jQuery.readyWait:!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready);jQuery.isReady=!0,wait!==!0&&--jQuery.readyWait>0||(readyList.resolveWith(document,[jQuery]),jQuery.fn.trigger&&jQuery(document).trigger("ready").off("ready"))}},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return null!=obj&&obj==obj.window},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return null==obj?String(obj):"object"==typeof obj||"function"==typeof obj?class2type[core_toString.call(obj)]||"object":typeof obj},isPlainObject:function(obj){if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!core_hasOwn.call(obj,"constructor")&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var key;for(key in obj);return key===undefined||core_hasOwn.call(obj,key)},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},error:function(msg){throw new Error(msg)},parseHTML:function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=jQuery.buildFragment([data],context,scripts),scripts&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))},parseJSON:function(data){return window.JSON&&window.JSON.parse?window.JSON.parse(data):null===data?data:"string"==typeof data&&(data=jQuery.trim(data),data&&rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,"")))?new Function("return "+data)():void jQuery.error("Invalid JSON: "+data)},parseXML:function(data){var xml,tmp;if(!data||"string"!=typeof data)return null;try{window.DOMParser?(tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml")):(xml=new ActiveXObject("Microsoft.XMLDOM"),xml.async="false",xml.loadXML(data))}catch(e){xml=undefined}return xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml},noop:function(){},globalEval:function(data){data&&jQuery.trim(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray)for(;length>i&&(value=callback.apply(obj[i],args),value!==!1);i++);else for(i in obj)if(value=callback.apply(obj[i],args),value===!1)break}else if(isArray)for(;length>i&&(value=callback.call(obj[i],i,obj[i]),value!==!1);i++);else for(i in obj)if(value=callback.call(obj[i],i,obj[i]),value===!1)break;return obj},trim:core_trim&&!core_trim.call("﻿ ")?function(text){return null==text?"":core_trim.call(text)}:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArraylike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):core_push.call(ret,arr)),ret},inArray:function(elem,arr,i){var len;if(arr){if(core_indexOf)return core_indexOf.call(arr,elem,i);for(len=arr.length,i=i?0>i?Math.max(0,len+i):i:0;len>i;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){var l=second.length,i=first.length,j=0;if("number"==typeof l)for(;l>j;j++)first[i++]=second[j];else for(;second[j]!==undefined;)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,inv){var retVal,ret=[],i=0,length=elems.length;for(inv=!!inv;length>i;i++)retVal=!!callback(elems[i],i),inv!==retVal&&ret.push(elems[i]);return ret},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray)for(;length>i;i++)value=callback(elems[i],i,arg),null!=value&&(ret[ret.length]=value);else for(i in elems)value=callback(elems[i],i,arg),null!=value&&(ret[ret.length]=value);return core_concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;return"string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn)?(args=core_slice.call(arguments,2),proxy=function(){return fn.apply(context||this,args.concat(core_slice.call(arguments)))},proxy.guid=fn.guid=fn.guid||jQuery.guid++,proxy):undefined},access:function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=null==key;if("object"===jQuery.type(key)){chainable=!0;for(i in key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw)}else if(value!==undefined&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(raw?(fn.call(elems,value),fn=null):(bulk=fn,fn=function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;length>i;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:function(){return(new Date).getTime()}}),jQuery.ready.promise=function(obj){if(!readyList)if(readyList=jQuery.Deferred(),"complete"===document.readyState)setTimeout(jQuery.ready);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",DOMContentLoaded,!1),window.addEventListener("load",jQuery.ready,!1);else{document.attachEvent("onreadystatechange",DOMContentLoaded),window.attachEvent("onload",jQuery.ready);var top=!1;try{top=null==window.frameElement&&document.documentElement}catch(e){}top&&top.doScroll&&!function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)
}jQuery.ready()}}()}return readyList.promise(obj)},jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}),rootjQuery=jQuery(document);var optionsCache={};jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||createOptions(options):jQuery.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){for(memory=options.memory&&data,fired=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length,firing=!0;list&&firingLength>firingIndex;firingIndex++)if(list[firingIndex].apply(data[0],data[1])===!1&&options.stopOnFalse){memory=!1;break}firing=!1,list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function(){if(list){var start=list.length;!function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);"function"===type?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==type&&add(arg)})}(arguments),firing?firingLength=list.length:memory&&(firingStart=start,fire(memory))}return this},remove:function(){return list&&jQuery.each(arguments,function(_,arg){for(var index;(index=jQuery.inArray(arg,list,index))>-1;)list.splice(index,1),firing&&(firingLength>=index&&firingLength--,firingIndex>=index&&firingIndex--)}),this},has:function(fn){return jQuery.inArray(fn,list)>-1},empty:function(){return list=[],this},disable:function(){return list=stack=memory=undefined,this},disabled:function(){return!list},lock:function(){return stack=undefined,memory||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return args=args||[],args=[context,args.slice?args.slice():args],!list||fired&&!stack||(firing?stack.push(args):fire(args)),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var action=tuple[0],fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[action+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})}),fns=null}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return promise.pipe=promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add,stateString&&list.add(function(){state=stateString},tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(subordinate){var progressValues,progressContexts,resolveContexts,i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this,values[i]=arguments.length>1?core_slice.call(arguments):value,values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)}};if(length>1)for(progressValues=new Array(length),progressContexts=new Array(length),resolveContexts=new Array(length);length>i;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}}),jQuery.support=function(){var support,all,a,select,opt,input,fragment,eventName,isSupported,i,div=document.createElement("div");if(div.setAttribute("className","t"),div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",all=div.getElementsByTagName("*"),a=div.getElementsByTagName("a")[0],!all||!a||!all.length)return{};select=document.createElement("select"),opt=select.appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],a.style.cssText="top:1px;float:left;opacity:.5",support={getSetAttribute:"t"!==div.className,leadingWhitespace:3===div.firstChild.nodeType,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:"/a"===a.getAttribute("href"),opacity:/^0.5/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:!!input.value,optSelected:opt.selected,enctype:!!document.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===document.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},input.checked=!0,support.noCloneChecked=input.cloneNode(!0).checked,select.disabled=!0,support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=!1}input=document.createElement("input"),input.setAttribute("value",""),support.input=""===input.getAttribute("value"),input.value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value,input.setAttribute("checked","t"),input.setAttribute("name","t"),fragment=document.createDocumentFragment(),fragment.appendChild(input),support.appendChecked=input.checked,support.checkClone=fragment.cloneNode(!0).cloneNode(!0).lastChild.checked,div.attachEvent&&(div.attachEvent("onclick",function(){support.noCloneEvent=!1}),div.cloneNode(!0).click());for(i in{submit:!0,change:!0,focusin:!0})div.setAttribute(eventName="on"+i,"t"),support[i+"Bubbles"]=eventName in window||div.attributes[eventName].expando===!1;return div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,jQuery(function(){var container,marginDiv,tds,divReset="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",body=document.getElementsByTagName("body")[0];body&&(container=document.createElement("div"),container.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",body.appendChild(container).appendChild(div),div.innerHTML="<table><tr><td></td><td>t</td></tr></table>",tds=div.getElementsByTagName("td"),tds[0].style.cssText="padding:0;margin:0;border:0;display:none",isSupported=0===tds[0].offsetHeight,tds[0].style.display="",tds[1].style.display="none",support.reliableHiddenOffsets=isSupported&&0===tds[0].offsetHeight,div.innerHTML="",div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",support.boxSizing=4===div.offsetWidth,support.doesNotIncludeMarginInBodyOffset=1!==body.offsetTop,window.getComputedStyle&&(support.pixelPosition="1%"!==(window.getComputedStyle(div,null)||{}).top,support.boxSizingReliable="4px"===(window.getComputedStyle(div,null)||{width:"4px"}).width,marginDiv=div.appendChild(document.createElement("div")),marginDiv.style.cssText=div.style.cssText=divReset,marginDiv.style.marginRight=marginDiv.style.width="0",div.style.width="1px",support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight)),"undefined"!=typeof div.style.zoom&&(div.innerHTML="",div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1",support.inlineBlockNeedsLayout=3===div.offsetWidth,div.style.display="block",div.innerHTML="<div></div>",div.firstChild.style.width="5px",support.shrinkWrapBlocks=3!==div.offsetWidth,body.style.zoom=1),body.removeChild(container),container=div=tds=marginDiv=null)}),all=select=fragment=opt=a=input=null,support}();var rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},expando:"jQuery"+(core_version+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(elem){return elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando],!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data){return internalData(elem,name,data,!1)},removeData:function(elem,name){return internalRemoveData(elem,name,!1)},_data:function(elem,name,data){return internalData(elem,name,data,!0)},_removeData:function(elem,name){return internalRemoveData(elem,name,!0)},acceptData:function(elem){var noData=elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()];return!noData||noData!==!0&&elem.getAttribute("classid")===noData}}),jQuery.fn.extend({data:function(key,value){var attrs,name,elem=this[0],i=0,data=null;if(key===undefined){if(this.length&&(data=jQuery.data(elem),1===elem.nodeType&&!jQuery._data(elem,"parsedAttrs"))){for(attrs=elem.attributes;i<attrs.length;i++)name=attrs[i].name,name.indexOf("data-")||(name=jQuery.camelCase(name.substring(5)),dataAttr(elem,name,data[name]));jQuery._data(elem,"parsedAttrs",!0)}return data}return"object"==typeof key?this.each(function(){jQuery.data(this,key)}):jQuery.access(this,function(value){return value===undefined?elem?dataAttr(elem,key,jQuery.data(elem,key)):null:void this.each(function(){jQuery.data(this,key,value)})},null,value,arguments.length>1,null,!0)},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;return elem?(type=(type||"fx")+"queue",queue=jQuery._data(elem,type),data&&(!queue||jQuery.isArray(data)?queue=jQuery._data(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]):void 0},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};"inprogress"===fn&&(fn=queue.shift(),startLength--),hooks.cur=fn,fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,next,hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery._removeData(elem,type+"queue"),jQuery._removeData(elem,key)})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};for("string"!=typeof type&&(obj=type,type=undefined),type=type||"fx";i--;)tmp=jQuery._data(elements[i],type+"queueHooks"),tmp&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});var nodeHook,boolHook,rclass=/[\t\r\n]/g,rreturn=/\r/g,rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i,rboolean=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute,getSetInput=jQuery.support.input;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=undefined,delete this[name]}catch(e){}})},addClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed="string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(core_rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ")){for(j=0;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");elem.className=jQuery.trim(cur)}return this},removeClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed=0===arguments.length||"string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(core_rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"")){for(j=0;clazz=classes[j++];)for(;cur.indexOf(" "+clazz+" ")>=0;)cur=cur.replace(" "+clazz+" "," ");elem.className=value?jQuery.trim(cur):""}return this},toggleClass:function(value,stateVal){var type=typeof value,isBool="boolean"==typeof stateVal;return this.each(jQuery.isFunction(value)?function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}:function(){if("string"===type)for(var className,i=0,self=jQuery(this),state=stateVal,classNames=value.match(core_rnotwhite)||[];className=classNames[i++];)state=isBool?state:!self.hasClass(className),self[state?"addClass":"removeClass"](className);else("undefined"===type||"boolean"===type)&&(this.className&&jQuery._data(this,"__className__",this.className),this.className=this.className||value===!1?"":jQuery._data(this,"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;l>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0)return!0;return!1},val:function(value){var hooks,ret,isFunction,elem=this[0];{if(arguments.length)return isFunction=jQuery.isFunction(value),this.each(function(i){var val,self=jQuery(this);1===this.nodeType&&(val=isFunction?value.call(this,i,self.val()):value,null==val?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()],hooks&&"set"in hooks&&hooks.set(this,val,"value")!==undefined||(this.value=val))});if(elem)return hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()],hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined?ret:(ret=elem.value,"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret)}}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||0>index,values=one?null:[],max=one?index+1:options.length,i=0>index?max:one?index:0;max>i;i++)if(option=options[i],!(!option.selected&&i!==index||(jQuery.support.optDisabled?option.disabled:null!==option.getAttribute("disabled"))||option.parentNode.disabled&&jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){var values=jQuery.makeArray(value);return jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0}),values.length||(elem.selectedIndex=-1),values}}},attr:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return"undefined"==typeof elem.getAttribute?jQuery.prop(elem,name,value):(notxml=1!==nType||!jQuery.isXMLDoc(elem),notxml&&(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook)),value===undefined?hooks&&notxml&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:("undefined"!=typeof elem.getAttribute&&(ret=elem.getAttribute(name)),null==ret?undefined:ret):null!==value?hooks&&notxml&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:(elem.setAttribute(name,value+""),value):void jQuery.removeAttr(elem,name))},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(core_rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,rboolean.test(name)?!getSetAttribute&&ruseDefault.test(name)?elem[jQuery.camelCase("default-"+name)]=elem[propName]=!1:elem[propName]=!1:jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName)},attrHooks:{type:{set:function(elem,value){if(!jQuery.support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return notxml=1!==nType||!jQuery.isXMLDoc(elem),notxml&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),value!==undefined?hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}}),boolHook={get:function(elem,name){var prop=jQuery.prop(elem,name),attr="boolean"==typeof prop&&elem.getAttribute(name),detail="boolean"==typeof prop?getSetInput&&getSetAttribute?null!=attr:ruseDefault.test(name)?elem[jQuery.camelCase("default-"+name)]:!!attr:elem.getAttributeNode(name);return detail&&detail.value!==!1?name.toLowerCase():undefined},set:function(elem,value,name){return value===!1?jQuery.removeAttr(elem,name):getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem.setAttribute(!getSetAttribute&&jQuery.propFix[name]||name,name):elem[jQuery.camelCase("default-"+name)]=elem[name]=!0,name}},getSetInput&&getSetAttribute||(jQuery.attrHooks.value={get:function(elem,name){var ret=elem.getAttributeNode(name);return jQuery.nodeName(elem,"input")?elem.defaultValue:ret&&ret.specified?ret.value:undefined},set:function(elem,value,name){return jQuery.nodeName(elem,"input")?void(elem.defaultValue=value):nodeHook&&nodeHook.set(elem,value,name)}}),getSetAttribute||(nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);return ret&&("id"===name||"name"===name||"coords"===name?""!==ret.value:ret.specified)?ret.value:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);return ret||elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name)),ret.value=value+="","value"===name||value===elem.getAttribute(name)?value:undefined}},jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){nodeHook.set(elem,""===value?!1:value,name)}},jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){return""===value?(elem.setAttribute(name,"auto"),value):void 0}})})),jQuery.support.hrefNormalized||(jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return null==ret?undefined:ret}})}),jQuery.each(["href","src"],function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}})),jQuery.support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||undefined},set:function(elem,value){return elem.style.cssText=value+""}}),jQuery.support.optSelected||(jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;return parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex),null}})),jQuery.support.enctype||(jQuery.propFix.enctype="encoding"),jQuery.support.checkOn||jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return null===elem.getAttribute("value")?"on":elem.value}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){return jQuery.isArray(value)?elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0:void 0}})});var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=3!==elem.nodeType&&8!==elem.nodeType&&jQuery._data(elem);if(elemData){for(handler.handler&&(handleObjIn=handler,handler=handleObjIn.handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||(eventHandle=elemData.handle=function(e){return"undefined"==typeof jQuery||e&&jQuery.event.triggered===e.type?undefined:jQuery.event.dispatch.apply(eventHandle.elem,arguments)},eventHandle.elem=elem),types=(types||"").match(core_rnotwhite)||[""],t=types.length;t--;)tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||(handlers=events[type]=[],handlers.delegateCount=0,special.setup&&special.setup.call(elem,data,namespaces,eventHandle)!==!1||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0;elem=null}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(elemData&&(events=elemData.events)){for(types=(types||"").match(core_rnotwhite)||[""],t=types.length;t--;)if(tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,handlers=events[type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&special.teardown.call(elem,namespaces,elemData.handle)!==!1||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,jQuery._removeData(elem,"events"))}},trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=event.type||event,namespaces=event.namespace?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(type.indexOf(".")>=0&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event),event.isTrigger=!0,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=undefined,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||special.trigger.apply(elem,data)!==!1)){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=i>1?bubbleType:special.bindType||type,handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"),handle&&handle.apply(cur,data),handle=ontype&&cur[ontype],handle&&jQuery.acceptData(cur)&&handle.apply&&handle.apply(cur,data)===!1&&event.preventDefault();if(event.type=type,!(onlyHandlers||event.isDefaultPrevented()||special._default&&special._default.apply(elem.ownerDocument,data)!==!1||"click"===type&&jQuery.nodeName(elem,"a")||!jQuery.acceptData(elem)||!ontype||!elem[type]||jQuery.isWindow(elem))){tmp=elem[ontype],tmp&&(elem[ontype]=null),jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=undefined,tmp&&(elem[ontype]=tmp)}return event.result}},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=core_slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if(args[0]=event,event.delegateTarget=this,!special.preDispatch||special.preDispatch.call(this,event)!==!1){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)(!event.namespace_re||event.namespace_re.test(handleObj.namespace))&&(event.handleObj=handleObj,event.data=handleObj.data,ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args),ret!==undefined&&(event.result=ret)===!1&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!=this;cur=cur.parentNode||this)if(cur.disabled!==!0||"click"!==event.type){for(matches=[],i=0;delegateCount>i;i++)handleObj=handlers[i],sel=handleObj.selector+" ",matches[sel]===undefined&&(matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<handlers.length&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)}),handlerQueue},fix:function(event){if(event[jQuery.expando])return event;var i,prop,originalEvent=event,fixHook=jQuery.event.fixHooks[event.type]||{},copy=fixHook.props?this.props.concat(fixHook.props):this.props;for(event=new jQuery.Event(originalEvent),i=copy.length;i--;)prop=copy[i],event[prop]=originalEvent[prop];return event.target||(event.target=originalEvent.srcElement||document),3===event.target.nodeType&&(event.target=event.target.parentNode),event.metaKey=!!event.metaKey,fixHook.filter?fixHook.filter(event,originalEvent):event},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button,fromElement=original.fromElement;return null==event.pageX&&null!=original.clientX&&(eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement),event.which||button===undefined||(event.which=1&button?1:2&button?3:4&button?2:0),event}},special:{load:{noBubble:!0},click:{trigger:function(){return jQuery.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0}},focus:{trigger:function(){if(this!==document.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===document.activeElement&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},beforeunload:{postDispatch:function(event){event.result!==undefined&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){var name="on"+type;elem.detachEvent&&("undefined"==typeof elem[name]&&(elem[name]=null),elem.detachEvent(name,handle))},jQuery.Event=function(src,props){return this instanceof jQuery.Event?(src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||src.returnValue===!1||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),void(this[jQuery.expando]=!0)):new jQuery.Event(src,props)
},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;return(!related||related!==target&&!jQuery.contains(target,related))&&(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),jQuery.support.submitBubbles||(jQuery.event.special.submit={setup:function(){return jQuery.nodeName(this,"form")?!1:void jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;form&&!jQuery._data(form,"submitBubbles")&&(jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=!0}),jQuery._data(form,"submitBubbles",!0))})},postDispatch:function(event){event._submit_bubble&&(delete event._submit_bubble,this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event,!0))},teardown:function(){return jQuery.nodeName(this,"form")?!1:void jQuery.event.remove(this,"._submit")}}),jQuery.support.changeBubbles||(jQuery.event.special.change={setup:function(){return rformElems.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(jQuery.event.add(this,"propertychange._change",function(event){"checked"===event.originalEvent.propertyName&&(this._just_changed=!0)}),jQuery.event.add(this,"click._change",function(event){this._just_changed&&!event.isTrigger&&(this._just_changed=!1),jQuery.event.simulate("change",this,event,!0)})),!1):void jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;rformElems.test(elem.nodeName)&&!jQuery._data(elem,"changeBubbles")&&(jQuery.event.add(elem,"change._change",function(event){!this.parentNode||event.isSimulated||event.isTrigger||jQuery.event.simulate("change",this.parentNode,event,!0)}),jQuery._data(elem,"changeBubbles",!0))})},handle:function(event){var elem=event.target;return this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type?event.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return jQuery.event.remove(this,"._change"),!rformElems.test(this.nodeName)}}),jQuery.support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){0===attaches++&&document.addEventListener(orig,handler,!0)},teardown:function(){0===--attaches&&document.removeEventListener(orig,handler,!0)}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if("object"==typeof types){"string"!=typeof selector&&(data=data||selector,selector=undefined);for(type in types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=undefined):null==fn&&("string"==typeof selector?(fn=data,data=undefined):(fn=data,data=selector,selector=undefined)),fn===!1)fn=returnFalse;else if(!fn)return this;return 1===one&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"==typeof types){for(type in types)this.off(type,selector,types[type]);return this}return(selector===!1||"function"==typeof selector)&&(fn=selector,selector=undefined),fn===!1&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)})},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];return elem?jQuery.event.trigger(type,data,elem,!0):void 0},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)},rkeyEvent.test(name)&&(jQuery.event.fixHooks[name]=jQuery.event.keyHooks),rmouseEvent.test(name)&&(jQuery.event.fixHooks[name]=jQuery.event.mouseHooks)}),function(window,undefined){function isNative(fn){return rnative.test(fn+"")}function createCache(){var cache,keys=[];return cache=function(key,value){return keys.push(key+=" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key]=value}}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return fn(div)}catch(e){return!1}finally{div=null}}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),context=context||document,results=results||[],!selector||"string"!=typeof selector)return results;if(1!==(nodeType=context.nodeType)&&9!==nodeType)return[];if(!documentIsXML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1]){if(9===nodeType){if(elem=context.getElementById(m),!elem||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,slice.call(context.getElementsByTagName(selector),0)),results;if((m=match[3])&&support.getByClassName&&context.getElementsByClassName)return push.apply(results,slice.call(context.getElementsByClassName(m),0)),results}if(support.qsa&&!rbuggyQSA.test(selector)){if(old=!0,nid=expando,newContext=context,newSelector=9===nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&context.parentNode||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,slice.call(newContext.querySelectorAll(newSelector),0)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function siblingCheck(a,b){for(var cur=a&&b&&a.nextSibling;cur;cur=cur.nextSibling)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){(!matched||(match=rcomma.exec(soFar)))&&(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length));for(type in Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";len>i;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===combinator.dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var data,cache,outerCache,dirkey=dirruns+" "+doneName;if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)if(outerCache=elem[expando]||(elem[expando]={}),(cache=outerCache[dir])&&cache[0]===dirkey){if((data=cache[1])===!0||data===cachedruns)return data===!0}else if(cache=outerCache[dir]=[dirkey],cache[1]=matcher(elem,context,xml)||cachedruns,cache[1]===!0)return!0}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;len>i;i++)(elem=unmatched[i])&&(!filter||filter(elem,context,xml))&&(newUnmatched.push(elem),mapped&&map.push(i));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];len>i;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if(matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches),matcher[expando]){for(j=++i;len>j&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1)).replace(rtrim,"$1"),matcher,j>i&&matcherFromTokens(tokens.slice(i,j)),len>j&&matcherFromTokens(tokens=tokens.slice(j)),len>j&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var matcherCachedRuns=0,bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,expandContext){var elem,j,matcher,setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=null!=expandContext,contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",expandContext&&context.parentNode||context),dirrunsUnique=dirruns+=null==contextBackup?1:Math.E;for(outermost&&(outermostContext=context!==document&&context,cachedruns=matcherCachedRuns);null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j];j++)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique,cachedruns=++matcherCachedRuns)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j];j++)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;len>i;i++)Sizzle(selector,contexts[i],results);return results}function select(selector,context,results,seed){var i,tokens,token,type,find,match=tokenize(selector);if(!seed&&1===match.length){if(tokens=match[0]=match[0].slice(0),tokens.length>2&&"ID"===(token=tokens[0]).type&&9===context.nodeType&&!documentIsXML&&Expr.relative[tokens[1].type]){if(context=Expr.find.ID(token.matches[0].replace(runescape,funescape),context)[0],!context)return results;selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?-1:tokens.length-1;i>=0&&(token=tokens[i],!Expr.relative[type=token.type]);i--)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&context.parentNode||context))){if(tokens.splice(i,1),selector=seed.length&&toSelector(tokens),!selector)return push.apply(results,slice.call(seed,0)),results;break}}return compile(selector,match)(seed,context,documentIsXML,results,rsibling.test(selector)),results}function setFilters(){}var i,cachedruns,Expr,getText,isXML,compile,hasDuplicate,outermostContext,setDocument,document,docElem,documentIsXML,rbuggyQSA,rbuggyMatches,matches,contains,sortOrder,expando="sizzle"+-new Date,preferredDoc=window.document,support={},dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),strundefined=typeof undefined,MAX_NEGATIVE=1<<31,arr=[],pop=arr.pop,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){for(var i=0,len=this.length;len>i;i++)if(this[i]===elem)return i;return-1},whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),operators="([*^$|!~]?=)",attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:"+operators+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([\\x20\\t\\r\\n\\f>+~])"+whitespace+"*"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),NAME:new RegExp("^\\[name=['\"]?("+characterEncoding+")['\"]?\\]"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rsibling=/[\x20\t\r\n\f]*[+~]/,rnative=/\{\s*\[native code\]\s*\}/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rescape=/'|\\/g,rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,runescape=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,funescape=function(_,escaped){var high="0x"+escaped-65536;return high!==high?escaped:0>high?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)};try{slice.call(docElem.childNodes,0)[0].nodeType}catch(e){slice=function(i){for(var elem,results=[];elem=this[i];i++)results.push(elem);return results}}isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?"HTML"!==documentElement.nodeName:!1},setDocument=Sizzle.setDocument=function(node){var doc=node?node.ownerDocument||node:preferredDoc;return doc!==document&&9===doc.nodeType&&doc.documentElement?(document=doc,docElem=doc.documentElement,documentIsXML=isXML(doc),support.tagNameNoComments=assert(function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length}),support.attributes=assert(function(div){div.innerHTML="<select></select>";var type=typeof div.lastChild.getAttribute("multiple");return"boolean"!==type&&"string"!==type}),support.getByClassName=assert(function(div){return div.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",div.getElementsByClassName&&div.getElementsByClassName("e").length?(div.lastChild.className="e",2===div.getElementsByClassName("e").length):!1}),support.getByName=assert(function(div){div.id=expando+0,div.innerHTML="<a name='"+expando+"'></a><div name='"+expando+"'></div>",docElem.insertBefore(div,docElem.firstChild);var pass=doc.getElementsByName&&doc.getElementsByName(expando).length===2+doc.getElementsByName(expando+0).length;return support.getIdNotName=!doc.getElementById(expando),docElem.removeChild(div),pass}),Expr.attrHandle=assert(function(div){return div.innerHTML="<a href='#'></a>",div.firstChild&&typeof div.firstChild.getAttribute!==strundefined&&"#"===div.firstChild.getAttribute("href")})?{}:{href:function(elem){return elem.getAttribute("href",2)},type:function(elem){return elem.getAttribute("type")}},support.getIdNotName?(Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&!documentIsXML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&!documentIsXML){var m=context.getElementById(id);return m?m.id===id||typeof m.getAttributeNode!==strundefined&&m.getAttributeNode("id").value===id?[m]:undefined:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.tagNameNoComments?function(tag,context){return typeof context.getElementsByTagName!==strundefined?context.getElementsByTagName(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i];i++)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.NAME=support.getByName&&function(tag,context){return typeof context.getElementsByName!==strundefined?context.getElementsByName(name):void 0},Expr.find.CLASS=support.getByClassName&&function(className,context){return typeof context.getElementsByClassName===strundefined||documentIsXML?void 0:context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[":focus"],(support.qsa=isNative(doc.querySelectorAll))&&(assert(function(div){div.innerHTML="<select><option selected=''></option></select>",div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked")}),assert(function(div){div.innerHTML="<input type='hidden' i=''/>",div.querySelectorAll("[i^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:\"\"|'')"),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=isNative(matches=docElem.matchesSelector||docElem.mozMatchesSelector||docElem.webkitMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),rbuggyQSA=new RegExp(rbuggyQSA.join("|")),rbuggyMatches=new RegExp(rbuggyMatches.join("|")),contains=isNative(docElem.contains)||docElem.compareDocumentPosition?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=docElem.compareDocumentPosition?function(a,b){var compare;return a===b?(hasDuplicate=!0,0):(compare=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b))?1&compare||a.parentNode&&11===a.parentNode.nodeType?a===doc||contains(preferredDoc,a)?-1:b===doc||contains(preferredDoc,b)?1:0:4&compare?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(a===b)return hasDuplicate=!0,0;if(a.sourceIndex&&b.sourceIndex)return(~b.sourceIndex||MAX_NEGATIVE)-(contains(preferredDoc,a)&&~a.sourceIndex||MAX_NEGATIVE);if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},hasDuplicate=!1,[0,0].sort(sortOrder),support.detectDuplicates=hasDuplicate,document):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),!(!support.matchesSelector||documentIsXML||rbuggyMatches&&rbuggyMatches.test(expr)||rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){var val;return(elem.ownerDocument||elem)!==document&&setDocument(elem),documentIsXML||(name=name.toLowerCase()),(val=Expr.attrHandle[name])?val(elem):documentIsXML||support.attributes?elem.getAttribute(name):((val=elem.getAttributeNode(name))||elem.getAttribute(name))&&elem[name]===!0?name:val&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],i=1,j=0;if(hasDuplicate=!support.detectDuplicates,results.sort(sortOrder),hasDuplicate){for(;elem=results[i];i++)elem===results[i-1]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i];i++)ret+=getText(node);return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[5]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[4]?match[2]=match[4]:unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeName){return"*"===nodeName?function(){return!0}:(nodeName=nodeName.replace(runescape,funescape).toLowerCase(),function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName})},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:operator?(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.substr(result.length-check.length)===check:"~="===operator?(" "+result+" ").indexOf(check)>-1:"|="===operator?result===check||result.substr(0,check.length+1)===check+"-":!1):!0}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(outerCache=parent[expando]||(parent[expando]={}),cache=outerCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return diff-=last,diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)idx=indexOf.call(seed,matched[i]),seed[idx]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do if(elemLang=documentIsXML?elem.getAttribute("xml:lang")||elem.getAttribute("lang"):elem.lang)return elemLang=elemLang.toLowerCase(),elemLang===lang||0===elemLang.indexOf(lang+"-");while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===!1},disabled:function(elem){return elem.disabled===!0},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,elem.selected===!0},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeName>"@"||3===elem.nodeType||4===elem.nodeType)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||attr.toLowerCase()===elem.type)},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]
}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[0>argument?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}};for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(group||(group=tokenize(selector)),i=group.length;i--;)cached=matcherFromTokens(group[i]),cached[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))}return cached},Expr.pseudos.nth=Expr.pseudos.eq,Expr.filters=setFilters.prototype=Expr.pseudos,Expr.setFilters=new setFilters,setDocument(),Sizzle.attr=jQuery.attr,jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains}(window);var runtil=/Until$/,rparentsprev=/^(?:parents|prev(?:Until|All))/,isSimple=/^.[^:#\[\.,]*$/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.fn.extend({find:function(selector){var i,ret,self;if("string"!=typeof selector)return self=this,this.pushStack(jQuery(selector).filter(function(){for(i=0;i<self.length;i++)if(jQuery.contains(self[i],this))return!0}));for(ret=[],i=0;i<this.length;i++)jQuery.find(selector,this[i],ret);return ret=this.pushStack(jQuery.unique(ret)),ret.selector=(this.selector?this.selector+" ":"")+selector,ret},has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;len>i;i++)if(jQuery.contains(this,targets[i]))return!0})},not:function(selector){return this.pushStack(winnow(this,selector,!1))},filter:function(selector){return this.pushStack(winnow(this,selector,!0))},is:function(selector){return!!selector&&("string"==typeof selector?rneedsContext.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0)},closest:function(selectors,context){for(var cur,i=0,l=this.length,ret=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;l>i;i++)for(cur=this[i];cur&&cur.ownerDocument&&cur!==context&&11!==cur.nodeType;){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break}cur=cur.parentNode}return this.pushStack(ret.length>1?jQuery.unique(ret):ret)},index:function(elem){return elem?"string"==typeof elem?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){var set="string"==typeof selector?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(jQuery.unique(all))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.fn.andSelf=jQuery.fn.addBack,jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);return runtil.test(name)||(selector=until),selector&&"string"==typeof selector&&(ret=jQuery.filter(selector,ret)),ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret,this.length>1&&rparentsprev.test(name)&&(ret=ret.reverse()),this.pushStack(ret)}}),jQuery.extend({filter:function(expr,elems,not){return not&&(expr=":not("+expr+")"),1===elems.length?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(until===undefined||1!==cur.nodeType||!jQuery(cur).is(until));)1===cur.nodeType&&matched.push(cur),cur=cur[dir];return matched},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&r.push(n);return r}});var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,manipulation_rcheckableType=/^(?:checkbox|radio)$/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){return this.each(jQuery.isFunction(html)?function(i){jQuery(this).wrapInner(html.call(this,i))}:function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(elem){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(elem)})},prepend:function(){return this.domManip(arguments,!0,function(elem){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(elem,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,!1,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function(selector,keepData){for(var elem,i=0;null!=(elem=this[i]);i++)(!selector||jQuery.filter(selector,[elem]).length>0)&&(keepData||1!==elem.nodeType||jQuery.cleanData(getAll(elem)),elem.parentNode&&(keepData&&jQuery.contains(elem.ownerDocument,elem)&&setGlobalEval(getAll(elem,"script")),elem.parentNode.removeChild(elem)));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++){for(1===elem.nodeType&&jQuery.cleanData(getAll(elem,!1));elem.firstChild;)elem.removeChild(elem.firstChild);elem.options&&jQuery.nodeName(elem,"select")&&(elem.options.length=0)}return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null==dataAndEvents?!1:dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined)return 1===elem.nodeType?elem.innerHTML.replace(rinlinejQuery,""):undefined;if(!("string"!=typeof value||rnoInnerhtml.test(value)||!jQuery.support.htmlSerialize&&rnoshimcache.test(value)||!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(value)||wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()])){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;l>i;i++)elem=this[i]||{},1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(value){var isFunc=jQuery.isFunction(value);return isFunc||"string"==typeof value||(value=jQuery(value).not(this).detach()),this.domManip([value],!0,function(elem){var next=this.nextSibling,parent=this.parentNode;(parent&&1===this.nodeType||11===this.nodeType)&&(jQuery(this).remove(),next?next.parentNode.insertBefore(elem,next):parent.appendChild(elem))})},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,table,callback){args=core_concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||!(1>=l||"string"!=typeof value||jQuery.support.checkClone)&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);isFunction&&(args[0]=value.call(this,index,table?self.html():undefined)),self.domManip(args,table,callback)});if(l&&(fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,this),first=fragment.firstChild,1===fragment.childNodes.length&&(fragment=first),first)){for(table=table&&jQuery.nodeName(first,"tr"),scripts=jQuery.map(getAll(fragment,"script"),disableScript),hasScripts=scripts.length;l>i;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(table&&jQuery.nodeName(this[i],"table")?findOrAppend(this[i],"tbody"):this[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;hasScripts>i;i++)node=scripts[i],rscriptType.test(node.type||"")&&!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery.ajax({url:node.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,"")));fragment=first=null}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-1;last>=i;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),core_push.apply(ret,elems.get());return this.pushStack(ret)}}),jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,srcElements,node,i,clone,inPage=jQuery.contains(elem.ownerDocument,elem);if(jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?clone=elem.cloneNode(!0):(fragmentDiv.innerHTML=elem.outerHTML,fragmentDiv.removeChild(clone=fragmentDiv.firstChild)),!(jQuery.support.noCloneEvent&&jQuery.support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0;null!=(node=srcElements[i]);++i)destElements[i]&&fixCloneNodeIssues(node,destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0;null!=(node=srcElements[i]);i++)cloneCopyEvent(node,destElements[i]);else cloneCopyEvent(elem,clone);return destElements=getAll(clone,"script"),destElements.length>0&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),destElements=srcElements=node=null,clone},buildFragment:function(elems,context,scripts,selection){for(var contains,elem,tag,tmp,wrap,tbody,j,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;l>i;i++)if(elem=elems[i],elem||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||safe.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)&&nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0])),!jQuery.support.tbody)for(elem="table"!==tag||rtbody.test(elem)?"<table>"!==wrap[1]||rtbody.test(elem)?0:tmp:tmp.firstChild,j=elem&&elem.childNodes.length;j--;)jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length&&elem.removeChild(tbody);for(jQuery.merge(nodes,tmp.childNodes),tmp.textContent="";tmp.firstChild;)tmp.removeChild(tmp.firstChild);tmp=safe.lastChild}else nodes.push(context.createTextNode(elem));for(tmp&&safe.removeChild(tmp),jQuery.support.appendChecked||jQuery.grep(getAll(nodes,"input"),fixDefaultChecked),i=0;elem=nodes[i++];)if((!selection||-1===jQuery.inArray(elem,selection))&&(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(safe.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts))for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return tmp=null,safe},cleanData:function(elems,acceptData){for(var data,id,elem,type,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=jQuery.support.deleteExpando,special=jQuery.event.special;null!=(elem=elems[i]);i++)if((acceptData||jQuery.acceptData(elem))&&(id=elem[internalKey],data=id&&cache[id])){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);cache[id]&&(delete cache[id],deleteExpando?delete elem[internalKey]:"undefined"!=typeof elem.removeAttribute?elem.removeAttribute(internalKey):elem[internalKey]=null,core_deletedIds.push(id))}}});var curCSS,getStyles,iframe,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/,rposition=/^(top|right|bottom|left)$/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([+-])=("+core_pnum+")","i"),elemdisplay={BODY:"block"},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"];jQuery.fn.extend({css:function(name,value){return jQuery.access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;len>i;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){var bool="boolean"==typeof state;return this.each(function(){(bool?state:isHidden(this))?jQuery(this).show():jQuery(this).hide()})}}),jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],value===undefined)return hooks&&"get"in hooks&&(ret=hooks.get(elem,!1,extra))!==undefined?ret:style[name];if(type=typeof value,"string"===type&&(ret=rrelNum.exec(value))&&(value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),!(null==value||"number"===type&&isNaN(value)||("number"!==type||jQuery.cssNumber[origName]||(value+="px"),jQuery.support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),hooks&&"set"in hooks&&(value=hooks.set(elem,value,extra))===undefined)))try{style[name]=value}catch(e){}}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],hooks&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),val===undefined&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),extra?(num=parseFloat(val),extra===!0||jQuery.isNumeric(num)?num||0:val):val},swap:function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret}}),window.getComputedStyle?(getStyles=function(elem){return window.getComputedStyle(elem,null)},curCSS=function(elem,name,_computed){var width,minWidth,maxWidth,computed=_computed||getStyles(elem),ret=computed?computed.getPropertyValue(name)||computed[name]:undefined,style=elem.style;return computed&&(""!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),ret}):document.documentElement.currentStyle&&(getStyles=function(elem){return elem.currentStyle},curCSS=function(elem,name,_computed){var left,rs,rsLeft,computed=_computed||getStyles(elem),ret=computed?computed[name]:undefined,style=elem.style;return null==ret&&style&&style[name]&&(ret=style[name]),rnumnonpx.test(ret)&&!rposition.test(name)&&(left=style.left,rs=elem.runtimeStyle,rsLeft=rs&&rs.left,rsLeft&&(rs.left=elem.currentStyle.left),style.left="fontSize"===name?"1em":ret,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(rs.left=rsLeft)),""===ret?"auto":ret}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){return computed?0===elem.offsetWidth&&rdisplayswap.test(jQuery.css(elem,"display"))?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra):void 0},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}}),jQuery.support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1,(value>=1||""===value)&&""===jQuery.trim(filter.replace(ralpha,""))&&style.removeAttribute&&(style.removeAttribute("filter"),""===value||currentStyle&&!currentStyle.filter)||(style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity)}}),jQuery(function(){jQuery.support.reliableMarginRight||(jQuery.cssHooks.marginRight={get:function(elem,computed){return computed?jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"]):void 0}}),!jQuery.support.pixelPosition&&jQuery.fn.position&&jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]={get:function(elem,computed){return computed?(computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed):void 0}}})}),jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.hidden=function(elem){return 0===elem.offsetWidth&&0===elem.offsetHeight||!jQuery.support.reliableHiddenOffsets&&"none"===(elem.style&&elem.style.display||jQuery.css(elem,"display"))},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];4>i;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!manipulation_rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")};var ajaxLocParts,ajaxLocation,ajax_nonce=jQuery.now(),ajax_rquery=/\?/,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,type,response,self=this,off=url.indexOf(" ");return off>=0&&(selector=url.slice(off,url.length),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=undefined):params&&"object"==typeof params&&(type="POST"),self.length>0&&jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=undefined),jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}}),jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;2!==state&&(state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=undefined,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0,responses&&(response=ajaxHandleResponses(s,jqXHR,responses)),status>=200&&300>status||304===status?(s.ifModified&&(modified=jqXHR.getResponseHeader("Last-Modified"),modified&&(jQuery.lastModified[cacheURL]=modified),modified=jqXHR.getResponseHeader("etag"),modified&&(jQuery.etag[cacheURL]=modified)),304===status?(isSuccess=!0,statusText="notmodified"):(isSuccess=ajaxConvert(s,response),statusText=isSuccess.state,success=isSuccess.data,error=isSuccess.error,isSuccess=!error)):(error=statusText,(status||!statusText)&&(statusText="error",0>status&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=undefined,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}"object"==typeof url&&(options=url,url=undefined),options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return state||(s.mimeType=type),this},statusCode:function(map){var code;if(map)if(2>state)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(core_rnotwhite)||[""],null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?80:443))==(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?80:443)))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return jqXHR;fireGlobals=s.global,fireGlobals&&0===jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(ajax_rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),s.cache===!1&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+ajax_nonce++):cacheURL+(ajax_rquery.test(cacheURL)?"&":"?")+"_="+ajax_nonce++)),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&s.contentType!==!1||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===!1||2===state))return jqXHR.abort();strAbort="abort";for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&s.timeout>0&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(2>state))throw e;done(-1,e)}}else done(-1,"No Transport");return jqXHR},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){s.cache===undefined&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||jQuery("head")[0]||document.documentElement;
return{send:function(_,callback){script=document.createElement("script"),script.async=!0,s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,script.parentNode&&script.parentNode.removeChild(script),script=null,isAbort||callback(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(undefined,!0)}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+ajax_nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==!1&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");return jsonProp||"jsonp"===s.dataTypes[0]?(callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):s.jsonp!==!1&&(s.url+=(ajax_rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=undefined}),"script"):void 0});var xhrCallbacks,xhrSupported,xhrId=0,xhrOnUnloadAbort=window.ActiveXObject&&function(){var key;for(key in xhrCallbacks)xhrCallbacks[key](undefined,!0)};jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR()}:createStandardXHR,xhrSupported=jQuery.ajaxSettings.xhr(),jQuery.support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,xhrSupported=jQuery.support.ajax=!!xhrSupported,xhrSupported&&jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var handle,i,xhr=s.xhr();if(s.username?xhr.open(s.type,s.url,s.async,s.username,s.password):xhr.open(s.type,s.url,s.async),s.xhrFields)for(i in s.xhrFields)xhr[i]=s.xhrFields[i];s.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(s.mimeType),s.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");try{for(i in headers)xhr.setRequestHeader(i,headers[i])}catch(err){}xhr.send(s.hasContent&&s.data||null),callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||4===xhr.readyState))if(callback=undefined,handle&&(xhr.onreadystatechange=jQuery.noop,xhrOnUnloadAbort&&delete xhrCallbacks[handle]),isAbort)4!==xhr.readyState&&xhr.abort();else{responses={},status=xhr.status,xml=xhr.responseXML,responseHeaders=xhr.getAllResponseHeaders(),xml&&xml.documentElement&&(responses.xml=xml),"string"==typeof xhr.responseText&&(responses.text=xhr.responseText);try{statusText=xhr.statusText}catch(e){statusText=""}status||!s.isLocal||s.crossDomain?1223===status&&(status=204):status=responses.text?200:404}}catch(firefoxAccessException){isAbort||complete(-1,firefoxAccessException)}responses&&complete(status,statusText,responses,responseHeaders)},s.async?4===xhr.readyState?setTimeout(callback):(handle=++xhrId,xhrOnUnloadAbort&&(xhrCallbacks||(xhrCallbacks={},jQuery(window).unload(xhrOnUnloadAbort)),xhrCallbacks[handle]=callback),xhr.onreadystatechange=callback):callback()},abort:function(){callback&&callback(undefined,!0)}}}});var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var end,unit,tween=this.createTween(prop,value),parts=rfxnum.exec(value),target=tween.cur(),start=+target||0,scale=1,maxIterations=20;if(parts){if(end=+parts[2],unit=parts[3]||(jQuery.cssNumber[prop]?"":"px"),"px"!==unit&&start){start=jQuery.css(tween.elem,prop,!0)||end||1;do scale=scale||".5",start/=scale,jQuery.style(tween.elem,prop,start+unit);while(scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations)}tween.unit=unit,tween.start=start,tween.end=parts[1]?start+(parts[1]+1)*end:end}return tween}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){jQuery.isFunction(props)?(callback=props,props=["*"]):props=props.split(" ");for(var prop,index=0,length=props.length;length>index;index++)prop=props[index],tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function(callback,prepend){prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.pos=eased=this.options.duration?jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(tween){var result;return null==tween.elem[tween.prop]||tween.elem.style&&null!=tween.elem.style[tween.prop]?(result=jQuery.css(tween.elem,tween.prop,"auto"),result&&"auto"!==result?result:0):tween.elem[tween.prop]},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);doAnimation.finish=function(){anim.stop(!0)},(empty||jQuery._data(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||optall.queue===!1?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=undefined),clearQueue&&type!==!1&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));(dequeue||!gotoEnd)&&jQuery.dequeue(this,type)})},finish:function(type){return type!==!1&&(type=type||"fx"),this.each(function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.cur&&hooks.cur.finish&&hooks.cur.finish.call(this),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;length>index;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,(null==opt.queue||opt.queue===!0)&&(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}},jQuery.timers=[],jQuery.fx=Tween.prototype.init,jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;for(fxNow=jQuery.now();i<timers.length;i++)timer=timers[i],timer()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=undefined},jQuery.fx.timer=function(timer){timer()&&jQuery.timers.push(timer)&&jQuery.fx.start()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fx.step={},jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length}),jQuery.fn.offset=function(options){if(arguments.length)return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;if(doc)return docElem=doc.documentElement,jQuery.contains(docElem,elem)?("undefined"!=typeof elem.getBoundingClientRect&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}):box},jQuery.offset={setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");"static"===position&&(elem.style.position="relative");var curTop,curLeft,curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={};calculatePosition?(curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({position:function(){if(this[0]){var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||document.documentElement;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||document.documentElement})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);return val===undefined?win?prop in win?win[prop]:win.document.documentElement[method]:elem[method]:void(win?win.scrollTo(top?jQuery(win).scrollLeft():val,top?val:jQuery(win).scrollTop()):elem[method]=val)},method,val,arguments.length,null)}}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(margin===!0||value===!0?"margin":"border");return jQuery.access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})}),window.jQuery=window.$=jQuery,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return jQuery})}(window),function(jQuery,window,undefined){"use strict";function migrateWarn(msg){warnedAbout[msg]||(warnedAbout[msg]=!0,jQuery.migrateWarnings.push(msg),window.console&&console.warn&&!jQuery.migrateMute&&console.warn("JQMIGRATE: "+msg))}function migrateWarnProp(obj,prop,value,msg){if(Object.defineProperty)try{return void Object.defineProperty(obj,prop,{configurable:!0,enumerable:!0,get:function(){return migrateWarn(msg),value},set:function(newValue){migrateWarn(msg),value=newValue}})}catch(err){}jQuery._definePropertyBroken=!0,obj[prop]=value}var warnedAbout={};jQuery.migrateWarnings=[],jQuery.migrateReset=function(){warnedAbout={},jQuery.migrateWarnings.length=0},"BackCompat"===document.compatMode&&migrateWarn("jQuery is not compatible with Quirks Mode");var attrFn={},attr=jQuery.attr,valueAttrGet=jQuery.attrHooks.value&&jQuery.attrHooks.value.get||function(){return null},valueAttrSet=jQuery.attrHooks.value&&jQuery.attrHooks.value.set||function(){return undefined},rnoType=/^(?:input|button)$/i,rnoAttrNodeType=/^[238]$/,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,ruseDefault=/^(?:checked|selected)$/i;migrateWarnProp(jQuery,"attrFn",attrFn,"jQuery.attrFn is deprecated"),jQuery.attr=function(elem,name,value,pass){var lowerName=name.toLowerCase(),nType=elem&&elem.nodeType;return pass&&(migrateWarn("jQuery.fn.attr( props, pass ) is deprecated"),elem&&!rnoAttrNodeType.test(nType)&&jQuery.isFunction(jQuery.fn[name]))?jQuery(elem)[name](value):("type"===name&&value!==undefined&&rnoType.test(elem.nodeName)&&migrateWarn("Can't change the 'type' of an input or button in IE 6/7/8"),!jQuery.attrHooks[lowerName]&&rboolean.test(lowerName)&&(jQuery.attrHooks[lowerName]={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===!0||"boolean"!=typeof property&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==!1?name.toLowerCase():undefined},set:function(elem,value,name){var propName;return value===!1?jQuery.removeAttr(elem,name):(propName=jQuery.propFix[name]||name,propName in elem&&(elem[propName]=!0),elem.setAttribute(name,name.toLowerCase())),name}},ruseDefault.test(lowerName)&&migrateWarn("jQuery.fn.attr("+lowerName+") may use property instead of attribute")),attr.call(jQuery,elem,name,value))},jQuery.attrHooks.value={get:function(elem,name){var nodeName=(elem.nodeName||"").toLowerCase();return"button"===nodeName?valueAttrGet.apply(this,arguments):("input"!==nodeName&&"option"!==nodeName&&migrateWarn("property-based jQuery.fn.attr('value') is deprecated"),name in elem?elem.value:null)},set:function(elem,value){var nodeName=(elem.nodeName||"").toLowerCase();return"button"===nodeName?valueAttrSet.apply(this,arguments):("input"!==nodeName&&"option"!==nodeName&&migrateWarn("property-based jQuery.fn.attr('value', val) is deprecated"),void(elem.value=value))}};var matched,browser,oldInit=jQuery.fn.init,rquickExpr=/^(?:.*(<[\w\W]+>)[^>]*|#([\w\-]*))$/;jQuery.fn.init=function(selector,context,rootjQuery){var match;return selector&&"string"==typeof selector&&!jQuery.isPlainObject(context)&&(match=rquickExpr.exec(selector))&&match[1]&&("<"!==selector.charAt(0)&&migrateWarn("$(html) HTML strings must start with '<' character"),context&&context.context&&(context=context.context),jQuery.parseHTML)?oldInit.call(this,jQuery.parseHTML(jQuery.trim(selector),context,!0),context,rootjQuery):oldInit.apply(this,arguments)},jQuery.fn.init.prototype=jQuery.fn,jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}},matched=jQuery.uaMatch(navigator.userAgent),browser={},matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),jQuery.browser=browser,migrateWarnProp(jQuery,"browser",browser,"jQuery.browser is deprecated"),jQuery.sub=function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(!0,jQuerySub,this),jQuerySub.superclass=this,jQuerySub.fn=jQuerySub.prototype=this(),jQuerySub.fn.constructor=jQuerySub,jQuerySub.sub=this.sub,jQuerySub.fn.init=function(selector,context){return context&&context instanceof jQuery&&!(context instanceof jQuerySub)&&(context=jQuerySub(context)),jQuery.fn.init.call(this,selector,context,rootjQuerySub)},jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return migrateWarn("jQuery.sub() is deprecated"),jQuerySub};var oldFnData=jQuery.fn.data;jQuery.fn.data=function(name){var ret,evt,elem=this[0];return!elem||"events"!==name||1!==arguments.length||(ret=jQuery.data(elem,name),evt=jQuery._data(elem,name),ret!==undefined&&ret!==evt||evt===undefined)?oldFnData.apply(this,arguments):(migrateWarn("Use of jQuery.fn.data('events') is deprecated"),evt)};var rscriptType=/\/(java|ecma)script/i,oldSelf=jQuery.fn.andSelf||jQuery.fn.addBack,oldFragment=jQuery.buildFragment;jQuery.fn.andSelf=function(){return migrateWarn("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),oldSelf.apply(this,arguments)},jQuery.clean||(jQuery.clean=function(elems,context,fragment,scripts){context=context||document,context=!context.nodeType&&context[0]||context,context=context.ownerDocument||context,migrateWarn("jQuery.clean() is deprecated");var i,elem,handleScript,jsTags,ret=[];if(jQuery.merge(ret,jQuery.buildFragment(elems,context).childNodes),fragment)for(handleScript=function(elem){return!elem.type||rscriptType.test(elem.type)?scripts?scripts.push(elem.parentNode?elem.parentNode.removeChild(elem):elem):fragment.appendChild(elem):void 0},i=0;null!=(elem=ret[i]);i++)jQuery.nodeName(elem,"script")&&handleScript(elem)||(fragment.appendChild(elem),"undefined"!=typeof elem.getElementsByTagName&&(jsTags=jQuery.grep(jQuery.merge([],elem.getElementsByTagName("script")),handleScript),ret.splice.apply(ret,[i+1,0].concat(jsTags)),i+=jsTags.length));return ret}),jQuery.buildFragment=function(elems,context,scripts,selection){var ret,warning="jQuery.buildFragment() is deprecated";context=context||document,context=!context.nodeType&&context[0]||context,context=context.ownerDocument||context;try{ret=oldFragment.call(jQuery,elems,context,scripts,selection)}catch(x){ret=oldFragment.call(jQuery,elems,context.nodeType?[context]:context[0],scripts,selection),migrateWarn(warning)}return ret.fragment||(migrateWarnProp(ret,"fragment",ret,warning),migrateWarnProp(ret,"cacheable",!1,warning)),ret};var eventAdd=jQuery.event.add,eventRemove=jQuery.event.remove,eventTrigger=jQuery.event.trigger,oldToggle=jQuery.fn.toggle,oldLive=jQuery.fn.live,oldDie=jQuery.fn.die,ajaxEvents="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",rajaxEvent=new RegExp("\\b(?:"+ajaxEvents+")\\b"),rhoverHack=/(?:^|\s)hover(\.\S+|)\b/,hoverHack=function(events){return"string"!=typeof events||jQuery.event.special.hover?events:(rhoverHack.test(events)&&migrateWarn("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),events&&events.replace(rhoverHack,"mouseenter$1 mouseleave$1"))};jQuery.event.props&&"attrChange"!==jQuery.event.props[0]&&jQuery.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),migrateWarnProp(jQuery.event,"handle",jQuery.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),jQuery.event.add=function(elem,types,handler,data,selector){elem!==document&&rajaxEvent.test(types)&&migrateWarn("AJAX events should be attached to document: "+types),eventAdd.call(this,elem,hoverHack(types||""),handler,data,selector)},jQuery.event.remove=function(elem,types,handler,selector,mappedTypes){eventRemove.call(this,elem,hoverHack(types)||"",handler,selector,mappedTypes)},jQuery.fn.error=function(){var args=Array.prototype.slice.call(arguments,0);return migrateWarn("jQuery.fn.error() is deprecated"),args.splice(0,0,"error"),arguments.length?this.bind.apply(this,args):(this.triggerHandler.apply(this,args),this)},jQuery.fn.toggle=function(fn,fn2){if(!jQuery.isFunction(fn)||!jQuery.isFunction(fn2))return oldToggle.apply(this,arguments);migrateWarn("jQuery.fn.toggle(handler, handler...) is deprecated");var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;return jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1),event.preventDefault(),args[lastToggle].apply(this,arguments)||!1};for(toggler.guid=guid;i<args.length;)args[i++].guid=guid;return this.click(toggler)},jQuery.fn.live=function(types,data,fn){return migrateWarn("jQuery.fn.live() is deprecated"),oldLive?oldLive.apply(this,arguments):(jQuery(this.context).on(types,this.selector,data,fn),this)},jQuery.fn.die=function(types,fn){return migrateWarn("jQuery.fn.die() is deprecated"),oldDie?oldDie.apply(this,arguments):(jQuery(this.context).off(types,this.selector||"**",fn),this)},jQuery.event.trigger=function(event,data,elem,onlyHandlers){return!elem&!rajaxEvent.test(event)&&migrateWarn("Global events are undocumented and deprecated"),eventTrigger.call(this,event,data,elem||document,onlyHandlers)},jQuery.each(ajaxEvents.split("|"),function(_,name){jQuery.event.special[name]={setup:function(){var elem=this;return elem!==document&&(jQuery.event.add(document,name+"."+jQuery.guid,function(){jQuery.event.trigger(name,null,elem,!0)}),jQuery._data(this,name,jQuery.guid++)),!1},teardown:function(){return this!==document&&jQuery.event.remove(document,name+"."+jQuery._data(this,name)),!1}}})}(jQuery,window),function(jQuery){function newTmplItem(options,parentItem,fn,data){var newItem={data:data||0===data||data===!1?data:parentItem?parentItem.data:{},_wrap:parentItem?parentItem._wrap:null,tmpl:null,parent:parentItem||null,nodes:[],calls:tiCalls,nest:tiNest,wrap:tiWrap,html:tiHtml,update:tiUpdate};return options&&jQuery.extend(newItem,options,{nodes:[],parent:parentItem}),fn&&(newItem.tmpl=fn,newItem._ctnt=newItem._ctnt||newItem.tmpl(jQuery,newItem),newItem.key=++itemKey,(stack.length?wrappedItems:newTmplItems)[itemKey]=newItem),newItem}function build(tmplItem,nested,content){var frag,ret=content?jQuery.map(content,function(item){return"string"==typeof item?tmplItem.key?item.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+tmplItmAtt+'="'+tmplItem.key+'" $2'):item:build(item,tmplItem,item._ctnt)}):tmplItem;return nested?ret:(ret=ret.join(""),ret.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(all,before,middle,after){frag=jQuery(middle).get(),storeTmplItems(frag),before&&(frag=unencode(before).concat(frag)),after&&(frag=frag.concat(unencode(after)))}),frag?frag:unencode(ret))}function unencode(text){var el=document.createElement("div");return el.innerHTML=text,jQuery.makeArray(el.childNodes)}function buildTmplFn(markup){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+jQuery.trim(markup).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(all,slash,type,fnargs,target,parens,args){var def,expr,exprAutoFnDetect,tag=jQuery.tmpl.tag[type];if(!tag)throw"Unknown template tag: "+type;return def=tag._default||[],parens&&!/\w$/.test(target)&&(target+=parens,parens=""),target?(target=unescape(target),args=args?","+unescape(args)+")":parens?")":"",expr=parens?target.indexOf(".")>-1?target+unescape(parens):"("+target+").call($item"+args:target,exprAutoFnDetect=parens?expr:"(typeof("+target+")==='function'?("+target+").call($item):("+target+"))"):exprAutoFnDetect=expr=def.$1||"null",fnargs=unescape(fnargs),"');"+tag[slash?"close":"open"].split("$notnull_1").join(target?"typeof("+target+")!=='undefined' && ("+target+")!=null":"true").split("$1a").join(exprAutoFnDetect).split("$1").join(expr).split("$2").join(fnargs||def.$2||"")+"__.push('"})+"');}return __;")}function updateWrapped(options,wrapped){options._wrap=build(options,!0,jQuery.isArray(wrapped)?wrapped:[htmlExpr.test(wrapped)?wrapped:jQuery(wrapped).html()]).join("")}function unescape(args){return args?args.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function outerHtml(elem){var div=document.createElement("div");return div.appendChild(elem.cloneNode(!0)),div.innerHTML}function storeTmplItems(content){function processItemKey(el){function cloneTmplItem(key){key+=keySuffix,tmplItem=newClonedItems[key]=newClonedItems[key]||newTmplItem(tmplItem,newTmplItems[tmplItem.parent.key+keySuffix]||tmplItem.parent)}var pntKey,pntItem,tmplItem,key,pntNode=el;if(key=el.getAttribute(tmplItmAtt)){for(;pntNode.parentNode&&1===(pntNode=pntNode.parentNode).nodeType&&!(pntKey=pntNode.getAttribute(tmplItmAtt)););pntKey!==key&&(pntNode=pntNode.parentNode?11===pntNode.nodeType?0:pntNode.getAttribute(tmplItmAtt)||0:0,(tmplItem=newTmplItems[key])||(tmplItem=wrappedItems[key],tmplItem=newTmplItem(tmplItem,newTmplItems[pntNode]||wrappedItems[pntNode]),tmplItem.key=++itemKey,newTmplItems[itemKey]=tmplItem),cloneIndex&&cloneTmplItem(key)),el.removeAttribute(tmplItmAtt)}else cloneIndex&&(tmplItem=jQuery.data(el,"tmplItem"))&&(cloneTmplItem(tmplItem.key),newTmplItems[tmplItem.key]=tmplItem,pntNode=jQuery.data(el.parentNode,"tmplItem"),pntNode=pntNode?pntNode.key:0);if(tmplItem){for(pntItem=tmplItem;pntItem&&pntItem.key!=pntNode;)pntItem.nodes.push(el),pntItem=pntItem.parent;delete tmplItem._ctnt,delete tmplItem._wrap,jQuery.data(el,"tmplItem",tmplItem)}}var elem,elems,i,l,m,keySuffix="_"+cloneIndex,newClonedItems={};for(i=0,l=content.length;l>i;i++)if(1===(elem=content[i]).nodeType){for(elems=elem.getElementsByTagName("*"),m=elems.length-1;m>=0;m--)processItemKey(elems[m]);processItemKey(elem)}}function tiCalls(content,tmpl,data,options){return content?void stack.push({_:content,tmpl:tmpl,item:this,data:data,options:options}):stack.pop()}function tiNest(tmpl,data,options){return jQuery.tmpl(jQuery.template(tmpl),data,options,this)}function tiWrap(call,wrapped){var options=call.options||{};return options.wrapped=wrapped,jQuery.tmpl(jQuery.template(call.tmpl),call.data,options,call.item)}function tiHtml(filter,textOnly){var wrapped=this._wrap;return jQuery.map(jQuery(jQuery.isArray(wrapped)?wrapped.join(""):wrapped).filter(filter||"*"),function(e){return textOnly?e.innerText||e.textContent:e.outerHTML||outerHtml(e)})}function tiUpdate(){var coll=this.nodes;jQuery.tmpl(null,null,null,this).insertBefore(coll[0]),jQuery(coll).remove()}var appendToTmplItems,oldManip=jQuery.fn.domManip,tmplItmAtt="_tmplitem",htmlExpr=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,newTmplItems={},wrappedItems={},topTmplItem={key:0,data:{}},itemKey=0,cloneIndex=0,stack=[];jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,i,l,tmplItems,ret=[],insert=jQuery(selector),parent=1===this.length&&this[0].parentNode;if(appendToTmplItems=newTmplItems||{},parent&&11===parent.nodeType&&1===parent.childNodes.length&&1===insert.length)insert[original](this[0]),ret=this;else{for(i=0,l=insert.length;l>i;i++)cloneIndex=i,elems=(i>0?this.clone(!0):this).get(),jQuery(insert[i])[original](elems),ret=ret.concat(elems);cloneIndex=0,ret=this.pushStack(ret,name,insert.selector)}return tmplItems=appendToTmplItems,appendToTmplItems=null,jQuery.tmpl.complete(tmplItems),ret}}),jQuery.fn.extend({tmpl:function(data,options,parentItem){return jQuery.tmpl(this[0],data,options,parentItem)},tmplItem:function(){return jQuery.tmplItem(this[0])},template:function(name){return jQuery.template(name,this[0])},domManip:function(args,table,callback){if(args[0]&&jQuery.isArray(args[0])){for(var tmplItem,dmArgs=jQuery.makeArray(arguments),elems=args[0],elemsLength=elems.length,i=0;elemsLength>i&&!(tmplItem=jQuery.data(elems[i++],"tmplItem")););tmplItem&&cloneIndex&&(dmArgs[2]=function(fragClone){jQuery.tmpl.afterManip(this,fragClone,callback)}),oldManip.apply(this,dmArgs)}else oldManip.apply(this,arguments);return cloneIndex=0,appendToTmplItems||jQuery.tmpl.complete(newTmplItems),this}}),jQuery.extend({tmpl:function(tmpl,data,options,parentItem){var ret,topLevel=!parentItem;if(topLevel)parentItem=topTmplItem,tmpl=jQuery.template[tmpl]||jQuery.template(null,tmpl),wrappedItems={};else if(!tmpl)return tmpl=parentItem.tmpl,newTmplItems[parentItem.key]=parentItem,parentItem.nodes=[],parentItem.wrapped&&updateWrapped(parentItem,parentItem.wrapped),jQuery(build(parentItem,null,parentItem.tmpl(jQuery,parentItem)));return tmpl?("function"==typeof data&&(data=data.call(parentItem||{})),options&&options.wrapped&&updateWrapped(options,options.wrapped),ret=jQuery.isArray(data)?jQuery.map(data,function(dataItem){return dataItem?newTmplItem(options,parentItem,tmpl,dataItem):null}):[newTmplItem(options,parentItem,tmpl,data)],topLevel?jQuery(build(parentItem,null,ret)):ret):[]},tmplItem:function(elem){var tmplItem;for(elem instanceof jQuery&&(elem=elem[0]);elem&&1===elem.nodeType&&!(tmplItem=jQuery.data(elem,"tmplItem"))&&(elem=elem.parentNode););return tmplItem||topTmplItem},template:function(name,tmpl){return tmpl?("string"==typeof tmpl?tmpl=buildTmplFn(tmpl):tmpl instanceof jQuery&&(tmpl=tmpl[0]||{}),tmpl.nodeType&&(tmpl=jQuery.data(tmpl,"tmpl")||jQuery.data(tmpl,"tmpl",buildTmplFn(tmpl.innerHTML))),"string"==typeof name?jQuery.template[name]=tmpl:tmpl):name?"string"!=typeof name?jQuery.template(null,name):jQuery.template[name]||jQuery.template(null,htmlExpr.test(name)?name:jQuery(name)):null
},encode:function(text){return(""+text).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),jQuery.extend(jQuery.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){newTmplItems={}},afterManip:function(elem,fragClone,callback){var content=11===fragClone.nodeType?jQuery.makeArray(fragClone.childNodes):1===fragClone.nodeType?[fragClone]:[];callback.call(elem,fragClone),storeTmplItems(content),cloneIndex++}})}(jQuery),function($,undefined){function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();return"area"===nodeName?(map=element.parentNode,mapName=map.name,element.href&&mapName&&"map"===map.nodeName.toLowerCase()?(img=$("img[usemap=#"+mapName+"]")[0],!!img&&visible(img)):!1):(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length}var uuid=0,runiqueId=/^ui-id-\d+$/;$.ui=$.ui||{},$.ui.version||($.extend($.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),$.fn.extend({_focus:$.fn.focus,focus:function(delay,fn){return"number"==typeof delay?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus(),fn&&fn.call(elem)},delay)}):this._focus.apply(this,arguments)},scrollParent:function(){var scrollParent;return scrollParent=$.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.css(this,"position"))&&/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!scrollParent.length?$(document):scrollParent},zIndex:function(zIndex){if(zIndex!==undefined)return this.css("zIndex",zIndex);if(this.length)for(var position,value,elem=$(this[0]);elem.length&&elem[0]!==document;){if(position=elem.css("position"),("absolute"===position||"relative"===position||"fixed"===position)&&(value=parseInt(elem.css("zIndex"),10),!isNaN(value)&&0!==value))return value;elem=elem.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++uuid)})},removeUniqueId:function(){return this.each(function(){runiqueId.test(this.id)&&$(this).removeAttr("id")})}}),$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName)}}):function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}}),$("<a>").outerWidth(1).jquery||$.each(["Width","Height"],function(i,name){function reduce(elem,size,border,margin){return $.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0,border&&(size-=parseFloat($.css(elem,"border"+this+"Width"))||0),margin&&(size-=parseFloat($.css(elem,"margin"+this))||0)}),size}var side="Width"===name?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};$.fn["inner"+name]=function(size){return size===undefined?orig["inner"+name].call(this):this.each(function(){$(this).css(type,reduce(this,size)+"px")})},$.fn["outer"+name]=function(size,margin){return"number"!=typeof size?orig["outer"+name].call(this,size):this.each(function(){$(this).css(type,reduce(this,size,!0,margin)+"px")})}}),$.fn.addBack||($.fn.addBack=function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}),$("<a>").data("a-b","a").removeData("a-b").data("a-b")&&($.fn.removeData=function(removeData){return function(key){return arguments.length?removeData.call(this,$.camelCase(key)):removeData.call(this)}}($.fn.removeData)),$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),$.support.selectstart="onselectstart"in document.createElement("div"),$.fn.extend({disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),$.extend($.ui,{plugin:{add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set)proto.plugins[i]=proto.plugins[i]||[],proto.plugins[i].push([option,set[i]])},call:function(instance,name,args){var i,set=instance.plugins[name];if(set&&instance.element[0].parentNode&&11!==instance.element[0].parentNode.nodeType)for(i=0;i<set.length;i++)instance.options[set[i][0]]&&set[i][1].apply(instance.element,args)}},hasScroll:function(el,a){if("hidden"===$(el).css("overflow"))return!1;var scroll=a&&"left"===a?"scrollLeft":"scrollTop",has=!1;return el[scroll]>0?!0:(el[scroll]=1,has=el[scroll]>0,el[scroll]=0,has)}}))}(jQuery),function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var elem,i=0;null!=(elem=elems[i]);i++)try{$(elem).triggerHandler("remove")}catch(e){}_cleanData(elems)},$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.Widget),$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){return this._createWidget?void(arguments.length&&this._createWidget(options,element)):new constructor(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),basePrototype=new base,basePrototype.options=$.widget.extend({},basePrototype.options),$.each(prototype,function(prop,value){return $.isFunction(value)?void(proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var returnValue,__super=this._super,__superApply=this._superApply;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}}()):void(proxiedPrototype[prop]=value)}),constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)}),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.widget.bridge(name,constructor)},$.widget.extend=function(target){for(var key,value,input=slice.call(arguments,1),inputIndex=0,inputLength=input.length;inputLength>inputIndex;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&value!==undefined&&(target[key]=$.isPlainObject(value)?$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value):value);return target},$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=slice.call(arguments,1),returnValue=this;return options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options,this.each(isMethodCall?function(){var methodValue,instance=$.data(this,fullName);return instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?(methodValue=instance[options].apply(instance,args),methodValue!==instance&&methodValue!==undefined?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0):$.error("no such method '"+options+"' for "+name+" widget instance"):$.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'")}:function(){var instance=$.data(this,fullName);instance?instance.option(options||{})._init():$.data(this,fullName,new object(options,this))}),returnValue}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=$.widget.extend({},this.options,this._getCreateOptions(),options),this.bindings=$(),this.hoverable=$(),this.focusable=$(),element!==this&&($.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof key)if(options={},parts=key.split("."),key=parts.shift(),parts.length){for(curOption=options[key]=$.widget.extend({},this.options[key]),i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];if(key=parts.pop(),value===undefined)return curOption[key]===undefined?null:curOption[key];curOption[key]=value}else{if(value===undefined)return this.options[key]===undefined?null:this.options[key];options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return this.options[key]=value,"disabled"===key&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;"boolean"!=typeof suppressDisabledCheck&&(handlers=element,element=suppressDisabledCheck,suppressDisabledCheck=!1),handlers?(element=delegateElement=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element,delegateElement=this.widget()),$.each(handlers,function(event,handler){function handlerProxy(){return suppressDisabledCheck||instance.options.disabled!==!0&&!$(this).hasClass("ui-state-disabled")?("string"==typeof handler?instance[handler]:handler).apply(instance,arguments):void 0}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.delegate(selector,eventName,handlerProxy):element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.unbind(eventName).undelegate(eventName)},_delay:function(handler,delay){function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];if(data=data||{},event=$.Event(event),event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===!1||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){"string"==typeof options&&(options={effect:options});var hasOptions,effectName=options?options===!0||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;options=options||{},"number"==typeof options&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(function(next){$(this)[method](),callback&&callback.call(element[0]),next()})}})}(jQuery),function($){var mouseHandled=!1;$(document).mouseup(function(){mouseHandled=!1}),$.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event)}).bind("click."+this.widgetName,function(event){return!0===$.data(event.target,that.widgetName+".preventClickEvent")?($.removeData(event.target,that.widgetName+".preventClickEvent"),event.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(event){if(!mouseHandled){this._mouseStarted&&this._mouseUp(event),this._mouseDownEvent=event;var that=this,btnIsLeft=1===event.which,elIsCancel="string"==typeof this.options.cancel&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:!1;return btnIsLeft&&!elIsCancel&&this._mouseCapture(event)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(event)!==!1,!this._mouseStarted)?(event.preventDefault(),!0):(!0===$.data(event.target,this.widgetName+".preventClickEvent")&&$.removeData(event.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(event){return that._mouseMove(event)},this._mouseUpDelegate=function(event){return that._mouseUp(event)},$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),event.preventDefault(),mouseHandled=!0,!0)):!0}},_mouseMove:function(event){return $.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button?this._mouseUp(event):this._mouseStarted?(this._mouseDrag(event),event.preventDefault()):(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==!1,this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)),!this._mouseStarted)},_mouseUp:function(event){return $(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,event.target===this._mouseDownEvent.target&&$.data(event.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(event)),!1},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function($,undefined){function getOffsets(offsets,width,height){return[parseInt(offsets[0],10)*(rpercent.test(offsets[0])?width/100:1),parseInt(offsets[1],10)*(rpercent.test(offsets[1])?height/100:1)]}function parseCss(element,property){return parseInt($.css(element,property),10)||0}function getDimensions(elem){var raw=elem[0];return 9===raw.nodeType?{width:elem.width(),height:elem.height(),offset:{top:0,left:0}}:$.isWindow(raw)?{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}}:raw.preventDefault?{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}}:{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()}}$.ui=$.ui||{};var cachedScrollbarWidth,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined)return cachedScrollbarWidth;var w1,w2,div=$("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];return $("body").append(div),w1=innerDiv.offsetWidth,div.css("overflow","scroll"),w2=innerDiv.offsetWidth,w1===w2&&(w2=div[0].clientWidth),div.remove(),cachedScrollbarWidth=w1-w2},getScrollInfo:function(within){var overflowX=within.isWindow?"":within.element.css("overflow-x"),overflowY=within.isWindow?"":within.element.css("overflow-y"),hasOverflowX="scroll"===overflowX||"auto"===overflowX&&within.width<within.element[0].scrollWidth,hasOverflowY="scroll"===overflowY||"auto"===overflowY&&within.height<within.element[0].scrollHeight;return{width:hasOverflowX?$.position.scrollbarWidth():0,height:hasOverflowY?$.position.scrollbarWidth():0}},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]);return{element:withinElement,isWindow:isWindow,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow?withinElement.width():withinElement.outerWidth(),height:isWindow?withinElement.height():withinElement.outerHeight()}}},$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};return dimensions=getDimensions(target),target[0].preventDefault&&(options.at="left top"),targetWidth=dimensions.width,targetHeight=dimensions.height,targetOffset=dimensions.offset,basePosition=$.extend({},targetOffset),$.each(["my","at"],function(){var horizontalOffset,verticalOffset,pos=(options[this]||"").split(" ");1===pos.length&&(pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"]),pos[0]=rhorizontal.test(pos[0])?pos[0]:"center",pos[1]=rvertical.test(pos[1])?pos[1]:"center",horizontalOffset=roffset.exec(pos[0]),verticalOffset=roffset.exec(pos[1]),offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0],options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]]}),1===collision.length&&(collision[1]=collision[0]),"right"===options.at[0]?basePosition.left+=targetWidth:"center"===options.at[0]&&(basePosition.left+=targetWidth/2),"bottom"===options.at[1]?basePosition.top+=targetHeight:"center"===options.at[1]&&(basePosition.top+=targetHeight/2),atOffset=getOffsets(offsets.at,targetWidth,targetHeight),basePosition.left+=atOffset[0],basePosition.top+=atOffset[1],this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());"right"===options.my[0]?position.left-=elemWidth:"center"===options.my[0]&&(position.left-=elemWidth/2),"bottom"===options.my[1]?position.top-=elemHeight:"center"===options.my[1]&&(position.top-=elemHeight/2),position.left+=myOffset[0],position.top+=myOffset[1],$.support.offsetFractions||(position.left=round(position.left),position.top=round(position.top)),collisionPosition={marginLeft:marginLeft,marginTop:marginTop},$.each(["left","top"],function(i,dir){$.ui.position[collision[i]]&&$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem})}),options.using&&(using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:0>right?"left":left>0?"right":"center",vertical:0>bottom?"top":top>0?"bottom":"middle"};elemWidth>targetWidth&&abs(left+right)<targetWidth&&(feedback.horizontal="center"),elemHeight>targetHeight&&abs(top+bottom)<targetHeight&&(feedback.vertical="middle"),feedback.important=max(abs(left),abs(right))>max(abs(top),abs(bottom))?"horizontal":"vertical",options.using.call(this,props,feedback)}),elem.offset($.extend(position,{using:using}))})},$.ui.position={fit:{left:function(position,data){var newOverRight,within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset;data.collisionWidth>outerWidth?overLeft>0&&0>=overRight?(newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset,position.left+=overLeft-newOverRight):position.left=overRight>0&&0>=overLeft?withinOffset:overLeft>overRight?withinOffset+outerWidth-data.collisionWidth:withinOffset:overLeft>0?position.left+=overLeft:overRight>0?position.left-=overRight:position.left=max(position.left-collisionPosLeft,position.left)},top:function(position,data){var newOverBottom,within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset;data.collisionHeight>outerHeight?overTop>0&&0>=overBottom?(newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset,position.top+=overTop-newOverBottom):position.top=overBottom>0&&0>=overTop?withinOffset:overTop>overBottom?withinOffset+outerHeight-data.collisionHeight:withinOffset:overTop>0?position.top+=overTop:overBottom>0?position.top-=overBottom:position.top=max(position.top-collisionPosTop,position.top)}},flip:{left:function(position,data){var newOverRight,newOverLeft,within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset="left"===data.my[0]?-data.elemWidth:"right"===data.my[0]?data.elemWidth:0,atOffset="left"===data.at[0]?data.targetWidth:"right"===data.at[0]?-data.targetWidth:0,offset=-2*data.offset[0];0>overLeft?(newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset,(0>newOverRight||newOverRight<abs(overLeft))&&(position.left+=myOffset+atOffset+offset)):overRight>0&&(newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft,(newOverLeft>0||abs(newOverLeft)<overRight)&&(position.left+=myOffset+atOffset+offset))},top:function(position,data){var newOverTop,newOverBottom,within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top="top"===data.my[1],myOffset=top?-data.elemHeight:"bottom"===data.my[1]?data.elemHeight:0,atOffset="top"===data.at[1]?data.targetHeight:"bottom"===data.at[1]?-data.targetHeight:0,offset=-2*data.offset[1];0>overTop?(newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset,position.top+myOffset+atOffset+offset>overTop&&(0>newOverBottom||newOverBottom<abs(overTop))&&(position.top+=myOffset+atOffset+offset)):overBottom>0&&(newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop,position.top+myOffset+atOffset+offset>overBottom&&(newOverTop>0||abs(newOverTop)<overBottom)&&(position.top+=myOffset+atOffset+offset))}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments),$.ui.position.fit.left.apply(this,arguments)},top:function(){$.ui.position.flip.top.apply(this,arguments),$.ui.position.fit.top.apply(this,arguments)}}},function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body"),testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},body&&$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});for(i in testElementStyle)testElement.style[i]=testElementStyle[i];testElement.appendChild(div),testElementParent=body||document.documentElement,testElementParent.insertBefore(testElement,testElementParent.firstChild),div.style.cssText="position: absolute; left: 10.7432222px;",offsetLeft=$(div).offset().left,$.support.offsetFractions=offsetLeft>10&&11>offsetLeft,testElement.innerHTML="",testElementParent.removeChild(testElement)}()}(jQuery),function($){$.widget("ui.draggable",$.ui.mouse,{version:"1.10.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(event){var o=this.options;return this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(event),this.handle?($(o.iframeFix===!0?"iframe":o.iframeFix).each(function(){$("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css($(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(event){var o=this.options;return this.helper=this._createHelper(event),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),$.ui.ddmanager&&($.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(event),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),o.containment&&this._setContainment(),this._trigger("start",event)===!1?(this._clear(),!1):(this._cacheHelperProportions(),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this._mouseDrag(event,!0),$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,event),!0)},_mouseDrag:function(event,noPropagation){if(this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute"),!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===!1)return this._mouseUp({}),!1;this.position=ui.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),!1},_mouseStop:function(event){var element,that=this,elementInDom=!1,dropped=!1;for($.ui.ddmanager&&!this.options.dropBehaviour&&(dropped=$.ui.ddmanager.drop(this,event)),this.dropped&&(dropped=this.dropped,this.dropped=!1),element=this.element[0];element&&(element=element.parentNode);)element===document&&(elementInDom=!0);
return elementInDom||"original"!==this.options.helper?("invalid"===this.options.revert&&!dropped||"valid"===this.options.revert&&dropped||this.options.revert===!0||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped)?$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){that._trigger("stop",event)!==!1&&that._clear()}):this._trigger("stop",event)!==!1&&this._clear(),!1):!1},_mouseUp:function(event){return $("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,event),$.ui.mouse.prototype._mouseUp.call(this,event)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(event){var handle=this.options.handle&&$(this.options.handle,this.element).length?!1:!0;return $(this.options.handle,this.element).find("*").addBack().each(function(){this===event.target&&(handle=!0)}),handle},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):"clone"===o.helper?this.element.clone().removeAttr("id"):this.element;return helper.parents("body").length||helper.appendTo("parent"===o.appendTo?this.element[0].parentNode:o.appendTo),helper[0]===this.element[0]||/(fixed|absolute)/.test(helper.css("position"))||helper.css("position","absolute"),helper},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&$.ui.ie)&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var p=this.element.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var over,c,ce,o=this.options;if("parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=["document"===o.containment?0:$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===o.containment?0:$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===o.containment?0:$(window).scrollLeft())+$("document"===o.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===o.containment?0:$(window).scrollTop())+($("document"===o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||o.containment.constructor===Array)o.containment.constructor===Array&&(this.containment=o.containment);else{if(c=$(o.containment),ce=c[0],!ce)return;over="hidden"!==$(ce).css("overflow"),this.containment=[(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0),(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0),(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"===d?1:-1,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod}},_generatePosition:function(event){var containment,co,top,left,o=this.options,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName),pageX=event.pageX,pageY=event.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(co=this.relative_container.offset(),containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top]):containment=this.containment,event.pageX-this.offset.click.left<containment[0]&&(pageX=containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<containment[1]&&(pageY=containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>containment[2]&&(pageX=containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>containment[3]&&(pageY=containment[3]+this.offset.click.top)),o.grid&&(top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,pageY=containment?top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3]?top:top-this.offset.click.top>=containment[1]?top-o.grid[1]:top+o.grid[1]:top,left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,pageX=containment?left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2]?left:left-this.offset.click.left>=containment[0]?left-o.grid[0]:left+o.grid[0]:left)),{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(type,event,ui){return ui=ui||this._uiHash(),$.ui.plugin.call(this,type,[event,ui]),"drag"===type&&(this.positionAbs=this._convertPositionTo("absolute")),$.Widget.prototype._trigger.call(this,type,event,ui)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui){var inst=$(this).data("ui-draggable"),o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[],$(o.connectToSortable).each(function(){var sortable=$.data(this,"ui-sortable");sortable&&!sortable.options.disabled&&(inst.sortables.push({instance:sortable,shouldRevert:sortable.options.revert}),sortable.refreshPositions(),sortable._trigger("activate",event,uiSortable))})},stop:function(event,ui){var inst=$(this).data("ui-draggable"),uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,function(){this.instance.isOver?(this.instance.isOver=0,inst.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(event),this.instance.options.helper=this.instance.options._helper,"original"===inst.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",event,uiSortable))})},drag:function(event,ui){var inst=$(this).data("ui-draggable"),that=this;$.each(inst.sortables,function(){var innermostIntersecting=!1,thisSortable=this;this.instance.positionAbs=inst.positionAbs,this.instance.helperProportions=inst.helperProportions,this.instance.offset.click=inst.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(innermostIntersecting=!0,$.each(inst.sortables,function(){return this.instance.positionAbs=inst.positionAbs,this.instance.helperProportions=inst.helperProportions,this.instance.offset.click=inst.offset.click,this!==thisSortable&&this.instance._intersectsWith(this.instance.containerCache)&&$.ui.contains(thisSortable.instance.element[0],this.instance.element[0])&&(innermostIntersecting=!1),innermostIntersecting})),innermostIntersecting?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=$(that).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return ui.helper[0]},event.target=this.instance.currentItem[0],this.instance._mouseCapture(event,!0),this.instance._mouseStart(event,!0,!0),this.instance.offset.click.top=inst.offset.click.top,this.instance.offset.click.left=inst.offset.click.left,this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=inst.offset.parent.top-this.instance.offset.parent.top,inst._trigger("toSortable",event),inst.dropped=this.instance.element,inst.currentItem=inst.element,this.instance.fromOutside=inst),this.instance.currentItem&&this.instance._mouseDrag(event)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",event,this.instance._uiHash(this.instance)),this.instance._mouseStop(event,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),inst._trigger("fromSortable",event),inst.dropped=!1)})}}),$.ui.plugin.add("draggable","cursor",{start:function(){var t=$("body"),o=$(this).data("ui-draggable").options;t.css("cursor")&&(o._cursor=t.css("cursor")),t.css("cursor",o.cursor)},stop:function(){var o=$(this).data("ui-draggable").options;o._cursor&&$("body").css("cursor",o._cursor)}}),$.ui.plugin.add("draggable","opacity",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("ui-draggable").options;t.css("opacity")&&(o._opacity=t.css("opacity")),t.css("opacity",o.opacity)},stop:function(event,ui){var o=$(this).data("ui-draggable").options;o._opacity&&$(ui.helper).css("opacity",o._opacity)}}),$.ui.plugin.add("draggable","scroll",{start:function(){var i=$(this).data("ui-draggable");i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName&&(i.overflowOffset=i.scrollParent.offset())},drag:function(event){var i=$(this).data("ui-draggable"),o=i.options,scrolled=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity?i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed:event.pageY-i.overflowOffset.top<o.scrollSensitivity&&(i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity?i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed:event.pageX-i.overflowOffset.left<o.scrollSensitivity&&(i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)))),scrolled!==!1&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(i,event)}}),$.ui.plugin.add("draggable","snap",{start:function(){var i=$(this).data("ui-draggable"),o=i.options;i.snapElements=[],$(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var $t=$(this),$o=$t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left})})},drag:function(event,ui){var ts,bs,ls,rs,l,r,t,b,i,first,inst=$(this).data("ui-draggable"),o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--)l=inst.snapElements[i].left,r=l+inst.snapElements[i].width,t=inst.snapElements[i].top,b=t+inst.snapElements[i].height,x1>l-d&&r+d>x1&&y1>t-d&&b+d>y1||x1>l-d&&r+d>x1&&y2>t-d&&b+d>y2||x2>l-d&&r+d>x2&&y1>t-d&&b+d>y1||x2>l-d&&r+d>x2&&y2>t-d&&b+d>y2?("inner"!==o.snapMode&&(ts=Math.abs(t-y2)<=d,bs=Math.abs(b-y1)<=d,ls=Math.abs(l-x2)<=d,rs=Math.abs(r-x1)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left)),first=ts||bs||ls||rs,"outer"!==o.snapMode&&(ts=Math.abs(t-y1)<=d,bs=Math.abs(b-y2)<=d,ls=Math.abs(l-x1)<=d,rs=Math.abs(r-x2)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-inst.margins.left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left)),!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)&&inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=ts||bs||ls||rs||first):(inst.snapElements[i].snapping&&inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=!1)}}),$.ui.plugin.add("draggable","stack",{start:function(){var min,o=$(this).data("ui-draggable").options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});group.length&&(min=parseInt(group[0].style.zIndex,10)||0,$(group).each(function(i){this.style.zIndex=min+i}),this[0].style.zIndex=min+group.length)}}),$.ui.plugin.add("draggable","zIndex",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("ui-draggable").options;t.css("zIndex")&&(o._zIndex=t.css("zIndex")),t.css("zIndex",o.zIndex)},stop:function(event,ui){var o=$(this).data("ui-draggable").options;o._zIndex&&$(ui.helper).css("zIndex",o._zIndex)}})}(jQuery),function($){function isOverAxis(x,reference,size){return x>reference&&reference+size>x}$.widget("ui.droppable",{version:"1.10.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var o=this.options,accept=o.accept;this.isover=!1,this.isout=!0,this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},$.ui.ddmanager.droppables[o.scope]=$.ui.ddmanager.droppables[o.scope]||[],$.ui.ddmanager.droppables[o.scope].push(this),o.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var i=0,drop=$.ui.ddmanager.droppables[this.options.scope];i<drop.length;i++)drop[i]===this&&drop.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(key,value){"accept"===key&&(this.accept=$.isFunction(value)?value:function(d){return d.is(value)}),$.Widget.prototype._setOption.apply(this,arguments)},_activate:function(event){var draggable=$.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),draggable&&this._trigger("activate",event,this.ui(draggable))},_deactivate:function(event){var draggable=$.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),draggable&&this._trigger("deactivate",event,this.ui(draggable))},_over:function(event){var draggable=$.ui.ddmanager.current;draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",event,this.ui(draggable)))},_out:function(event){var draggable=$.ui.ddmanager.current;draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",event,this.ui(draggable)))},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current,childrenIntersection=!1;return draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var inst=$.data(this,"ui-droppable");return inst.options.greedy&&!inst.options.disabled&&inst.options.scope===draggable.options.scope&&inst.accept.call(inst.element[0],draggable.currentItem||draggable.element)&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance)?(childrenIntersection=!0,!1):void 0}),childrenIntersection?!1:this.accept.call(this.element[0],draggable.currentItem||draggable.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",event,this.ui(draggable)),this.element):!1):!1},ui:function(c){return{draggable:c.currentItem||c.element,helper:c.helper,position:c.position,offset:c.positionAbs}}}),$.ui.intersect=function(draggable,droppable,toleranceMode){if(!droppable.offset)return!1;var draggableLeft,draggableTop,x1=(draggable.positionAbs||draggable.position.absolute).left,x2=x1+draggable.helperProportions.width,y1=(draggable.positionAbs||draggable.position.absolute).top,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,r=l+droppable.proportions.width,t=droppable.offset.top,b=t+droppable.proportions.height;switch(toleranceMode){case"fit":return x1>=l&&r>=x2&&y1>=t&&b>=y2;case"intersect":return l<x1+draggable.helperProportions.width/2&&x2-draggable.helperProportions.width/2<r&&t<y1+draggable.helperProportions.height/2&&y2-draggable.helperProportions.height/2<b;case"pointer":return draggableLeft=(draggable.positionAbs||draggable.position.absolute).left+(draggable.clickOffset||draggable.offset.click).left,draggableTop=(draggable.positionAbs||draggable.position.absolute).top+(draggable.clickOffset||draggable.offset.click).top,isOverAxis(draggableTop,t,droppable.proportions.height)&&isOverAxis(draggableLeft,l,droppable.proportions.width);case"touch":return(y1>=t&&b>=y1||y2>=t&&b>=y2||t>y1&&y2>b)&&(x1>=l&&r>=x1||x2>=l&&r>=x2||l>x1&&x2>r);default:return!1}},$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,event){var i,j,m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(i=0;i<m.length;i++)if(!(m[i].options.disabled||t&&!m[i].accept.call(m[i].element[0],t.currentItem||t.element))){for(j=0;j<list.length;j++)if(list[j]===m[i].element[0]){m[i].proportions.height=0;continue droppablesLoop}m[i].visible="none"!==m[i].element.css("display"),m[i].visible&&("mousedown"===type&&m[i]._activate.call(m[i],event),m[i].offset=m[i].element.offset(),m[i].proportions={width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight})}},drop:function(draggable,event){var dropped=!1;return $.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance)&&(dropped=this._drop.call(this,event)||dropped),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,event)))}),dropped},dragStart:function(draggable,event){draggable.element.parentsUntil("body").bind("scroll.droppable",function(){draggable.options.refreshPositions||$.ui.ddmanager.prepareOffsets(draggable,event)})},drag:function(draggable,event){draggable.options.refreshPositions&&$.ui.ddmanager.prepareOffsets(draggable,event),$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var parentInstance,scope,parent,intersects=$.ui.intersect(draggable,this,this.options.tolerance),c=!intersects&&this.isover?"isout":intersects&&!this.isover?"isover":null;c&&(this.options.greedy&&(scope=this.options.scope,parent=this.element.parents(":data(ui-droppable)").filter(function(){return $.data(this,"ui-droppable").options.scope===scope}),parent.length&&(parentInstance=$.data(parent[0],"ui-droppable"),parentInstance.greedyChild="isover"===c)),parentInstance&&"isover"===c&&(parentInstance.isover=!1,parentInstance.isout=!0,parentInstance._out.call(parentInstance,event)),this[c]=!0,this["isout"===c?"isover":"isout"]=!1,this["isover"===c?"_over":"_out"].call(this,event),parentInstance&&"isout"===c&&(parentInstance.isout=!1,parentInstance.isover=!0,parentInstance._over.call(parentInstance,event)))}})},dragStop:function(draggable,event){draggable.element.parentsUntil("body").unbind("scroll.droppable"),draggable.options.refreshPositions||$.ui.ddmanager.prepareOffsets(draggable,event)}}}(jQuery),function($){function num(v){return parseInt(v,10)||0}function isNumber(value){return!isNaN(parseInt(value,10))}$.widget("ui.resizable",$.ui.mouse,{version:"1.10.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var n,i,handle,axis,hname,that=this,o=this.options;if(this.element.addClass("ui-resizable"),$.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||($(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)handle=$.trim(n[i]),hname="ui-resizable-"+handle,axis=$("<div class='ui-resizable-handle "+hname+"'></div>"),axis.css({zIndex:o.zIndex}),"se"===handle&&axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[handle]=".ui-resizable-"+handle,this.element.append(axis);this._renderAxis=function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=$(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(axis=$(this.handles[i],this.element),padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth(),padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),target.css(padPos,padWrapper),this._proportionallyResize()),$(this.handles[i]).length},this._renderAxis(this.element),this._handles=$(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){that.resizing||(this.className&&(axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),that.axis=axis&&axis[1]?axis[1]:"se")}),o.autoHide&&(this._handles.hide(),$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){o.disabled||($(this).removeClass("ui-resizable-autohide"),that._handles.show())}).mouseleave(function(){o.disabled||that.resizing||($(this).addClass("ui-resizable-autohide"),that._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var wrapper,_destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(_destroy(this.element),wrapper=this.element,this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper),wrapper.remove()),this.originalElement.css("resize",this.originalResizeStyle),_destroy(this.originalElement),this},_mouseCapture:function(event){var i,handle,capture=!1;for(i in this.handles)handle=$(this.handles[i])[0],(handle===event.target||$.contains(handle,event.target))&&(capture=!0);return!this.options.disabled&&capture},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,iniPos=this.element.position(),el=this.element;return this.resizing=!0,/absolute/.test(el.css("position"))?el.css({position:"absolute",top:el.css("top"),left:el.css("left")}):el.is(".ui-draggable")&&el.css({position:"absolute",top:iniPos.top,left:iniPos.left}),this._renderProxy(),curleft=num(this.helper.css("left")),curtop=num(this.helper.css("top")),o.containment&&(curleft+=$(o.containment).scrollLeft()||0,curtop+=$(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:curleft,top:curtop},this.size=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()},this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()},this.originalPosition={left:curleft,top:curtop},this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()},this.originalMousePosition={left:event.pageX,top:event.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,cursor=$(".ui-resizable-"+this.axis).css("cursor"),$("body").css("cursor","auto"===cursor?this.axis+"-resize":cursor),el.addClass("ui-resizable-resizing"),this._propagate("start",event),!0},_mouseDrag:function(event){var data,el=this.helper,props={},smp=this.originalMousePosition,a=this.axis,prevTop=this.position.top,prevLeft=this.position.left,prevWidth=this.size.width,prevHeight=this.size.height,dx=event.pageX-smp.left||0,dy=event.pageY-smp.top||0,trigger=this._change[a];return trigger?(data=trigger.apply(this,[event,dx,dy]),this._updateVirtualBoundaries(event.shiftKey),(this._aspectRatio||event.shiftKey)&&(data=this._updateRatio(data,event)),data=this._respectSize(data,event),this._updateCache(data),this._propagate("resize",event),this.position.top!==prevTop&&(props.top=this.position.top+"px"),this.position.left!==prevLeft&&(props.left=this.position.left+"px"),this.size.width!==prevWidth&&(props.width=this.size.width+"px"),this.size.height!==prevHeight&&(props.height=this.size.height+"px"),el.css(props),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),$.isEmptyObject(props)||this._trigger("resize",event,this.ui()),!1):!1},_mouseStop:function(event){this.resizing=!1;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;return this._helper&&(pr=this._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,s={width:that.helper.width()-soffsetw,height:that.helper.height()-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null,o.animate||this.element.css($.extend(s,{top:top,left:left})),that.helper.height(that.size.height),that.helper.width(that.size.width),this._helper&&!o.animate&&this._proportionallyResize()),$("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",event),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:isNumber(o.minWidth)?o.minWidth:0,maxWidth:isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:isNumber(o.minHeight)?o.minHeight:0,maxHeight:isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||forceAspectRatio)&&(pMinWidth=b.minHeight*this.aspectRatio,pMinHeight=b.minWidth/this.aspectRatio,pMaxWidth=b.maxHeight*this.aspectRatio,pMaxHeight=b.maxWidth/this.aspectRatio,pMinWidth>b.minWidth&&(b.minWidth=pMinWidth),pMinHeight>b.minHeight&&(b.minHeight=pMinHeight),pMaxWidth<b.maxWidth&&(b.maxWidth=pMaxWidth),pMaxHeight<b.maxHeight&&(b.maxHeight=pMaxHeight)),this._vBoundaries=b
},_updateCache:function(data){this.offset=this.helper.offset(),isNumber(data.left)&&(this.position.left=data.left),isNumber(data.top)&&(this.position.top=data.top),isNumber(data.height)&&(this.size.height=data.height),isNumber(data.width)&&(this.size.width=data.width)},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;return isNumber(data.height)?data.width=data.height*this.aspectRatio:isNumber(data.width)&&(data.height=data.width/this.aspectRatio),"sw"===a&&(data.left=cpos.left+(csize.width-data.width),data.top=null),"nw"===a&&(data.top=cpos.top+(csize.height-data.height),data.left=cpos.left+(csize.width-data.width)),data},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=isNumber(data.width)&&o.maxWidth&&o.maxWidth<data.width,ismaxh=isNumber(data.height)&&o.maxHeight&&o.maxHeight<data.height,isminw=isNumber(data.width)&&o.minWidth&&o.minWidth>data.width,isminh=isNumber(data.height)&&o.minHeight&&o.minHeight>data.height,dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);return isminw&&(data.width=o.minWidth),isminh&&(data.height=o.minHeight),ismaxw&&(data.width=o.maxWidth),ismaxh&&(data.height=o.maxHeight),isminw&&cw&&(data.left=dw-o.minWidth),ismaxw&&cw&&(data.left=dw-o.maxWidth),isminh&&ch&&(data.top=dh-o.minHeight),ismaxh&&ch&&(data.top=dh-o.maxHeight),data.width||data.height||data.left||!data.top?data.width||data.height||data.top||!data.left||(data.left=null):data.top=null,data},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var i,j,borders,paddings,prel,element=this.helper||this.element;for(i=0;i<this._proportionallyResizeElements.length;i++){if(prel=this._proportionallyResizeElements[i],!this.borderDif)for(this.borderDif=[],borders=[prel.css("borderTopWidth"),prel.css("borderRightWidth"),prel.css("borderBottomWidth"),prel.css("borderLeftWidth")],paddings=[prel.css("paddingTop"),prel.css("paddingRight"),prel.css("paddingBottom"),prel.css("paddingLeft")],j=0;j<borders.length;j++)this.borderDif[j]=(parseInt(borders[j],10)||0)+(parseInt(paddings[j],10)||0);prel.css({height:element.height()-this.borderDif[0]-this.borderDif[2]||0,width:element.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset(),this._helper?(this.helper=this.helper||$("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(event,dx){return{width:this.originalSize.width+dx}},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx}},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy}},s:function(event,dx,dy){return{height:this.originalSize.height+dy}},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]),"resize"!==n&&this._trigger(n,event,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),$.ui.plugin.add("resizable","animate",{stop:function(event){var that=$(this).data("ui-resizable"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:that.size.width-soffsetw,height:that.size.height-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};pr&&pr.length&&$(pr[0]).css({width:data.width,height:data.height}),that._updateCache(data),that._propagate("resize",event)}})}}),$.ui.plugin.add("resizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=$(this).data("ui-resizable"),o=that.options,el=that.element,oc=o.containment,ce=oc instanceof $?oc.get(0):/parent/.test(oc)?el.parent().get(0):oc;ce&&(that.containerElement=$(ce),/document/.test(oc)||oc===document?(that.containerOffset={left:0,top:0},that.containerPosition={left:0,top:0},that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight}):(element=$(ce),p=[],$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=num(element.css("padding"+name))}),that.containerOffset=element.offset(),that.containerPosition=element.position(),that.containerSize={height:element.innerHeight()-p[3],width:element.innerWidth()-p[1]},co=that.containerOffset,ch=that.containerSize.height,cw=that.containerSize.width,width=$.ui.hasScroll(ce,"left")?ce.scrollWidth:cw,height=$.ui.hasScroll(ce)?ce.scrollHeight:ch,that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height}))},resize:function(event){var woset,hoset,isParent,isOffsetRelative,that=$(this).data("ui-resizable"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement;ce[0]!==document&&/static/.test(ce.css("position"))&&(cop=co),cp.left<(that._helper?co.left:0)&&(that.size.width=that.size.width+(that._helper?that.position.left-co.left:that.position.left-cop.left),pRatio&&(that.size.height=that.size.width/that.aspectRatio),that.position.left=o.helper?co.left:0),cp.top<(that._helper?co.top:0)&&(that.size.height=that.size.height+(that._helper?that.position.top-co.top:that.position.top),pRatio&&(that.size.width=that.size.height*that.aspectRatio),that.position.top=that._helper?co.top:0),that.offset.left=that.parentData.left+that.position.left,that.offset.top=that.parentData.top+that.position.top,woset=Math.abs((that._helper?that.offset.left-cop.left:that.offset.left-cop.left)+that.sizeDiff.width),hoset=Math.abs((that._helper?that.offset.top-cop.top:that.offset.top-co.top)+that.sizeDiff.height),isParent=that.containerElement.get(0)===that.element.parent().get(0),isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position")),isParent&&isOffsetRelative&&(woset-=that.parentData.left),woset+that.size.width>=that.parentData.width&&(that.size.width=that.parentData.width-woset,pRatio&&(that.size.height=that.size.width/that.aspectRatio)),hoset+that.size.height>=that.parentData.height&&(that.size.height=that.parentData.height-hoset,pRatio&&(that.size.width=that.size.height*that.aspectRatio))},stop:function(){var that=$(this).data("ui-resizable"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;that._helper&&!o.animate&&/relative/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h}),that._helper&&!o.animate&&/static/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h})}}),$.ui.plugin.add("resizable","alsoResize",{start:function(){var that=$(this).data("ui-resizable"),o=that.options,_store=function(exp){$(exp).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)})})};"object"!=typeof o.alsoResize||o.alsoResize.parentNode?_store(o.alsoResize):o.alsoResize.length?(o.alsoResize=o.alsoResize[0],_store(o.alsoResize)):$.each(o.alsoResize,function(exp){_store(exp)})},resize:function(event,ui){var that=$(this).data("ui-resizable"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:that.size.height-os.height||0,width:that.size.width-os.width||0,top:that.position.top-op.top||0,left:that.position.left-op.left||0},_alsoResize=function(exp,c){$(exp).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=c&&c.length?c:el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);sum&&sum>=0&&(style[prop]=sum||null)}),el.css(style)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?_alsoResize(o.alsoResize):$.each(o.alsoResize,function(exp,c){_alsoResize(exp,c)})},stop:function(){$(this).removeData("resizable-alsoresize")}}),$.ui.plugin.add("resizable","ghost",{start:function(){var that=$(this).data("ui-resizable"),o=that.options,cs=that.size;that.ghost=that.originalElement.clone(),that.ghost.css({opacity:.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof o.ghost?o.ghost:""),that.ghost.appendTo(that.helper)},resize:function(){var that=$(this).data("ui-resizable");that.ghost&&that.ghost.css({position:"relative",height:that.size.height,width:that.size.width})},stop:function(){var that=$(this).data("ui-resizable");that.ghost&&that.helper&&that.helper.get(0).removeChild(that.ghost.get(0))}}),$.ui.plugin.add("resizable","grid",{resize:function(){var that=$(this).data("ui-resizable"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid="number"==typeof o.grid?[o.grid,o.grid]:o.grid,gridX=grid[0]||1,gridY=grid[1]||1,ox=Math.round((cs.width-os.width)/gridX)*gridX,oy=Math.round((cs.height-os.height)/gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&o.maxWidth<newWidth,isMaxHeight=o.maxHeight&&o.maxHeight<newHeight,isMinWidth=o.minWidth&&o.minWidth>newWidth,isMinHeight=o.minHeight&&o.minHeight>newHeight;o.grid=grid,isMinWidth&&(newWidth+=gridX),isMinHeight&&(newHeight+=gridY),isMaxWidth&&(newWidth-=gridX),isMaxHeight&&(newHeight-=gridY),/^(se|s|e)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight):/^(ne)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight,that.position.top=op.top-oy):/^(sw)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight,that.position.left=op.left-ox):(that.size.width=newWidth,that.size.height=newHeight,that.position.top=op.top-oy,that.position.left=op.left-ox)}})}(jQuery),function($){$.widget("ui.selectable",$.ui.mouse,{version:"1.10.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var selectees,that=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){selectees=$(that.options.filter,that.element[0]),selectees.addClass("ui-selectee"),selectees.each(function(){var $this=$(this),pos=$this.offset();$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:!1,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=selectees.addClass("ui-selectee"),this._mouseInit(),this.helper=$("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(event){var that=this,options=this.options;this.opos=[event.pageX,event.pageY],this.options.disabled||(this.selectees=$(options.filter,this.element[0]),this._trigger("start",event),$(options.appendTo).append(this.helper),this.helper.css({left:event.pageX,top:event.pageY,width:0,height:0}),options.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var selectee=$.data(this,"selectable-item");selectee.startselected=!0,event.metaKey||event.ctrlKey||(selectee.$element.removeClass("ui-selected"),selectee.selected=!1,selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0,that._trigger("unselecting",event,{unselecting:selectee.element}))}),$(event.target).parents().addBack().each(function(){var doSelect,selectee=$.data(this,"selectable-item");return selectee?(doSelect=!event.metaKey&&!event.ctrlKey||!selectee.$element.hasClass("ui-selected"),selectee.$element.removeClass(doSelect?"ui-unselecting":"ui-selected").addClass(doSelect?"ui-selecting":"ui-unselecting"),selectee.unselecting=!doSelect,selectee.selecting=doSelect,selectee.selected=doSelect,doSelect?that._trigger("selecting",event,{selecting:selectee.element}):that._trigger("unselecting",event,{unselecting:selectee.element}),!1):void 0}))},_mouseDrag:function(event){if(this.dragged=!0,!this.options.disabled){var tmp,that=this,options=this.options,x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;return x1>x2&&(tmp=x2,x2=x1,x1=tmp),y1>y2&&(tmp=y2,y2=y1,y1=tmp),this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1}),this.selectees.each(function(){var selectee=$.data(this,"selectable-item"),hit=!1;selectee&&selectee.element!==that.element[0]&&("touch"===options.tolerance?hit=!(selectee.left>x2||selectee.right<x1||selectee.top>y2||selectee.bottom<y1):"fit"===options.tolerance&&(hit=selectee.left>x1&&selectee.right<x2&&selectee.top>y1&&selectee.bottom<y2),hit?(selectee.selected&&(selectee.$element.removeClass("ui-selected"),selectee.selected=!1),selectee.unselecting&&(selectee.$element.removeClass("ui-unselecting"),selectee.unselecting=!1),selectee.selecting||(selectee.$element.addClass("ui-selecting"),selectee.selecting=!0,that._trigger("selecting",event,{selecting:selectee.element}))):(selectee.selecting&&((event.metaKey||event.ctrlKey)&&selectee.startselected?(selectee.$element.removeClass("ui-selecting"),selectee.selecting=!1,selectee.$element.addClass("ui-selected"),selectee.selected=!0):(selectee.$element.removeClass("ui-selecting"),selectee.selecting=!1,selectee.startselected&&(selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0),that._trigger("unselecting",event,{unselecting:selectee.element}))),selectee.selected&&(event.metaKey||event.ctrlKey||selectee.startselected||(selectee.$element.removeClass("ui-selected"),selectee.selected=!1,selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0,that._trigger("unselecting",event,{unselecting:selectee.element})))))}),!1}},_mouseStop:function(event){var that=this;return this.dragged=!1,$(".ui-unselecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-unselecting"),selectee.unselecting=!1,selectee.startselected=!1,that._trigger("unselected",event,{unselected:selectee.element})}),$(".ui-selecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-selecting").addClass("ui-selected"),selectee.selecting=!1,selectee.selected=!0,selectee.startselected=!0,that._trigger("selected",event,{selected:selectee.element})}),this._trigger("stop",event),this.helper.remove(),!1}})}(jQuery),function($){function isOverAxis(x,reference,size){return x>reference&&reference+size>x}$.widget("ui.sortable",$.ui.mouse,{version:"1.10.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var o=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===o.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)this.items[i].item.removeData(this.widgetName+"-item");return this},_setOption:function(key,value){"disabled"===key?(this.options[key]=value,this.widget().toggleClass("ui-sortable-disabled",!!value)):$.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(event,overrideHandle){var currentItem=null,validHandle=!1,that=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(event),$(event.target).parents().each(function(){return $.data(this,that.widgetName+"-item")===that?(currentItem=$(this),!1):void 0}),$.data(event.target,that.widgetName+"-item")===that&&(currentItem=$(event.target)),currentItem&&(!this.options.handle||overrideHandle||($(this.options.handle,currentItem).find("*").addBack().each(function(){this===event.target&&(validHandle=!0)}),validHandle))?(this.currentItem=currentItem,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(event,overrideHandle,noActivation){var i,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(event),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(event),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&($("body").css("cursor")&&(this._storedCursor=$("body").css("cursor")),$("body").css("cursor",o.cursor)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",event,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!noActivation)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",event,this._uiHash(this));return $.ui.ddmanager&&($.ui.ddmanager.current=this),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(event),!0},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options,scrolled=!1;for(this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed:event.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed:event.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed)),event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed))),scrolled!==!1&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(item=this.items[i],itemElement=item.item[0],intersection=this._intersectsWithPointer(item),intersection&&item.instance===this.currentContainer&&itemElement!==this.currentItem[0]&&this.placeholder[1===intersection?"next":"prev"]()[0]!==itemElement&&!$.contains(this.placeholder[0],itemElement)&&("semi-dynamic"===this.options.type?!$.contains(this.element[0],itemElement):!0)){if(this.direction=1===intersection?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(item))break;this._rearrange(event,item),this._trigger("change",event,this._uiHash());break}return this._contactContainers(event),$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),this._trigger("sort",event,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(event,noPropagation){if(event){if($.ui.ddmanager&&!this.options.dropBehaviour&&$.ui.ddmanager.drop(this,event),this.options.revert){var that=this,cur=this.placeholder.offset();this.reverting=!0,$(this.helper).animate({left:cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft),top:cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){that._clear(event)})}else this._clear(event,noPropagation);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,this._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,this._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),$.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?$(this.domPosition.prev).after(this.currentItem):$(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];return o=o||{},$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||/(.+)[\-=_](.+)/);res&&str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]))}),!str.length&&o.key&&str.push(o.key+"="),str.join("&")},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];return o=o||{},items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"")}),ret},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElement=y1+dyClick>t&&b>y1+dyClick&&x1+dxClick>l&&r>x1+dxClick;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"]?isOverElement:l<x1+this.helperProportions.width/2&&x2-this.helperProportions.width/2<r&&t<y1+this.helperProportions.height/2&&y2-this.helperProportions.height/2<b},_intersectsWithPointer:function(item){var isOverElementHeight="x"===this.options.axis||isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth="y"===this.options.axis||isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return isOverElement?this.floating?horizontalDirection&&"right"===horizontalDirection||"down"===verticalDirection?2:1:verticalDirection&&("down"===verticalDirection?2:1):!1},_intersectsWithSides:function(item){var isOverBottomHalf=isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+item.height/2,item.height),isOverRightHalf=isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+item.width/2,item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return this.floating&&horizontalDirection?"right"===horizontalDirection&&isOverRightHalf||"left"===horizontalDirection&&!isOverRightHalf:verticalDirection&&("down"===verticalDirection&&isOverBottomHalf||"up"===verticalDirection&&!isOverBottomHalf)},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return 0!==delta&&(delta>0?"down":"up")},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return 0!==delta&&(delta>0?"right":"left")},refresh:function(event){return this._refreshItems(event),this.refreshPositions(),this},_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith},_getItemsAsjQuery:function(connected){var i,j,cur,inst,items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected)for(i=connectWith.length-1;i>=0;i--)for(cur=$(connectWith[i]),j=cur.length-1;j>=0;j--)inst=$.data(cur[j],this.widgetFullName),inst&&inst!==this&&!inst.options.disabled&&queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst]);for(queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=queries.length-1;i>=0;i--)queries[i][0].each(function(){items.push(this)});return $(items)},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(item){for(var j=0;j<list.length;j++)if(list[j]===item.item[0])return!1;return!0})},_refreshItems:function(event){this.items=[],this.containers=[this];var i,j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready)for(i=connectWith.length-1;i>=0;i--)for(cur=$(connectWith[i]),j=cur.length-1;j>=0;j--)inst=$.data(cur[j],this.widgetFullName),inst&&inst!==this&&!inst.options.disabled&&(queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]),this.containers.push(inst));for(i=queries.length-1;i>=0;i--)for(targetData=queries[i][1],_queries=queries[i][0],j=0,queriesLength=_queries.length;queriesLength>j;j++)item=$(_queries[j]),item.data(this.widgetName+"-item",targetData),items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0})},refreshPositions:function(fast){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,item,t,p;for(i=this.items.length-1;i>=0;i--)item=this.items[i],item.instance!==this.currentContainer&&this.currentContainer&&item.item[0]!==this.currentItem[0]||(t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item,fast||(item.width=t.outerWidth(),item.height=t.outerHeight()),p=t.offset(),item.left=p.left,item.top=p.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)p=this.containers[i].element.offset(),this.containers[i].containerCache.left=p.left,this.containers[i].containerCache.top=p.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(that){that=that||this;var className,o=that.options;o.placeholder&&o.placeholder.constructor!==String||(className=o.placeholder,o.placeholder={element:function(){var el=$(document.createElement(that.currentItem[0].nodeName)).addClass(className||that.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return className||(el.style.visibility="hidden"),el},update:function(container,p){(!className||o.forcePlaceholderSize)&&(p.height()||p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10)),p.width()||p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10)))}}),that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem)),that.currentItem.after(that.placeholder),o.placeholder.update(that,that.placeholder)},_contactContainers:function(event){var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,base,cur,nearBottom,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--)if(!$.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0]))continue;innermostContainer=this.containers[i],innermostIndex=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",event,this._uiHash(this)),this.containers[i].containerCache.over=0);if(innermostContainer)if(1===this.containers.length)this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1;else{for(dist=1e4,itemWithLeastDistance=null,posProperty=this.containers[innermostIndex].floating?"left":"top",sizeProperty=this.containers[innermostIndex].floating?"width":"height",base=this.positionAbs[posProperty]+this.offset.click[posProperty],j=this.items.length-1;j>=0;j--)$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])&&this.items[j].item[0]!==this.currentItem[0]&&(cur=this.items[j].item.offset()[posProperty],nearBottom=!1,Math.abs(cur-base)>Math.abs(cur+this.items[j][sizeProperty]-base)&&(nearBottom=!0,cur+=this.items[j][sizeProperty]),Math.abs(cur-base)<dist&&(dist=Math.abs(cur-base),itemWithLeastDistance=this.items[j],this.direction=nearBottom?"up":"down"));
if(!itemWithLeastDistance&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[innermostIndex],itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,!0):this._rearrange(event,null,this.containers[innermostIndex].element,!0),this._trigger("change",event,this._uiHash()),this.containers[innermostIndex]._trigger("change",event,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):"clone"===o.helper?this.currentItem.clone():this.currentItem;return helper.parents("body").length||$("parent"!==o.appendTo?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]),helper[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!helper[0].style.width||o.forceHelperSize)&&helper.width(this.currentItem.width()),(!helper[0].style.height||o.forceHelperSize)&&helper.height(this.currentItem.height()),helper},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&$.ui.ie)&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var ce,co,over,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,$("document"===o.containment?document:window).width()-this.helperProportions.width-this.margins.left,($("document"===o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(ce=$(o.containment)[0],co=$(o.containment).offset(),over="hidden"!==$(ce).css("overflow"),this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"===d?1:-1,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod}},_generatePosition:function(event){var top,left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(event.pageX-this.offset.click.left<this.containment[0]&&(pageX=this.containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<this.containment[1]&&(pageY=this.containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>this.containment[2]&&(pageX=this.containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>this.containment[3]&&(pageY=this.containment[3]+this.offset.click.top)),o.grid&&(top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1],pageY=this.containment?top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3]?top:top-this.offset.click.top>=this.containment[1]?top-o.grid[1]:top+o.grid[1]:top,left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0],pageX=this.containment?left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2]?left:left-this.offset.click.left>=this.containment[0]?left-o.grid[0]:left+o.grid[0]:left)),{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?i.item[0]:i.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){counter===this.counter&&this.refreshPositions(!hardRefresh)})},_clear:function(event,noPropagation){this.reverting=!1;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!noPropagation&&delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||noPropagation||delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash())}),this!==this.currentContainer&&(noPropagation||(delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash())}),delayedTriggers.push(function(c){return function(event){c._trigger("receive",event,this._uiHash(this))}}.call(this,this.currentContainer)),delayedTriggers.push(function(c){return function(event){c._trigger("update",event,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)noPropagation||delayedTriggers.push(function(c){return function(event){c._trigger("deactivate",event,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(delayedTriggers.push(function(c){return function(event){c._trigger("out",event,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this._storedCursor&&$("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!noPropagation){for(this._trigger("beforeStop",event,this._uiHash()),i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}return this.fromOutside=!1,!1}if(noPropagation||this._trigger("beforeStop",event,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!noPropagation){for(i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){$.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null}}})}(jQuery),function($){var uid=0,hideProps={},showProps={};hideProps.height=hideProps.paddingTop=hideProps.paddingBottom=hideProps.borderTopWidth=hideProps.borderBottomWidth="hide",showProps.height=showProps.paddingTop=showProps.paddingBottom=showProps.borderTopWidth=showProps.borderBottomWidth="show",$.widget("ui.accordion",{version:"1.10.0",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var options=this.options;this.prevShow=this.prevHide=$(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),options.collapsible||options.active!==!1&&null!=options.active||(options.active=0),this._processPanels(),options.active<0&&(options.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():$()}},_createIcons:function(){var icons=this.options.icons;icons&&($("<span>").addClass("ui-accordion-header-icon ui-icon "+icons.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(icons.header).addClass(icons.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var contents;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),contents=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&contents.css("height","")},_setOption:function(key,value){return"active"===key?void this._activate(value):("event"===key&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(value)),this._super(key,value),"collapsible"!==key||value||this.options.active!==!1||this._activate(0),"icons"===key&&(this._destroyIcons(),value&&this._createIcons()),void("disabled"===key&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!value)))},_keydown:function(event){if(!event.altKey&&!event.ctrlKey){var keyCode=$.ui.keyCode,length=this.headers.length,currentIndex=this.headers.index(event.target),toFocus=!1;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._eventHandler(event);break;case keyCode.HOME:toFocus=this.headers[0];break;case keyCode.END:toFocus=this.headers[length-1]}toFocus&&($(event.target).attr("tabIndex",-1),$(toFocus).attr("tabIndex",0),toFocus.focus(),event.preventDefault())}},_panelKeyDown:function(event){event.keyCode===$.ui.keyCode.UP&&event.ctrlKey&&$(event.currentTarget).prev().focus()},refresh:function(){var options=this.options;this._processPanels(),(options.active===!1&&options.collapsible===!0||!this.headers.length)&&(options.active=!1,this.active=$()),options.active===!1?this._activate(0):this.active.length&&!$.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(options.active=!1,this.active=$()):this._activate(Math.max(0,options.active-1)):options.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var maxHeight,options=this.options,heightStyle=options.heightStyle,parent=this.element.parent(),accordionId=this.accordionId="ui-accordion-"+(this.element.attr("id")||++uid);this.active=this._findActive(options.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(i){var header=$(this),headerId=header.attr("id"),panel=header.next(),panelId=panel.attr("id");headerId||(headerId=accordionId+"-header-"+i,header.attr("id",headerId)),panelId||(panelId=accordionId+"-panel-"+i,panel.attr("id",panelId)),header.attr("aria-controls",panelId),panel.attr("aria-labelledby",headerId)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(options.event),"fill"===heightStyle?(maxHeight=parent.height(),this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");"absolute"!==position&&"fixed"!==position&&(maxHeight-=elem.outerHeight(!0))}),this.headers.each(function(){maxHeight-=$(this).outerHeight(!0)}),this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()))}).css("overflow","auto")):"auto"===heightStyle&&(maxHeight=0,this.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).css("height","").height())}).height(maxHeight))},_activate:function(index){var active=this._findActive(index)[0];active!==this.active[0]&&(active=active||this.active[0],this._eventHandler({target:active,currentTarget:active,preventDefault:$.noop}))},_findActive:function(selector){return"number"==typeof selector?this.headers.eq(selector):$()},_setupEvents:function(event){var events={keydown:"_keydown"};event&&$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,events),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(event){var options=this.options,active=this.active,clicked=$(event.currentTarget),clickedIsActive=clicked[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():clicked.next(),toHide=active.next(),eventData={oldHeader:active,oldPanel:toHide,newHeader:collapsing?$():clicked,newPanel:toShow};event.preventDefault(),clickedIsActive&&!options.collapsible||this._trigger("beforeActivate",event,eventData)===!1||(options.active=collapsing?!1:this.headers.index(clicked),this.active=clickedIsActive?$():clicked,this._toggle(eventData),active.removeClass("ui-accordion-header-active ui-state-active"),options.icons&&active.children(".ui-accordion-header-icon").removeClass(options.icons.activeHeader).addClass(options.icons.header),clickedIsActive||(clicked.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),options.icons&&clicked.children(".ui-accordion-header-icon").removeClass(options.icons.header).addClass(options.icons.activeHeader),clicked.next().addClass("ui-accordion-content-active")))},_toggle:function(data){var toShow=data.newPanel,toHide=this.prevShow.length?this.prevShow:data.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=toShow,this.prevHide=toHide,this.options.animate?this._animate(toShow,toHide,data):(toHide.hide(),toShow.show(),this._toggleComplete(data)),toHide.attr({"aria-expanded":"false","aria-hidden":"true"}),toHide.prev().attr("aria-selected","false"),toShow.length&&toHide.length?toHide.prev().attr("tabIndex",-1):toShow.length&&this.headers.filter(function(){return 0===$(this).attr("tabIndex")}).attr("tabIndex",-1),toShow.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(toShow,toHide,data){var total,easing,duration,that=this,adjust=0,down=toShow.length&&(!toHide.length||toShow.index()<toHide.index()),animate=this.options.animate||{},options=down&&animate.down||animate,complete=function(){that._toggleComplete(data)};return"number"==typeof options&&(duration=options),"string"==typeof options&&(easing=options),easing=easing||options.easing||animate.easing,duration=duration||options.duration||animate.duration,toHide.length?toShow.length?(total=toShow.show().outerHeight(),toHide.animate(hideProps,{duration:duration,easing:easing,step:function(now,fx){fx.now=Math.round(now)}}),void toShow.hide().animate(showProps,{duration:duration,easing:easing,complete:complete,step:function(now,fx){fx.now=Math.round(now),"height"!==fx.prop?adjust+=fx.now:"content"!==that.options.heightStyle&&(fx.now=Math.round(total-toHide.outerHeight()-adjust),adjust=0)}})):toHide.animate(hideProps,duration,easing,complete):toShow.animate(showProps,duration,easing,complete)},_toggleComplete:function(data){var toHide=data.oldPanel;toHide.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),toHide.length&&(toHide.parent()[0].className=toHide.parent()[0].className),this._trigger("activate",null,data)}})}(jQuery),function($){var lastActive,startXPos,startYPos,clickDragged,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",stateClasses="ui-state-hover ui-state-active ",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var buttons=$(this).find(":ui-button");setTimeout(function(){buttons.button("refresh")},1)},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);return name&&(name=name.replace(/'/g,"\\'"),radios=form?$(form).find("[name='"+name+"']"):$("[name='"+name+"']",radio.ownerDocument).filter(function(){return!this.form})),radios};$.widget("ui.button",{version:"1.10.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,formResetHandler),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var that=this,options=this.options,toggleButton="checkbox"===this.type||"radio"===this.type,activeClass=toggleButton?"":"ui-state-active",focusClass="ui-state-focus";null===options.label&&(options.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){options.disabled||this===lastActive&&$(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){options.disabled||$(this).removeClass(activeClass)}).bind("click"+this.eventNamespace,function(event){options.disabled&&(event.preventDefault(),event.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){that.buttonElement.addClass(focusClass)}).bind("blur"+this.eventNamespace,function(){that.buttonElement.removeClass(focusClass)}),toggleButton&&(this.element.bind("change"+this.eventNamespace,function(){clickDragged||that.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(event){options.disabled||(clickDragged=!1,startXPos=event.pageX,startYPos=event.pageY)}).bind("mouseup"+this.eventNamespace,function(event){options.disabled||(startXPos!==event.pageX||startYPos!==event.pageY)&&(clickDragged=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return options.disabled||clickDragged?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled||clickDragged)return!1;$(this).addClass("ui-state-active"),that.buttonElement.attr("aria-pressed","true");var radio=that.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return options.disabled?!1:($(this).addClass("ui-state-active"),lastActive=this,void that.document.one("mouseup",function(){lastActive=null}))}).bind("mouseup"+this.eventNamespace,function(){return options.disabled?!1:void $(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(event){return options.disabled?!1:void((event.keyCode===$.ui.keyCode.SPACE||event.keyCode===$.ui.keyCode.ENTER)&&$(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){$(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(event){event.keyCode===$.ui.keyCode.SPACE&&$(this).click()})),this._setOption("disabled",options.disabled),this._resetButton()},_determineButtonType:function(){var ancestor,labelSelector,checked;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(ancestor=this.element.parents().last(),labelSelector="label[for='"+this.element.attr("id")+"']",this.buttonElement=ancestor.find(labelSelector),this.buttonElement.length||(ancestor=ancestor.length?ancestor.siblings():this.element.siblings(),this.buttonElement=ancestor.filter(labelSelector),this.buttonElement.length||(this.buttonElement=ancestor.find(labelSelector))),this.element.addClass("ui-helper-hidden-accessible"),checked=this.element.is(":checked"),checked&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",checked)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(baseClasses+" "+stateClasses+" "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(key,value){return this._super(key,value),"disabled"===key?void(value?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var isDisabled=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");isDisabled!==this.options.disabled&&this._setOption("disabled",isDisabled),"radio"===this.type?radioGroup(this.element[0]).each(function(){$(this).is(":checked")?$(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];icons.primary||icons.secondary?(this.options.text&&buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":icons.primary?"-primary":"-secondary")),icons.primary&&buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>"),icons.secondary&&buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>"),this.options.text||(buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||buttonElement.attr("title",$.trim(buttonText)))):buttonClasses.push("ui-button-text-only"),buttonElement.addClass(buttonClasses.join(" "))}}),$.widget("ui.buttonset",{version:"1.10.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(key,value){"disabled"===key&&this.buttons.button("option",key,value),this._super(key,value)},refresh:function(){var rtl="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(rtl?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(rtl?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function($,undefined){function Datepicker(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(selector,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?dpDiv.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(target,props){$.extend(target,props);for(var name in props)null==props[name]&&(target[name]=props[name]);return target}$.extend($.ui,{datepicker:{version:"1.10.0"}});var instActive,PROP_NAME="datepicker",dpuuid=(new Date).getTime();$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){return extendRemove(this._defaults,settings||{}),this},_attachDatepicker:function(target,settings){var nodeName,inline,inst;nodeName=target.nodeName.toLowerCase(),inline="div"===nodeName||"span"===nodeName,target.id||(this.uuid+=1,target.id="dp"+this.uuid),inst=this._newInst($(target),inline),inst.settings=$.extend({},settings||{}),"input"===nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:inline?bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}
},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]),inst.trigger=$([]),input.hasClass(this.markerClassName)||(this._attachments(input,inst),input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(inst),$.data(target,PROP_NAME,inst),inst.settings.disabled&&this._disableDatepicker(target))},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");inst.append&&inst.append.remove(),appendText&&(inst.append=$("<span class='"+this._appendClass+"'>"+appendText+"</span>"),input[isRTL?"before":"after"](inst.append)),input.unbind("focus",this._showDatepicker),inst.trigger&&inst.trigger.remove(),showOn=this._get(inst,"showOn"),("focus"===showOn||"both"===showOn)&&input.focus(this._showDatepicker),("button"===showOn||"both"===showOn)&&(buttonText=this._get(inst,"buttonText"),buttonImage=this._get(inst,"buttonImage"),inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("<button type='button'></button>").addClass(this._triggerClass).html(buttonImage?$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText}):buttonText)),input[isRTL?"before":"after"](inst.trigger),inst.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(input[0])):$.datepicker._showDatepicker(input[0]),!1}))},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,11,20),dateFormat=this._get(inst,"dateFormat");dateFormat.match(/[DM]/)&&(findMax=function(names){for(max=0,maxI=0,i=0;i<names.length;i++)names[i].length>max&&(max=names[i].length,maxI=i);return maxI},date.setMonth(findMax(this._get(inst,dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))),date.setDate(findMax(this._get(inst,dateFormat.match(/DD/)?"dayNames":"dayNamesShort"))+20-date.getDay())),inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);divSpan.hasClass(this.markerClassName)||(divSpan.addClass(this.markerClassName).append(inst.dpDiv),$.data(target,PROP_NAME,inst),this._setDate(inst,this._getDefaultDate(inst),!0),this._updateDatepicker(inst),this._updateAlternate(inst),inst.settings.disabled&&this._disableDatepicker(target),inst.dpDiv.css("display","block"))},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;return inst||(this.uuid+=1,id="dp"+this.uuid,this._dialogInput=$("<input type='text' id='"+id+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),inst=this._dialogInst=this._newInst(this._dialogInput,!1),inst.settings={},$.data(this._dialogInput[0],PROP_NAME,inst)),extendRemove(inst.settings,settings||{}),date=date&&date.constructor===Date?this._formatDate(inst,date):date,this._dialogInput.val(date),this._pos=pos?pos.length?pos:[pos.pageX,pos.pageY]:null,this._pos||(browserWidth=document.documentElement.clientWidth,browserHeight=document.documentElement.clientHeight,scrollX=document.documentElement.scrollLeft||document.body.scrollLeft,scrollY=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[browserWidth/2-100+scrollX,browserHeight/2-150+scrollY]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),inst.settings.onSelect=onSelect,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,inst),this},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,PROP_NAME);$target.hasClass(this.markerClassName)&&(nodeName=target.nodeName.toLowerCase(),$.removeData(target,PROP_NAME),"input"===nodeName?(inst.append.remove(),inst.trigger.remove(),$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===nodeName||"span"===nodeName)&&$target.removeClass(this.markerClassName).empty())},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,PROP_NAME);$target.hasClass(this.markerClassName)&&(nodeName=target.nodeName.toLowerCase(),"input"===nodeName?(target.disabled=!1,inst.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===nodeName||"span"===nodeName)&&(inline=$target.children("."+this._inlineClass),inline.children().removeClass("ui-state-disabled"),inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=$.map(this._disabledInputs,function(value){return value===target?null:value}))},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,PROP_NAME);$target.hasClass(this.markerClassName)&&(nodeName=target.nodeName.toLowerCase(),"input"===nodeName?(target.disabled=!0,inst.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===nodeName||"span"===nodeName)&&(inline=$target.children("."+this._inlineClass),inline.children().addClass("ui-state-disabled"),inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=$.map(this._disabledInputs,function(value){return value===target?null:value}),this._disabledInputs[this._disabledInputs.length]=target)},_isDisabledDatepicker:function(target){if(!target)return!1;for(var i=0;i<this._disabledInputs.length;i++)if(this._disabledInputs[i]===target)return!0;return!1},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);return 2===arguments.length&&"string"==typeof name?"defaults"===name?$.extend({},$.datepicker._defaults):inst?"all"===name?$.extend({},inst.settings):this._get(inst,name):null:(settings=name||{},"string"==typeof name&&(settings={},settings[name]=value),void(inst&&(this._curInst===inst&&this._hideDatepicker(),date=this._getDateDatepicker(target,!0),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),extendRemove(inst.settings,settings),null!==minDate&&settings.dateFormat!==undefined&&settings.minDate===undefined&&(inst.settings.minDate=this._formatDate(inst,minDate)),null!==maxDate&&settings.dateFormat!==undefined&&settings.maxDate===undefined&&(inst.settings.maxDate=this._formatDate(inst,maxDate)),"disabled"in settings&&(settings.disabled?this._disableDatepicker(target):this._enableDatepicker(target)),this._attachments($(target),inst),this._autoSize(inst),this._setDate(inst,date),this._updateAlternate(inst),this._updateDatepicker(inst))))},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);inst&&this._updateDatepicker(inst)},_setDateDatepicker:function(target,date){var inst=this._getInst(target);inst&&(this._setDate(inst,date),this._updateDatepicker(inst),this._updateAlternate(inst))},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);return inst&&!inst.inline&&this._setDateFromField(inst,noDefault),inst?this._getDate(inst):null},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=!0,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");if(inst._keyEvent=!0,$.datepicker._datepickerShowing)switch(event.keyCode){case 9:$.datepicker._hideDatepicker(),handled=!1;break;case 13:return sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv),sel[0]&&$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]),onSelect=$.datepicker._get(inst,"onSelect"),onSelect?(dateStr=$.datepicker._formatDate(inst),onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst])):$.datepicker._hideDatepicker(),!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 35:(event.ctrlKey||event.metaKey)&&$.datepicker._clearDate(event.target),handled=event.ctrlKey||event.metaKey;break;case 36:(event.ctrlKey||event.metaKey)&&$.datepicker._gotoToday(event.target),handled=event.ctrlKey||event.metaKey;break;case 37:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,isRTL?1:-1,"D"),handled=event.ctrlKey||event.metaKey,event.originalEvent.altKey&&$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 38:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,-7,"D"),handled=event.ctrlKey||event.metaKey;break;case 39:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,isRTL?-1:1,"D"),handled=event.ctrlKey||event.metaKey,event.originalEvent.altKey&&$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 40:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,7,"D"),handled=event.ctrlKey||event.metaKey;break;default:handled=!1}else 36===event.keyCode&&event.ctrlKey?$.datepicker._showDatepicker(this):handled=!1;handled&&(event.preventDefault(),event.stopPropagation())},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);return $.datepicker._get(inst,"constrainInput")?(chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat")),chr=String.fromCharCode(null==event.charCode?event.keyCode:event.charCode),event.ctrlKey||event.metaKey||" ">chr||!chars||chars.indexOf(chr)>-1):void 0},_doKeyUp:function(event){var date,inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal)try{date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),inst.input?inst.input.val():null,$.datepicker._getFormatConfig(inst)),date&&($.datepicker._setDateFromField(inst),$.datepicker._updateAlternate(inst),$.datepicker._updateDatepicker(inst))}catch(err){}return!0},_showDatepicker:function(input){if(input=input.target||input,"input"!==input.nodeName.toLowerCase()&&(input=$("input",input.parentNode)[0]),!$.datepicker._isDisabledDatepicker(input)&&$.datepicker._lastInput!==input){var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input),$.datepicker._curInst&&$.datepicker._curInst!==inst&&($.datepicker._curInst.dpDiv.stop(!0,!0),inst&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0])),beforeShow=$.datepicker._get(inst,"beforeShow"),beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{},beforeShowSettings!==!1&&(extendRemove(inst.settings,beforeShowSettings),inst.lastVal=null,$.datepicker._lastInput=input,$.datepicker._setDateFromField(inst),$.datepicker._inDialog&&(input.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(input),$.datepicker._pos[1]+=input.offsetHeight),isFixed=!1,$(input).parents().each(function(){return isFixed|="fixed"===$(this).css("position"),!isFixed}),offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]},$.datepicker._pos=null,inst.dpDiv.empty(),inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(inst),offset=$.datepicker._checkOffset(inst,offset,isFixed),inst.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":isFixed?"fixed":"absolute",display:"none",left:offset.left+"px",top:offset.top+"px"}),inst.inline||(showAnim=$.datepicker._get(inst,"showAnim"),duration=$.datepicker._get(inst,"duration"),inst.dpDiv.zIndex($(input).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects.effect[showAnim]?inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration):inst.dpDiv[showAnim||"show"](showAnim?duration:null),inst.input.is(":visible")&&!inst.input.is(":disabled")&&inst.input.focus(),$.datepicker._curInst=inst))}},_updateDatepicker:function(inst){this.maxRows=4,instActive=inst,inst.dpDiv.empty().append(this._generateHTML(inst)),this._attachHandlers(inst),inst.dpDiv.find("."+this._dayOverClass+" a").mouseover();var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17;inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),cols>1&&inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",width*cols+"em"),inst.dpDiv[(1!==numMonths[0]||1!==numMonths[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&inst.input[0]!==document.activeElement&&inst.input.focus(),inst.yearshtml&&(origyearshtml=inst.yearshtml,setTimeout(function(){origyearshtml===inst.yearshtml&&inst.yearshtml&&inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml),origyearshtml=inst.yearshtml=null},0))},_getBorders:function(elem){var convert=function(value){return{thin:1,medium:2,thick:3}[value]||value};return[parseFloat(convert(elem.css("border-left-width"))),parseFloat(convert(elem.css("border-top-width")))]},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());return offset.left-=this._get(inst,"isRTL")?dpWidth-inputWidth:0,offset.left-=isFixed&&offset.left===inst.input.offset().left?$(document).scrollLeft():0,offset.top-=isFixed&&offset.top===inst.input.offset().top+inputHeight?$(document).scrollTop():0,offset.left-=Math.min(offset.left,offset.left+dpWidth>viewWidth&&viewWidth>dpWidth?Math.abs(offset.left+dpWidth-viewWidth):0),offset.top-=Math.min(offset.top,offset.top+dpHeight>viewHeight&&viewHeight>dpHeight?Math.abs(dpHeight+inputHeight):0),offset},_findPos:function(obj){for(var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");obj&&("hidden"===obj.type||1!==obj.nodeType||$.expr.filters.hidden(obj));)obj=obj[isRTL?"previousSibling":"nextSibling"];return position=$(obj).offset(),[position.left,position.top]},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;!inst||input&&inst!==$.data(input,PROP_NAME)||this._datepickerShowing&&(showAnim=this._get(inst,"showAnim"),duration=this._get(inst,"duration"),postProcess=function(){$.datepicker._tidyDialog(inst)},$.effects&&($.effects.effect[showAnim]||$.effects[showAnim])?inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess):inst.dpDiv["slideDown"===showAnim?"slideUp":"fadeIn"===showAnim?"fadeOut":"hide"](showAnim?duration:null,postProcess),showAnim||postProcess(),this._datepickerShowing=!1,onClose=this._get(inst,"onClose"),onClose&&onClose.apply(inst.input?inst.input[0]:null,[inst.input?inst.input.val():"",inst]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if($.datepicker._curInst){var $target=$(event.target),inst=$.datepicker._getInst($target[0]);($target[0].id!==$.datepicker._mainDivId&&0===$target.parents("#"+$.datepicker._mainDivId).length&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||$target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==inst)&&$.datepicker._hideDatepicker()}},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);this._isDisabledDatepicker(target[0])||(this._adjustInstDate(inst,offset+("M"===period?this._get(inst,"showCurrentAtPos"):0),period),this._updateDatepicker(inst))},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);this._get(inst,"gotoCurrent")&&inst.currentDay?(inst.selectedDay=inst.currentDay,inst.drawMonth=inst.selectedMonth=inst.currentMonth,inst.drawYear=inst.selectedYear=inst.currentYear):(date=new Date,inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear()),this._notifyChange(inst),this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+("M"===period?"Month":"Year")]=inst["draw"+("M"===period?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10),this._notifyChange(inst),this._adjustDate(target)},_selectDay:function(id,month,year,td){var inst,target=$(id);$(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])||(inst=this._getInst(target[0]),inst.selectedDay=inst.currentDay=$("a",td).html(),inst.selectedMonth=inst.currentMonth=month,inst.selectedYear=inst.currentYear=year,this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear)))},_clearDate:function(id){var target=$(id);this._selectDate(target,"")},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=null!=dateStr?dateStr:this._formatDate(inst),inst.input&&inst.input.val(dateStr),this._updateAlternate(inst),onSelect=this._get(inst,"onSelect"),onSelect?onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst]):inst.input&&inst.input.trigger("change"),inst.inline?this._updateDatepicker(inst):(this._hideDatepicker(),this._lastInput=inst.input[0],"object"!=typeof inst.input[0]&&inst.input.focus(),this._lastInput=null)},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");altField&&(altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat"),date=this._getDate(inst),dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst)),$(altField).each(function(){$(this).val(dateStr)}))},noWeekends:function(date){var day=date.getDay();return[day>0&&6>day,""]},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());return checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7)),time=checkDate.getTime(),checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1},parseDate:function(format,value,settings){if(null==format||null==value)throw"Invalid arguments";if(value="object"==typeof value?value.toString():value+"",""===value)return null;var iFormat,dim,extra,date,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff="string"!=typeof shortYearCutoffTemp?shortYearCutoffTemp:(new Date).getFullYear()%100+parseInt(shortYearCutoffTemp,10),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=!1,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;return matches&&iFormat++,matches},getNumber=function(match){var isDoubled=lookAhead(match),size="@"===match?14:"!"===match?20:"y"===match&&isDoubled?4:"o"===match?3:2,digits=new RegExp("^\\d{1,"+size+"}"),num=value.substring(iValue).match(digits);if(!num)throw"Missing number at position "+iValue;return iValue+=num[0].length,parseInt(num[0],10)},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if($.each(names,function(i,pair){var name=pair[1];return value.substr(iValue,name.length).toLowerCase()===name.toLowerCase()?(index=pair[0],iValue+=name.length,!1):void 0}),-1!==index)return index+1;throw"Unknown name at position "+iValue},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat))throw"Unexpected literal at position "+iValue;iValue++};for(iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!==format.charAt(iFormat)||lookAhead("'")?checkLiteral():literal=!1;else switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":date=new Date(getNumber("@")),year=date.getFullYear(),month=date.getMonth()+1,day=date.getDate();break;case"!":date=new Date((getNumber("!")-this._ticksTo1970)/1e4),year=date.getFullYear(),month=date.getMonth()+1,day=date.getDate();break;case"'":lookAhead("'")?checkLiteral():literal=!0;break;default:checkLiteral()}if(iValue<value.length&&(extra=value.substr(iValue),!/^\s+/.test(extra)))throw"Extra/unparsed characters found in date: "+extra;if(-1===year?year=(new Date).getFullYear():100>year&&(year+=(new Date).getFullYear()-(new Date).getFullYear()%100+(shortYearCutoff>=year?0:-100)),doy>-1)for(month=1,day=doy;;){if(dim=this._getDaysInMonth(year,month-1),dim>=day)break;month++,day-=dim}if(date=this._daylightSavingAdjust(new Date(year,month-1,day)),date.getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day)throw"Invalid date";return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(format,date,settings){if(!date)return"";var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;return matches&&iFormat++,matches},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match))for(;num.length<len;)num="0"+num;return num},formatName=function(match,value,shortNames,longNames){return lookAhead(match)?longNames[value]:shortNames[value]},output="",literal=!1;if(date)for(iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!==format.charAt(iFormat)||lookAhead("'")?output+=format.charAt(iFormat):literal=!1;else switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/864e5),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100;break;case"@":output+=date.getTime();break;case"!":output+=1e4*date.getTime()+this._ticksTo1970;break;case"'":lookAhead("'")?output+="'":literal=!0;break;default:output+=format.charAt(iFormat)}return output},_possibleChars:function(format){var iFormat,chars="",literal=!1,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;return matches&&iFormat++,matches};for(iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!==format.charAt(iFormat)||lookAhead("'")?chars+=format.charAt(iFormat):literal=!1;else switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":lookAhead("'")?chars+="'":literal=!0;break;default:chars+=format.charAt(iFormat)}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()!==inst.lastVal){var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){dates=noDefault?"":dates}inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear(),inst.currentDay=dates?date.getDate():0,inst.currentMonth=dates?date.getMonth():0,inst.currentYear=dates?date.getFullYear():0,this._adjustInstDate(inst)}},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date))},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date;return date.setDate(date.getDate()+offset),date},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}for(var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date,year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);matches;){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=7*parseInt(matches[1],10);break;case"m":case"M":month+=parseInt(matches[1],10),day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10),day=Math.min(day,$.datepicker._getDaysInMonth(year,month))}matches=pattern.exec(offset)}return new Date(year,month,day)},newDate=null==date||""===date?defaultDate:"string"==typeof date?offsetString(date):"number"==typeof date?isNaN(date)?defaultDate:offsetNumeric(date):new Date(date.getTime());return newDate=newDate&&"Invalid Date"===newDate.toString()?defaultDate:newDate,newDate&&(newDate.setHours(0),newDate.setMinutes(0),newDate.setSeconds(0),newDate.setMilliseconds(0)),this._daylightSavingAdjust(newDate)},_daylightSavingAdjust:function(date){return date?(date.setHours(date.getHours()>12?date.getHours()+2:0),date):null},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date));inst.selectedDay=inst.currentDay=newDate.getDate(),inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth(),inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear(),origMonth===inst.selectedMonth&&origYear===inst.selectedYear||noChange||this._notifyChange(inst),this._adjustInstDate(inst),inst.input&&inst.input.val(clear?"":this._formatDate(inst))},_getDate:function(inst){var startDate=!inst.currentYear||inst.input&&""===inst.input.val()?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return startDate},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(id,-stepMonths,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(id,+stepMonths,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(id)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(id,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(id,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")])})},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date,today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=1!==numMonths[0]||1!==numMonths[1],currentDate=this._daylightSavingAdjust(inst.currentDay?new Date(inst.currentYear,inst.currentMonth,inst.currentDay):new Date(9999,9,9)),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(0>drawMonth&&(drawMonth+=12,drawYear--),maxDate)for(maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[0]*numMonths[1]+1,maxDate.getDate())),maxDraw=minDate&&minDate>maxDraw?minDate:maxDraw;this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw;)drawMonth--,0>drawMonth&&(drawMonth=11,drawYear--);for(inst.drawMonth=drawMonth,inst.drawYear=drawYear,prevText=this._get(inst,"prevText"),prevText=navigationAsDateFormat?this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)):prevText,prev=this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>",nextText=this._get(inst,"nextText"),nextText=navigationAsDateFormat?this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)):nextText,next=this._canAdjustMonth(inst,1,drawYear,drawMonth)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":hideIfNoPrevNext?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>",currentText=this._get(inst,"currentText"),gotoDate=this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today,currentText=navigationAsDateFormat?this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)):currentText,controls=inst.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(inst,"closeText")+"</button>",buttonPanel=showButtonPanel?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"",firstDay=parseInt(this._get(inst,"firstDay"),10),firstDay=isNaN(firstDay)?0:firstDay,showWeek=this._get(inst,"showWeek"),dayNames=this._get(inst,"dayNames"),dayNamesMin=this._get(inst,"dayNamesMin"),monthNames=this._get(inst,"monthNames"),monthNamesShort=this._get(inst,"monthNamesShort"),beforeShowDay=this._get(inst,"beforeShowDay"),showOtherMonths=this._get(inst,"showOtherMonths"),selectOtherMonths=this._get(inst,"selectOtherMonths"),defaultDate=this._getDefaultDate(inst),html="",row=0;row<numMonths[0];row++){for(group="",this.maxRows=4,col=0;col<numMonths[1];col++){if(selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay)),cornerClass=" ui-corner-all",calender="",isMultiMonth){if(calender+="<div class='ui-datepicker-group",numMonths[1]>1)switch(col){case 0:calender+=" ui-datepicker-group-first",cornerClass=" ui-corner-"+(isRTL?"right":"left");
break;case numMonths[1]-1:calender+=" ui-datepicker-group-last",cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle",cornerClass=""}calender+="'>"}for(calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+(/all|left/.test(cornerClass)&&0===row?isRTL?next:prev:"")+(/all|right/.test(cornerClass)&&0===row?isRTL?prev:next:"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead><tr>",thead=showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"",dow=0;7>dow;dow++)day=(dow+firstDay)%7,thead+="<th"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+dayNames[day]+"'>"+dayNamesMin[day]+"</span></th>";for(calender+=thead+"</tr></thead><tbody>",daysInMonth=this._getDaysInMonth(drawYear,drawMonth),drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth&&(inst.selectedDay=Math.min(inst.selectedDay,daysInMonth)),leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7,curRows=Math.ceil((leadDays+daysInMonth)/7),numRows=isMultiMonth&&this.maxRows>curRows?this.maxRows:curRows,this.maxRows=numRows,printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays)),dRow=0;numRows>dRow;dRow++){for(calender+="<tr>",tbody=showWeek?"<td class='ui-datepicker-week-col'>"+this._get(inst,"calculateWeek")(printDate)+"</td>":"",dow=0;7>dow;dow++)daySettings=beforeShowDay?beforeShowDay.apply(inst.input?inst.input[0]:null,[printDate]):[!0,""],otherMonth=printDate.getMonth()!==drawMonth,unselectable=otherMonth&&!selectOtherMonths||!daySettings[0]||minDate&&minDate>printDate||maxDate&&printDate>maxDate,tbody+="<td class='"+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+(printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent||defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime()?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+(otherMonth&&!showOtherMonths||!daySettings[2]?"":" title='"+daySettings[2]+"'")+(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+(otherMonth&&!showOtherMonths?"&#xa0;":unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+"' href='#'>"+printDate.getDate()+"</a>")+"</td>",printDate.setDate(printDate.getDate()+1),printDate=this._daylightSavingAdjust(printDate);calender+=tbody+"</tr>"}drawMonth++,drawMonth>11&&(drawMonth=0,drawYear++),calender+="</tbody></table>"+(isMultiMonth?"</div>"+(numMonths[0]>0&&col===numMonths[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),group+=calender}html+=group}return html+=buttonPanel,inst._keyEvent=!1,html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html="<div class='ui-datepicker-title'>",monthHtml="";if(secondary||!changeMonth)monthHtml+="<span class='ui-datepicker-month'>"+monthNames[drawMonth]+"</span>";else{for(inMinYear=minDate&&minDate.getFullYear()===drawYear,inMaxYear=maxDate&&maxDate.getFullYear()===drawYear,monthHtml+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",month=0;12>month;month++)(!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())&&(monthHtml+="<option value='"+month+"'"+(month===drawMonth?" selected='selected'":"")+">"+monthNamesShort[month]+"</option>");monthHtml+="</select>"}if(showMonthAfterYear||(html+=monthHtml+(!secondary&&changeMonth&&changeYear?"":"&#xa0;")),!inst.yearshtml)if(inst.yearshtml="",secondary||!changeYear)html+="<span class='ui-datepicker-year'>"+drawYear+"</span>";else{for(years=this._get(inst,"yearRange").split(":"),thisYear=(new Date).getFullYear(),determineYear=function(value){var year=value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10);return isNaN(year)?thisYear:year},year=determineYear(years[0]),endYear=Math.max(year,determineYear(years[1]||"")),year=minDate?Math.max(year,minDate.getFullYear()):year,endYear=maxDate?Math.min(endYear,maxDate.getFullYear()):endYear,inst.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";endYear>=year;year++)inst.yearshtml+="<option value='"+year+"'"+(year===drawYear?" selected='selected'":"")+">"+year+"</option>";inst.yearshtml+="</select>",html+=inst.yearshtml,inst.yearshtml=null}return html+=this._get(inst,"yearSuffix"),showMonthAfterYear&&(html+=(!secondary&&changeMonth&&changeYear?"":"&#xa0;")+monthHtml),html+="</div>"},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+("Y"===period?offset:0),month=inst.drawMonth+("M"===period?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+("D"===period?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear(),("M"===period||"Y"===period)&&this._notifyChange(inst)},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=minDate&&minDate>date?minDate:date;return maxDate&&newDate>maxDate?maxDate:newDate},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");onChange&&onChange.apply(inst.input?inst.input[0]:null,[inst.selectedYear,inst.selectedMonth+1,inst])},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return null==numMonths?[1,1]:"number"==typeof numMonths?[1,numMonths]:numMonths},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(0>offset?offset:numMonths[0]*numMonths[1]),1));return 0>offset&&date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth())),this._isInRange(inst,date)},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");return years&&(yearSplit=years.split(":"),currentYear=(new Date).getFullYear(),minYear=parseInt(yearSplit[0],10)+currentYear,maxYear=parseInt(yearSplit[1],10)+currentYear),(!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear)},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");return shortYearCutoff="string"!=typeof shortYearCutoff?shortYearCutoff:(new Date).getFullYear()%100+parseInt(shortYearCutoff,10),{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){day||(inst.currentDay=inst.selectedDay,inst.currentMonth=inst.selectedMonth,inst.currentYear=inst.selectedYear);var date=day?"object"==typeof day?day:this._daylightSavingAdjust(new Date(year,month,day)):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}}),$.fn.datepicker=function(options){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick),$.datepicker.initialized=!0),0===$("#"+$.datepicker._mainDivId).length&&$("body").append($.datepicker.dpDiv);var otherArgs=Array.prototype.slice.call(arguments,1);return"string"!=typeof options||"isDisabled"!==options&&"getDate"!==options&&"widget"!==options?"option"===options&&2===arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs)):this.each(function(){"string"==typeof options?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)}):$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.10.0",window["DP_jQuery_"+dpuuid]=$}(jQuery),function($){var sizeRelatedOptions={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};$.widget("ui.dialog",{version:"1.10.0",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;0>topOffset&&$(this).css("top",pos.top-topOffset)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&$.fn.draggable&&this._makeDraggable(),this.options.resizable&&$.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var element=this.options.appendTo;return element&&(element.jquery||element.nodeType)?$(element):this.document.find(element||"body").eq(0)},_destroy:function(){var next,originalPosition=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),next=originalPosition.parent.children().eq(originalPosition.index),next.length&&next[0]!==this.element[0]?next.before(this.element):originalPosition.parent.append(this.element)},widget:function(){return this.uiDialog},disable:$.noop,enable:$.noop,close:function(event){var that=this;this._isOpen&&this._trigger("beforeClose",event)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||$(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){that._trigger("close",event)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(event,silent){var moved=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return moved&&!silent&&this._trigger("focus",event),moved},open:function(){return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this.opener=$(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show),this._focusTabbable(),this._isOpen=!0,this._trigger("open"),void this._trigger("focus"))},_focusTabbable:function(){var hasFocus=this.element.find("[autofocus]");hasFocus.length||(hasFocus=this.element.find(":tabbable")),hasFocus.length||(hasFocus=this.uiDialogButtonPane.find(":tabbable")),hasFocus.length||(hasFocus=this.uiDialogTitlebarClose.filter(":tabbable")),hasFocus.length||(hasFocus=this.uiDialog),hasFocus.eq(0).focus()},_keepFocus:function(event){function checkFocus(){var activeElement=this.document[0].activeElement,isActive=this.uiDialog[0]===activeElement||$.contains(this.uiDialog[0],activeElement);isActive||this._focusTabbable()}event.preventDefault(),checkFocus.call(this),this._delay(checkFocus)},_createWrapper:function(){this.uiDialog=$("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(event){if(this.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE)return event.preventDefault(),void this.close(event);if(event.keyCode===$.ui.keyCode.TAB){var tabbables=this.uiDialog.find(":tabbable"),first=tabbables.filter(":first"),last=tabbables.filter(":last");event.target!==last[0]&&event.target!==this.uiDialog[0]||event.shiftKey?event.target!==first[0]&&event.target!==this.uiDialog[0]||!event.shiftKey||(last.focus(1),event.preventDefault()):(first.focus(1),event.preventDefault())}},mousedown:function(event){this._moveToTop(event)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var uiDialogTitle;this.uiDialogTitlebar=$("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(event){$(event.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=$("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(event){event.preventDefault(),this.close(event)}}),uiDialogTitle=$("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(uiDialogTitle),this.uiDialog.attr({"aria-labelledby":uiDialogTitle.attr("id")})},_title:function(title){this.options.title||title.html("&#160;"),title.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=$("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=$("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var that=this,buttons=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),$.isEmptyObject(buttons)?void this.uiDialog.removeClass("ui-dialog-buttons"):($.each(buttons,function(name,props){var click,buttonOptions;props=$.isFunction(props)?{click:props,text:name}:props,props=$.extend({type:"button"},props),click=props.click,props.click=function(){click.apply(that.element[0],arguments)},buttonOptions={icons:props.icons,text:props.showText},delete props.icons,delete props.showText,$("<button></button>",props).button(buttonOptions).appendTo(that.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function filteredUi(ui){return{position:ui.position,offset:ui.offset}}var that=this,options=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){$(this).addClass("ui-dialog-dragging"),that._trigger("dragStart",event,filteredUi(ui))},drag:function(event,ui){that._trigger("drag",event,filteredUi(ui))},stop:function(event,ui){options.position=[ui.position.left-that.document.scrollLeft(),ui.position.top-that.document.scrollTop()],$(this).removeClass("ui-dialog-dragging"),that._trigger("dragStop",event,filteredUi(ui))}})},_makeResizable:function(){function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size}}var that=this,options=this.options,handles=options.resizable,position=this.uiDialog.css("position"),resizeHandles="string"==typeof handles?handles:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing"),that._trigger("resizeStart",event,filteredUi(ui))},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui))},stop:function(event,ui){options.height=$(this).height(),options.width=$(this).width(),$(this).removeClass("ui-dialog-resizing"),that._trigger("resizeStop",event,filteredUi(ui))}}).css("position",position)},_minHeight:function(){var options=this.options;return"auto"===options.height?options.minHeight:Math.min(options.minHeight,options.height)},_position:function(){var isVisible=this.uiDialog.is(":visible");isVisible||this.uiDialog.show(),this.uiDialog.position(this.options.position),isVisible||this.uiDialog.hide()},_setOptions:function(options){var that=this,resize=!1,resizableOptions={};$.each(options,function(key,value){that._setOption(key,value),key in sizeRelatedOptions&&(resize=!0),key in resizableRelatedOptions&&(resizableOptions[key]=value)}),resize&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",resizableOptions)},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;"dialogClass"===key&&uiDialog.removeClass(this.options.dialogClass).addClass(value),"disabled"!==key&&(this._super(key,value),"appendTo"===key&&this.uiDialog.appendTo(this._appendTo()),"buttons"===key&&this._createButtons(),"closeText"===key&&this.uiDialogTitlebarClose.button({label:""+value}),"draggable"===key&&(isDraggable=uiDialog.is(":data(ui-draggable)"),isDraggable&&!value&&uiDialog.draggable("destroy"),!isDraggable&&value&&this._makeDraggable()),"position"===key&&this._position(),"resizable"===key&&(isResizable=uiDialog.is(":data(ui-resizable)"),isResizable&&!value&&uiDialog.resizable("destroy"),isResizable&&"string"==typeof value&&uiDialog.resizable("option","handles",value),isResizable||value===!1||this._makeResizable()),"title"===key&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var nonContentHeight,minContentHeight,maxContentHeight,options=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),options.minWidth>options.width&&(options.width=options.minWidth),nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).outerHeight(),minContentHeight=Math.max(0,options.minHeight-nonContentHeight),maxContentHeight="number"==typeof options.maxHeight?Math.max(0,options.maxHeight-nonContentHeight):"none","auto"===options.height?this.element.css({minHeight:minContentHeight,maxHeight:maxContentHeight,height:"auto"}):this.element.height(Math.max(0,options.height-nonContentHeight)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_createOverlay:function(){this.options.modal&&($.ui.dialog.overlayInstances||this._delay(function(){$.ui.dialog.overlayInstances&&this._on(this.document,{focusin:function(event){$(event.target).closest(".ui-dialog").length||(event.preventDefault(),$(".ui-dialog:visible:last .ui-dialog-content").data("ui-dialog")._focusTabbable())}})}),this.overlay=$("<div>").addClass("ui-widget-overlay ui-front").appendTo(this.document[0].body),this._on(this.overlay,{mousedown:"_keepFocus"}),$.ui.dialog.overlayInstances++)},_destroyOverlay:function(){this.options.modal&&($.ui.dialog.overlayInstances--,$.ui.dialog.overlayInstances||this._off(this.document,"focusin"),this.overlay.remove())}}),$.ui.dialog.overlayInstances=0,$.uiBackCompat!==!1&&$.widget("ui.dialog",$.ui.dialog,{_position:function(){var isVisible,position=this.options.position,myAt=[],offset=[0,0];position?(("string"==typeof position||"object"==typeof position&&"0"in position)&&(myAt=position.split?position.split(" "):[position[0],position[1]],1===myAt.length&&(myAt[1]=myAt[0]),$.each(["left","top"],function(i,offsetPosition){+myAt[i]===myAt[i]&&(offset[i]=myAt[i],myAt[i]=offsetPosition)}),position={my:myAt[0]+(offset[0]<0?offset[0]:"+"+offset[0])+" "+myAt[1]+(offset[1]<0?offset[1]:"+"+offset[1]),at:myAt.join(" ")}),position=$.extend({},$.ui.dialog.prototype.options.position,position)):position=$.ui.dialog.prototype.options.position,isVisible=this.uiDialog.is(":visible"),isVisible||this.uiDialog.show(),this.uiDialog.position(position),isVisible||this.uiDialog.hide()}})}(jQuery),function($){function addDescribedBy(elem,id){var describedby=(elem.attr("aria-describedby")||"").split(/\s+/);describedby.push(id),elem.data("ui-tooltip-id",id).attr("aria-describedby",$.trim(describedby.join(" ")))}function removeDescribedBy(elem){var id=elem.data("ui-tooltip-id"),describedby=(elem.attr("aria-describedby")||"").split(/\s+/),index=$.inArray(id,describedby);-1!==index&&describedby.splice(index,1),elem.removeData("ui-tooltip-id"),describedby=$.trim(describedby.join(" ")),describedby?elem.attr("aria-describedby",describedby):elem.removeAttr("aria-describedby")}var increments=0;$.widget("ui.tooltip",{version:"1.10.0",options:{content:function(){var title=$(this).attr("title")||"";return $("<a>").text(title).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(key,value){var that=this;return"disabled"===key?(this[value?"_disable":"_enable"](),void(this.options[key]=value)):(this._super(key,value),void("content"===key&&$.each(this.tooltips,function(id,element){that._updateContent(element)})))},_disable:function(){var that=this;$.each(this.tooltips,function(id,element){var event=$.Event("blur");event.target=event.currentTarget=element[0],that.close(event,!0)}),this.element.find(this.options.items).addBack().each(function(){var element=$(this);element.is("[title]")&&element.data("ui-tooltip-title",element.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var element=$(this);element.data("ui-tooltip-title")&&element.attr("title",element.data("ui-tooltip-title"))})},open:function(event){var that=this,target=$(event?event.target:this.element).closest(this.options.items);target.length&&!target.data("ui-tooltip-id")&&(target.attr("title")&&target.data("ui-tooltip-title",target.attr("title")),target.data("ui-tooltip-open",!0),event&&"mouseover"===event.type&&target.parents().each(function(){var blurEvent,parent=$(this);parent.data("ui-tooltip-open")&&(blurEvent=$.Event("blur"),blurEvent.target=blurEvent.currentTarget=this,that.close(blurEvent,!0)),parent.attr("title")&&(parent.uniqueId(),that.parents[this.id]={element:this,title:parent.attr("title")},parent.attr("title",""))}),this._updateContent(target,event))},_updateContent:function(target,event){var content,contentOption=this.options.content,that=this,eventType=event?event.type:null;return"string"==typeof contentOption?this._open(event,target,contentOption):(content=contentOption.call(target[0],function(response){target.data("ui-tooltip-open")&&that._delay(function(){event&&(event.type=eventType),this._open(event,target,response)})}),void(content&&this._open(event,target,content)))},_open:function(event,target,content){function position(event){positionOption.of=event,tooltip.is(":hidden")||tooltip.position(positionOption)}var tooltip,events,delayedShow,positionOption=$.extend({},this.options.position);if(content){if(tooltip=this._find(target),tooltip.length)return void tooltip.find(".ui-tooltip-content").html(content);target.is("[title]")&&(event&&"mouseover"===event.type?target.attr("title",""):target.removeAttr("title")),tooltip=this._tooltip(target),addDescribedBy(target,tooltip.attr("id")),tooltip.find(".ui-tooltip-content").html(content),this.options.track&&event&&/^mouse/.test(event.type)?(this._on(this.document,{mousemove:position}),position(event)):tooltip.position($.extend({of:target},this.options.position)),tooltip.hide(),this._show(tooltip,this.options.show),this.options.show&&this.options.show.delay&&(delayedShow=this.delayedShow=setInterval(function(){tooltip.is(":visible")&&(position(positionOption.of),clearInterval(delayedShow))},$.fx.interval)),this._trigger("open",event,{tooltip:tooltip}),events={keyup:function(event){if(event.keyCode===$.ui.keyCode.ESCAPE){var fakeEvent=$.Event(event);fakeEvent.currentTarget=target[0],this.close(fakeEvent,!0)}},remove:function(){this._removeTooltip(tooltip)}},event&&"mouseover"!==event.type||(events.mouseleave="close"),event&&"focusin"!==event.type||(events.focusout="close"),this._on(!0,target,events)}},close:function(event){var that=this,target=$(event?event.currentTarget:this.element),tooltip=this._find(target);this.closing||(clearInterval(this.delayedShow),target.data("ui-tooltip-title")&&target.attr("title",target.data("ui-tooltip-title")),removeDescribedBy(target),tooltip.stop(!0),this._hide(tooltip,this.options.hide,function(){that._removeTooltip($(this))}),target.removeData("ui-tooltip-open"),this._off(target,"mouseleave focusout keyup"),target[0]!==this.element[0]&&this._off(target,"remove"),this._off(this.document,"mousemove"),event&&"mouseleave"===event.type&&$.each(this.parents,function(id,parent){$(parent.element).attr("title",parent.title),delete that.parents[id]}),this.closing=!0,this._trigger("close",event,{tooltip:tooltip}),this.closing=!1)},_tooltip:function(element){var id="ui-tooltip-"+increments++,tooltip=$("<div>").attr({id:id,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return $("<div>").addClass("ui-tooltip-content").appendTo(tooltip),tooltip.appendTo(this.document[0].body),this.tooltips[id]=element,tooltip},_find:function(target){var id=target.data("ui-tooltip-id");return id?$("#"+id):$()},_removeTooltip:function(tooltip){tooltip.remove(),delete this.tooltips[tooltip.attr("id")]},_destroy:function(){var that=this;$.each(this.tooltips,function(id,element){var event=$.Event("blur");event.target=event.currentTarget=element[0],that.close(event,!0),$("#"+id).remove(),element.data("ui-tooltip-title")&&(element.attr("title",element.data("ui-tooltip-title")),element.removeData("ui-tooltip-title"))})}})}(jQuery),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,t.href&&i&&"map"===r.nodeName.toLowerCase()?(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o)):!1):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return"number"==typeof t?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,s,r=e(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(r.css("zIndex"),10),!isNaN(s)&&0!==s))return s;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i="Width"===r?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return"number"!=typeof t?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(i&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var r=n&&"left"===n?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}}))}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var r,n=0;null!=(r=t[n]);n++)try{e(r).triggerHandler("remove")
}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){return e.isFunction(r)?void(a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var s,t=this._super,n=this._superApply;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()):void(a[t]=r)}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){for(var u,a,i=r.call(arguments,1),s=0,o=i.length;o>s;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(n[u]=e.isPlainObject(a)?e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u="string"==typeof o,a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,this.each(u?function(){var r,i=e.data(this,s);return i?e.isFunction(i[o])&&"_"!==o.charAt(0)?(r=i[o].apply(i,a),r!==i&&r!==t?(f=r&&r.jquery?f.pushStack(r.get()):r,!1):void 0):e.error("no such method '"+o+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+o+"'")}:function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var s,o,u,i=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(i={},s=n.split("."),n=s.shift(),s.length){for(o=i[n]=e.widget.extend({},this.options[n]),u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];if(n=s.pop(),r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;"boolean"!=typeof t&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?s[o]:o).apply(s,arguments):void 0}"string"!=typeof o&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];if(r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent,s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){"string"==typeof i&&(i={effect:i});var o,u=i?i===!0||"number"==typeof i?n:i.effect||n:t;i=i||{},"number"==typeof i&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})}(jQuery),function(e){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=1===t.which,s="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return i&&!s&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}function d(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,s="scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=d(b),b[0].preventDefault&&(t.at="left top"),l=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var n,r,e=(t[this]||"").split(" ");1===e.length&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),x[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),1===S.length&&(S[1]=S[0]),"right"===t.at[0]?g.left+=l:"center"===t.at[0]&&(g.left+=l/2),"bottom"===t.at[1]?g.top+=v:"center"===t.at[1]&&(g.top+=v/2),n=h(x.at,l,v),g.left+=n[0],g.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),d=p(this,"marginLeft"),y=p(this,"marginTop"),T=f+d+p(this,"marginRight")+E.width,N=c+y+p(this,"marginBottom")+E.height,C=e.extend({},g),k=h(x.my,a.outerWidth(),a.outerHeight());"right"===t.my[0]?C.left-=f:"center"===t.my[0]&&(C.left-=f/2),"bottom"===t.my[1]?C.top-=c:"center"===t.my[1]&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:d,marginTop:y},e.each(["left","top"],function(r,i){e.ui.position[S[r]]&&e.ui.position[S[r]][i](C,{targetWidth:l,targetHeight:v,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:w,elem:a})}),t.using&&(u=function(e){var n=m.left-C.left,s=n+l-f,o=m.top-C.top,u=o+v-c,h={target:{element:b,left:m.left,top:m.top,width:l,height:v},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:0>s?"left":n>0?"right":"center",vertical:0>u?"top":o>0?"bottom":"middle"};f>l&&i(n+s)<l&&(h.horizontal="center"),c>v&&i(o+u)<v&&(h.vertical="middle"),h.important=r(i(n),i(s))>r(i(o),i(u))?"horizontal":"vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var f,n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i;t.collisionWidth>s?u>0&&0>=a?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):e.left=a>0&&0>=u?i:u>a?i+s-t.collisionWidth:i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var f,n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i;t.collisionHeight>s?u>0&&0>=a?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):e.top=a>0&&0>=u?i:u>a?i+s-t.collisionHeight:i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var p,d,n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,c="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,h=-2*t.offset[0];0>a?(p=e.left+l+c+h+t.collisionWidth-s-r,(0>p||p<i(a))&&(e.left+=l+c+h)):f>0&&(d=e.left-t.collisionPosition.marginLeft+l+c+h-o,(d>0||i(d)<f)&&(e.left+=l+c+h))},top:function(e,t){var d,v,n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l="top"===t.my[1],c=l?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,h="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,p=-2*t.offset[1];0>a?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(0>v||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&11>i,t.innerHTML="",n.removeChild(t)}()}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n,r=this,i=!1,s=!1;for(e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),n=this.element[0];n&&(n=n.parentNode);)n===document&&(i=!0);return i||"original"!==this.options.helper?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=this.options.handle&&e(this.options.handle,this.element).length?!1:!0;return e(this.options.handle,this.element).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),r[0]!==this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;if("parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=["document"===i.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===i.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===i.containment?0:e(window).scrollLeft())+e("document"===i.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===i.containment?0:e(window).scrollTop())+(e("document"===i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||i.containment.constructor===Array)i.containment.constructor===Array&&(this.containment=i.containment);else{if(n=e(i.containment),r=n[0],!r)return;t="hidden"!==e(r).css("overflow"),this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i,s,o=this.options,u="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName),f=t.pageX,l=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(f=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(l=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(f=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(l=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,f=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("ui-draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("ui-draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===r.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("ui-draggable"),i=this;e.each(r.sortables,function(){var s=!1,o=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(o.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),r=n.options,i=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(r.axis&&"x"===r.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(t.pageY-e(document).scrollTop()<r.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(t.pageX-e(document).scrollLeft()<r.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed)))),i!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),r=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(t,n){var r,i,s,o,u,a,f,l,c,h,p=e(this).data("ui-draggable"),d=p.options,v=d.snapTolerance,m=n.offset.left,g=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--)u=p.snapElements[c].left,a=u+p.snapElements[c].width,f=p.snapElements[c].top,l=f+p.snapElements[c].height,m>u-v&&a+v>m&&y>f-v&&l+v>y||m>u-v&&a+v>m&&b>f-v&&l+v>b||g>u-v&&a+v>g&&y>f-v&&l+v>y||g>u-v&&a+v>g&&b>f-v&&l+v>b?("inner"!==d.snapMode&&(r=Math.abs(f-b)<=v,i=Math.abs(l-y)<=v,s=Math.abs(u-g)<=v,o=Math.abs(a-m)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f-p.helperProportions.height,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left)),h=r||i||s||o,"outer"!==d.snapMode&&(r=Math.abs(f-y)<=v,i=Math.abs(l-b)<=v,s=Math.abs(u-m)<=v,o=Math.abs(a-g)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(r||i||s||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=r||i||s||o||h):(p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1)
}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=e(this).data("ui-draggable").options,r=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});r.length&&(t=parseInt(r[0].style.zIndex,10)||0,e(r).each(function(e){this.style.zIndex=t+e}),this[0].style.zIndex=t+r.length)}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e){function n(e,t,n){return e>t&&t+n>e}e.widget("ui.droppable",{version:"1.10.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,n=e.ui.ddmanager.droppables[this.options.scope];t<n.length;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){"accept"===t&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return r&&(r.currentItem||r.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(i=!0,!1):void 0}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,r){if(!t.offset)return!1;var i,s,o=(e.positionAbs||e.position.absolute).left,u=o+e.helperProportions.width,a=(e.positionAbs||e.position.absolute).top,f=a+e.helperProportions.height,l=t.offset.left,c=l+t.proportions.width,h=t.offset.top,p=h+t.proportions.height;switch(r){case"fit":return o>=l&&c>=u&&a>=h&&p>=f;case"intersect":return l<o+e.helperProportions.width/2&&u-e.helperProportions.width/2<c&&h<a+e.helperProportions.height/2&&f-e.helperProportions.height/2<p;case"pointer":return i=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,n(s,h,t.proportions.height)&&n(i,l,t.proportions.width);case"touch":return(a>=h&&p>=a||f>=h&&p>=f||h>a&&f>p)&&(o>=l&&c>=o||u>=l&&c>=u||l>o&&u>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;r<s.length;r++)if(!(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))){for(i=0;i<u.length;i++)if(u[i]===s[r].element[0]){s[r].proportions.height=0;continue e}s[r].visible="none"!==s[r].element.css("display"),s[r].visible&&("mousedown"===o&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions={width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight})}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;u&&(this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===i}),s.length&&(r=e.data(s[0],"ui-droppable"),r.greedyChild="isover"===u)),r&&"isover"===u&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this["isout"===u?"isover":"isout"]=!1,this["isover"===u?"_over":"_out"].call(this,n),r&&"isout"===u&&(r.isout=!1,r.isover=!0,r._over.call(r,n)))}})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e){function n(e){return parseInt(e,10)||0}function r(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,r,i,s,o=this,u=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},n=0;n<t.length;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i);this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize()),e(this.handles[n]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){u.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){u.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles)r=e(this.handles[n])[0],(r===t.target||e.contains(r,t.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var r,i,s,o=this.options,u=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".ui-draggable")&&a.css({position:"absolute",top:u.top,left:u.left}),this._renderProxy(),r=n(this.helper.css("left")),i=n(this.helper.css("top")),o.containment&&(r+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:i},this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:r,top:i},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===s?this.axis+"-resize":s),a.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r=this.helper,i={},s=this.originalMousePosition,o=this.axis,u=this.position.top,a=this.position.left,f=this.size.width,l=this.size.height,c=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[o];return p?(n=p.apply(this,[t,c,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==u&&(i.top=this.position.top+"px"),this.position.left!==a&&(i.left=this.position.left+"px"),this.size.width!==f&&(i.width=this.size.width+"px"),this.size.height!==l&&(i.height=this.size.height+"px"),r.css(i),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&e.ui.hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,i,s,o,u=this.options;o={minWidth:r(u.minWidth)?u.minWidth:0,maxWidth:r(u.maxWidth)?u.maxWidth:1/0,minHeight:r(u.minHeight)?u.minHeight:0,maxHeight:r(u.maxHeight)?u.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),s<o.maxHeight&&(o.maxHeight=s)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===i&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===i&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=r(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=r(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=r(e.width)&&t.minWidth&&t.minWidth>e.width,u=r(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,f=this.position.top+this.size.height,l=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),u&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),o&&l&&(e.left=a-t.minWidth),i&&l&&(e.left=a-t.maxWidth),u&&c&&(e.top=f-t.minHeight),s&&c&&(e.top=f-t.maxHeight),e.width||e.height||e.left||!e.top?!e.width&&!e.height&&!e.top&&e.left&&(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,n,r,i,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(i=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],n=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],r=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")],t=0;t<n.length;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(r[t],10)||0);i.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,r,i,s,o,u,a,f=e(this).data("ui-resizable"),l=f.options,c=f.element,h=l.containment,p=h instanceof e?h.get(0):/parent/.test(h)?c.parent().get(0):h;p&&(f.containerElement=e(p),/document/.test(h)||h===document?(f.containerOffset={left:0,top:0},f.containerPosition={left:0,top:0},f.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),r=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){r[e]=n(t.css("padding"+i))}),f.containerOffset=t.offset(),f.containerPosition=t.position(),f.containerSize={height:t.innerHeight()-r[3],width:t.innerWidth()-r[1]},i=f.containerOffset,s=f.containerSize.height,o=f.containerSize.width,u=e.ui.hasScroll(p,"left")?p.scrollWidth:o,a=e.ui.hasScroll(p)?p.scrollHeight:s,f.parentData={element:p,left:i.left,top:i.top,width:u,height:a}))},resize:function(t){var n,r,i,s,o=e(this).data("ui-resizable"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?a.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),r=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-a.top)+o.sizeDiff.height),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s&&(n-=o.parentData.left),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?r(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],r(n.alsoResize)):e.each(n.alsoResize,function(e){r(e)})},resize:function(t,n){var r=e(this).data("ui-resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};"object"!=typeof i.alsoResize||i.alsoResize.nodeType?a(i.alsoResize):e.each(i.alsoResize,function(e,t){a(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size,i=t.originalSize,s=t.originalPosition,o=t.axis,u="number"==typeof n.grid?[n.grid,n.grid]:n.grid,a=u[0]||1,f=u[1]||1,l=Math.round((r.width-i.width)/a)*a,c=Math.round((r.height-i.height)/f)*f,h=i.width+l,p=i.height+c,d=n.maxWidth&&n.maxWidth<h,v=n.maxHeight&&n.maxHeight<p,m=n.minWidth&&n.minWidth>h,g=n.minHeight&&n.minHeight>p;n.grid=u,m&&(h+=a),g&&(p+=f),d&&(h-=a),v&&(p-=f),/^(se|s|e)$/.test(o)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.top=s.top-c):/^(sw)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.left=s.left-l):(t.size.width=h,t.size.height=p,t.position.top=s.top-c,t.position.left=s.left-l)}})}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,i=e.data(this,"selectable-item");return i?(r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1;n&&n.element!==r.element[0]&&("touch"===i.tolerance?f=!(n.left>u||n.right<s||n.top>a||n.bottom<o):"fit"===i.tolerance&&(f=n.left>s&&n.right<u&&n.top>o&&n.bottom<a),f?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&!t.metaKey&&!t.ctrlKey&&!n.startselected&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element}))))}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){function n(e,t,n){return e>t&&t+n>e}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=null,i=!1,s=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,s.widgetName+"-item")===s?(r=e(this),!1):void 0}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target)),r&&(!this.options.handle||n||(e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)}),i))?(this.currentItem=r,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,n,r){var i,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",s.cursor)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?u=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(u=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?u=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(u=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r),s&&r.instance===this.currentContainer&&i!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],i):!0)){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;
this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&a>r+f&&t+l>s&&o>t+l;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t="x"===this.options.axis||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),r="y"===this.options.axis||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&"right"===o||"down"===s?2:1:s&&("down"===s?2:1):!1},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&r||"left"===s&&!r:i&&("down"===i&&t||"up"===i&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--)for(i=e(a[n]),r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=u.length-1;n>=0;n--)u[n][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(i=e(h[n]),r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s));for(n=c.length-1;n>=0;n--)for(o=c[n][1],u=c[n][0],r=0,f=u.length;f>r;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--)r=this.items[n],r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var r=e(document.createElement(t.currentItem[0].nodeName)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(r.style.visibility="hidden"),r},update:function(e,i){(!n||r.forcePlaceholderSize)&&(i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n,r,i,s,o,u,a,f,l,c=null,h=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(c&&e.contains(this.containers[n].element[0],c.element[0]))continue;c=this.containers[n],h=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1;else{for(i=1e4,s=null,o=this.containers[h].floating?"left":"top",u=this.containers[h].floating?"width":"height",a=this.positionAbs[o]+this.offset.click[o],r=this.items.length-1;r>=0;r--)e.contains(this.containers[h].element[0],this.items[r].item[0])&&this.items[r].item[0]!==this.currentItem[0]&&(f=this.items[r].item.offset()[o],l=!1,Math.abs(f-a)>Math.abs(f+this.items[r][u]-a)&&(l=!0,f+=this.items[r][u]),Math.abs(f-a)<i&&(i=Math.abs(f-a),s=this.items[r],this.direction=l?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[h],s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[h].element,!0),this._trigger("change",t,this._uiHash()),this.containers[h]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===i.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return"relative"===this.cssPosition&&(this.scrollParent[0]===document||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(r in this._storedCSS)("auto"===this._storedCSS[r]||"static"===this._storedCSS[r])&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!n&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!n&&i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),r=this.containers.length-1;r>=0;r--)n||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!n){for(this._trigger("beforeStop",t,this._uiHash()),r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!n){for(r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),function(e){var n=0,r={},i={};r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.0",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),!t.collapsible&&(t.active===!1||null==t.active)&&(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"===e&&!t&&this.options.active===!1&&this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),(t.active===!1&&t.collapsible===!0||!this.headers.length)&&(t.active=!1,this.active=e()),t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,r=this.options,i=r.heightStyle,s=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++n);this.active=this._findActive(r.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var n=e(this),r=n.attr("id"),i=n.next(),s=i.attr("id");r||(r=o+"-header-"+t,n.attr("id",r)),s||(s=o+"-panel-"+t,i.attr("id",s)),n.attr("aria-controls",s),i.attr("aria-labelledby",r)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(r.event),"fill"===i?(t=s.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");"absolute"!==r&&"fixed"!==r&&(t-=n.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===i&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault(),s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1||(n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-expanded":"false","aria-hidden":"true"}),r.prev().attr("aria-selected","false"),n.length&&r.length?r.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,n){var s,o,u,a=this,f=0,l=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},h=l&&c.down||c,p=function(){a._toggleComplete(n)};return"number"==typeof h&&(u=h),"string"==typeof h&&(o=h),o=o||h.easing||c.easing,u=u||h.duration||c.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(r,{duration:u,easing:o,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(i,{duration:u,easing:o,complete:p,step:function(e,n){n.now=Math.round(e),"height"!==n.prop?f+=n.now:"content"!==a.options.heightStyle&&(n.now=Math.round(s-t.outerHeight()-f),f=0)}}),void 0):t.animate(r,u,o,p):e.animate(i,u,o,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(n=n.replace(/'/g,"\\'"),i=r?e(r).find("[name='"+n+"']"):e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.10.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a="checkbox"===this.type||"radio"===this.type,c=a?"":"ui-state-active",h="ui-state-focus";null===u.label&&(u.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){u.disabled||this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){u.disabled||e(this).removeClass(c)}).bind("click"+this.eventNamespace,function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change"+this.eventNamespace,function(){s||t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){u.disabled||(s=!1,r=e.pageX,i=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){u.disabled||(r!==e.pageX||i!==e.pageY)&&(s=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return u.disabled||s?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return u.disabled?!1:(e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",function(){n=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return u.disabled?!1:void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return u.disabled?!1:void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?void(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)
},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function s(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=o(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function o(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){e.datepicker._isDisabledDatepicker(i.inline?t.parent()[0]:i.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function u(t,n){e.extend(t,n);for(var r in n)null==n[r]&&(t[r]=n[r]);return t}e.extend(e.ui,{datepicker:{version:"1.10.0"}});var i,n="datepicker",r=(new Date).getTime();e.extend(s.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return u(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,s;r=t.nodeName.toLowerCase(),i="div"===r||"span"===r,t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),i),s.settings=e.extend({},n||{}),"input"===r?this._connectDatepicker(t,s):i&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?o(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,r){var i=e(t);r.append=e([]),r.trigger=e([]),i.hasClass(this.markerClassName)||(this._attachments(i,r),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(r),e.data(t,n,r),r.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,n){var r,i,s,o=this._get(n,"appendText"),u=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[u?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),("focus"===r||"both"===r)&&t.focus(this._showDatepicker),("button"===r||"both"===r)&&(i=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:i,title:i}):i)),t[u?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(n=0,r=0,i=0;i<e.length;i++)e[i].length>n&&(n=e[i].length,r=i);return r},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,r){var i=e(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(r.dpDiv),e.data(t,n,r),this._setDate(r,this._getDefaultDate(r),!0),this._updateDatepicker(r),this._updateAlternate(r),r.settings.disabled&&this._disableDatepicker(t),r.dpDiv.css("display","block"))},_dialogDatepicker:function(t,r,i,s,o){var a,f,l,c,h,p=this._dialogInst;return p||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],n,p)),u(p.settings,s||{}),r=r&&r.constructor===Date?this._formatDate(p,r):r,this._dialogInput.val(r),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(f=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[f/2-100+c,l/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],n,p),this},_destroyDatepicker:function(t){var r,i=e(t),s=e.data(t,n);i.hasClass(this.markerClassName)&&(r=t.nodeName.toLowerCase(),e.removeData(t,n),"input"===r?(s.append.remove(),s.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===r||"span"===r)&&i.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);s.hasClass(this.markerClassName)&&(r=t.nodeName.toLowerCase(),"input"===r?(t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===r||"span"===r)&&(i=s.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);s.hasClass(this.markerClassName)&&(r=t.nodeName.toLowerCase(),"input"===r?(t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===r||"span"===r)&&(i=s.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,n)}catch(r){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,r,i){var s,o,a,f,l=this._getInst(n);return 2===arguments.length&&"string"==typeof r?"defaults"===r?e.extend({},e.datepicker._defaults):l?"all"===r?e.extend({},l.settings):this._get(l,r):null:(s=r||{},"string"==typeof r&&(s={},s[r]=i),l&&(this._curInst===l&&this._hideDatepicker(),o=this._getDateDatepicker(n,!0),a=this._getMinMaxDate(l,"min"),f=this._getMinMaxDate(l,"max"),u(l.settings,s),null!==a&&s.dateFormat!==t&&s.minDate===t&&(l.settings.minDate=this._formatDate(l,a)),null!==f&&s.dateFormat!==t&&s.maxDate===t&&(l.settings.maxDate=this._formatDate(l,f)),"disabled"in s&&(s.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(e(n),l),this._autoSize(l),this._setDate(l,o),this._updateAlternate(l),this._updateDatepicker(l)),void 0)},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,s=e.datepicker._getInst(t.target),o=!0,u=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),i[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),n=e.datepicker._get(s,"onSelect"),n?(r=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[r,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,r,i=e.datepicker._getInst(t.target);return e.datepicker._get(i,"constrainInput")?(n=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),r=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">r||!n||n.indexOf(r)>-1):void 0},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var n,r,i,s,o,a,f;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),r=e.datepicker._get(n,"beforeShow"),i=r?r.apply(t,[t,n]):{},i!==!1&&(u(n.settings,i),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),s=!1,e(t).parents().each(function(){return s|="fixed"===e(this).css("position"),!s}),o={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),o=e.datepicker._checkOffset(n,o,s),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),n.inline||(a=e.datepicker._get(n,"showAnim"),f=e.datepicker._get(n,"duration"),n.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[a]?n.dpDiv.show(a,e.datepicker._get(n,"showOptions"),f):n.dpDiv[a||"show"](a?f:null),n.input.is(":visible")&&!n.input.is(":disabled")&&n.input.focus(),e.datepicker._curInst=n))}},_updateDatepicker:function(t){this.maxRows=4,i=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,r=this._getNumberOfMonths(t),s=r[1],o=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em"),t.dpDiv[(1!==r[0]||1!==r[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!==document.activeElement&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),f=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+u?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>a&&a>i?Math.abs(n.left+i-a):0),n.top-=Math.min(n.top,n.top+s>f&&f>s?Math.abs(s+u):0),n},_findPos:function(t){for(var n,r=this._getInst(t),i=this._get(r,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var r,i,s,o,u=this._curInst;!u||t&&u!==e.data(t,n)||this._datepickerShowing&&(r=this._get(u,"showAnim"),i=this._get(u,"duration"),s=function(){e.datepicker._tidyDialog(u)},e.effects&&(e.effects.effect[r]||e.effects[r])?u.dpDiv.hide(r,e.datepicker._get(u,"showOptions"),i,s):u.dpDiv["slideDown"===r?"slideUp":"fadeIn"===r?"fadeOut":"hide"](r?i:null,s),r||s(),this._datepickerShowing=!1,o=this._get(u,"onClose"),o&&o.apply(u.input?u.input[0]:null,[u.input?u.input.val():"",u]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&0===n.parents("#"+e.datepicker._mainDivId).length&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==r)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,n,r){var i=e(t),s=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(s,n+("M"===r?this._get(s,"showCurrentAtPos"):0),r),this._updateDatepicker(s))},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),s=this._getInst(i[0]);s["selected"+("M"===r?"Month":"Year")]=s["draw"+("M"===r?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(t,n,r,i){var s,o=e(t);e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",i).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=r,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),s=this._getInst(i[0]);n=null!=n?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),r=this._get(s,"onSelect"),r?r.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(s).each(function(){e(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,r){if(null==t||null==n)throw"Invalid arguments";if(n="object"==typeof n?n.toString():n+"",""===n)return null;var i,s,o,b,u=0,a=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,f="string"!=typeof a?a:(new Date).getFullYear()%100+parseInt(a,10),l=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,c=(r?r.dayNames:null)||this._defaults.dayNames,h=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,p=(r?r.monthNames:null)||this._defaults.monthNames,d=-1,v=-1,m=-1,g=-1,y=!1,w=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},E=function(e){var t=w(e),r="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=n.substring(u).match(i);if(!s)throw"Missing number at position "+u;return u+=s[0].length,parseInt(s[0],10)},S=function(t,r,i){var s=-1,o=e.map(w(t)?i:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var r=t[1];return n.substr(u,r.length).toLowerCase()===r.toLowerCase()?(s=t[0],u+=r.length,!1):void 0}),-1!==s)return s+1;throw"Unknown name at position "+u},x=function(){if(n.charAt(u)!==t.charAt(i))throw"Unexpected literal at position "+u;u++};for(i=0;i<t.length;i++)if(y)"'"!==t.charAt(i)||w("'")?x():y=!1;else switch(t.charAt(i)){case"d":m=E("d");break;case"D":S("D",l,c);break;case"o":g=E("o");break;case"m":v=E("m");break;case"M":v=S("M",h,p);break;case"y":d=E("y");break;case"@":b=new Date(E("@")),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"!":b=new Date((E("!")-this._ticksTo1970)/1e4),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"'":w("'")?x():y=!0;break;default:x()}if(u<n.length&&(o=n.substr(u),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===d?d=(new Date).getFullYear():100>d&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f>=d?0:-100)),g>-1)for(v=1,m=g;;){if(s=this._getDaysInMonth(d,v-1),s>=m)break;v++,m-=s}if(b=this._daylightSavingAdjust(new Date(d,v-1,m)),b.getFullYear()!==d||b.getMonth()+1!==v||b.getDate()!==m)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;return n&&r++,n},f=function(e,t,n){var r=""+t;if(a(e))for(;r.length<n;)r="0"+r;return r},l=function(e,t,n,r){return a(e)?r[t]:n[t]},c="",h=!1;if(t)for(r=0;r<e.length;r++)if(h)"'"!==e.charAt(r)||a("'")?c+=e.charAt(r):h=!1;else switch(e.charAt(r)){case"d":c+=f("d",t.getDate(),2);break;case"D":c+=l("D",t.getDay(),i,s);break;case"o":c+=f("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":c+=f("m",t.getMonth()+1,2);break;case"M":c+=l("M",t.getMonth(),o,u);break;case"y":c+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=1e4*t.getTime()+this._ticksTo1970;break;case"'":a("'")?c+="'":h=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=t+1<e.length&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;t<e.length;t++)if(r)"'"!==e.charAt(t)||i("'")?n+=e.charAt(t):r=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,n){return e.settings[n]!==t?e.settings[n]:this._defaults[n]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),s=i,o=this._getFormatConfig(e);try{s=this.parseDate(n,r,o)||i}catch(u){r=t?"":r}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=r?s.getDate():0,e.currentMonth=r?s.getMonth():0,e.currentYear=r?s.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}for(var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=a.exec(n);f;){switch(f[2]||"d"){case"d":case"D":u+=parseInt(f[1],10);break;case"w":case"W":u+=7*parseInt(f[1],10);break;case"m":case"M":o+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o))}f=a.exec(n)}return new Date(s,o,u)},o=null==n||""===n?r:"string"==typeof n?s(n):"number"==typeof n?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&"Invalid Date"===o.toString()?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!==e.selectedMonth||s!==e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+r].datepicker._adjustDate(i,-n,"M")},next:function(){window["DP_jQuery_"+r].datepicker._adjustDate(i,+n,"M")},hide:function(){window["DP_jQuery_"+r].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+r].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+r].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=new Date,R=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),X=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),K=1!==V[0]||1!==V[1],Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-$,et=e.drawYear;if(0>Z&&(Z+=12,et--),Y)for(t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-V[0]*V[1]+1,Y.getDate())),t=G&&G>t?G:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=X?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=X?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),u=this._get(e,"gotoCurrent")&&e.currentDay?Q:R,o=X?this.formatDate(o,u,this._getFormatConfig(e)):o,a=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",f=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?a:"")+(this._isInRange(e,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":a)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,c=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",E,S=0;S<V[0];S++){for(x="",this.maxRows=4,T=0;T<V[1];T++){if(N=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),C=" ui-corner-all",k="",K){if(k+="<div class='ui-datepicker-group",V[1]>1)switch(T){case 0:k+=" ui-datepicker-group-first",C=" ui-corner-"+(U?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",C=" ui-corner-"+(U?"left":"right");break;default:k+=" ui-datepicker-group-middle",C=""}k+="'>"}for(k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&0===S?U?s:r:"")+(/all|right/.test(C)&&0===S?U?r:s:"")+this._generateMonthYearHeader(e,Z,et,G,Y,S>0||T>0,d,v)+"</div><table class='ui-datepicker-calendar'><thead><tr>",L=c?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",E=0;7>E;E++)A=(E+l)%7,L+="<th"+((E+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+h[A]+"'>"+p[A]+"</span></th>";for(k+=L+"</tr></thead><tbody>",O=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),M=(this._getFirstDayOfMonth(et,Z)-l+7)%7,_=Math.ceil((M+O)/7),D=K&&this.maxRows>_?this.maxRows:_,this.maxRows=D,P=this._daylightSavingAdjust(new Date(et,Z,1-M)),H=0;D>H;H++){for(k+="<tr>",B=c?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"",E=0;7>E;E++)j=m?m.apply(e.input?e.input[0]:null,[P]):[!0,""],F=P.getMonth()!==Z,I=F&&!y||!j[0]||G&&G>P||Y&&P>Y,B+="<td class='"+((E+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===N.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===P.getTime()&&b.getTime()===N.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!g?"":" "+j[1]+(P.getTime()===Q.getTime()?" "+this._currentClass:"")+(P.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(F&&!g||!j[2]?"":" title='"+j[2]+"'")+(I?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!g?"&#xa0;":I?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===R.getTime()?" ui-state-highlight":"")+(P.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);k+=B+"</tr>"}Z++,Z>11&&(Z=0,et++),k+="</tbody></table>"+(K?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=k
}w+=x}return w+=f,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(a=r&&r.getFullYear()===n,f=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",l=0;12>l;l++)(!a||l>=r.getMonth())&&(!f||l<=i.getMonth())&&(w+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+u[l]+"</option>");w+="</select>"}if(y||(b+=w+(!s&&m&&g?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!g)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(c=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(c[0]),v=Math.max(d,p(c[1]||"")),d=r?Math.max(d,r.getFullYear()):d,v=i?Math.min(v,i.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";v>=d;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!s&&m&&g?"":"&#xa0;")+w),b+="</div>"},_adjustInstDate:function(e,t,n){var r=e.drawYear+("Y"===n?t:0),i=e.drawMonth+("M"===n?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+("D"===n?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&n>t?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(0>t?t:i[0]*i[1]),1));return 0>t&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,u=null,a=this._get(e,"yearRange");return a&&(n=a.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10)+r,u=parseInt(n[1],10)+r),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!u||t.getFullYear()<=u)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new s,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.0",window["DP_jQuery_"+r]=e}(jQuery),function(e){var n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.0",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;0>n&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!t&&this._trigger("focus",e),n},open:function(){return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show),this._focusTabbable(),this._isOpen=!0,this._trigger("open"),this._trigger("focus"),void 0)},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var n=this.uiDialog.find(":tabbable"),r=n.filter(":first"),i=n.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||t.shiftKey?(t.target===r[0]||t.target===this.uiDialog[0])&&t.shiftKey&&(i.focus(1),t.preventDefault()):(r.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)?void this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(n,function(n,r){var i,s;r=e.isFunction(r)?{click:r,text:n}:r,r=e.extend({type:"button"},r),i=r.click,r.click=function(){i.apply(t.element[0],arguments)},s={icons:r.icons,text:r.showText},delete r.icons,delete r.showText,e("<button></button>",r).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var t=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){e(this).addClass("ui-dialog-dragging"),t._trigger("dragStart",n,r(i))},drag:function(e,n){t._trigger("drag",e,r(n))},stop:function(i,s){n.position=[s.position.left-t.document.scrollLeft(),s.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._trigger("dragStop",i,r(s))}})},_makeResizable:function(){function o(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var t=this,n=this.options,r=n.resizable,i=this.uiDialog.css("position"),s="string"==typeof r?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function(n,r){e(this).addClass("ui-dialog-resizing"),t._trigger("resizeStart",n,o(r))},resize:function(e,n){t._trigger("resize",e,o(n))},stop:function(r,i){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),t._trigger("resizeStop",r,o(i))}}).css("position",i)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,o={};e.each(t,function(e,t){i._setOption(e,t),e in n&&(s=!0),e in r&&(o[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var n,r,i=this.uiDialog;"dialogClass"===e&&i.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(n=i.is(":data(ui-draggable)"),n&&!t&&i.draggable("destroy"),!n&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&"string"==typeof t&&i.resizable("option","handles",t),!r&&t!==!1&&this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),n="number"==typeof r.maxHeight?Math.max(0,r.maxHeight-e):"none","auto"===r.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_createOverlay:function(){this.options.modal&&(e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this._on(this.document,{focusin:function(t){e(t.target).closest(".ui-dialog").length||(t.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data("ui-dialog")._focusTabbable())}})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this.document[0].body),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++)},_destroyOverlay:function(){this.options.modal&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this._off(this.document,"focusin"),this.overlay.remove())}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var i,t=this.options.position,n=[],r=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(n=t.split?t.split(" "):[t[0],t[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1]),at:n.join(" ")}),t=e.extend({},e.ui.dialog.prototype.options.position,t)):t=e.ui.dialog.prototype.options.position,i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()}})}(jQuery),function(e){function n(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))}function r(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);-1!==i&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")}var t=0;e.widget("ui.tooltip",{version:"1.10.0",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var r=this;return"disabled"===t?(this[n?"_disable":"_enable"](),void(this.options[t]=n)):(this._super(t,n),void("content"===t&&e.each(this.tooltips,function(e,t){r._updateContent(t)})))},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);r.length&&!r.data("ui-tooltip-id")&&(r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&r.parents().each(function(){var r,t=e(this);t.data("ui-tooltip-open")&&(r=e.Event("blur"),r.target=r.currentTarget=this,n.close(r,!0)),t.attr("title")&&(t.uniqueId(),n.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._updateContent(r,t))},_updateContent:function(e,t){var n,r=this.options.content,i=this,s=t?t.type:null;return"string"==typeof r?this._open(t,e,r):(n=r.call(e[0],function(n){e.data("ui-tooltip-open")&&i._delay(function(){t&&(t.type=s),this._open(t,e,n)})}),void(n&&this._open(t,e,n)))},_open:function(t,r,i){function f(e){a.of=e,s.is(":hidden")||s.position(a)}var s,o,u,a=e.extend({},this.options.position);if(i){if(s=this._find(r),s.length)return void s.find(".ui-tooltip-content").html(i);r.is("[title]")&&(t&&"mouseover"===t.type?r.attr("title",""):r.removeAttr("title")),s=this._tooltip(r),n(r,s.attr("id")),s.find(".ui-tooltip-content").html(i),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:f}),f(t)):s.position(e.extend({of:r},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(u=this.delayedShow=setInterval(function(){s.is(":visible")&&(f(a.of),clearInterval(u))},e.fx.interval)),this._trigger("open",t,{tooltip:s}),o={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=r[0],this.close(n,!0)}},remove:function(){this._removeTooltip(s)}},t&&"mouseover"!==t.type||(o.mouseleave="close"),t&&"focusin"!==t.type||(o.focusout="close"),this._on(!0,r,o)}},close:function(t){var n=this,i=e(t?t.currentTarget:this.element),s=this._find(i);this.closing||(clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&i.attr("title",i.data("ui-tooltip-title")),r(i),s.stop(!0),this._hide(s,this.options.hide,function(){n._removeTooltip(e(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,r){e(r.element).attr("title",r.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1)},_tooltip:function(n){var r="ui-tooltip-"+t++,i=e("<div>").attr({id:r,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[r]=n,i},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0),e("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})}(jQuery),function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var h,f=b.parentNode,g=f.name;return b.href&&g&&"map"===f.nodeName.toLowerCase()?(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h)):!1}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return"hidden"===a.curCSS(this,"visibility")||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.8.22",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var e,f,d=a(this[0]);d.length&&d[0]!==document;){if(e=d.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(f=parseInt(d.css("zIndex"),10),!isNaN(f)&&0!==f))return f;d=d.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var e="Width"===d?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=100===c.offsetHeight,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.curCSS||(a.curCSS=a.css),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(d&&a.element[0].parentNode)for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?16&a.compareDocumentPosition(b):a!==b&&a.contains(b)},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&b+c>a},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))}(jQuery),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var e,d=0;null!=(e=b[d]);d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var f,e=b.split(".")[0];b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f="string"==typeof e,g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&"_"===e.charAt(0)?h:(this.each(f?function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;return f!==d&&f!==b?(h=f,!1):void 0}:function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(0===arguments.length)return a.extend({},this.options);if("string"==typeof c){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent,f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}(jQuery),function(a){var c=!1;a(document).mouseup(function(){c=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1==b.which,f="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0)):!0}},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f={},g=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var l,m,n,h=a(b.of),i=h[0],j=(b.collision||"flip").split(" "),k=b.offset?b.offset.split(" "):[0,0];return 9===i.nodeType?(l=h.width(),m=h.height(),n={top:0,left:0}):i.setTimeout?(l=h.width(),m=h.height(),n={top:h.scrollTop(),left:h.scrollLeft()}):i.preventDefault?(b.at="left top",l=m=0,n={top:b.of.pageY,left:b.of.pageX}):(l=h.outerWidth(),m=h.outerHeight(),n=h.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");1===a.length&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),1===j.length&&(j[1]=j[0]),k[0]=parseInt(k[0],10)||0,1===k.length&&(k[1]=k[0]),k[1]=parseInt(k[1],10)||0,"right"===b.at[0]?n.left+=l:b.at[0]===e&&(n.left+=l/2),"bottom"===b.at[1]?n.top+=m:b.at[1]===e&&(n.top+=m/2),n.left+=k[0],n.top+=k[1],this.each(function(){var r,c=a(this),d=c.outerWidth(),g=c.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,o=d+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=g+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0),q=a.extend({},n);"right"===b.my[0]?q.left-=d:b.my[0]===e&&(q.left-=d/2),"bottom"===b.my[1]?q.top-=g:b.my[1]===e&&(q.top-=g/2),f.fractions||(q.left=Math.round(q.left),q.top=Math.round(q.top)),r={left:q.left-h,top:q.top-i},a.each(["left","top"],function(c,e){a.ui.position[j[c]]&&a.ui.position[j[c]][e](q,{targetWidth:l,targetHeight:m,elemWidth:d,elemHeight:g,collisionPosition:r,collisionWidth:o,collisionHeight:p,offset:k,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(q,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!==e){var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g="left"===c.my[0]?-c.elemWidth:"right"===c.my[0]?c.elemWidth:0,h="left"===c.at[0]?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0}},top:function(b,c){if(c.at[1]!==e){var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g="top"===c.my[1]?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,h="top"===c.at[1]?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];
b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return c&&c.ownerDocument?b?this.each(a.isFunction(b)?function(c){a(this).offset(b.call(this,c,a(this).offset()))}:function(){a.offset.setOffset(this,b)}):h.call(this):null}),function(){var d,e,g,h,i,b=document.getElementsByTagName("body")[0],c=document.createElement("div");d=document.createElement(b?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},b&&a.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in g)d.style[j]=g[j];d.appendChild(c),e=b||document.documentElement,e.insertBefore(d,e.firstChild),c.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",h=a(c).offset(function(a,b){return b}).offset(),d.innerHTML="",e.removeChild(d),i=h.top+h.left+(b?2e3:0),f.fractions=i>21&&22>i}()}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);for(var d=this.element[0],e=!1;d&&(d=d.parentNode);)d==document&&(e=!0);if(!e&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",b)!==!1&&f._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return this.options.iframeFix===!0&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),("document"==b.containment||"window"==b.containment)&&(this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{var c=a(b.containment),d=c[0];if(!d)return;var f=(c.offset(),"hidden"!=a(d).css("overflow"));this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,f=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h&&(j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3])?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h&&(k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2])?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.22"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this;a.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var d=a("body"),e=a(this).data("draggable").options;d.css("cursor")&&(e._cursor=d.css("cursor")),d.css("cursor",e.cursor)},stop:function(){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var d=a(this).data("draggable");d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b){var d=a(this).data("draggable"),e=d.options,f=!1;d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName?(e.axis&&"x"==e.axis||(d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed)),e.axis&&"y"==e.axis||(d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed))):(e.axis&&"x"==e.axis||(b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed))),e.axis&&"y"==e.axis||(b.pageX-a(document).scrollLeft()<e.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed)))),f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var d=a(this).data("draggable"),e=d.options;d.snapElements=[],a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){for(var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height,k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(g>l-f&&m+f>g&&i>n-f&&o+f>i||g>l-f&&m+f>g&&j>n-f&&o+f>j||h>l-f&&m+f>h&&i>n-f&&o+f>i||h>l-f&&m+f>h&&j>n-f&&o+f>j){if("inner"!=e.snapMode){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if("outer"!=e.snapMode){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}else d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1}}}),a.ui.plugin.add("draggable","stack",{start:function(){var d=a(this).data("draggable").options,e=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(e.length){var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a}),this[0].style.zIndex=f+e.length}}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(b,c){"accept"==b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"1.8.22"}),a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height,i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;switch(d){case"fit":return e>=i&&j>=f&&g>=k&&l>=h;case"intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;case"pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,o=a.ui.isOver(n,m,k,i,c.proportions.height,c.proportions.width);return o;case"touch":return(g>=k&&l>=g||h>=k&&l>=h||k>g&&h>l)&&(e>=i&&j>=e||f>=i&&j>=f||i>e&&f>j);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf();g:for(var h=0;h<d.length;h++)if(!(d[h].options.disabled||b&&!d[h].accept.call(d[h].element[0],b.currentItem||b.element))){for(var i=0;i<f.length;i++)if(f[i]==d[h].element[0]){d[h].proportions.height=0;continue g}d[h].visible="none"!=d[h].element.css("display"),d[h].visible&&("mousedown"==e&&d[h]._activate.call(d[h],c),d[h].offset=d[h].element.offset(),d[h].proportions={width:d[h].element[0].offsetWidth,height:d[h].element[0].offsetHeight})}},drop:function(b,c){var d=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d=a.ui.intersect(b,this,this.options.tolerance),e=d||1!=this.isover?d&&0==this.isover?"isover":null:"isout";if(e){var f;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");g.length&&(f=a.data(g[0],"droppable"),f.greedyChild="isover"==e?1:0)}f&&"isover"==e&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this["isout"==e?"isover":"isout"]=0,this["isover"==e?"_over":"_out"].call(this,c),f&&"isout"==e&&(f.isout=0,f.isover=1,f._over.call(f,c))}}})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles={};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),g="ui-resizable-"+f,h=a('<div class="ui-resizable-handle '+g+'"></div>');h.css({zIndex:c.zIndex}),"se"==f&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(h)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){if(this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();var f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(f,e),this._proportionallyResize()}a(this.handles[c]).length}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){c.disabled||(a(this).removeClass("ui-resizable-autohide"),b._handles.show())},function(){c.disabled||b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(b){var d=this.options,e=this.element.position(),f=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(f.is(".ui-draggable")||/absolute/.test(f.css("position")))&&f.css({position:"absolute",top:e.top,left:e.left}),this._renderProxy();var g=c(this.helper.css("left")),h=c(this.helper.css("top"));d.containment&&(g+=a(d.containment).scrollLeft()||0,h+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:h},this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:g,top:h},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof d.aspectRatio?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;var i=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor","auto"==i?this.axis+"-resize":i),f.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c=this.helper,g=(this.options,this.originalMousePosition),h=this.axis,i=b.pageX-g.left||0,j=b.pageY-g.top||0,k=this._change[h];if(!k)return!1;{var l=k.apply(this,[b,i,j]);a.browser.msie&&a.browser.version<7,this.sizeDiff}return this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(l=this._updateRatio(l,b)),l=this._respectSize(l,b),this._propagate("resize",b),c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",b,this.ui()),!1},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width,i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(i,{top:k,left:j})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var c,e,f,g,h,b=this.options;
h={minWidth:d(b.minWidth)?b.minWidth:0,maxWidth:d(b.maxWidth)?b.maxWidth:1/0,minHeight:d(b.minHeight)?b.minHeight:0,maxHeight:d(b.maxHeight)?b.maxHeight:1/0},(this._aspectRatio||a)&&(c=h.minHeight*this.aspectRatio,f=h.minWidth/this.aspectRatio,e=h.maxHeight*this.aspectRatio,g=h.maxWidth/this.aspectRatio,c>h.minWidth&&(h.minWidth=c),f>h.minHeight&&(h.minHeight=f),e<h.maxWidth&&(h.maxWidth=e),g<h.maxHeight&&(h.maxHeight=g)),this._vBoundaries=h},_updateCache:function(a){this.options;this.offset=this.helper.offset(),d(a.left)&&(this.position.left=a.left),d(a.top)&&(this.position.top=a.top),d(a.height)&&(this.size.height=a.height),d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var e=(this.options,this.position),f=this.size,g=this.axis;return d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio),"sw"==g&&(a.left=e.left+(f.width-a.width),a.top=null),"nw"==g&&(a.top=e.top+(f.height-a.height),a.left=e.left+(f.width-a.width)),a},_respectSize:function(a,b){var e=(this.helper,this._vBoundaries),g=(this._aspectRatio||b.shiftKey,this.axis),h=d(a.width)&&e.maxWidth&&e.maxWidth<a.width,i=d(a.height)&&e.maxHeight&&e.maxHeight<a.height,j=d(a.width)&&e.minWidth&&e.minWidth>a.width,k=d(a.height)&&e.minHeight&&e.minHeight>a.height;j&&(a.width=e.minWidth),k&&(a.height=e.minHeight),h&&(a.width=e.maxWidth),i&&(a.height=e.maxHeight);var l=this.originalPosition.left+this.originalSize.width,m=this.position.top+this.size.height,n=/sw|nw|w/.test(g),o=/nw|ne|n/.test(g);j&&n&&(a.left=l-e.minWidth),h&&n&&(a.left=l-e.maxWidth),k&&o&&(a.top=m-e.minHeight),i&&o&&(a.top=m-e.maxHeight);var p=!a.width&&!a.height;return p&&!a.left&&a.top?a.top=null:p&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var c=this.helper||this.element,d=0;d<this._proportionallyResizeElements.length;d++){var e=this._proportionallyResizeElements[d];if(!this.borderDif){var f=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],g=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=a.map(f,function(a,b){var c=parseInt(a,10)||0,d=parseInt(g[b],10)||0;return c+d})}a.browser.msie&&(a(c).is(":hidden")||a(c).parents(":hidden").length)||e.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||0,width:c.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.element,c=this.options;if(this.elementOffset=b.offset(),this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var e=(this.options,this.originalSize),f=this.originalPosition;return{left:f.left+b,width:e.width-b}},n:function(a,b,c){var e=(this.options,this.originalSize),f=this.originalPosition;return{top:f.top+c,height:e.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!=b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"1.8.22"}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var d=a(this).data("resizable"),e=d.options,f=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?f(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],f(e.alsoResize)):a.each(e.alsoResize,function(a){f(a)})},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var d=a(this).data("resizable"),e=d.options,f=d._proportionallyResizeElements,g=f.length&&/textarea/i.test(f[0].nodeName),h=g&&a.ui.hasScroll(f[0],"left")?0:d.sizeDiff.height,i=g?0:d.sizeDiff.width,j={width:d.size.width-i,height:d.size.height-h},k=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;d.element.animate(a.extend(j,l&&k?{top:l,left:k}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var c={width:parseInt(d.element.css("width"),10),height:parseInt(d.element.css("height"),10),top:parseInt(d.element.css("top"),10),left:parseInt(d.element.css("left"),10)};f&&f.length&&a(f[0]).css({width:c.width,height:c.height}),d._updateCache(c),d._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var e=a(this).data("resizable"),f=e.options,g=e.element,h=f.containment,i=h instanceof a?h.get(0):/parent/.test(h)?g.parent().get(0):h;if(i)if(e.containerElement=a(i),/document/.test(h)||h==document)e.containerOffset={left:0,top:0},e.containerPosition={left:0,top:0},e.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var j=a(i),k=[];a(["Top","Right","Left","Bottom"]).each(function(a,b){k[a]=c(j.css("padding"+b))}),e.containerOffset=j.offset(),e.containerPosition=j.position(),e.containerSize={height:j.innerHeight()-k[3],width:j.innerWidth()-k[1]};var l=e.containerOffset,m=e.containerSize.height,n=e.containerSize.width,o=a.ui.hasScroll(i,"left")?i.scrollWidth:n,p=a.ui.hasScroll(i)?i.scrollHeight:m;e.parentData={element:i,left:l.left,top:l.top,width:o,height:p}}},resize:function(b){var d=a(this).data("resizable"),e=d.options,g=(d.containerSize,d.containerOffset),i=(d.size,d.position),j=d._aspectRatio||b.shiftKey,k={top:0,left:0},l=d.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(k=g),i.left<(d._helper?g.left:0)&&(d.size.width=d.size.width+(d._helper?d.position.left-g.left:d.position.left-k.left),j&&(d.size.height=d.size.width/d.aspectRatio),d.position.left=e.helper?g.left:0),i.top<(d._helper?g.top:0)&&(d.size.height=d.size.height+(d._helper?d.position.top-g.top:d.position.top),j&&(d.size.width=d.size.height*d.aspectRatio),d.position.top=d._helper?g.top:0),d.offset.left=d.parentData.left+d.position.left,d.offset.top=d.parentData.top+d.position.top;var m=Math.abs((d._helper?d.offset.left-k.left:d.offset.left-k.left)+d.sizeDiff.width),n=Math.abs((d._helper?d.offset.top-k.top:d.offset.top-g.top)+d.sizeDiff.height),o=d.containerElement.get(0)==d.element.parent().get(0),p=/relative|absolute/.test(d.containerElement.css("position"));o&&p&&(m-=d.parentData.left),m+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-m,j&&(d.size.height=d.size.width/d.aspectRatio)),n+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-n,j&&(d.size.width=d.size.height*d.aspectRatio))},stop:function(){var d=a(this).data("resizable"),e=d.options,g=(d.position,d.containerOffset),h=d.containerPosition,i=d.containerElement,j=a(d.helper),k=j.offset(),l=j.outerWidth()-d.sizeDiff.width,m=j.outerHeight()-d.sizeDiff.height;d._helper&&!e.animate&&/relative/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m}),d._helper&&!e.animate&&/static/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m})}}),a.ui.plugin.add("resizable","ghost",{start:function(){var d=a(this).data("resizable"),e=d.options,f=d.size;d.ghost=d.originalElement.clone(),d.ghost.css({opacity:.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof e.ghost?e.ghost:""),d.ghost.appendTo(d.helper)},resize:function(){{var d=a(this).data("resizable");d.options}d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(){{var d=a(this).data("resizable");d.options}d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(b){{var d=a(this).data("resizable"),e=d.options,f=d.size,g=d.originalSize,h=d.originalPosition,i=d.axis;e._aspectRatio||b.shiftKey}e.grid="number"==typeof e.grid?[e.grid,e.grid]:e.grid;var k=Math.round((f.width-g.width)/(e.grid[0]||1))*(e.grid[0]||1),l=Math.round((f.height-g.height)/(e.grid[1]||1))*(e.grid[1]||1);/^(se|s|e)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l):/^(ne)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l):/^(sw)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.left=h.left-k):(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l,d.position.left=h.left-k)}});var c=function(a){return parseInt(a,10)||0},d=function(a){return!isNaN(parseInt(a,10))}}(jQuery),function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable"),this.dragged=!1;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]),c.addClass("ui-selectee"),c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=c.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(b){var c=this;if(this.opos=[b.pageX,b.pageY],!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,!b.metaKey&&!b.ctrlKey&&(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var e=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");return d.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),d.unselecting=!e,d.selecting=e,d.selected=e,e?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element}),!1}})}},_mouseDrag:function(b){var c=this;if(this.dragged=!0,!this.options.disabled){var d=this.options,e=this.opos[0],f=this.opos[1],g=b.pageX,h=b.pageY;if(e>g){var i=g;g=e,e=i}if(f>h){var i=h;h=f,f=i}return this.helper.css({left:e,top:f,width:g-e,height:h-f}),this.selectees.each(function(){var i=a.data(this,"selectable-item");if(i&&i.element!=c.element[0]){var j=!1;"touch"==d.tolerance?j=!(i.left>g||i.right<e||i.top>h||i.bottom<f):"fit"==d.tolerance&&(j=i.left>e&&i.right<g&&i.top>f&&i.bottom<h),j?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,c._trigger("selecting",b,{selecting:i.element}))):(i.selecting&&((b.metaKey||b.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),c._trigger("unselecting",b,{unselecting:i.element}))),i.selected&&!b.metaKey&&!b.ctrlKey&&!i.startselected&&(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,c._trigger("unselecting",b,{unselecting:i.element})))}}),!1}},_mouseStop:function(b){var c=this;this.dragged=!1;this.options;return a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.extend(a.ui.selectable,{version:"1.8.22"})}(jQuery),function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){a.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);{var e=null,f=this;a(b.target).parents().each(function(){return a.data(this,d.widgetName+"-item")==f?(e=a(this),!1):void 0})}if(a.data(b.target,d.widgetName+"-item")==f&&(e=a(b.target)),!e)return!1;if(this.options.handle&&!c){var h=!1;if(a(this.options.handle,e).find("*").andSelf().each(function(){this==b.target&&(h=!0)}),!h)return!1}return this.currentItem=e,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,c,d){var e=this.options,f=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),e.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",e.cursor)),e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity)),e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(var g=this.containers.length-1;g>=0;g--)this.containers[g]._trigger("activate",b,f._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),d!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var e=this.items.length-1;e>=0;e--){var f=this.items[e],g=f.item[0],h=this._intersectsWithPointer(f);if(h&&g!=this.currentItem[0]&&this.placeholder[1==h?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&("semi-dynamic"==this.options.type?!a.ui.contains(this.element[0],g):!0)){if(this.direction=1==h?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(f))break;this._rearrange(b,f),this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0,a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("deactivate",null,b._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,b._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l=d+j>h&&i>d+j&&b+k>f&&g>b+k;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c="x"===this.options.axis||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),d="y"===this.options.axis||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&"right"==g||"down"==f?2:1:f&&("down"==f?2:1):!1},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"==f&&d||"left"==f&&!d:e&&("down"==e&&c||"up"==e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var d=[],e=[],f=this._connectWith();if(f&&b)for(var g=f.length-1;g>=0;g--)for(var h=a(f[g]),i=h.length-1;i>=0;i--){var j=a.data(h[i],this.widgetName);j&&j!=this&&!j.options.disabled&&e.push([a.isFunction(j.options.items)?j.options.items.call(j.element):a(j.options.items,j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),j])}e.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var g=e.length-1;g>=0;g--)e[g][0].each(function(){d.push(this)});return a(d)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data("+this.widgetName+"-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,e=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(var g=f.length-1;g>=0;g--)for(var h=a(f[g]),i=h.length-1;i>=0;i--){var j=a.data(h[i],this.widgetName);j&&j!=this&&!j.options.disabled&&(e.push([a.isFunction(j.options.items)?j.options.items.call(j.element[0],b,{item:this.currentItem}):a(j.options.items,j.element),j]),this.containers.push(j))}for(var g=e.length-1;g>=0;g--)for(var k=e[g][1],l=e[g][0],i=0,m=l.length;m>i;i++){var n=a(l[i]);n.data(this.widgetName+"-item",k),c.push({item:n,instance:k,width:0,height:0,left:0,top:0})}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var d=this.items[c];if(d.instance==this.currentContainer||!this.currentContainer||d.item[0]==this.currentItem[0]){var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight());var f=e.offset();d.left=f.left,d.top=f.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var c=this.containers.length-1;c>=0;c--){var f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(b.style.visibility="hidden"),b},update:function(a,b){(!e||d.forcePlaceholderSize)&&(b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10)))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){for(var c=null,d=null,e=this.containers.length-1;e>=0;e--)if(!a.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(c&&a.ui.contains(this.containers[e].element[0],c.element[0]))continue;c=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){for(var f=1e4,g=null,h=this.positionAbs[this.containers[d].floating?"left":"top"],i=this.items.length-1;i>=0;i--)if(a.ui.contains(this.containers[d].element[0],this.items[i].item[0])){var j=this.containers[d].floating?this.items[i].item.offset().left:this.items[i].item.offset().top;Math.abs(j-h)<f&&(f=Math.abs(j-h),g=this.items[i],this.direction=j-h>0?"down":"up")}if(!g&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[d],g?this._rearrange(b,g,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"==c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!=c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(""==d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),("document"==b.containment||"window"==b.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],d=a(b.containment).offset(),e="hidden"!=a(c).css("overflow");this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]
}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,f=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName);"relative"==this.cssPosition&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;if(this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),c.grid)){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment&&(h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3])?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h;var i=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment&&(i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2])?i-this.offset.click.left<this.containment[0]?i+c.grid[0]:i-c.grid[0]:i}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1;var d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS)("auto"==this._storedCSS[f]||"static"==this._storedCSS[f])&&(this._storedCSS[f]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c&&d.push(function(a){this._trigger("update",a,this._uiHash())}),!a.ui.contains(this.element[0],this.currentItem[0])){c||d.push(function(a){this._trigger("remove",a,this._uiHash())});for(var f=this.containers.length-1;f>=0;f--)a.ui.contains(this.containers[f].element[0],this.currentItem[0])&&!c&&(d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[f])),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[f])))}for(var f=this.containers.length-1;f>=0;f--)c||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=0);if(this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!1}if(c||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!c){for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.extend(a.ui.sortable,{version:"1.8.22"})}(jQuery),function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,c=b.options;if(b.running=0,b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),b.headers=b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){c.disabled||a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){c.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){c.disabled||a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){c.disabled||a(this).removeClass("ui-state-focus")}),b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),c.navigation){var d=b.element.find("a").filter(c.navigationFilter).eq(0);if(d.length){var e=d.closest(".ui-accordion-header");b.active=e.length?e:d.closest(".ui-accordion-content").prev()}}b.active=b._findActive(b.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),b.active.next().addClass("ui-accordion-content-active"),b._createIcons(),b.resize(),b.element.attr("role","tablist"),b.headers.attr("role","tab").bind("keydown.accordion",function(a){return b._keydown(a)}).next().attr("role","tabpanel"),b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),b.active.length?b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0),a.browser.safari||b.headers.find("a").attr("tabIndex",-1),c.event&&b.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this),a.preventDefault()})},_createIcons:function(){var b=this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(b.autoHeight||b.fillHeight)&&c.css("height",""),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"active"==b&&this.activate(c),"icons"==b&&(this._destroyIcons(),c&&this._createIcons()),"disabled"==b&&this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(!(this.options.disabled||b.altKey||b.ctrlKey)){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()}return f?(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),!1):!0}},resize:function(){var c,b=this.options;if(b.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}c=this.element.parent().height(),a.browser.msie&&this.element.parent().css("overflow",d),this.headers.each(function(){c-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else b.autoHeight&&(c=0,this.headers.next().each(function(){c=Math.max(c,a(this).height("").height())}).height(c));return this},activate:function(a){this.options.active=a;var b=this._findActive(a)[0];return this._clickHandler({target:b},b),this},_findActive:function(b){return b?"number"==typeof b?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===!1?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,c){var d=this.options;if(!d.disabled){if(!b.target){if(!d.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),this.active.next().addClass("ui-accordion-content-active");var e=this.active.next(),f={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:e},g=this.active=a([]);return void this._toggle(g,e,f)}var h=a(b.currentTarget||c),i=h[0]===this.active[0];if(d.active=d.collapsible&&i?!1:this.headers.index(h),!(this.running||!d.collapsible&&i)){var j=this.active,g=h.next(),e=this.active.next(),f={options:d,newHeader:i&&d.collapsible?a([]):h,oldHeader:this.active,newContent:i&&d.collapsible?a([]):g,oldContent:e},k=this.headers.index(this.active[0])>this.headers.index(h[0]);this.active=i?a([]):h,this._toggle(g,e,f,i,k),j.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),i||(h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected),h.next().addClass("ui-accordion-content-active"))}}},_toggle:function(b,c,d,e,f){var g=this,h=g.options;g.toShow=b,g.toHide=c,g.data=d;var i=function(){return g?g._completed.apply(g,arguments):void 0};if(g._trigger("changestart",null,g.data),g.running=0===c.size()?b.size():c.size(),h.animated){var j={};j=h.collapsible&&e?{toShow:a([]),toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace}:{toShow:b,toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace},h.proxied||(h.proxied=h.animated),h.proxiedDuration||(h.proxiedDuration=h.duration),h.animated=a.isFunction(h.proxied)?h.proxied(j):h.proxied,h.duration=a.isFunction(h.proxiedDuration)?h.proxiedDuration(j):h.proxiedDuration;var k=a.ui.accordion.animations,l=h.duration,m=h.animated;m&&!k[m]&&!a.easing[m]&&(m="slide"),k[m]||(k[m]=function(a){this.slide(a,{easing:m,duration:l||700})}),k[m](j)}else h.collapsible&&e?b.toggle():(c.hide(),b.show()),i(!0);c.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),b.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),a.extend(a.ui.accordion,{version:"1.8.22",animations:{slide:function(b,c){if(b=a.extend({easing:"swing",duration:300},b,c),!b.toHide.size())return void b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b);if(!b.toShow.size())return void b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);var i,d=b.toShow.css("overflow"),e=0,f={},g={},h=["height","paddingTop","paddingBottom"],j=b.toShow;i=j[0].style.width,j.width(j.parent().width()-parseFloat(j.css("paddingLeft"))-parseFloat(j.css("paddingRight"))-(parseFloat(j.css("borderLeftWidth"))||0)-(parseFloat(j.css("borderRightWidth"))||0)),a.each(h,function(c,d){g[d]="hide";var e=(""+a.css(b.toShow[0],d)).match(/^([\d+-.]+)(.*)$/);f[d]={value:e[1],unit:e[2]||"px"}}),b.toShow.css({height:0,overflow:"hidden"}).show(),b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(g,{step:function(a,c){"height"==c.prop&&(e=c.end-c.start===0?0:(c.now-c.start)/(c.end-c.start)),b.toShow[0].style[c.prop]=e*f[c.prop].value+f[c.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height",""),b.toShow.css({width:i,overflow:d}),b.complete()}})},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1e3:200})}}})}(jQuery),function(a){var c=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var d,b=this,c=this.element[0].ownerDocument;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(!b.options.disabled&&!b.element.propAttr("readOnly")){d=!1;var e=a.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:b._move("previousPage",c);break;case e.PAGE_DOWN:b._move("nextPage",c);break;case e.UP:b._keyEvent("previous",c);break;case e.DOWN:b._keyEvent("next",c);break;case e.ENTER:case e.NUMPAD_ENTER:b.menu.active&&(d=!0,c.preventDefault());case e.TAB:if(!b.menu.active)return;b.menu.select(c);break;case e.ESCAPE:b.element.val(b.term),b.close(c);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){b.term!=b.element.val()&&(b.selectedItem=null,b.search(null,c))},b.options.delay)}}}).bind("keypress.autocomplete",function(a){d&&(d=!1,a.preventDefault())}).bind("focus.autocomplete",function(){b.options.disabled||(b.selectedItem=null,b.previous=b.element.val())}).bind("blur.autocomplete",function(a){b.options.disabled||(clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a),b._change(a)},150))}),this._initSource(),this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(c){var d=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(c){c.target!==b.element[0]&&c.target!==d&&!a.ui.contains(d,c.target)&&b.close()})},1),setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,c){var d=c.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&b.element.val(d.value)},selected:function(a,d){var e=d.item.data("item.autocomplete"),f=b.previous;b.element[0]!==c.activeElement&&(b.element.focus(),b.previous=f,setTimeout(function(){b.previous=f,b.selectedItem=e},1)),!1!==b._trigger("select",a,{item:e})&&b.element.val(e.value),b.term=b.element.val(),b.close(a),b.selectedItem=e},blur:function(){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),b.beforeunloadHandler=function(){b.element.removeAttr("autocomplete")},a(window).bind("beforeunload",b.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"source"===b&&this._initSource(),"appendTo"===b&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),"disabled"===b&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var c,d,b=this;a.isArray(this.options.source)?(c=this.options.source,this.source=function(b,d){d(a.ui.autocomplete.filter(c,b.term))}):"string"==typeof this.options.source?(d=this.options.source,this.source=function(c,e){b.xhr&&b.xhr.abort(),b.xhr=a.ajax({url:d,data:c,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},search:function(a,b){return a=null!=a?a:this.element.val(),this.term=this.element.val(),a.length<this.options.minLength?this.close(b):(clearTimeout(this.closing),this._trigger("search",b)!==!1?this._search(a):void 0)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)?(this.element.val(this.term),void this.menu.deactivate()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})}(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){a(c.target).closest(".ui-menu-item a").length&&(c.preventDefault(),b.select(c))}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){if(this.deactivate(),this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();0>c?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active)return void this.activate(c,this.element.children(b));var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last())return void this.activate(b,this.element.children(".ui-menu-item:first"));var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return 10>b&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first())return void this.activate(b,this.element.children(".ui-menu-item:last"));var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return 10>b&&b>-10});e.length||(e=this.element.children(".ui-menu-item:first")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery),function(a){var c,d,e,f,g="ui-button ui-widget ui-state-default ui-corner-all",h="ui-state-hover ui-state-active ",i="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",j=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},k=function(b){var c=b.name,d=b.form,e=a([]);return c&&(e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",j),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,h=this.options,i="checkbox"===this.type||"radio"===this.type,l="ui-state-hover"+(i?"":" ui-state-active"),m="ui-state-focus";null===h.label&&(h.label=this.buttonElement.html()),this.buttonElement.addClass(g).attr("role","button").bind("mouseenter.button",function(){h.disabled||(a(this).addClass("ui-state-hover"),this===c&&a(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){h.disabled||a(this).removeClass(l)}).bind("click.button",function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus.button",function(){b.buttonElement.addClass(m)}).bind("blur.button",function(){b.buttonElement.removeClass(m)}),i&&(this.element.bind("change.button",function(){f||b.refresh()}),this.buttonElement.bind("mousedown.button",function(a){h.disabled||(f=!1,d=a.pageX,e=a.pageY)}).bind("mouseup.button",function(a){h.disabled||(d!==a.pageX||e!==a.pageY)&&(f=!0)})),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){return h.disabled||f?!1:(a(this).toggleClass("ui-state-active"),void b.buttonElement.attr("aria-pressed",b.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed","true");var c=b.element[0];k(c).not(c).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){return h.disabled?!1:(a(this).addClass("ui-state-active"),c=this,a(document).one("mouseup",function(){c=null}),void 0)}).bind("mouseup.button",function(){return h.disabled?!1:void a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){return h.disabled?!1:void((b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active"))}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){if(this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible");var c=this.element.is(":checked");c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",c)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(g+" "+h+" "+i).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){return a.Widget.prototype._setOption.apply(this,arguments),"disabled"===b?void(c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1)):void this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?k(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var b=this.buttonElement.removeClass(i),c=a("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",c))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){"disabled"===b&&this.buttons.button("option",b,c),a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var b="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),a.Widget.prototype.destroy.call(this)}})}(jQuery),function(a,b){var c="ui-dialog ui-widget ui-widget-content ui-corner-all ",d={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},f=a.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;{var b=this,d=b.options,e=d.title||"&#160;",f=a.ui.dialog.getTitleId(b.element),g=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(c+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){d.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(a){b.moveToTop(!1,a)}),i=(b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g),(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g)),j=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){j.addClass("ui-state-hover")},function(){j.removeClass("ui-state-hover")}).focus(function(){j.addClass("ui-state-focus")}).blur(function(){j.removeClass("ui-state-focus")}).click(function(a){return b.close(a),!1}).appendTo(i);(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(j),a("<span></span>").addClass("ui-dialog-title").attr("id",f).html(e).prependTo(i)
}a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)&&(d.beforeClose=d.beforeclose),i.find("*").add(i).disableSelection(),d.draggable&&a.fn.draggable&&b._makeDraggable(),d.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(d.buttons),b._isOpen=!1,a.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog},close:function(b){var d,e,c=this;if(!1!==c._trigger("beforeClose",b))return c.overlay&&c.overlay.destroy(),c.uiDialog.unbind("keypress.ui-dialog"),c._isOpen=!1,c.options.hide?c.uiDialog.hide(c.options.hide,function(){c._trigger("close",b)}):(c.uiDialog.hide(),c._trigger("close",b)),a.ui.dialog.overlay.resize(),c.options.modal&&(d=0,a(".ui-dialog").each(function(){this!==c.uiDialog[0]&&(e=a(this).css("z-index"),isNaN(e)||(d=Math.max(d,e)))}),a.ui.dialog.maxZ=d),c},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var f,d=this,e=d.options;return e.modal&&!b||!e.stack&&!e.modal?d._trigger("focus",c):(e.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=e.zIndex),d.overlay&&(a.ui.dialog.maxZ+=1,d.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),f={scrollTop:d.element.scrollTop(),scrollLeft:d.element.scrollLeft()},a.ui.dialog.maxZ+=1,d.uiDialog.css("z-index",a.ui.dialog.maxZ),d.element.attr(f),d._trigger("focus",c),d)},open:function(){if(!this._isOpen){var b=this,c=b.options,d=b.uiDialog;return b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keydown.ui-dialog",function(b){if(b.keyCode===a.ui.keyCode.TAB){var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");return b.target!==e[0]||b.shiftKey?b.target===d[0]&&b.shiftKey?(e.focus(1),!1):void 0:(d.focus(1),!1)}}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open"),b}},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),g=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof b&&null!==b&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(g);a.each(d,function(a,b){"click"!==a&&(a in f?e[a](b):e.attr(a,b))}),a.fn.button&&e.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function f(a){return{position:a.position,offset:a.offset}}var e,b=this,c=b.options,d=a(document);b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,g){e="auto"===c.height?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),b._trigger("dragStart",d,f(g))},drag:function(a,c){b._trigger("drag",a,f(c))},stop:function(g,h){c.position=[h.position.left-d.scrollLeft(),h.position.top-d.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(e),b._trigger("dragStop",g,f(h)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function h(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var d=this,e=d.options,f=d.uiDialog.css("position"),g="string"==typeof c?c:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:g,start:function(b,c){a(this).addClass("ui-dialog-resizing"),d._trigger("resizeStart",b,h(c))},resize:function(a,b){d._trigger("resize",a,h(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing"),e.height=a(this).height(),e.width=a(this).width(),d._trigger("resizeStop",b,h(c)),a.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var e,c=[],d=[0,0];b?(("string"==typeof b||"object"==typeof b&&"0"in b)&&(c=b.split?b.split(" "):[b[0],b[1]],1===c.length&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(d[a]=c[a],c[a]=b)}),b={my:c.join(" "),at:c.join(" "),offset:d.join(" ")}),b=a.extend({},a.ui.dialog.prototype.options.position,b)):b=a.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),e||this.uiDialog.hide()},_setOptions:function(b){var c=this,f={},g=!1;a.each(b,function(a,b){c._setOption(a,b),a in d&&(g=!0),a in e&&(f[a]=b)}),g&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(b,d){var e=this,f=e.uiDialog;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":e._createButtons(d);break;case"closeText":e.uiDialogTitlebarCloseText.text(""+d);break;case"dialogClass":f.removeClass(e.options.dialogClass).addClass(c+d);break;case"disabled":d?f.addClass("ui-dialog-disabled"):f.removeClass("ui-dialog-disabled");break;case"draggable":var g=f.is(":data(draggable)");g&&!d&&f.draggable("destroy"),!g&&d&&e._makeDraggable();break;case"position":e._position(d);break;case"resizable":var h=f.is(":data(resizable)");h&&!d&&f.resizable("destroy"),h&&"string"==typeof d&&f.resizable("option","handles",d),!h&&d!==!1&&e._makeResizable(d);break;case"title":a(".ui-dialog-title",e.uiDialogTitlebar).html(""+(d||"&#160;"))}a.Widget.prototype._setOption.apply(e,arguments)},_size:function(){var c,d,b=this.options,e=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),b.minWidth>b.width&&(b.width=b.minWidth),c=this.uiDialog.css({height:"auto",width:b.width}).height(),d=Math.max(0,b.minHeight-c),"auto"===b.height)if(a.support.minHeight)this.element.css({minHeight:d,height:"auto"});else{this.uiDialog.show();var f=this.element.css("height","auto").height();e||this.uiDialog.hide(),this.element.height(Math.max(f,d))}else this.element.height(Math.max(b.height-c,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"1.8.22",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");return b||(this.uuid+=1,b=this.uuid),"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){0===this.instances.length&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){return a(b.target).zIndex()<a.ui.dialog.overlay.maxZ?!1:void 0})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c=a.inArray(b,this.instances);-1!=c&&this.oldInstances.push(this.instances.splice(c,1)[0]),0===this.instances.length&&a([document,window]).unbind(".dialog-overlay"),b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),c>b?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.browser.msie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),c>b?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(a){var c=5;a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b=this,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=d.values&&d.values.length||1,h=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":"")),this.range=a([]),d.range&&(d.range===!0&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&2!==d.values.length&&(d.values=[d.values[0],d.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===d.range||"max"===d.range?" ui-slider-range-"+d.range:"")));for(var i=e.length;g>i;i+=1)h.push(f);this.handles=e.add(a(h.join("")).appendTo(b.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)}),this.handles.keydown(function(d){var f,g,h,i,e=a(this).data("index.ui-slider-handle");if(!b.options.disabled){switch(d.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d.preventDefault(),!b._keySliding&&(b._keySliding=!0,a(this).addClass("ui-state-active"),f=b._start(d,e),f===!1))return}switch(i=b.options.step,g=h=b.options.values&&b.options.values.length?b.values(e):b.value(),d.keyCode){case a.ui.keyCode.HOME:h=b._valueMin();break;case a.ui.keyCode.END:h=b._valueMax();break;case a.ui.keyCode.PAGE_UP:h=b._trimAlignValue(g+(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.PAGE_DOWN:h=b._trimAlignValue(g-(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(g===b._valueMax())return;h=b._trimAlignValue(g+i);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(g===b._valueMin())return;h=b._trimAlignValue(g-i)}b._slide(d,e,h)}}).keyup(function(c){var d=a(this).data("index.ui-slider-handle");b._keySliding&&(b._keySliding=!1,b._stop(c,d),b._change(c,d),a(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(b){var d,e,f,g,h,i,j,k,l,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),d={x:b.pageX,y:b.pageY},e=this._normValueFromMouse(d),f=this._valueMax()-this._valueMin()+1,h=this,this.handles.each(function(b){var c=Math.abs(e-h.values(b));f>c&&(f=c,g=a(this),i=b)}),c.range===!0&&this.values(1)===c.min&&(i+=1,g=a(this.handles[i])),j=this._start(b,i),j===!1?!1:(this._mouseSliding=!0,h._handleIndex=i,g.addClass("ui-state-active").focus(),k=g.offset(),l=!a(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:b.pageX-k.left-g.width()/2,top:b.pageY-k.top-g.height()/2-(parseInt(g.css("borderTopWidth"),10)||0)-(parseInt(g.css("borderBottomWidth"),10)||0)+(parseInt(g.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,i,e),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b),void 0;if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch(a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var f,h,i,j,k,b=this.options.range,c=this.options,d=this,e=this._animateOff?!1:c.animate,g={};this.options.values&&this.options.values.length?this.handles.each(function(b){f=(d.values(b)-d._valueMin())/(d._valueMax()-d._valueMin())*100,g["horizontal"===d.orientation?"left":"bottom"]=f+"%",a(this).stop(1,1)[e?"animate":"css"](g,c.animate),d.options.range===!0&&("horizontal"===d.orientation?(0===b&&d.range.stop(1,1)[e?"animate":"css"]({left:f+"%"},c.animate),1===b&&d.range[e?"animate":"css"]({width:f-h+"%"},{queue:!1,duration:c.animate})):(0===b&&d.range.stop(1,1)[e?"animate":"css"]({bottom:f+"%"},c.animate),1===b&&d.range[e?"animate":"css"]({height:f-h+"%"},{queue:!1,duration:c.animate}))),h=f}):(i=this.value(),j=this._valueMin(),k=this._valueMax(),f=k!==j?(i-j)/(k-j)*100:0,g["horizontal"===d.orientation?"left":"bottom"]=f+"%",this.handle.stop(1,1)[e?"animate":"css"](g,c.animate),"min"===b&&"horizontal"===this.orientation&&this.range.stop(1,1)[e?"animate":"css"]({width:f+"%"},c.animate),"max"===b&&"horizontal"===this.orientation&&this.range[e?"animate":"css"]({width:100-f+"%"},{queue:!1,duration:c.animate}),"min"===b&&"vertical"===this.orientation&&this.range.stop(1,1)[e?"animate":"css"]({height:f+"%"},c.animate),"max"===b&&"vertical"===this.orientation&&this.range[e?"animate":"css"]({height:100-f+"%"},{queue:!1,duration:c.animate}))}}),a.extend(a.ui.slider,{version:"1.8.22"})}(jQuery),function(a,b){function e(){return++c}function f(){return++d}var c=0,d=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,b){if("selected"==a){if(this.options.collapsible&&b==this.options.selected)return;this.select(b)}else this.options[a]=b,this._tabify()},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+e()},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+f());return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){function m(b,c){b.css("display",""),!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var d=this,e=this.options,f=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=a(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return a("a",this)[0]}),this.panels=a([]),this.anchors.each(function(b,c){var i,g=a(c).attr("href"),h=g.split("#")[0];if(h&&(h===location.toString().split("#")[0]||(i=a("base")[0])&&h===i.href)&&(g=c.hash,c.href=g),f.test(g))d.panels=d.panels.add(d.element.find(d._sanitizeSelector(g)));else if(g&&"#"!==g){a.data(c,"href.tabs",g),a.data(c,"load.tabs",g.replace(/#.*$/,""));var j=d._tabId(c);c.href="#"+j;var k=d.element.find("#"+j);k.length||(k=a(e.panelTemplate).attr("id",j).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(d.panels[b-1]||d.list),k.data("destroy.tabs",!0)),d.panels=d.panels.add(k)}else e.disabled.push(b)}),c?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),e.selected===b?(location.hash&&this.anchors.each(function(a,b){return b.hash==location.hash?(e.selected=a,!1):void 0}),"number"!=typeof e.selected&&e.cookie&&(e.selected=parseInt(d._cookie(),10)),"number"!=typeof e.selected&&this.lis.filter(".ui-tabs-selected").length&&(e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),e.selected=e.selected||(this.lis.length?0:-1)):null===e.selected&&(e.selected=-1),e.selected=e.selected>=0&&this.anchors[e.selected]||e.selected<0?e.selected:0,e.disabled=a.unique(e.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a){return d.lis.index(a)}))).sort(),-1!=a.inArray(e.selected,e.disabled)&&e.disabled.splice(a.inArray(e.selected,e.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),e.selected>=0&&this.anchors.length&&(d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(e.selected).addClass("ui-tabs-selected ui-state-active"),d.element.queue("tabs",function(){d._trigger("show",null,d._ui(d.anchors[e.selected],d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash))[0]))}),this.load(e.selected)),a(window).bind("unload",function(){d.lis.add(d.anchors).unbind(".tabs"),d.lis=d.anchors=d.panels=null})):e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[e.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),e.cookie&&this._cookie(e.selected,e.cookie);for(var h,g=0;h=this.lis[g];g++)a(h)[-1==a.inArray(g,e.disabled)||a(h).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(e.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==e.event){var i=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass("ui-state-"+a)},j=function(a,b){b.removeClass("ui-state-"+a)};this.lis.bind("mouseover.tabs",function(){i("hover",a(this))}),this.lis.bind("mouseout.tabs",function(){j("hover",a(this))}),this.anchors.bind("focus.tabs",function(){i("focus",a(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){j("focus",a(this).closest("li"))})}var k,l;e.fx&&(a.isArray(e.fx)?(k=e.fx[0],l=e.fx[1]):k=l=e.fx);var n=l?function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.hide().removeClass("ui-tabs-hide").animate(l,l.duration||"normal",function(){m(c,l),d._trigger("show",null,d._ui(b,c[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),d._trigger("show",null,d._ui(b,c[0]))},o=k?function(a,b){b.animate(k,k.duration||"normal",function(){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),m(b,k),d.element.dequeue("tabs")})}:function(a,b){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),d.element.dequeue("tabs")};this.anchors.bind(e.event+".tabs",function(){var b=this,c=a(b).closest("li"),f=d.panels.filter(":not(.ui-tabs-hide)"),g=d.element.find(d._sanitizeSelector(b.hash));if(c.hasClass("ui-tabs-selected")&&!e.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||d.panels.filter(":animated").length||d._trigger("select",null,d._ui(this,g[0]))===!1)return this.blur(),!1;if(e.selected=d.anchors.index(this),d.abort(),e.collapsible){if(c.hasClass("ui-tabs-selected"))return e.selected=-1,e.cookie&&d._cookie(e.selected,e.cookie),d.element.queue("tabs",function(){o(b,f)}).dequeue("tabs"),this.blur(),!1;if(!f.length)return e.cookie&&d._cookie(e.selected,e.cookie),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this)),this.blur(),!1}if(e.cookie&&d._cookie(e.selected,e.cookie),!g.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";f.length&&d.element.queue("tabs",function(){o(b,f)}),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this)),a.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},destroy:function(){var b=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var b=a.data(this,"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),b.cookie&&this._cookie(null,b.cookie),this},add:function(c,d,e){e===b&&(e=this.anchors.length);var f=this,g=this.options,h=a(g.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d)),i=c.indexOf("#")?this._tabId(a("a",h)[0]):c.replace("#","");h.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var j=f.element.find("#"+i);return j.length||(j=a(g.panelTemplate).attr("id",i).data("destroy.tabs",!0)),j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),e>=this.lis.length?(h.appendTo(this.list),j.appendTo(this.list[0].parentNode)):(h.insertBefore(this.lis[e]),j.insertBefore(this.panels[e])),g.disabled=a.map(g.disabled,function(a){return a>=e?++a:a}),this._tabify(),1==this.anchors.length&&(g.selected=0,h.addClass("ui-tabs-selected ui-state-active"),j.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[e],this.panels[e])),this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();return d.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a){return a!=b}),function(a){return a>=b?--a:a}),this._tabify(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0])),this},enable:function(b){b=this._getIndex(b);var c=this.options;if(-1!=a.inArray(b,c.disabled))return this.lis.eq(b).removeClass("ui-state-disabled"),c.disabled=a.grep(c.disabled,function(a){return a!=b}),this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b])),this},disable:function(a){a=this._getIndex(a);var c=this.options;return a!=c.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),c.disabled.push(a),c.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))),this},select:function(a){if(a=this._getIndex(a),-1==a){if(!this.options.collapsible||-1==this.options.selected)return this;a=this.options.selected}return this.anchors.eq(a).trigger(this.options.event+".tabs"),this},load:function(b){b=this._getIndex(b);var c=this,d=this.options,e=this.anchors.eq(b)[0],f=a.data(e,"load.tabs");if(this.abort(),!f||0!==this.element.queue("tabs").length&&a.data(e,"cache.tabs"))return void this.element.dequeue("tabs");if(this.lis.eq(b).addClass("ui-state-processing"),d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}return this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,g){c.element.find(c._sanitizeSelector(e.hash)).html(f),c._cleanup(),d.cache&&a.data(e,"cache.tabs",!0),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.success(f,g)}catch(h){}},error:function(a,f){c._cleanup(),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.error(a,f,b,e)}catch(g){}}})),c.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(a,b){return this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b),this},length:function(){return this.anchors.length}}),a.extend(a.ui.tabs,{version:"1.8.22"}),a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var c=this,d=this.options,e=c._rotate||(c._rotate=function(b){clearTimeout(c.rotation),c.rotation=setTimeout(function(){var a=d.selected;c.select(++a<c.anchors.length?a:0)},a),b&&b.stopPropagation()}),f=c._unrotate||(c._unrotate=b?function(){e()}:function(a){a.clientX&&c.rotate(null)});return a?(this.element.bind("tabsshow",e),this.anchors.bind(d.event+".tabs",f),e()):(clearTimeout(c.rotation),this.element.unbind("tabsshow",e),this.anchors.unbind(d.event+".tabs",f),delete this._rotate,delete this._unrotate),this}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);c.length&&c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")
}).bind("mouseover",function(c){var d=$(c.target).closest(b);!$.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])&&d.length&&(d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover"))})}function extendRemove(a,b){$.extend(a,b);for(var c in b)(null==b[c]||b[c]==undefined)&&(a[c]=b[c]);return a}function isArray(a){return a&&($.browser.safari&&"object"==typeof a&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.22"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]),c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");if(("focus"==e||"both"==e)&&a.focus(this._showDatepicker),"button"==e||"both"==e){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==g?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}if(extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null,!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),"input"==d?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==d||"span"==d)&&b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==d)a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==d||"span"==d){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==d)a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==d||"span"==d){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==b?$.extend({},$.datepicker._defaults):d?"all"==b?$.extend({},d.settings):this._get(d,b):null;var e=b||{};if("string"==typeof b&&(e={},e[b]=c),d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),null!==g&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),null!==h&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");if(b._keyEvent=!0,$.datepicker._datepickerShowing)switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">d||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal)try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(d){$.datepicker.log(d)}return!0},_showDatepicker:function(a){if(a=a.target||a,"input"!=a.nodeName.toLowerCase()&&(a=$("input",a.parentNode)[0]),!$.datepicker._isDisabledDatepicker(a)&&$.datepicker._lastInput!=a){var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d!==!1){extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|="fixed"==$(this).css("position"),!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"}),!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}}}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a)),this._attachHandlers(a);var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;if(a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(1!=e[0]||1!=e[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus(),a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+(c?0:$(document).scrollLeft()),i=document.documentElement.clientHeight+(c?0:$(document).scrollTop());return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){for(var b=this._getInst(a),c=this._get(b,"isRTL");a&&("hidden"==a.type||1!=a.nodeType||$.expr.filters.hidden(a));)a=a[c?"previousSibling":"nextSibling"];var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&(!a||b==$.data(a,PROP_NAME))&&this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv["slideDown"==c?"slideUp":"fadeIn"==c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if($.datepicker._curInst){var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&0==b.parents("#"+$.datepicker._mainDivId).length&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);this._isDisabledDatepicker(d[0])||(this._adjustInstDate(e,b+("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if(!$(d).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(e[0])){var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){{var b=$(a);this._getInst(b[0])}this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=null!=b?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],"object"!=typeof d.input[0]&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1},parseDate:function(a,b,c){if(null==a||null==b)throw"Invalid arguments";if(b="object"==typeof b?b.toString():b+"",""==b)return null;var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10);for(var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d="@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f)throw"Missing number at position "+r;return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;if($.each(e,function(a,c){var d=c[1];return b.substr(r,d.length).toLowerCase()==d.toLowerCase()?(f=c[0],r+=d.length,!1):void 0}),-1!=f)return f+1;throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s))throw"Unexpected literal at position "+r;r++},r=0,s=0;s<a.length;s++)if(m)"'"!=a.charAt(s)||n("'")?q():m=!1;else switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/1e4);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}if(r<b.length)throw"Extra/unparsed characters found in date: "+b.substring(r);if(-1==i?i=(new Date).getFullYear():100>i&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d>=i?0:-100)),l>-1)for(j=1,k=l;;){var u=this._getDaysInMonth(i,j-1);if(u>=k)break;j++,k-=u}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a))for(;d.length<c;)d="0"+d;return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b)for(var m=0;m<a.length;m++)if(l)"'"!=a.charAt(m)||h("'")?k+=a.charAt(m):l=!1;else switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=1e4*b.getTime()+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}return k},_possibleChars:function(a){for(var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c},e=0;e<a.length;e++)if(c)"'"!=a.charAt(e)||d("'")?b+=a.charAt(e):c=!1;else switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var e,f,c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}for(var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);i;){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=7*parseInt(i[1],10);break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=null==b||""===b?c:"string"==typeof b?e(b):"number"==typeof b?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&"Invalid Date"==f.toString()?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(a){var b=this._get(a,"stepMonths"),c="#"+a.id;a.dpDiv.find("[data-handler]").map(function(){var a={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,-b,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,+b,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(c)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(c,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),a[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=1!=g[0]||1!=g[1],k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;if(0>n&&(n+=12,o--),m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));for(p=l&&l>p?l:p;this._daylightSavingAdjust(new Date(o,n,1))>p;)n--,0>n&&(n=11,o--)}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;for(var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),C=(this._get(a,"dayNamesShort"),this._get(a,"dayNamesMin")),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),J=(this._get(a,"calculateWeek")||this.iso8601Week,this._getDefaultDate(a)),K="",L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){if(Q+='<div class="ui-datepicker-group',g[1]>1)switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&0==L?c?t:r:"")+(/all|right/.test(P)&&0==L?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"",S=0;7>S;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j&&this.maxRows>W?this.maxRows:W;this.maxRows=X;for(var Y=this._daylightSavingAdjust(new Date(o,n,1-V)),Z=0;X>Z;Z++){Q+="<tr>";for(var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"",S=0;7>S;S++){var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&l>Y||m&&Y>m;_+='<td class="'+((S+y+6)%7>=5?" ui-datepicker-week-end":"")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+(bb&&!G||!ba[2]?"":' title="'+ba[2]+'"')+(bc?"":' data-handler="selectDay" data-event="click" data-month="'+Y.getMonth()+'" data-year="'+Y.getFullYear()+'"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}n++,n>11&&(n=0,o++),Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=Q}K+=M}return K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i)m+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var p=0;12>p;p++)(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>");m+="</select>"}if(k||(l+=m+(!f&&i&&j?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!j)l+='<span class="ui-datepicker-year">'+c+"</span>";else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));for(t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';u>=t;t++)a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>";
a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}return l+=this._get(a,"yearSuffix"),k&&(l+=(!f&&i&&j?"":"&#xa0;")+m),l+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),e=a.drawMonth+("M"==c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"==c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return e=d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"!=typeof a||"isDisabled"!=a&&"getDate"!=a&&"widget"!=a?"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){"string"==typeof a?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.22",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(a,b){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),a.Widget.prototype.destroy.apply(this,arguments)},value:function(a){return a===b?this._value():(this._setOption("value",a),this)},_setOption:function(b,c){"value"===b&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return"number"!=typeof a&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),a.extend(a.ui.progressbar,{version:"1.8.22"})}(jQuery),jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&3==b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?e.transparent:e[a.trim(b).toLowerCase()]}function d(b,d){var e;do{if(e=(a.curCSS||a.css)(b,d),""!=e&&"transparent"!=e||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function h(){var c,d,a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={};if(a&&a.length&&a[0]&&a[a[0]])for(var e=a.length;e--;)c=a[e],"string"==typeof a[c]&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c]);else for(c in a)"string"==typeof a[c]&&(b[c]=a[c]);return b}function i(b){var c,d;for(c in b)d=b[c],(null==d||a.isFunction(d)||c in g||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function j(a,b){var d,c={_:0};for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function k(b,c,d,e){return"object"==typeof b&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function l(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects[b]?!1:!0}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},f=["add","remove","toggle"],g={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,e){return a.isFunction(d)&&(e=d,d=null),this.queue(function(){var m,g=a(this),k=g.attr("style")||" ",l=i(h.call(this)),n=g.attr("class")||"";a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),m=i(h.call(this)),g.attr("class",n),g.animate(j(l,m),{queue:!1,duration:c,easing:d,complete:function(){a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),"object"==typeof g.attr("style")?(g.attr("style").cssText="",g.attr("style").cssText=k):g.attr("style",k),e&&e.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return"boolean"==typeof d||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.22",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return"toggle"==b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),"static"==b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(b){var f=k.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},h=g.options.mode,i=a.effects[b];return a.fx.off||!i?h?this[h](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):i.call(this,g)},_show:a.fn.show,show:function(a){if(l(a))return this._show.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(l(a))return this._hide.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(l(b)||"boolean"==typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=k.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}}),a.easing.jswing=a.easing.swing,a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin(2*(b*e-f)*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(2==(b/=e/2))return c+d;if(g||(g=.3*e*1.5),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return 1>b?-.5*h*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g)*.5+d+c},easeInBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*(c/=f)*c*((g+1)*c-g)+d},easeOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*((c=c/f-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),(c/=f/2)<1?e/2*c*c*(((g*=1.525)+1)*c-g)+d:e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?7.5625*d*b*b+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(b,c,d,e,f){return f/2>c?.5*a.easing.easeInBounce(b,2*c,0,e,f)+d:.5*a.easing.easeOutBounce(b,2*c-f,0,e,f)+.5*e+d}})}(jQuery),function(a){a.effects.blind=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h="vertical"==f?"height":"width",i="vertical"==f?g.height():g.width();"show"==e&&g.css(h,0);var j={};j[h]="show"==e?i:0,g.animate(j,b.duration,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),$.fn.customFileInput=function(){var fileInput=$(this).addClass("customfile-input").mouseover(function(){upload.addClass("customfile-hover")}).mouseout(function(){upload.removeClass("customfile-hover")}).focus(function(){upload.addClass("customfile-focus"),fileInput.data("val",fileInput.val())}).blur(function(){upload.removeClass("customfile-focus"),$(this).trigger("checkChange")}).bind("disable",function(){fileInput.attr("disabled",!0),upload.addClass("customfile-disabled")}).bind("enable",function(){fileInput.removeAttr("disabled"),upload.removeClass("customfile-disabled")}).bind("checkChange",function(){fileInput.val()&&fileInput.val()!=fileInput.data("val")&&fileInput.trigger("change")}).bind("change",function(){var fileName=$(this).val().split(/\\/).pop(),fileExt="customfile-ext-"+fileName.split(".").pop().toLowerCase();uploadFeedback.text(fileName).removeClass(uploadFeedback.data("fileExt")||"").addClass(fileExt).data("fileExt",fileExt).addClass("customfile-feedback-populated"),uploadButton.text("Change")}).click(function(){fileInput.data("val",fileInput.val()),setTimeout(function(){fileInput.trigger("checkChange")},100)}),upload=$('<div class="customfile"></div>'),uploadButton=$('<span class="customfile-button" aria-hidden="true">Browse</span>').appendTo(upload),uploadFeedback=$('<span class="customfile-feedback" aria-hidden="true">No file selected...</span>').appendTo(upload);return fileInput.is("[disabled]")&&fileInput.trigger("disable"),upload.insertAfter(fileInput),fileInput.appendTo(upload),$(this)},function(b){b.jgrid=b.jgrid||{},b.extend(b.jgrid,{version:"4.4.1",htmlDecode:function(b){return b&&("&nbsp;"==b||"&#160;"==b||1===b.length&&160===b.charCodeAt(0))?"":b?(""+b).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):b},htmlEncode:function(b){return b?(""+b).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):b},format:function(f){var e=b.makeArray(arguments).slice(1);return void 0===f&&(f=""),f.replace(/\{(\d+)\}/g,function(b,d){return e[d]})},getCellIndex:function(f){return f=b(f),f.is("tr")?-1:(f=(f.is("td")||f.is("th")?f:f.closest("td,th"))[0],b.browser.msie?b.inArray(f,f.parentNode.cells):f.cellIndex)},stripHtml:function(b){var b=b+"",e=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return b?(b=b.replace(e,""))&&"&nbsp;"!==b&&"&#160;"!==b?b.replace(/\"/g,"'"):"":b},stripPref:function(f,e){var c=b.type(f);return("string"==c||"number"==c)&&(f=""+f,e=""!==f?(""+e).replace(""+f,""):e),e},stringToDoc:function(b){var e;if("string"!=typeof b)return b;try{e=(new DOMParser).parseFromString(b,"text/xml")}catch(c){e=new ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(b)}return e&&e.documentElement&&"parsererror"!=e.documentElement.tagName?e:null},parse:function(f){return"while(1);"==f.substr(0,9)&&(f=f.substr(9)),"/*"==f.substr(0,2)&&(f=f.substr(2,f.length-4)),f||(f="{}"),!0===b.jgrid.useJSON&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(f):eval("("+f+")")},parseDate:function(f,e){var d,a,g,c={m:1,d:1,y:1970,h:0,i:0,s:0,u:0};if(d=/[\\\/:_;.,\t\T\s-]/,e&&null!==e&&void 0!==e){e=b.trim(e),e=e.split(d),void 0!==b.jgrid.formatter.date.masks[f]&&(f=b.jgrid.formatter.date.masks[f]);var f=f.split(d),h=b.jgrid.formatter.date.monthNames,i=b.jgrid.formatter.date.AmPm,j=function(a,b){return 0===a?12===b&&(b=0):12!==b&&(b+=12),b};for(d=0,a=f.length;a>d;d++)"M"==f[d]&&(g=b.inArray(e[d],h),-1!==g&&12>g&&(e[d]=g+1,c.m=e[d])),"F"==f[d]&&(g=b.inArray(e[d],h),-1!==g&&g>11&&(e[d]=g+1-12,c.m=e[d])),"a"==f[d]&&(g=b.inArray(e[d],i),-1!==g&&2>g&&e[d]==i[g]&&(e[d]=g,c.h=j(e[d],c.h))),"A"==f[d]&&(g=b.inArray(e[d],i),-1!==g&&g>1&&e[d]==i[g]&&(e[d]=g-2,c.h=j(e[d],c.h))),"g"===f[d]&&(c.h=parseInt(e[d],10)),void 0!==e[d]&&(c[f[d].toLowerCase()]=parseInt(e[d],10));c.m=parseInt(c.m,10)-1,d=c.y,d>=70&&99>=d?c.y=1900+c.y:d>=0&&69>=d&&(c.y=2e3+c.y),void 0!==c.j&&(c.d=c.j),void 0!==c.n&&(c.m=parseInt(c.n,10)-1)}return new Date(c.y,c.m,c.d,c.h,c.i,c.s,c.u)},jqID:function(b){return(""+b).replace(/[!"#$%&'()*+,.\/:;<=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(f){return(f?f:b.jgrid.uidPref)+b.jgrid.guid++},getAccessor:function(b,e){var c,d,g,a=[];if("function"==typeof e)return e(b);if(c=b[e],void 0===c)try{if("string"==typeof e&&(a=e.split(".")),g=a.length)for(c=b;c&&g--;)d=a.shift(),c=c[d]}catch(h){}return c},getXmlData:function(f,e,c){var d="string"==typeof e?e.match(/^(.*)\[(\w+)\]$/):null;return"function"==typeof e?e(f):d&&d[2]?d[1]?b(d[1],f).attr(d[2]):b(f).attr(d[2]):(f=b(e,f),c?f:0<f.length?b(f).text():void 0)},cellWidth:function(){var f=b("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;'></td></tr></table></div>"),e=f.appendTo("body").find("td").width();return f.remove(),5!==e},ajaxOptions:{},from:function(f){return new function(e,c){"string"==typeof e&&(e=b.data(e));var d=this,a=e,g=!0,f=!1,i=c,j=/[\$,%]/g,l=null,k=null,m=0,o=!1,p="",v=[],u=!0;if("object"!=typeof e||!e.push)throw"data provides is not an array";return 0<e.length&&(u="object"!=typeof e[0]?!1:!0),this._hasData=function(){return null===a?!1:0===a.length?!1:!0},this._getStr=function(a){var b=[];return f&&b.push("jQuery.trim("),b.push("String("+a+")"),f&&b.push(")"),g||b.push(".toLowerCase()"),b.join("")},this._strComp=function(a){return"string"==typeof a?".toString()":""},this._group=function(a,b){return{field:a.toString(),unique:b,items:[]}},this._toStr=function(a){return f&&(a=b.trim(a)),a=a.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),g?a:a.toLowerCase()},this._funcLoop=function(d){var c=[];return b.each(a,function(a,b){c.push(d(b))}),c},this._append=function(a){var b;for(i=null===i?"":i+(""===p?" && ":p),b=0;m>b;b++)i+="(";o&&(i+="!"),i+="("+a+")",o=!1,p="",m=0},this._setCommand=function(a,b){l=a,k=b},this._resetNegate=function(){o=!1},this._repeatCommand=function(a,b){return null===l?d:null!==a&&null!==b?l(a,b):null!==k&&u?l(k,a):l(a)},this._equals=function(a,b){return 0===d._compare(a,b,1)},this._compare=function(a,b,d){var c=Object.prototype.toString;return void 0===d&&(d=1),void 0===a&&(a=null),void 0===b&&(b=null),null===a&&null===b?0:null===a&&null!==b?1:null!==a&&null===b?-1:"[object Date]"===c.call(a)&&"[object Date]"===c.call(b)?b>a?-d:a>b?d:0:(!g&&"number"!=typeof a&&"number"!=typeof b&&(a=(""+a).toLowerCase(),b=(""+b).toLowerCase()),b>a?-d:a>b?d:0)},this._performSort=function(){0!==v.length&&(a=d._doSort(a,0))},this._doSort=function(a,b){var c=v[b].by,f=v[b].dir,g=v[b].type,e=v[b].datefmt;if(b==v.length-1)return d._getOrder(a,c,f,g,e);for(b++,c=d._getGroup(a,c,f,g,e),f=[],g=0;g<c.length;g++)for(var e=d._doSort(c[g].items,b),h=0;h<e.length;h++)f.push(e[h]);return f},this._getOrder=function(a,c,f,g,e){var k,m,h=[],i=[],l="a"==f?1:-1;void 0===g&&(g="text"),m="float"==g||"number"==g||"currency"==g||"numeric"==g?function(a){return a=parseFloat((""+a).replace(j,"")),isNaN(a)?0:a}:"int"==g||"integer"==g?function(a){return a?parseFloat((""+a).replace(j,"")):0}:"date"==g||"datetime"==g?function(a){return b.jgrid.parseDate(e,a).getTime()}:b.isFunction(g)?g:function(a){return a||(a=""),b.trim((""+a).toUpperCase())},b.each(a,function(a,d){k=""!==c?b.jgrid.getAccessor(d,c):d,void 0===k&&(k=""),k=m(k,d),i.push({vSort:k,index:a})}),i.sort(function(a,b){return a=a.vSort,b=b.vSort,d._compare(a,b,l)});for(var g=0,o=a.length;o>g;)f=i[g].index,h.push(a[f]),g++;return h},this._getGroup=function(a,c,g,f,e){var k,h=[],i=null,j=null;return b.each(d._getOrder(a,c,g,f,e),function(a,g){k=b.jgrid.getAccessor(g,c),void 0===k&&(k=""),d._equals(j,k)||(j=k,null!==i&&h.push(i),i=d._group(c,k)),i.items.push(g)}),null!==i&&h.push(i),h},this.ignoreCase=function(){return g=!1,d},this.useCase=function(){return g=!0,d},this.trim=function(){return f=!0,d},this.noTrim=function(){return f=!1,d},this.execute=function(){var c=i,g=[];return null===c?d:(b.each(a,function(){eval(c)&&g.push(this)}),a=g,d)},this.data=function(){return a},this.select=function(c){if(d._performSort(),!d._hasData())return[];if(d.execute(),b.isFunction(c)){var g=[];return b.each(a,function(a,b){g.push(c(b))}),g}return a},this.hasMatch=function(){return d._hasData()?(d.execute(),0<a.length):!1},this.andNot=function(a,b,c){return o=!o,d.and(a,b,c)},this.orNot=function(a,b,c){return o=!o,d.or(a,b,c)},this.not=function(a,b,c){return d.andNot(a,b,c)},this.and=function(a,b,c){return p=" && ",void 0===a?d:d._repeatCommand(a,b,c)},this.or=function(a,b,c){return p=" || ",void 0===a?d:d._repeatCommand(a,b,c)},this.orBegin=function(){return m++,d},this.orEnd=function(){return null!==i&&(i+=")"),d},this.isNot=function(a){return o=!o,d.is(a)},this.is=function(a){return d._append("this."+a),d._resetNegate(),d},this._compareValues=function(a,c,g,f,e){var h;h=u?"jQuery.jgrid.getAccessor(this,'"+c+"')":"this",void 0===g&&(g=null);var i=g,k=void 0===e.stype?"text":e.stype;if(null!==g)switch(k){case"int":case"integer":i=isNaN(Number(i))||""===i?"0":i,h="parseInt("+h+",10)",i="parseInt("+i+",10)";break;case"float":case"number":case"numeric":i=(""+i).replace(j,""),i=isNaN(Number(i))||""===i?"0":i,h="parseFloat("+h+")",i="parseFloat("+i+")";break;case"date":case"datetime":i=""+b.jgrid.parseDate(e.newfmt||"Y-m-d",i).getTime(),h='jQuery.jgrid.parseDate("'+e.srcfmt+'",'+h+").getTime()";break;default:h=d._getStr(h),i=d._getStr('"'+d._toStr(i)+'"')}return d._append(h+" "+f+" "+i),d._setCommand(a,c),d._resetNegate(),d},this.equals=function(a,b,c){return d._compareValues(d.equals,a,b,"==",c)},this.notEquals=function(a,b,c){return d._compareValues(d.equals,a,b,"!==",c)},this.isNull=function(a,b,c){return d._compareValues(d.equals,a,null,"===",c)},this.greater=function(a,b,c){return d._compareValues(d.greater,a,b,">",c)},this.less=function(a,b,c){return d._compareValues(d.less,a,b,"<",c)},this.greaterOrEquals=function(a,b,c){return d._compareValues(d.greaterOrEquals,a,b,">=",c)},this.lessOrEquals=function(a,b,c){return d._compareValues(d.lessOrEquals,a,b,"<=",c)},this.startsWith=function(a,c){var g=void 0===c||null===c?a:c,g=f?b.trim(g.toString()).length:g.toString().length;return u?d._append(d._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr(0,"+g+") == "+d._getStr('"'+d._toStr(c)+'"')):(g=f?b.trim(c.toString()).length:c.toString().length,d._append(d._getStr("this")+".substr(0,"+g+") == "+d._getStr('"'+d._toStr(a)+'"'))),d._setCommand(d.startsWith,a),d._resetNegate(),d},this.endsWith=function(a,c){var g=void 0===c||null===c?a:c,g=f?b.trim(g.toString()).length:g.toString().length;return d._append(u?d._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr("+d._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".length-"+g+","+g+') == "'+d._toStr(c)+'"':d._getStr("this")+".substr("+d._getStr("this")+'.length-"'+d._toStr(a)+'".length,"'+d._toStr(a)+'".length) == "'+d._toStr(a)+'"'),d._setCommand(d.endsWith,a),d._resetNegate(),d},this.contains=function(a,b){return d._append(u?d._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+'.indexOf("'+d._toStr(b)+'",0) > -1':d._getStr("this")+'.indexOf("'+d._toStr(a)+'",0) > -1'),d._setCommand(d.contains,a),d._resetNegate(),d},this.groupBy=function(b,c,g,f){return d._hasData()?d._getGroup(a,b,c,g,f):null},this.orderBy=function(a,c,g,f){return c=void 0===c||null===c?"a":b.trim(c.toString().toLowerCase()),(null===g||void 0===g)&&(g="text"),(null===f||void 0===f)&&(f="Y-m-d"),("desc"==c||"descending"==c)&&(c="d"),("asc"==c||"ascending"==c)&&(c="a"),v.push({by:a,dir:c,type:g,datefmt:f}),d},d}(f,null)},extend:function(f){b.extend(b.fn.jqGrid,f),this.no_legacy_api||b.fn.extend(f)}}),b.fn.jqGrid=function(f){if("string"==typeof f){var e=b.jgrid.getAccessor(b.fn.jqGrid,f);if(!e)throw"jqGrid - No such method: "+f;var c=b.makeArray(arguments).slice(1);return e.apply(this,c)}return this.each(function(){if(!this.grid){var d=b.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus"},ignoreCase:!1,cmTemplate:{},idPrefix:""},b.jgrid.defaults,f||{}),a=this,c={headers:[],cols:[],footers:[],dragStart:function(c,e,f){this.resizing={idx:c,startX:e.clientX,sOL:f[0]},this.hDiv.style.cursor="col-resize",this.curGbox=b("#rs_m"+b.jgrid.jqID(d.id),"#gbox_"+b.jgrid.jqID(d.id)),this.curGbox.css({display:"block",left:f[0],top:f[1],height:f[2]}),b(a).triggerHandler("jqGridResizeStart",[e,c]),b.isFunction(d.resizeStart)&&d.resizeStart.call(this,e,c),document.onselectstart=function(){return!1}},dragMove:function(a){if(this.resizing){var e,b=a.clientX-this.resizing.startX,a=this.headers[this.resizing.idx],c="ltr"===d.direction?a.width+b:a.width-b;c>33&&(this.curGbox.css({left:this.resizing.sOL+b}),!0===d.forceFit?(e=this.headers[this.resizing.idx+d.nv],b="ltr"===d.direction?e.width-b:e.width+b,b>33&&(a.newWidth=c,e.newWidth=b)):(this.newWidth="ltr"===d.direction?d.tblwidth+b:d.tblwidth-b,a.newWidth=c))}},dragEnd:function(){if(this.hDiv.style.cursor="default",this.resizing){var c=this.resizing.idx,e=this.headers[c].newWidth||this.headers[c].width,e=parseInt(e,10);this.resizing=!1,b("#rs_m"+b.jgrid.jqID(d.id)).css("display","none"),d.colModel[c].width=e,this.headers[c].width=e,this.headers[c].el.style.width=e+"px",this.cols[c].style.width=e+"px",0<this.footers.length&&(this.footers[c].style.width=e+"px"),!0===d.forceFit?(e=this.headers[c+d.nv].newWidth||this.headers[c+d.nv].width,this.headers[c+d.nv].width=e,this.headers[c+d.nv].el.style.width=e+"px",this.cols[c+d.nv].style.width=e+"px",0<this.footers.length&&(this.footers[c+d.nv].style.width=e+"px"),d.colModel[c+d.nv].width=e):(d.tblwidth=this.newWidth||d.tblwidth,b("table:first",this.bDiv).css("width",d.tblwidth+"px"),b("table:first",this.hDiv).css("width",d.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,d.footerrow&&(b("table:first",this.sDiv).css("width",d.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft)),b(a).triggerHandler("jqGridResizeStop",[e,c]),b.isFunction(d.resizeStop)&&d.resizeStop.call(this,e,c)}this.curGbox=null,document.onselectstart=function(){return!0}},populateVisible:function(){c.timer&&clearTimeout(c.timer),c.timer=null;var a=b(c.bDiv).height();if(a){var f,I,e=b("table:first",c.bDiv);if(e[0].rows.length)try{I=(f=e[0].rows[1])?b(f).outerHeight()||c.prevRowHeight:c.prevRowHeight}catch(h){I=c.prevRowHeight}if(I){c.prevRowHeight=I;var i=d.rowNum;f=c.scrollTop=c.bDiv.scrollTop;var j=Math.round(e.position().top)-f,k=j+e.height();I*=i;var y,z,B;a>k&&0>=j&&(void 0===d.lastpage||parseInt((k+f+I-1)/I,10)<=d.lastpage)&&(z=parseInt((a-k+I-1)/I,10),k>=0||2>z||!0===d.scroll?(y=Math.round((k+f)/I)+1,j=-1):j=1),j>0&&(y=parseInt(f/I,10)+1,z=parseInt((f+a)/I,10)+2-y,B=!0),z&&!(d.lastpage&&y>d.lastpage||1==d.lastpage||y===d.page&&y===d.lastpage)&&(c.hDiv.loading?c.timer=setTimeout(c.populateVisible,d.scrollTimeout):(d.page=y,B&&(c.selectionPreserver(e[0]),c.emptyRows.call(e[0],!1,!1)),c.populate(z)))
}}},scrollGrid:function(a){if(d.scroll){var b=c.bDiv.scrollTop;void 0===c.scrollTop&&(c.scrollTop=0),b!=c.scrollTop&&(c.scrollTop=b,c.timer&&clearTimeout(c.timer),c.timer=setTimeout(c.populateVisible,d.scrollTimeout))}c.hDiv.scrollLeft=c.bDiv.scrollLeft,d.footerrow&&(c.sDiv.scrollLeft=c.bDiv.scrollLeft),a&&a.stopPropagation()},selectionPreserver:function(a){var c=a.p,d=c.selrow,e=c.selarrrow?b.makeArray(c.selarrrow):null,f=a.grid.bDiv.scrollLeft,g=function(){var h;if(c.selrow=null,c.selarrrow=[],c.multiselect&&e&&0<e.length)for(h=0;h<e.length;h++)e[h]!=d&&b(a).jqGrid("setSelection",e[h],!1,null);d&&b(a).jqGrid("setSelection",d,!1,null),a.grid.bDiv.scrollLeft=f,b(a).unbind(".selectionPreserver",g)};b(a).bind("jqGridGridComplete.selectionPreserver",g)}};if("TABLE"!=this.tagName.toUpperCase())alert("Element is not a table");else if(void 0!==document.documentMode&&5>=document.documentMode)alert("Grid can not be used in this ('quirks') mode!");else{b(this).empty().attr("tabindex","1"),this.p=d,this.p.useProp=!!b.fn.prop;var e,i;if(0===this.p.colNames.length)for(e=0;e<this.p.colModel.length;e++)this.p.colNames[e]=this.p.colModel[e].label||this.p.colModel[e].name;if(this.p.colNames.length!==this.p.colModel.length)alert(b.jgrid.errors.model);else{var l,j=b("<div class='ui-jqgrid-view'></div>"),k=b.browser.msie?!0:!1;a.p.direction=b.trim(a.p.direction.toLowerCase()),-1==b.inArray(a.p.direction,["ltr","rtl"])&&(a.p.direction="ltr"),i=a.p.direction,b(j).insertBefore(this),b(this).appendTo(j).removeClass("scroll");var m=b("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");b(m).insertBefore(j).attr({id:"gbox_"+this.id,dir:i}),b(j).appendTo(m).attr("id","gview_"+this.id),l=k&&6>=b.browser.version?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"",b("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").append(l).insertBefore(j),b("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(j),b(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var o=function(a,b){return a=parseInt(a,10),isNaN(a)?b?b:0:a},p=function(d,e,f,h,i,j){var k=a.p.colModel[d],l=k.align,y='style="',z=k.classes,B=k.name,r=[];return l&&(y+="text-align:"+l+";"),k.hidden===!0&&(y+="display:none;"),0===e?y+="width: "+c.headers[d].width+"px;":k.cellattr&&b.isFunction(k.cellattr)&&(d=k.cellattr.call(a,i,f,h,k,j))&&"string"==typeof d&&(d=d.replace(/style/i,"style").replace(/title/i,"title"),d.indexOf("title")>-1&&(k.title=!1),d.indexOf("class")>-1&&(z=void 0),r=d.split("style"),2===r.length?(r[1]=b.trim(r[1].replace("=","")),(0===r[1].indexOf("'")||0===r[1].indexOf('"'))&&(r[1]=r[1].substring(1)),y+=r[1].replace(/'/gi,'"')):y+='"'),r.length||(r[0]="",y+='"'),y+=(void 0!==z?' class="'+z+'"':"")+(k.title&&f?' title="'+b.jgrid.stripHtml(f)+'"':""),y+=' aria-describedby="'+a.p.id+"_"+B+'"',y+r[0]},v=function(c){return void 0===c||null===c||""===c?"&#160;":a.p.autoencode?b.jgrid.htmlEncode(c):c+""},u=function(c,d,e,f,g){var h=a.p.colModel[e];return"undefined"!=typeof h.formatter?(c={rowId:c,colModel:h,gid:a.p.id,pos:e},d=b.isFunction(h.formatter)?h.formatter.call(a,d,c,f,g):b.fmatter?b.fn.fmatter.call(a,h.formatter,d,c,f,g):v(d)):d=v(d),d},L=function(a,b,c,d,e){return b=u(a,b,c,e,"add"),'<td role="gridcell" '+p(c,d,b,e,a,!0)+">"+b+"</td>"},E=function(b,c,d,e){return e='<input role="checkbox" type="checkbox" id="jqg_'+a.p.id+"_"+b+'" class="cbox" name="jqg_'+a.p.id+"_"+b+'"'+(e?'checked="checked"':"")+"/>",'<td role="gridcell" '+p(c,d,"",null,b,!0)+">"+e+"</td>"},Y=function(a,b,c,d){return c=(parseInt(c,10)-1)*parseInt(d,10)+1+b,'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+p(a,b,c,null,b,!0)+">"+c+"</td>"},T=function(b){var c,f,d=[],e=0;for(f=0;f<a.p.colModel.length;f++)c=a.p.colModel[f],"cb"!==c.name&&"subgrid"!==c.name&&"rn"!==c.name&&(d[e]="local"==b?c.name:"xml"==b||"xmlstring"===b?c.xmlmap||c.name:c.jsonmap||c.name,e++);return d},U=function(c){var d=a.p.remapColumns;return d&&d.length||(d=b.map(a.p.colModel,function(a,b){return b})),c&&(d=b.map(d,function(a){return c>a?null:a-c})),d},M=function(a,c){var d;this.p.deepempty?b(this.rows).slice(1).remove():(d=this.rows.length>0?this.rows[0]:null,b(this.firstChild).empty().append(d)),a&&this.p.scroll&&(b(this.grid.bDiv.firstChild).css({height:"auto"}),b(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0)),c===!0&&this.p.treeGrid&&(this.p.data=[],this.p._index={})},Q=function(){var d,e,f,c=a.p.data.length;for(d=a.p.rownumbers===!0?1:0,e=a.p.multiselect===!0?1:0,f=a.p.subGrid===!0?1:0,d=a.p.keyIndex===!1||a.p.loadonce===!0?a.p.localReader.id:a.p.colModel[a.p.keyIndex+e+f+d].name,e=0;c>e;e++)f=b.jgrid.getAccessor(a.p.data[e],d),a.p._index[f]=e},N=function(c,d,e,f,g,h){var k,i="-1",j="",d=d?"display:none;":"",e="ui-widget-content jqgrow ui-row-"+a.p.direction+e+(h?" ui-state-highlight":""),f=b.isFunction(a.p.rowattr)?a.p.rowattr.call(a,f,g):{};if(!b.isEmptyObject(f)){f.hasOwnProperty("id")&&(c=f.id,delete f.id),f.hasOwnProperty("tabindex")&&(i=f.tabindex,delete f.tabindex),f.hasOwnProperty("style")&&(d+=f.style,delete f.style),f.hasOwnProperty("class")&&(e+=" "+f["class"],delete f["class"]);try{delete f.role}catch(z){}for(k in f)f.hasOwnProperty(k)&&(j+=" "+k+"="+f[k])}return'<tr role="row" id="'+c+'" tabindex="'+i+'" class="'+e+'"'+(""===d?"":' style="'+d+'"')+j+">"},Z=function(c,d,e,f,g){var h=new Date,i="local"!=a.p.datatype&&a.p.loadonce||"xmlstring"==a.p.datatype,j=a.p.xmlReader,k="local"==a.p.datatype?"local":"xml";if(i&&(a.p.data=[],a.p._index={},a.p.localReader.id="_id_"),a.p.reccount=0,b.isXMLDoc(c)){-1!==a.p.treeANode||a.p.scroll?e=e>1?e:1:(M.call(a,!1,!0),e=1);var z,B,l,o,u,q,w,A,r=0,s=a.p.multiselect===!0?1:0,O=a.p.subGrid===!0?1:0,m=a.p.rownumbers===!0?1:0,p=[],n={},C=[],v=a.p.altRows===!0?" "+a.p.altclass:"";j.repeatitems||(p=T(k)),o=a.p.keyIndex===!1?b.isFunction(j.id)?j.id.call(a,c):j.id:a.p.keyIndex,p.length>0&&!isNaN(o)&&(a.p.remapColumns&&a.p.remapColumns.length&&(o=b.inArray(o,a.p.remapColumns)),o=p[o]),k=-1===(o+"").indexOf("[")?p.length?function(a,c){return b(o,a).text()||c}:function(a,c){return b(j.cell,a).eq(o).text()||c}:function(a,b){return a.getAttribute(o.replace(/[\[\]]/g,""))||b},a.p.userData={},a.p.page=b.jgrid.getXmlData(c,j.page)||a.p.page||0,a.p.lastpage=b.jgrid.getXmlData(c,j.total),void 0===a.p.lastpage&&(a.p.lastpage=1),a.p.records=b.jgrid.getXmlData(c,j.records)||0,b.isFunction(j.userdata)?a.p.userData=j.userdata.call(a,c)||{}:b.jgrid.getXmlData(c,j.userdata,!0).each(function(){a.p.userData[this.getAttribute("name")]=b(this).text()}),c=b.jgrid.getXmlData(c,j.root,!0),(c=b.jgrid.getXmlData(c,j.row,!0))||(c=[]);var t=c.length,F=0,R=[],x=parseInt(a.p.rowNum,10);if(t>0&&a.p.page<=0&&(a.p.page=1),c&&t){var D=a.p.scroll?b.jgrid.randId():1;g&&(x*=g+1);for(var g=b.isFunction(a.p.afterInsertRow),H=a.p.grouping&&a.p.groupingView.groupCollapse===!0;t>F;){q=c[F],w=k(q,D+F),w=a.p.idPrefix+w,z=0===e?0:e+1,A=(z+F)%2==1?v:"";var G=C.length;if(C.push(""),m&&C.push(Y(0,F,a.p.page,a.p.rowNum)),s&&C.push(E(w,m,F,!1)),O&&C.push(b(a).jqGrid("addSubGridCell",s+m,F+e)),j.repeatitems){u||(u=U(s+O+m));var J=b.jgrid.getXmlData(q,j.cell,!0);b.each(u,function(b){var c=J[this];return c?(l=c.textContent||c.text,n[a.p.colModel[b+s+O+m].name]=l,void C.push(L(w,l,b+s+O+m,F+e,q))):!1})}else for(z=0;z<p.length;z++)l=b.jgrid.getXmlData(q,p[z]),n[a.p.colModel[z+s+O+m].name]=l,C.push(L(w,l,z+s+O+m,F+e,q));if(C[G]=N(w,H,A,n,q,!1),C.push("</tr>"),a.p.grouping&&(R=b(a).jqGrid("groupingPrepare",C,R,n,F),C=[]),(i||a.p.treeGrid===!0)&&(n._id_=w,a.p.data.push(n),a.p._index[w]=a.p.data.length-1),a.p.gridview===!1&&(b("tbody:first",d).append(C.join("")),b(a).triggerHandler("jqGridAfterInsertRow",[w,n,q]),g&&a.p.afterInsertRow.call(a,w,n,q),C=[]),n={},r++,F++,r==x)break}}if(a.p.gridview===!0&&(B=a.p.treeANode>-1?a.p.treeANode:0,a.p.grouping?(b(a).jqGrid("groupingRender",R,a.p.colModel.length),R=null):a.p.treeGrid===!0&&B>0?b(a.rows[B]).after(C.join("")):b("tbody:first",d).append(C.join(""))),a.p.subGrid===!0)try{b(a).jqGrid("addSubGrid",s+m)}catch(P){}if(a.p.totaltime=new Date-h,r>0&&0===a.p.records&&(a.p.records=t),C=null,a.p.treeGrid===!0)try{b(a).jqGrid("setTreeNode",B+1,r+B+1)}catch(Q){}if(a.p.treeGrid||a.p.scroll||(a.grid.bDiv.scrollTop=0),a.p.reccount=r,a.p.treeANode=-1,a.p.userDataOnFooter&&b(a).jqGrid("footerData","set",a.p.userData,!0),i&&(a.p.records=t,a.p.lastpage=Math.ceil(t/x)),f||a.updatepager(!1,!0),i)for(;t>r;){if(q=c[r],w=k(q,r+D),w=a.p.idPrefix+w,j.repeatitems){u||(u=U(s+O+m));var K=b.jgrid.getXmlData(q,j.cell,!0);b.each(u,function(b){var c=K[this];return c?(l=c.textContent||c.text,void(n[a.p.colModel[b+s+O+m].name]=l)):!1})}else for(z=0;z<p.length;z++)l=b.jgrid.getXmlData(q,p[z]),n[a.p.colModel[z+s+O+m].name]=l;n._id_=w,a.p.data.push(n),a.p._index[w]=a.p.data.length-1,n={},r++}}},$=function(c,d,e,f,g){if(d=new Date,c){-1!==a.p.treeANode||a.p.scroll?e=e>1?e:1:(M.call(a,!1,!0),e=1);var h,i,j="local"!=a.p.datatype&&a.p.loadonce||"jsonstring"==a.p.datatype;j&&(a.p.data=[],a.p._index={},a.p.localReader.id="_id_"),a.p.reccount=0,"local"==a.p.datatype?(h=a.p.localReader,i="local"):(h=a.p.jsonReader,i="json");var l,B,m,n,u,v,q,A,k=0,r=[],s=a.p.multiselect?1:0,o=a.p.subGrid?1:0,p=a.p.rownumbers===!0?1:0,t={},w=[],C=a.p.altRows===!0?" "+a.p.altclass:"";a.p.page=b.jgrid.getAccessor(c,h.page)||a.p.page||0,n=b.jgrid.getAccessor(c,h.total),a.p.lastpage=void 0===n?1:n,a.p.records=b.jgrid.getAccessor(c,h.records)||0,a.p.userData=b.jgrid.getAccessor(c,h.userdata)||{},h.repeatitems||(m=r=T(i)),i=a.p.keyIndex===!1?b.isFunction(h.id)?h.id.call(a,c):h.id:a.p.keyIndex,r.length>0&&!isNaN(i)&&(a.p.remapColumns&&a.p.remapColumns.length&&(i=b.inArray(i,a.p.remapColumns)),i=r[i]),(u=b.jgrid.getAccessor(c,h.root))||(u=[]),n=u.length,c=0,n>0&&a.p.page<=0&&(a.p.page=1);var R,x=parseInt(a.p.rowNum,10),D=a.p.scroll?b.jgrid.randId():1,F=!1;g&&(x*=g+1),"local"===a.p.datatype&&!a.p.deselectAfterSort&&(F=!0);for(var H=b.isFunction(a.p.afterInsertRow),G=[],J=a.p.grouping&&a.p.groupingView.groupCollapse===!0;n>c;){g=u[c],q=b.jgrid.getAccessor(g,i),void 0===q&&(q=D+c,0===r.length&&h.cell&&(l=b.jgrid.getAccessor(g,h.cell),q=void 0!==l?l[i]||q:q)),q=a.p.idPrefix+q,l=1===e?0:e,A=(l+c)%2==1?C:"",F&&(R=a.p.multiselect?-1!==b.inArray(q,a.p.selarrrow):q===a.p.selrow);var K=w.length;for(w.push(""),p&&w.push(Y(0,c,a.p.page,a.p.rowNum)),s&&w.push(E(q,p,c,R)),o&&w.push(b(a).jqGrid("addSubGridCell",s+p,c+e)),h.repeatitems&&(h.cell&&(g=b.jgrid.getAccessor(g,h.cell)),m||(m=U(s+o+p))),B=0;B<m.length;B++)l=b.jgrid.getAccessor(g,m[B]),w.push(L(q,l,B+s+o+p,c+e,g)),t[a.p.colModel[B+s+o+p].name]=l;if(w[K]=N(q,J,A,t,g,R),w.push("</tr>"),a.p.grouping&&(G=b(a).jqGrid("groupingPrepare",w,G,t,c),w=[]),(j||a.p.treeGrid===!0)&&(t._id_=q,a.p.data.push(t),a.p._index[q]=a.p.data.length-1),a.p.gridview===!1&&(b("#"+b.jgrid.jqID(a.p.id)+" tbody:first").append(w.join("")),b(a).triggerHandler("jqGridAfterInsertRow",[q,t,g]),H&&a.p.afterInsertRow.call(a,q,t,g),w=[]),t={},k++,c++,k==x)break}if(a.p.gridview===!0&&(v=a.p.treeANode>-1?a.p.treeANode:0,a.p.grouping?b(a).jqGrid("groupingRender",G,a.p.colModel.length):a.p.treeGrid===!0&&v>0?b(a.rows[v]).after(w.join("")):b("#"+b.jgrid.jqID(a.p.id)+" tbody:first").append(w.join(""))),a.p.subGrid===!0)try{b(a).jqGrid("addSubGrid",s+p)}catch(P){}if(a.p.totaltime=new Date-d,k>0&&0===a.p.records&&(a.p.records=n),a.p.treeGrid===!0)try{b(a).jqGrid("setTreeNode",v+1,k+v+1)}catch(Q){}if(a.p.treeGrid||a.p.scroll||(a.grid.bDiv.scrollTop=0),a.p.reccount=k,a.p.treeANode=-1,a.p.userDataOnFooter&&b(a).jqGrid("footerData","set",a.p.userData,!0),j&&(a.p.records=n,a.p.lastpage=Math.ceil(n/x)),f||a.updatepager(!1,!0),j)for(;n>k&&u[k];){if(g=u[k],q=b.jgrid.getAccessor(g,i),void 0===q&&(q=D+k,0===r.length&&h.cell&&(q=b.jgrid.getAccessor(g,h.cell)[i]||q)),g){for(q=a.p.idPrefix+q,h.repeatitems&&(h.cell&&(g=b.jgrid.getAccessor(g,h.cell)),m||(m=U(s+o+p))),B=0;B<m.length;B++)l=b.jgrid.getAccessor(g,m[B]),t[a.p.colModel[B+s+o+p].name]=l;t._id_=q,a.p.data.push(t),a.p._index[q]=a.p.data.length-1,t={}}k++}}},la=function(){function c(d){var g,h,i,j,S,e=0;if(void 0!==d.groups){for((h=d.groups.length&&"OR"===d.groupOp.toString().toUpperCase())&&s.orBegin(),g=0;g<d.groups.length;g++){e>0&&h&&s.or();try{c(d.groups[g])}catch(k){alert(k)}e++}h&&s.orEnd()}if(void 0!==d.rules){e>0&&(h=s.select(),s=b.jgrid.from(h),a.p.ignoreCase&&(s=s.ignoreCase()));try{for((i=d.rules.length&&"OR"===d.groupOp.toString().toUpperCase())&&s.orBegin(),g=0;g<d.rules.length;g++)S=d.rules[g],j=d.groupOp.toString().toUpperCase(),o[S.op]&&S.field&&(e>0&&j&&"OR"===j&&(s=s.or()),s=o[S.op](s,j)(S.field,S.data,f[S.field])),e++;i&&s.orEnd()}catch(ma){alert(ma)}}}var d,i,j,k,e=!1,f={},g=[],h=[];if(b.isArray(a.p.data)){var m,r,l=a.p.grouping?a.p.groupingView:!1;if(b.each(a.p.colModel,function(){if(j=this.sorttype||"text","date"==j||"datetime"==j?(this.formatter&&"string"==typeof this.formatter&&"date"==this.formatter?(i=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:b.jgrid.formatter.date.srcformat,k=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:b.jgrid.formatter.date.newformat):i=k=this.datefmt||"Y-m-d",f[this.name]={stype:j,srcfmt:i,newfmt:k}):f[this.name]={stype:j,srcfmt:"",newfmt:""},a.p.grouping)for(r=0,m=l.groupField.length;m>r;r++)if(this.name==l.groupField[r]){var c=this.name;"undefined"!=typeof this.index&&(c=this.index),g[r]=f[c],h[r]=c}e||this.index!=a.p.sortname&&this.name!=a.p.sortname||(d=this.name,e=!0)}),!a.p.treeGrid){var o={eq:function(a){return a.equals},ne:function(a){return a.notEquals},lt:function(a){return a.less},le:function(a){return a.lessOrEquals},gt:function(a){return a.greater},ge:function(a){return a.greaterOrEquals},cn:function(a){return a.contains},nc:function(a,b){return"OR"===b?a.orNot().contains:a.andNot().contains},bw:function(a){return a.startsWith},bn:function(a,b){return"OR"===b?a.orNot().startsWith:a.andNot().startsWith},en:function(a,b){return"OR"===b?a.orNot().endsWith:a.andNot().endsWith},ew:function(a){return a.endsWith},ni:function(a,b){return"OR"===b?a.orNot().equals:a.andNot().equals},"in":function(a){return a.equals},nu:function(a){return a.isNull},nn:function(a,b){return"OR"===b?a.orNot().isNull:a.andNot().isNull}},s=b.jgrid.from(a.p.data);if(a.p.ignoreCase&&(s=s.ignoreCase()),a.p.search===!0){var n=a.p.postData.filters;if(n)"string"==typeof n&&(n=b.jgrid.parse(n)),c(n);else try{s=o[a.p.postData.searchOper](s)(a.p.postData.searchField,a.p.postData.searchString,f[a.p.postData.searchField])}catch(p){}}if(a.p.grouping)for(r=0;m>r;r++)s.orderBy(h[r],l.groupOrder[r],g[r].stype,g[r].srcfmt);d&&a.p.sortorder&&e&&("DESC"==a.p.sortorder.toUpperCase()?s.orderBy(a.p.sortname,"d",f[d].stype,f[d].srcfmt):s.orderBy(a.p.sortname,"a",f[d].stype,f[d].srcfmt));var n=s.select(),u=parseInt(a.p.rowNum,10),t=n.length,v=parseInt(a.p.page,10),x=Math.ceil(t/u),q={},n=n.slice((v-1)*u,v*u),f=s=null;return q[a.p.localReader.total]=x,q[a.p.localReader.page]=v,q[a.p.localReader.records]=t,q[a.p.localReader.root]=n,q[a.p.localReader.userdata]=a.p.userData,n=null,q}b(a).jqGrid("SortTree",d,a.p.sortorder,f[d].stype,f[d].srcfmt)}},ba=function(){if(a.grid.hDiv.loading=!0,!a.p.hiddengrid)switch(a.p.loadui){case"enable":b("#load_"+b.jgrid.jqID(a.p.id)).show();break;case"block":b("#lui_"+b.jgrid.jqID(a.p.id)).show(),b("#load_"+b.jgrid.jqID(a.p.id)).show()}},K=function(){switch(a.grid.hDiv.loading=!1,a.p.loadui){case"enable":b("#load_"+b.jgrid.jqID(a.p.id)).hide();break;case"block":b("#lui_"+b.jgrid.jqID(a.p.id)).hide(),b("#load_"+b.jgrid.jqID(a.p.id)).hide()}},G=function(c){if(!a.grid.hDiv.loading){var f,d=a.p.scroll&&c===!1,e={},g=a.p.prmNames;a.p.page<=0&&(a.p.page=1),null!==g.search&&(e[g.search]=a.p.search),null!==g.nd&&(e[g.nd]=(new Date).getTime()),null!==g.rows&&(e[g.rows]=a.p.rowNum),null!==g.page&&(e[g.page]=a.p.page),null!==g.sort&&(e[g.sort]=a.p.sortname),null!==g.order&&(e[g.order]=a.p.sortorder),null!==a.p.rowTotal&&null!==g.totalrows&&(e[g.totalrows]=a.p.rowTotal);var h=b.isFunction(a.p.loadComplete),i=h?a.p.loadComplete:null,j=0,c=c||1;if(c>1?null!==g.npage?(e[g.npage]=c,j=c-1,c=1):i=function(b){a.p.page++,a.grid.hDiv.loading=!1,h&&a.p.loadComplete.call(a,b),G(c-1)}:null!==g.npage&&delete a.p.postData[g.npage],a.p.grouping){b(a).jqGrid("groupingSetup");var l,k=a.p.groupingView,m="";for(l=0;l<k.groupField.length;l++){var r=k.groupField[l];b.each(a.p.colModel,function(a,b){b.name==r&&b.index&&(r=b.index)}),m+=r+" "+k.groupOrder[l]+", "}e[g.sort]=m+e[g.sort]}b.extend(a.p.postData,e);var n=a.p.scroll?a.rows.length-1:1,e=b(a).triggerHandler("jqGridBeforeRequest");if(e!==!1&&"stop"!==e)if(b.isFunction(a.p.datatype))a.p.datatype.call(a,a.p.postData,"load_"+a.p.id);else{if(b.isFunction(a.p.beforeRequest)&&(e=a.p.beforeRequest.call(a),void 0===e&&(e=!0),e===!1))return;switch(f=a.p.datatype.toLowerCase()){case"json":case"jsonp":case"xml":case"script":b.ajax(b.extend({url:a.p.url,type:a.p.mtype,dataType:f,data:b.isFunction(a.p.serializeGridData)?a.p.serializeGridData.call(a,a.p.postData):a.p.postData,success:function(e,g,h){b.isFunction(a.p.beforeProcessing)&&a.p.beforeProcessing.call(a,e,g,h)===!1?K():("xml"===f?Z(e,a.grid.bDiv,n,c>1,j):$(e,a.grid.bDiv,n,c>1,j),b(a).triggerHandler("jqGridLoadComplete",[e]),i&&i.call(a,e),b(a).triggerHandler("jqGridAfterLoadComplete",[e]),d&&a.grid.populateVisible(),(a.p.loadonce||a.p.treeGrid)&&(a.p.datatype="local"),1===c&&K())},error:function(d,e,f){b.isFunction(a.p.loadError)&&a.p.loadError.call(a,d,e,f),1===c&&K()},beforeSend:function(c,d){var e=!0;return b.isFunction(a.p.loadBeforeSend)&&(e=a.p.loadBeforeSend.call(a,c,d)),void 0===e&&(e=!0),e===!1?!1:void ba()}},b.jgrid.ajaxOptions,a.p.ajaxGridOptions));break;case"xmlstring":ba(),e=b.jgrid.stringToDoc(a.p.datastr),Z(e,a.grid.bDiv),b(a).triggerHandler("jqGridLoadComplete",[e]),h&&a.p.loadComplete.call(a,e),b(a).triggerHandler("jqGridAfterLoadComplete",[e]),a.p.datatype="local",a.p.datastr=null,K();break;case"jsonstring":ba(),e="string"==typeof a.p.datastr?b.jgrid.parse(a.p.datastr):a.p.datastr,$(e,a.grid.bDiv),b(a).triggerHandler("jqGridLoadComplete",[e]),h&&a.p.loadComplete.call(a,e),b(a).triggerHandler("jqGridAfterLoadComplete",[e]),a.p.datatype="local",a.p.datastr=null,K();break;case"local":case"clientside":ba(),a.p.datatype="local",e=la(),$(e,a.grid.bDiv,n,c>1,j),b(a).triggerHandler("jqGridLoadComplete",[e]),i&&i.call(a,e),b(a).triggerHandler("jqGridAfterLoadComplete",[e]),d&&a.grid.populateVisible(),K()}}}},ca=function(c){b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.hDiv)[a.p.useProp?"prop":"attr"]("checked",c),a.p.frozenColumns&&b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.fhDiv)[a.p.useProp?"prop":"attr"]("checked",c)};l=function(c,e){var h,j,k,l,d="",f="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",g="",m=function(c){var e;return b.isFunction(a.p.onPaging)&&(e=a.p.onPaging.call(a,c)),a.p.selrow=null,a.p.multiselect&&(a.p.selarrrow=[],ca(!1)),a.p.savedRow=[],"stop"==e?!1:!0},c=c.substr(1),e=e+("_"+c);if(h="pg_"+c,j=c+"_left",k=c+"_center",l=c+"_right",b("#"+b.jgrid.jqID(c)).append("<div id='"+h+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+j+"' align='left'></td><td id='"+k+"' align='center' style='white-space:pre;'></td><td id='"+l+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr"),a.p.rowList.length>0){for(g="<td dir='"+i+"'>",g+="<select class='ui-pg-selbox' role='listbox'>",j=0;j<a.p.rowList.length;j++)g+='<option role="option" value="'+a.p.rowList[j]+'"'+(a.p.rowNum==a.p.rowList[j]?' selected="selected"':"")+">"+a.p.rowList[j]+"</option>";g+="</select></td>"}"rtl"==i&&(f+=g),a.p.pginput===!0&&(d="<td dir='"+i+"'>"+b.jgrid.format(a.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+b.jgrid.jqID(c)+"'></span>")+"</td>"),a.p.pgbuttons===!0?(j=["first"+e,"prev"+e,"next"+e,"last"+e],"rtl"==i&&j.reverse(),f+="<td id='"+j[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>",f+="<td id='"+j[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>",f=f+(""!==d?"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>"+d+"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>":"")+("<td id='"+j[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>"),f+="<td id='"+j[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>"):""!==d&&(f+=d),"ltr"==i&&(f+=g),f+="</tr></tbody></table>",a.p.viewrecords===!0&&b("td#"+c+"_"+a.p.recordpos,"#"+h).append("<div dir='"+i+"' style='text-align:"+a.p.recordpos+"' class='ui-paging-info'></div>"),b("td#"+c+"_"+a.p.pagerpos,"#"+h).append(f),g=b(".ui-jqgrid").css("font-size")||"11px",b(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+g+";visibility:hidden;' ></div>"),f=b(f).clone().appendTo("#testpg").width(),b("#testpg").remove(),f>0&&(""!==d&&(f+=50),b("td#"+c+"_"+a.p.pagerpos,"#"+h).width(f)),a.p._nvtd=[],a.p._nvtd[0]=Math.floor(f?(a.p.width-f)/2:a.p.width/3),a.p._nvtd[1]=0,f=null,b(".ui-pg-selbox","#"+h).bind("change",function(){return a.p.page=Math.round(a.p.rowNum*(a.p.page-1)/this.value-.5)+1,a.p.rowNum=this.value,a.p.pager&&b(".ui-pg-selbox",a.p.pager).val(this.value),a.p.toppager&&b(".ui-pg-selbox",a.p.toppager).val(this.value),m("records")?(G(),!1):!1}),a.p.pgbuttons===!0&&(b(".ui-pg-button","#"+h).hover(function(){b(this).hasClass("ui-state-disabled")?this.style.cursor="default":(b(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){b(this).hasClass("ui-state-disabled")||(b(this).removeClass("ui-state-hover"),this.style.cursor="default")}),b("#first"+b.jgrid.jqID(e)+", #prev"+b.jgrid.jqID(e)+", #next"+b.jgrid.jqID(e)+", #last"+b.jgrid.jqID(e)).click(function(){var b=o(a.p.page,1),c=o(a.p.lastpage,1),d=!1,f=!0,g=!0,h=!0,i=!0;if(0===c||1===c?i=h=g=f=!1:c>1&&b>=1?1===b?g=f=!1:b===c&&(i=h=!1):c>1&&0===b&&(i=h=!1,b=c-1),this.id==="first"+e&&f&&(a.p.page=1,d=!0),this.id==="prev"+e&&g&&(a.p.page=b-1,d=!0),this.id==="next"+e&&h&&(a.p.page=b+1,d=!0),this.id==="last"+e&&i&&(a.p.page=c,d=!0),d){if(!m(this.id))return!1;G()}return!1})),a.p.pginput===!0&&b("input.ui-pg-input","#"+h).keypress(function(c){return 13==(c.charCode?c.charCode:c.keyCode?c.keyCode:0)?(a.p.page=b(this).val()>0?b(this).val():a.p.page,m("user")?(G(),!1):!1):this})};var ia=function(c,e,d,f){if(a.p.colModel[e].sortable&&!(a.p.savedRow.length>0)){if(d||(a.p.lastsort==e?"asc"==a.p.sortorder?a.p.sortorder="desc":"desc"==a.p.sortorder&&(a.p.sortorder="asc"):a.p.sortorder=a.p.colModel[e].firstsortorder||"asc",a.p.page=1),f){if(a.p.lastsort==e&&a.p.sortorder==f&&!d)return;a.p.sortorder=f}d=a.grid.headers[a.p.lastsort].el,f=a.grid.headers[e].el,b("span.ui-grid-ico-sort",d).addClass("ui-state-disabled"),b(d).attr("aria-selected","false"),b("span.ui-icon-"+a.p.sortorder,f).removeClass("ui-state-disabled"),b(f).attr("aria-selected","true"),a.p.viewsortcols[0]||a.p.lastsort==e||(b("span.s-ico",d).hide(),b("span.s-ico",f).show()),c=c.substring(5+a.p.id.length+1),a.p.sortname=a.p.colModel[e].index||c,d=a.p.sortorder,"stop"===b(a).triggerHandler("jqGridSortCol",[c,e,d])?a.p.lastsort=e:b.isFunction(a.p.onSortCol)&&"stop"==a.p.onSortCol.call(a,c,e,d)?a.p.lastsort=e:("local"==a.p.datatype?a.p.deselectAfterSort&&b(a).jqGrid("resetSelection"):(a.p.selrow=null,a.p.multiselect&&ca(!1),a.p.selarrrow=[],a.p.savedRow=[]),a.p.scroll&&(d=a.grid.bDiv.scrollLeft,M.call(a,!0,!1),a.grid.hDiv.scrollLeft=d),a.p.subGrid&&"local"==a.p.datatype&&b("td.sgexpanded","#"+b.jgrid.jqID(a.p.id)).each(function(){b(this).trigger("click")}),G(),a.p.lastsort=e,a.p.sortname!=c&&e&&(a.p.lastsort=e))}},na=function(c){var e,d={},f=b.jgrid.cellWidth()?0:a.p.cellLayout;for(e=d[0]=d[1]=d[2]=0;c>=e;e++)a.p.colModel[e].hidden===!1&&(d[0]=d[0]+(a.p.colModel[e].width+f));return"rtl"==a.p.direction&&(d[0]=a.p.width-d[0]),d[0]=d[0]-a.grid.bDiv.scrollLeft,b(a.grid.cDiv).is(":visible")&&(d[1]=d[1]+(b(a.grid.cDiv).height()+parseInt(b(a.grid.cDiv).css("padding-top"),10)+parseInt(b(a.grid.cDiv).css("padding-bottom"),10))),a.p.toolbar[0]!==!0||"top"!=a.p.toolbar[1]&&"both"!=a.p.toolbar[1]||(d[1]=d[1]+(b(a.grid.uDiv).height()+parseInt(b(a.grid.uDiv).css("border-top-width"),10)+parseInt(b(a.grid.uDiv).css("border-bottom-width"),10))),a.p.toppager&&(d[1]=d[1]+(b(a.grid.topDiv).height()+parseInt(b(a.grid.topDiv).css("border-bottom-width"),10))),d[2]=d[2]+(b(a.grid.bDiv).height()+b(a.grid.hDiv).height()),d},ja=function(c){var d,e=a.grid.headers,f=b.jgrid.getCellIndex(c);for(d=0;d<e.length;d++)if(c===e[d].el){f=d;break}return f};for(this.p.id=this.id,-1==b.inArray(a.p.multikey,["shiftKey","altKey","ctrlKey"])&&(a.p.multikey=!1),a.p.keyIndex=!1,e=0;e<a.p.colModel.length;e++)a.p.colModel[e]=b.extend(!0,{},a.p.cmTemplate,a.p.colModel[e].template||{},a.p.colModel[e]),!1===a.p.keyIndex&&!0===a.p.colModel[e].key&&(a.p.keyIndex=e);if(a.p.sortorder=a.p.sortorder.toLowerCase(),!0===a.p.grouping&&(a.p.scroll=!1,a.p.rownumbers=!1,a.p.treeGrid=!1,a.p.gridview=!0),!0===this.p.treeGrid){try{b(this).jqGrid("setTreeGrid")}catch(pa){}"local"!=a.p.datatype&&(a.p.localReader={id:"_id_"})}if(this.p.subGrid)try{b(a).jqGrid("setSubGrid")}catch(qa){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:b.jgrid.cellWidth()?a.p.multiselectWidth+a.p.cellLayout:a.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:a.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),a.p.xmlReader=b.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},a.p.xmlReader),a.p.jsonReader=b.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},a.p.jsonReader),a.p.localReader=b.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},a.p.localReader),a.p.scroll&&(a.p.pgbuttons=!1,a.p.pginput=!1,a.p.rowList=[]),a.p.data.length&&Q();var ka,J,da,aa,ea,A,n,V,x="<thead><tr class='ui-jqgrid-labels' role='rowheader'>";if(J=V="",!0===a.p.shrinkToFit&&!0===a.p.forceFit)for(e=a.p.colModel.length-1;e>=0;e--)if(!a.p.colModel[e].hidden){a.p.colModel[e].resizable=!1;break}for("horizontal"==a.p.viewsortcols[1]&&(V=" ui-i-asc",J=" ui-i-desc"),ka=k?"class='ui-th-div-ie'":"",V="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+V+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+i+"'></span>"+("<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+J+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+i+"'></span></span>"),e=0;e<this.p.colNames.length;e++)J=a.p.headertitles?' title="'+b.jgrid.stripHtml(a.p.colNames[e])+'"':"",x+="<th id='"+a.p.id+"_"+a.p.colModel[e].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+i+"'"+J+">",J=a.p.colModel[e].index||a.p.colModel[e].name,x+="<div id='jqgh_"+a.p.id+"_"+a.p.colModel[e].name+"' "+ka+">"+a.p.colNames[e],a.p.colModel[e].width=a.p.colModel[e].width?parseInt(a.p.colModel[e].width,10):150,"boolean"!=typeof a.p.colModel[e].title&&(a.p.colModel[e].title=!0),J==a.p.sortname&&(a.p.lastsort=e),x+=V+"</div></th>";if(V=null,b(this).append(x+"</tr></thead>"),b("thead tr:first th",this).hover(function(){b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")}),this.p.multiselect){var W,fa=[];b("#cb_"+b.jgrid.jqID(a.p.id),this).bind("click",function(){a.p.selarrrow=[];var c=a.p.frozenColumns===!0?a.p.id+"_frozen":"";this.checked?(b(a.rows).each(function(d){d>0&&!b(this).hasClass("ui-subgrid")&&!b(this).hasClass("jqgroup")&&!b(this).hasClass("ui-state-disabled")&&(b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id))[a.p.useProp?"prop":"attr"]("checked",!0),b(this).addClass("ui-state-highlight").attr("aria-selected","true"),a.p.selarrrow.push(this.id),a.p.selrow=this.id,c&&(b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id),a.grid.fbDiv)[a.p.useProp?"prop":"attr"]("checked",!0),b("#"+b.jgrid.jqID(this.id),a.grid.fbDiv).addClass("ui-state-highlight")))}),W=!0,fa=[]):(b(a.rows).each(function(d){d>0&&!b(this).hasClass("ui-subgrid")&&!b(this).hasClass("ui-state-disabled")&&(b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id))[a.p.useProp?"prop":"attr"]("checked",!1),b(this).removeClass("ui-state-highlight").attr("aria-selected","false"),fa.push(this.id),c&&(b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id),a.grid.fbDiv)[a.p.useProp?"prop":"attr"]("checked",!1),b("#"+b.jgrid.jqID(this.id),a.grid.fbDiv).removeClass("ui-state-highlight")))}),a.p.selrow=null,W=!1),b(a).triggerHandler("jqGridSelectAll",[W?a.p.selarrrow:fa,W]),b.isFunction(a.p.onSelectAll)&&a.p.onSelectAll.call(a,W?a.p.selarrrow:fa,W)})}!0===a.p.autowidth&&(x=b(m).innerWidth(),a.p.width=x>0?x:"nw"),function(){var h,j,l,p,d=0,e=b.jgrid.cellWidth()?0:o(a.p.cellLayout,0),f=0,i=o(a.p.scrollOffset,0),k=!1,m=0,n=0;b.each(a.p.colModel,function(){"undefined"==typeof this.hidden&&(this.hidden=!1),this.widthOrg=j=o(this.width,0),this.hidden===!1&&(d+=j+e,this.fixed?m+=j+e:f++,n++)}),isNaN(a.p.width)&&(a.p.width=d+(a.p.shrinkToFit!==!1||isNaN(a.p.height)?0:i)),c.width=a.p.width,a.p.tblwidth=d,a.p.shrinkToFit===!1&&a.p.forceFit===!0&&(a.p.forceFit=!1),a.p.shrinkToFit===!0&&f>0&&(l=c.width-e*f-m,isNaN(a.p.height)||(l-=i,k=!0),d=0,b.each(a.p.colModel,function(b){this.hidden!==!1||this.fixed||(this.width=j=Math.round(l*this.width/(a.p.tblwidth-e*f-m)),d+=j,h=b)}),p=0,k?c.width-m-(d+e*f)!==i&&(p=c.width-m-(d+e*f)-i):!k&&1!==Math.abs(c.width-m-(d+e*f))&&(p=c.width-m-(d+e*f)),a.p.colModel[h].width=a.p.colModel[h].width+p,a.p.tblwidth=d+p+e*f+m,a.p.tblwidth>a.p.width&&(a.p.colModel[h].width=a.p.colModel[h].width-(a.p.tblwidth-parseInt(a.p.width,10)),a.p.tblwidth=a.p.width))}(),b(m).css("width",c.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+a.p.id+"'>&#160;</div>"),b(j).css("width",c.width+"px");var x=b("thead:first",a).get(0),P="";a.p.footerrow&&(P+="<table role='grid' style='width:"+a.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+i+"'>");var j=b("tr:first",x),X="<tr class='jqgfirstrow' role='row' style='height:auto'>";if(a.p.disableClick=!1,b("th",j).each(function(d){da=a.p.colModel[d].width,"undefined"==typeof a.p.colModel[d].resizable&&(a.p.colModel[d].resizable=!0),a.p.colModel[d].resizable?(aa=document.createElement("span"),b(aa).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+i),b.browser.opera||b(aa).css("cursor","col-resize"),b(this).addClass(a.p.resizeclass)):aa="",b(this).css("width",da+"px").prepend(aa);var e="";a.p.colModel[d].hidden&&(b(this).css("display","none"),e="display:none;"),X+="<td role='gridcell' style='height:0px;width:"+da+"px;"+e+"'></td>",c.headers[d]={width:da,el:this},ea=a.p.colModel[d].sortable,"boolean"!=typeof ea&&(ea=a.p.colModel[d].sortable=!0),e=a.p.colModel[d].name,"cb"==e||"subgrid"==e||"rn"==e||a.p.viewsortcols[2]&&b(">div",this).addClass("ui-jqgrid-sortable"),ea&&(a.p.viewsortcols[0]?(b("div span.s-ico",this).show(),d==a.p.lastsort&&b("div span.ui-icon-"+a.p.sortorder,this).removeClass("ui-state-disabled")):d==a.p.lastsort&&(b("div span.s-ico",this).show(),b("div span.ui-icon-"+a.p.sortorder,this).removeClass("ui-state-disabled"))),a.p.footerrow&&(P+="<td role='gridcell' "+p(d,0,"",null,"",!1)+">&#160;</td>")
}).mousedown(function(d){if(1==b(d.target).closest("th>span.ui-jqgrid-resize").length){var e=ja(this);if(a.p.forceFit===!0){var i,f=a.p,h=e;for(i=e+1;i<a.p.colModel.length;i++)if(a.p.colModel[i].hidden!==!0){h=i;break}f.nv=h-e}return c.dragStart(e,d,na(e)),!1}}).click(function(c){if(a.p.disableClick)return a.p.disableClick=!1;var e,f,d="th>div.ui-jqgrid-sortable";return a.p.viewsortcols[2]||(d="th>div>span>span.ui-grid-ico-sort"),c=b(c.target).closest(d),1==c.length?(d=ja(this),a.p.viewsortcols[2]||(e=!0,f=c.attr("sort")),ia(b("div",this)[0].id,d,e,f),!1):void 0}),a.p.sortable&&b.fn.sortable)try{b(a).jqGrid("sortableColumns",j)}catch(ra){}a.p.footerrow&&(P+="</tr></tbody></table>"),X+="</tr>",this.appendChild(document.createElement("tbody")),b(this).addClass("ui-jqgrid-btable").append(X);var X=null,j=b("<table class='ui-jqgrid-htable' style='width:"+a.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(x),D=a.p.caption&&!0===a.p.hiddengrid?!0:!1;e=b("<div class='ui-jqgrid-hbox"+("rtl"==i?"-rtl":"")+"'></div>"),x=null,c.hDiv=document.createElement("div"),b(c.hDiv).css({width:c.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(e),b(e).append(j),j=null,D&&b(c.hDiv).hide(),a.p.pager&&("string"==typeof a.p.pager?"#"!=a.p.pager.substr(0,1)&&(a.p.pager="#"+a.p.pager):a.p.pager="#"+b(a.p.pager).attr("id"),b(a.p.pager).css({width:c.width+"px"}).appendTo(m).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom"),D&&b(a.p.pager).hide(),l(a.p.pager,"")),!1===a.p.cellEdit&&!0===a.p.hoverrows&&b(a).bind("mouseover",function(a){n=b(a.target).closest("tr.jqgrow"),"ui-subgrid"!==b(n).attr("class")&&b(n).addClass("ui-state-hover")}).bind("mouseout",function(a){n=b(a.target).closest("tr.jqgrow"),b(n).removeClass("ui-state-hover")});var t,H,ga;b(a).before(c.hDiv).click(function(c){if(A=c.target,n=b(A,a.rows).closest("tr.jqgrow"),0===b(n).length||n[0].className.indexOf("ui-state-disabled")>-1||(b(A,a).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==a.id)return this;var d=b(A).hasClass("cbox"),e=b(a).triggerHandler("jqGridBeforeSelectRow",[n[0].id,c]);if((e=e===!1||"stop"===e?!1:!0)&&b.isFunction(a.p.beforeSelectRow)&&(e=a.p.beforeSelectRow.call(a,n[0].id,c)),"A"!=A.tagName&&("INPUT"!=A.tagName&&"TEXTAREA"!=A.tagName&&"OPTION"!=A.tagName&&"SELECT"!=A.tagName||d)&&e===!0)if(t=n[0].id,H=b.jgrid.getCellIndex(A),ga=b(A).closest("td,th").html(),b(a).triggerHandler("jqGridCellSelect",[t,H,ga,c]),b.isFunction(a.p.onCellSelect)&&a.p.onCellSelect.call(a,t,H,ga,c),a.p.cellEdit===!0)if(a.p.multiselect&&d)b(a).jqGrid("setSelection",t,!0,c);else{t=n[0].rowIndex;try{b(a).jqGrid("editCell",t,H,!0)}catch(f){}}else if(a.p.multikey)c[a.p.multikey]?b(a).jqGrid("setSelection",t,!0,c):a.p.multiselect&&d&&(d=b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+t).is(":checked"),b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+t)[a.p.useProp?"prop":"attr"]("checked",d));else{if(a.p.multiselect&&a.p.multiboxonly&&!d){var g=a.p.frozenColumns?a.p.id+"_frozen":"";b(a.p.selarrrow).each(function(c,d){var e=a.rows.namedItem(d);b(e).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(d))[a.p.useProp?"prop":"attr"]("checked",!1),g&&(b("#"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(g)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(g))[a.p.useProp?"prop":"attr"]("checked",!1))}),a.p.selarrrow=[]}b(a).jqGrid("setSelection",t,!0,c)}}).bind("reloadGrid",function(c,d){if(a.p.treeGrid===!0&&(a.p.datatype=a.p.treedatatype),d&&d.current&&a.grid.selectionPreserver(a),"local"==a.p.datatype?(b(a).jqGrid("resetSelection"),a.p.data.length&&Q()):a.p.treeGrid||(a.p.selrow=null,a.p.multiselect&&(a.p.selarrrow=[],ca(!1)),a.p.savedRow=[]),a.p.scroll&&M.call(a,!0,!1),d&&d.page){var e=d.page;e>a.p.lastpage&&(e=a.p.lastpage),1>e&&(e=1),a.p.page=e,a.grid.bDiv.scrollTop=a.grid.prevRowHeight?(e-1)*a.grid.prevRowHeight*a.p.rowNum:0}return a.grid.prevRowHeight&&a.p.scroll?(delete a.p.lastpage,a.grid.populateVisible()):a.grid.populate(),a.p._inlinenav===!0&&b(a).jqGrid("showAddEditButtons"),!1}).dblclick(function(c){A=c.target,n=b(A,a.rows).closest("tr.jqgrow"),0!==b(n).length&&(t=n[0].rowIndex,H=b.jgrid.getCellIndex(A),b(a).triggerHandler("jqGridDblClickRow",[b(n).attr("id"),t,H,c]),b.isFunction(this.p.ondblClickRow)&&a.p.ondblClickRow.call(a,b(n).attr("id"),t,H,c))}).bind("contextmenu",function(c){A=c.target,n=b(A,a.rows).closest("tr.jqgrow"),0!==b(n).length&&(a.p.multiselect||b(a).jqGrid("setSelection",n[0].id,!0,c),t=n[0].rowIndex,H=b.jgrid.getCellIndex(A),b(a).triggerHandler("jqGridRightClickRow",[b(n).attr("id"),t,H,c]),b.isFunction(this.p.onRightClickRow)&&a.p.onRightClickRow.call(a,b(n).attr("id"),t,H,c))}),c.bDiv=document.createElement("div"),k&&"auto"===(""+a.p.height).toLowerCase()&&(a.p.height="100%"),b(c.bDiv).append(b('<div style="position:relative;'+(k&&8>b.browser.version?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:a.p.height+(isNaN(a.p.height)?"":"px"),width:c.width+"px"}).scroll(c.scrollGrid),b("table:first",c.bDiv).css({width:a.p.tblwidth+"px"}),k?(2==b("tbody",this).length&&b("tbody:gt(0)",this).remove(),a.p.multikey&&b(c.bDiv).bind("selectstart",function(){return!1})):a.p.multikey&&b(c.bDiv).bind("mousedown",function(){return!1}),D&&b(c.bDiv).hide(),c.cDiv=document.createElement("div");var ha=!0===a.p.hidegrid?b("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){ha.addClass("ui-state-hover")},function(){ha.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css("rtl"==i?"left":"right","0px"):"";if(b(c.cDiv).append(ha).append("<span class='ui-jqgrid-title"+("rtl"==i?"-rtl":"")+"'>"+a.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix"),b(c.cDiv).insertBefore(c.hDiv),a.p.toolbar[0]&&(c.uDiv=document.createElement("div"),"top"==a.p.toolbar[1]?b(c.uDiv).insertBefore(c.hDiv):"bottom"==a.p.toolbar[1]&&b(c.uDiv).insertAfter(c.hDiv),"both"==a.p.toolbar[1]?(c.ubDiv=document.createElement("div"),b(c.uDiv).insertBefore(c.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),b(c.ubDiv).insertAfter(c.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id),D&&b(c.ubDiv).hide()):b(c.uDiv).width(c.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),D&&b(c.uDiv).hide()),a.p.toppager&&(a.p.toppager=b.jgrid.jqID(a.p.id)+"_toppager",c.topDiv=b("<div id='"+a.p.toppager+"'></div>")[0],a.p.toppager="#"+a.p.toppager,b(c.topDiv).insertBefore(c.hDiv).addClass("ui-state-default ui-jqgrid-toppager").width(c.width),l(a.p.toppager,"_t")),a.p.footerrow&&(c.sDiv=b("<div class='ui-jqgrid-sdiv'></div>")[0],e=b("<div class='ui-jqgrid-hbox"+("rtl"==i?"-rtl":"")+"'></div>"),b(c.sDiv).append(e).insertAfter(c.hDiv).width(c.width),b(e).append(P),c.footers=b(".ui-jqgrid-ftable",c.sDiv)[0].rows[0].cells,a.p.rownumbers&&(c.footers[0].className="ui-state-default jqgrid-rownum"),D&&b(c.sDiv).hide()),e=null,a.p.caption){var oa=a.p.datatype;!0===a.p.hidegrid&&(b(".ui-jqgrid-titlebar-close",c.cDiv).click(function(d){var h,e=b.isFunction(a.p.onHeaderClick),f=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",i=this;return a.p.toolbar[0]===!0&&("both"==a.p.toolbar[1]&&(f+=", #"+b(c.ubDiv).attr("id")),f+=", #"+b(c.uDiv).attr("id")),h=b(f,"#gview_"+b.jgrid.jqID(a.p.id)).length,"visible"==a.p.gridstate?b(f,"#gbox_"+b.jgrid.jqID(a.p.id)).slideUp("fast",function(){h--,0===h&&(b("span",i).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),a.p.gridstate="hidden",b("#gbox_"+b.jgrid.jqID(a.p.id)).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+b.jgrid.jqID(a.p.id)).hide(),b(a).triggerHandler("jqGridHeaderClick",[a.p.gridstate,d]),e&&(D||a.p.onHeaderClick.call(a,a.p.gridstate,d)))}):"hidden"==a.p.gridstate&&b(f,"#gbox_"+b.jgrid.jqID(a.p.id)).slideDown("fast",function(){h--,0===h&&(b("span",i).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),D&&(a.p.datatype=oa,G(),D=!1),a.p.gridstate="visible",b("#gbox_"+b.jgrid.jqID(a.p.id)).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+b.jgrid.jqID(a.p.id)).show(),b(a).triggerHandler("jqGridHeaderClick",[a.p.gridstate,d]),e&&(D||a.p.onHeaderClick.call(a,a.p.gridstate,d)))}),!1}),D&&(a.p.datatype="local",b(".ui-jqgrid-titlebar-close",c.cDiv).trigger("click")))}else b(c.cDiv).hide();b(c.hDiv).after(c.bDiv).mousemove(function(a){return c.resizing?(c.dragMove(a),!1):void 0}),b(".ui-jqgrid-labels",c.hDiv).bind("selectstart",function(){return!1}),b(document).mouseup(function(){return c.resizing?(c.dragEnd(),!1):!0}),a.formatCol=p,a.sortData=ia,a.updatepager=function(c,d){var e,f,g,h,i,j,k,l="",m=a.p.pager?"_"+b.jgrid.jqID(a.p.pager.substr(1)):"",n=a.p.toppager?"_"+a.p.toppager.substr(1):"";g=parseInt(a.p.page,10)-1,0>g&&(g=0),g*=parseInt(a.p.rowNum,10),i=g+a.p.reccount,a.p.scroll&&(e=b("tbody:first > tr:gt(0)",a.grid.bDiv),g=i-e.length,a.p.reccount=e.length,(f=e.outerHeight()||a.grid.prevRowHeight)&&(e=g*f,f=parseInt(a.p.records,10)*f,b(">div:first",a.grid.bDiv).css({height:f}).children("div:first").css({height:e,display:e?"":"none"})),a.grid.bDiv.scrollLeft=a.grid.hDiv.scrollLeft),l=a.p.pager?a.p.pager:"",(l+=a.p.toppager?l?","+a.p.toppager:a.p.toppager:"")&&(k=b.jgrid.formatter.integer||{},e=o(a.p.page),f=o(a.p.lastpage),b(".selbox",l)[this.p.useProp?"prop":"attr"]("disabled",!1),a.p.pginput===!0&&(b(".ui-pg-input",l).val(a.p.page),h=a.p.toppager?"#sp_1"+m+",#sp_1"+n:"#sp_1"+m,b(h).html(b.fmatter?b.fmatter.util.NumberFormat(a.p.lastpage,k):a.p.lastpage)),a.p.viewrecords&&(0===a.p.reccount?b(".ui-paging-info",l).html(a.p.emptyrecords):(h=g+1,j=a.p.records,b.fmatter&&(h=b.fmatter.util.NumberFormat(h,k),i=b.fmatter.util.NumberFormat(i,k),j=b.fmatter.util.NumberFormat(j,k)),b(".ui-paging-info",l).html(b.jgrid.format(a.p.recordtext,h,i,j)))),a.p.pgbuttons===!0&&(0>=e&&(e=f=0),1==e||0===e?(b("#first"+m+", #prev"+m).addClass("ui-state-disabled").removeClass("ui-state-hover"),a.p.toppager&&b("#first_t"+n+", #prev_t"+n).addClass("ui-state-disabled").removeClass("ui-state-hover")):(b("#first"+m+", #prev"+m).removeClass("ui-state-disabled"),a.p.toppager&&b("#first_t"+n+", #prev_t"+n).removeClass("ui-state-disabled")),e==f||0===e?(b("#next"+m+", #last"+m).addClass("ui-state-disabled").removeClass("ui-state-hover"),a.p.toppager&&b("#next_t"+n+", #last_t"+n).addClass("ui-state-disabled").removeClass("ui-state-hover")):(b("#next"+m+", #last"+m).removeClass("ui-state-disabled"),a.p.toppager&&b("#next_t"+n+", #last_t"+n).removeClass("ui-state-disabled")))),c===!0&&a.p.rownumbers===!0&&b("td.jqgrid-rownum",a.rows).each(function(a){b(this).html(g+1+a)}),d&&a.p.jqgdnd&&b(a).jqGrid("gridDnD","updateDnD"),b(a).triggerHandler("jqGridGridComplete"),b.isFunction(a.p.gridComplete)&&a.p.gridComplete.call(a),b(a).triggerHandler("jqGridAfterGridComplete")},a.refreshIndex=Q,a.setHeadCheckBox=ca,a.constructTr=N,a.formatter=function(a,b,c,d,e){return u(a,b,c,d,e)},b.extend(c,{populate:G,emptyRows:M}),this.grid=c,a.addXmlData=function(b){Z(b,a.grid.bDiv)},a.addJSONData=function(b){$(b,a.grid.bDiv)},this.grid.cols=this.rows[0].cells,G(),a.p.hiddengrid=!1}}}})},b.jgrid.extend({getGridParam:function(b){var e=this[0];return e&&e.grid?b?"undefined"!=typeof e.p[b]?e.p[b]:null:e.p:void 0},setGridParam:function(f){return this.each(function(){this.grid&&"object"==typeof f&&b.extend(!0,this.p,f)})},getDataIDs:function(){var c,f=[],e=0,d=0;return this.each(function(){if((c=this.rows.length)&&c>0)for(;c>e;)b(this.rows[e]).hasClass("jqgrow")&&(f[d]=this.rows[e].id,d++),e++}),f},setSelection:function(f,e,c){return this.each(function(){var d,a,g,h,i,j;void 0===f||(e=!1===e?!1:!0,!(a=this.rows.namedItem(f+""))||!a.className||-1<a.className.indexOf("ui-state-disabled"))||(!0===this.p.scrollrows&&(g=this.rows.namedItem(f).rowIndex,g>=0&&(d=b(this.grid.bDiv)[0].clientHeight,h=b(this.grid.bDiv)[0].scrollTop,i=b(this.rows[g]).position().top,g=this.rows[g].clientHeight,i+g>=d+h?b(this.grid.bDiv)[0].scrollTop=i-(d+h)+g+h:d+h>i&&h>i&&(b(this.grid.bDiv)[0].scrollTop=i))),!0===this.p.frozenColumns&&(j=this.p.id+"_frozen"),this.p.multiselect?(this.setHeadCheckBox(!1),this.p.selrow=a.id,h=b.inArray(this.p.selrow,this.p.selarrrow),-1===h?("ui-subgrid"!==a.className&&b(a).addClass("ui-state-highlight").attr("aria-selected","true"),d=!0,this.p.selarrrow.push(this.p.selrow)):("ui-subgrid"!==a.className&&b(a).removeClass("ui-state-highlight").attr("aria-selected","false"),d=!1,this.p.selarrrow.splice(h,1),i=this.p.selarrrow[0],this.p.selrow=void 0===i?null:i),b("#jqg_"+b.jgrid.jqID(this.p.id)+"_"+b.jgrid.jqID(a.id))[this.p.useProp?"prop":"attr"]("checked",d),j&&(-1===h?b("#"+b.jgrid.jqID(f),"#"+b.jgrid.jqID(j)).addClass("ui-state-highlight"):b("#"+b.jgrid.jqID(f),"#"+b.jgrid.jqID(j)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(this.p.id)+"_"+b.jgrid.jqID(f),"#"+b.jgrid.jqID(j))[this.p.useProp?"prop":"attr"]("checked",d)),b(this).triggerHandler("jqGridSelectRow",[a.id,d,c]),this.p.onSelectRow&&e&&this.p.onSelectRow.call(this,a.id,d,c)):"ui-subgrid"!==a.className&&(this.p.selrow!=a.id?(b(this.rows.namedItem(this.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),b(a).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),j&&(b("#"+b.jgrid.jqID(this.p.selrow),"#"+b.jgrid.jqID(j)).removeClass("ui-state-highlight"),b("#"+b.jgrid.jqID(f),"#"+b.jgrid.jqID(j)).addClass("ui-state-highlight")),d=!0):d=!1,this.p.selrow=a.id,b(this).triggerHandler("jqGridSelectRow",[a.id,d,c]),this.p.onSelectRow&&e&&this.p.onSelectRow.call(this,a.id,d,c)))})},resetSelection:function(f){return this.each(function(){var c,d,a,e=this;!0===e.p.frozenColumns&&(a=e.p.id+"_frozen"),"undefined"!=typeof f?(d=f===e.p.selrow?e.p.selrow:f,b("#"+b.jgrid.jqID(e.p.id)+" tbody:first tr#"+b.jgrid.jqID(d)).removeClass("ui-state-highlight").attr("aria-selected","false"),a&&b("#"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(a)).removeClass("ui-state-highlight"),e.p.multiselect&&(b("#jqg_"+b.jgrid.jqID(e.p.id)+"_"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(e.p.id))[e.p.useProp?"prop":"attr"]("checked",!1),a&&b("#jqg_"+b.jgrid.jqID(e.p.id)+"_"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(a))[e.p.useProp?"prop":"attr"]("checked",!1),e.setHeadCheckBox(!1)),d=null):e.p.multiselect?(b(e.p.selarrrow).each(function(d,f){c=e.rows.namedItem(f),b(c).removeClass("ui-state-highlight").attr("aria-selected","false"),b("#jqg_"+b.jgrid.jqID(e.p.id)+"_"+b.jgrid.jqID(f))[e.p.useProp?"prop":"attr"]("checked",!1),a&&(b("#"+b.jgrid.jqID(f),"#"+b.jgrid.jqID(a)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(e.p.id)+"_"+b.jgrid.jqID(f),"#"+b.jgrid.jqID(a))[e.p.useProp?"prop":"attr"]("checked",!1))}),e.setHeadCheckBox(!1),e.p.selarrrow=[]):e.p.selrow&&(b("#"+b.jgrid.jqID(e.p.id)+" tbody:first tr#"+b.jgrid.jqID(e.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),a&&b("#"+b.jgrid.jqID(e.p.selrow),"#"+b.jgrid.jqID(a)).removeClass("ui-state-highlight"),e.p.selrow=null),!0===e.p.cellEdit&&0<=parseInt(e.p.iCol,10)&&0<=parseInt(e.p.iRow,10)&&(b("td:eq("+e.p.iCol+")",e.rows[e.p.iRow]).removeClass("edit-cell ui-state-highlight"),b(e.rows[e.p.iRow]).removeClass("selected-row ui-state-hover")),e.p.savedRow=[]})},getRowData:function(f){var c,a,e={},d=!1,g=0;return this.each(function(){var i,j,h=this;if("undefined"==typeof f)d=!0,c=[],a=h.rows.length;else{if(j=h.rows.namedItem(f),!j)return e;a=2}for(;a>g;)d&&(j=h.rows[g]),b(j).hasClass("jqgrow")&&(b('td[role="gridcell"]',j).each(function(a){if(i=h.p.colModel[a].name,"cb"!==i&&"subgrid"!==i&&"rn"!==i)if(!0===h.p.treeGrid&&i==h.p.ExpandColumn)e[i]=b.jgrid.htmlDecode(b("span:first",this).html());else try{e[i]=b.unformat.call(h,this,{rowId:j.id,colModel:h.p.colModel[a]},a)}catch(c){e[i]=b.jgrid.htmlDecode(b(this).html())}}),d&&(c.push(e),e={})),g++}),c?c:e},delRowData:function(f){var c,d,e=!1;return this.each(function(){if(!(c=this.rows.namedItem(f)))return!1;if(b(c).remove(),this.p.records--,this.p.reccount--,this.updatepager(!0,!1),e=!0,this.p.multiselect&&(d=b.inArray(f,this.p.selarrrow),-1!=d&&this.p.selarrrow.splice(d,1)),f==this.p.selrow&&(this.p.selrow=null),"local"==this.p.datatype){var a=this.p._index[b.jgrid.stripPref(this.p.idPrefix,f)];"undefined"!=typeof a&&(this.p.data.splice(a,1),this.refreshIndex())}if(!0===this.p.altRows&&e){var g=this.p.altclass;b(this.rows).each(function(a){1==a%2?b(this).addClass(g):b(this).removeClass(g)})}}),e},setRowData:function(f,e,c){var d,g,a=!0;return this.each(function(){if(!this.grid)return!1;var i,j,h=this,l=typeof c,k={};if(j=h.rows.namedItem(f),!j)return!1;if(e)try{if(b(this.p.colModel).each(function(a){d=this.name,void 0!==e[d]&&(k[d]=this.formatter&&"string"==typeof this.formatter&&"date"==this.formatter?b.unformat.date.call(h,e[d],this):e[d],i=h.formatter(f,e[d],a,e,"edit"),g=this.title?{title:b.jgrid.stripHtml(i)}:{},!0===h.p.treeGrid&&d==h.p.ExpandColumn?b("td:eq("+a+") > span:first",j).html(i).attr(g):b("td:eq("+a+")",j).html(i).attr(g))}),"local"==h.p.datatype){var m=b.jgrid.stripPref(h.p.idPrefix,f),o=h.p._index[m];if(h.p.treeGrid)for(var p in h.p.treeReader)k.hasOwnProperty(h.p.treeReader[p])&&delete k[h.p.treeReader[p]];"undefined"!=typeof o&&(h.p.data[o]=b.extend(!0,h.p.data[o],k)),k=null}}catch(v){a=!1}a&&("string"===l?b(j).addClass(c):"object"===l&&b(j).css(c),b(h).triggerHandler("jqGridAfterGridComplete"))}),a},addRowData:function(f,e,c,d){c||(c="last");var g,h,i,j,l,k,m,o,v,u,L,E,Y,T,a=!1,p="";return e&&(b.isArray(e)?(v=!0,c="last",u=f):(e=[e],v=!1),this.each(function(){var U=e.length;l=this.p.rownumbers===!0?1:0,i=this.p.multiselect===!0?1:0,j=this.p.subGrid===!0?1:0,v||("undefined"!=typeof f?f+="":(f=b.jgrid.randId(),this.p.keyIndex!==!1&&(u=this.p.colModel[this.p.keyIndex+i+j+l].name,"undefined"!=typeof e[0][u]&&(f=e[0][u])))),L=this.p.altclass;for(var M=0,Q="",N={},Z=b.isFunction(this.p.afterInsertRow)?!0:!1;U>M;){if(E=e[M],h=[],v){try{f=E[u]}catch($){f=b.jgrid.randId()}Q=this.p.altRows===!0&&(this.rows.length-1)%2===0?L:""}for(T=f,f=this.p.idPrefix+f,l&&(p=this.formatCol(0,1,"",null,f,!0),h[h.length]='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+p+">0</td>"),i&&(o='<input role="checkbox" type="checkbox" id="jqg_'+this.p.id+"_"+f+'" class="cbox"/>',p=this.formatCol(l,1,"",null,f,!0),h[h.length]='<td role="gridcell" '+p+">"+o+"</td>"),j&&(h[h.length]=b(this).jqGrid("addSubGridCell",i+l,1)),m=i+j+l;m<this.p.colModel.length;m++)Y=this.p.colModel[m],g=Y.name,N[g]=E[g],o=this.formatter(f,b.jgrid.getAccessor(E,g),m,E),p=this.formatCol(m,1,o,E,f,!0),h[h.length]='<td role="gridcell" '+p+">"+o+"</td>";if(h.unshift(this.constructTr(f,!1,Q,N,E,!1)),h[h.length]="</tr>",0===this.rows.length)b("table:first",this.grid.bDiv).append(h.join(""));else switch(c){case"last":b(this.rows[this.rows.length-1]).after(h.join("")),k=this.rows.length-1;break;case"first":b(this.rows[0]).after(h.join("")),k=1;break;case"after":(k=this.rows.namedItem(d))&&(b(this.rows[k.rowIndex+1]).hasClass("ui-subgrid")?b(this.rows[k.rowIndex+1]).after(h):b(k).after(h.join(""))),k++;break;case"before":(k=this.rows.namedItem(d))&&(b(k).before(h.join("")),k=k.rowIndex),k--}this.p.subGrid===!0&&b(this).jqGrid("addSubGrid",i+l,k),this.p.records++,this.p.reccount++,b(this).triggerHandler("jqGridAfterInsertRow",[f,E,E]),Z&&this.p.afterInsertRow.call(this,f,E,E),M++,"local"==this.p.datatype&&(N[this.p.localReader.id]=T,this.p._index[T]=this.p.data.length,this.p.data.push(N),N={})}this.p.altRows===!0&&!v&&("last"==c?(this.rows.length-1)%2==1&&b(this.rows[this.rows.length-1]).addClass(L):b(this.rows).each(function(a){a%2==1?b(this).addClass(L):b(this).removeClass(L)})),this.updatepager(!0,!0),a=!0})),a},footerData:function(f,e,c){function d(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var a,i,g=!1,h={};return"undefined"==typeof f&&(f="get"),"boolean"!=typeof c&&(c=!0),f=f.toLowerCase(),this.each(function(){var l,j=this;return!j.grid||!j.p.footerrow||"set"==f&&d(e)?!1:(g=!0,void b(this.p.colModel).each(function(d){a=this.name,"set"==f?void 0!==e[a]&&(l=c?j.formatter("",e[a],d,e,"edit"):e[a],i=this.title?{title:b.jgrid.stripHtml(l)}:{},b("tr.footrow td:eq("+d+")",j.grid.sDiv).html(l).attr(i),g=!0):"get"==f&&(h[a]=b("tr.footrow td:eq("+d+")",j.grid.sDiv).html())}))}),"get"==f?h:g},showHideCol:function(f,e){return this.each(function(){var g,c=this,d=!1,a=b.jgrid.cellWidth()?0:c.p.cellLayout;if(c.grid){"string"==typeof f&&(f=[f]),e="none"!=e?"":"none";var h=""===e?!0:!1,i=c.p.groupHeader&&("object"==typeof c.p.groupHeader||b.isFunction(c.p.groupHeader));i&&b(c).jqGrid("destroyGroupHeader",!1),b(this.p.colModel).each(function(i){if(-1!==b.inArray(this.name,f)&&this.hidden===h){if(!0===c.p.frozenColumns&&!0===this.frozen)return!0;b("tr",c.grid.hDiv).each(function(){b(this.cells[i]).css("display",e)}),b(c.rows).each(function(){b(this).hasClass("jqgroup")||b(this.cells[i]).css("display",e)}),c.p.footerrow&&b("tr.footrow td:eq("+i+")",c.grid.sDiv).css("display",e),g=parseInt(this.width,10),c.p.tblwidth="none"===e?c.p.tblwidth-(g+a):c.p.tblwidth+(g+a),this.hidden=!h,d=!0,b(c).triggerHandler("jqGridShowHideCol",[h,this.name,i])}}),!0===d&&(!0===c.p.shrinkToFit&&!isNaN(c.p.height)&&(c.p.tblwidth+=parseInt(c.p.scrollOffset,10)),b(c).jqGrid("setGridWidth",!0===c.p.shrinkToFit?c.p.tblwidth:c.p.width)),i&&b(c).jqGrid("setGroupHeaders",c.p.groupHeader)}})},hideCol:function(f){return this.each(function(){b(this).jqGrid("showHideCol",f,"none")})},showCol:function(f){return this.each(function(){b(this).jqGrid("showHideCol",f,"")})},remapColumns:function(f,e,c){function d(a){var c;c=a.length?b.makeArray(a):b.extend({},a),b.each(f,function(b){a[b]=c[this]})}function a(a,c){b(">tr"+(c||""),a).each(function(){var a=this,c=b.makeArray(a.cells);b.each(f,function(){var b=c[this];b&&a.appendChild(b)})})}var g=this.get(0);d(g.p.colModel),d(g.p.colNames),d(g.grid.headers),a(b("thead:first",g.grid.hDiv),c&&":not(.ui-jqgrid-labels)"),e&&a(b("#"+b.jgrid.jqID(g.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot"),g.p.footerrow&&a(b("tbody:first",g.grid.sDiv)),g.p.remapColumns&&(g.p.remapColumns.length?d(g.p.remapColumns):g.p.remapColumns=b.makeArray(f)),g.p.lastsort=b.inArray(g.p.lastsort,f),g.p.treeGrid&&(g.p.expColInd=b.inArray(g.p.expColInd,f)),b(g).triggerHandler("jqGridRemapColumns",[f,e,c])},setGridWidth:function(f,e){return this.each(function(){if(this.grid){var d,h,k,p,c=this,a=0,g=b.jgrid.cellWidth()?0:c.p.cellLayout,i=0,j=!1,l=c.p.scrollOffset,m=0,o=0;if("boolean"!=typeof e&&(e=c.p.shrinkToFit),!isNaN(f)){if(f=parseInt(f,10),c.grid.width=c.p.width=f,b("#gbox_"+b.jgrid.jqID(c.p.id)).css("width",f+"px"),b("#gview_"+b.jgrid.jqID(c.p.id)).css("width",f+"px"),b(c.grid.bDiv).css("width",f+"px"),b(c.grid.hDiv).css("width",f+"px"),c.p.pager&&b(c.p.pager).css("width",f+"px"),c.p.toppager&&b(c.p.toppager).css("width",f+"px"),!0===c.p.toolbar[0]&&(b(c.grid.uDiv).css("width",f+"px"),"both"==c.p.toolbar[1]&&b(c.grid.ubDiv).css("width",f+"px")),c.p.footerrow&&b(c.grid.sDiv).css("width",f+"px"),!1===e&&!0===c.p.forceFit&&(c.p.forceFit=!1),!0===e){if(b.each(c.p.colModel,function(){this.hidden===!1&&(d=this.widthOrg,a+=d+g,this.fixed?m+=d+g:i++,o++)}),0===i)return;c.p.tblwidth=a,k=f-g*i-m,!isNaN(c.p.height)&&(b(c.grid.bDiv)[0].clientHeight<b(c.grid.bDiv)[0].scrollHeight||1===c.rows.length)&&(j=!0,k-=l);var a=0,v=0<c.grid.cols.length;if(b.each(c.p.colModel,function(b){this.hidden!==!1||this.fixed||(d=this.widthOrg,d=Math.round(k*d/(c.p.tblwidth-g*i-m)),0>d||(this.width=d,a+=d,c.grid.headers[b].width=d,c.grid.headers[b].el.style.width=d+"px",c.p.footerrow&&(c.grid.footers[b].style.width=d+"px"),v&&(c.grid.cols[b].style.width=d+"px"),h=b))}),!h)return;p=0,j?f-m-(a+g*i)!==l&&(p=f-m-(a+g*i)-l):1!==Math.abs(f-m-(a+g*i))&&(p=f-m-(a+g*i)),c.p.colModel[h].width+=p,c.p.tblwidth=a+p+g*i+m,c.p.tblwidth>f?(j=c.p.tblwidth-parseInt(f,10),c.p.tblwidth=f,d=c.p.colModel[h].width-=j):d=c.p.colModel[h].width,c.grid.headers[h].width=d,c.grid.headers[h].el.style.width=d+"px",v&&(c.grid.cols[h].style.width=d+"px"),c.p.footerrow&&(c.grid.footers[h].style.width=d+"px")}c.p.tblwidth&&(b("table:first",c.grid.bDiv).css("width",c.p.tblwidth+"px"),b("table:first",c.grid.hDiv).css("width",c.p.tblwidth+"px"),c.grid.hDiv.scrollLeft=c.grid.bDiv.scrollLeft,c.p.footerrow&&b("table:first",c.grid.sDiv).css("width",c.p.tblwidth+"px"))}}})},setGridHeight:function(f){return this.each(function(){if(this.grid){var e=b(this.grid.bDiv);e.css({height:f+(isNaN(f)?"":"px")}),!0===this.p.frozenColumns&&b("#"+b.jgrid.jqID(this.p.id)+"_frozen").parent().height(e.height()-16),this.p.height=f,this.p.scroll&&this.grid.populateVisible()}})},setCaption:function(f){return this.each(function(){this.p.caption=f,b("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(f),b(this.grid.cDiv).show()})},setLabel:function(f,e,c,d){return this.each(function(){var a=-1;if(this.grid&&"undefined"!=typeof f&&(b(this.p.colModel).each(function(b){return this.name==f?(a=b,!1):void 0}),a>=0)){var g=b("tr.ui-jqgrid-labels th:eq("+a+")",this.grid.hDiv);if(e){var h=b(".s-ico",g);b("[id^=jqgh_]",g).empty().html(e).append(h),this.p.colNames[a]=e}c&&("string"==typeof c?b(g).addClass(c):b(g).css(c)),"object"==typeof d&&b(g).attr(d)}})},setCell:function(f,e,c,d,a,g){return this.each(function(){var i,j,h=-1;if(this.grid&&(isNaN(e)?b(this.p.colModel).each(function(a){return this.name==e?(h=a,!1):void 0}):h=parseInt(e,10),h>=0&&(i=this.rows.namedItem(f)))){var l=b("td:eq("+h+")",i);(""!==c||!0===g)&&(i=this.formatter(f,c,h,i,"edit"),j=this.p.colModel[h].title?{title:b.jgrid.stripHtml(i)}:{},this.p.treeGrid&&0<b(".tree-wrap",b(l)).length?b("span",b(l)).html(i).attr(j):b(l).html(i).attr(j),"local"==this.p.datatype&&(i=this.p.colModel[h],c=i.formatter&&"string"==typeof i.formatter&&"date"==i.formatter?b.unformat.date.call(this,c,i):c,j=this.p._index[f],"undefined"!=typeof j&&(this.p.data[j][i.name]=c))),"string"==typeof d?b(l).addClass(d):d&&b(l).css(d),"object"==typeof a&&b(l).attr(a)}})},getCell:function(f,e){var c=!1;return this.each(function(){var d=-1;if(this.grid&&(isNaN(e)?b(this.p.colModel).each(function(a){return this.name===e?(d=a,!1):void 0}):d=parseInt(e,10),d>=0)){var a=this.rows.namedItem(f);if(a)try{c=b.unformat.call(this,b("td:eq("+d+")",a),{rowId:a.id,colModel:this.p.colModel[d]},d)}catch(g){c=b.jgrid.htmlDecode(b("td:eq("+d+")",a).html())}}}),c},getCol:function(f,e,c){var a,h,i,j,d=[],g=0,e="boolean"!=typeof e?!1:e;return"undefined"==typeof c&&(c=!1),this.each(function(){var l=-1;if(this.grid&&(isNaN(f)?b(this.p.colModel).each(function(a){return this.name===f?(l=a,!1):void 0}):l=parseInt(f,10),l>=0)){var k=this.rows.length,m=0;if(k&&k>0){for(;k>m;){if(b(this.rows[m]).hasClass("jqgrow")){try{a=b.unformat.call(this,b(this.rows[m].cells[l]),{rowId:this.rows[m].id,colModel:this.p.colModel[l]},l)}catch(o){a=b.jgrid.htmlDecode(this.rows[m].cells[l].innerHTML)}c?(j=parseFloat(a),g+=j,void 0===i&&(i=h=j),h=Math.min(h,j),i=Math.max(i,j)):d.push(e?{id:this.rows[m].id,value:a}:a)}m++}if(c)switch(c.toLowerCase()){case"sum":d=g;break;case"avg":d=g/k;break;case"count":d=k;break;case"min":d=h;break;case"max":d=i}}}}),d},clearGridData:function(f){return this.each(function(){if(this.grid){if("boolean"!=typeof f&&(f=!1),this.p.deepempty)b("#"+b.jgrid.jqID(this.p.id)+" tbody:first tr:gt(0)").remove();else{var e=b("#"+b.jgrid.jqID(this.p.id)+" tbody:first tr:first")[0];b("#"+b.jgrid.jqID(this.p.id)+" tbody:first").empty().append(e)}this.p.footerrow&&f&&b(".ui-jqgrid-ftable td",this.grid.sDiv).html("&#160;"),this.p.selrow=null,this.p.selarrrow=[],this.p.savedRow=[],this.p.records=0,this.p.page=1,this.p.lastpage=0,this.p.reccount=0,this.p.data=[],this.p._index={},this.updatepager(!0,!1)}})},getInd:function(b,e){var d,c=!1;return this.each(function(){(d=this.rows.namedItem(b))&&(c=!0===e?d:d.rowIndex)}),c},bindKeys:function(f){var e=b.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},f||{});return this.each(function(){var c=this;b("body").is("[role]")||b("body").attr("role","application"),c.p.scrollrows=e.scrollingRows,b(c).keydown(function(d){var f,h,i,a=b(c).find("tr[tabindex=0]")[0],j=c.p.treeReader.expanded_field;if(a)if(i=c.p._index[a.id],37===d.keyCode||38===d.keyCode||39===d.keyCode||40===d.keyCode){if(38===d.keyCode){if(h=a.previousSibling,f="",h)if(b(h).is(":hidden")){for(;h;)if(h=h.previousSibling,!b(h).is(":hidden")&&b(h).hasClass("jqgrow")){f=h.id;break}}else f=h.id;b(c).jqGrid("setSelection",f,!0,d),d.preventDefault()}if(40===d.keyCode){if(h=a.nextSibling,f="",h)if(b(h).is(":hidden")){for(;h;)if(h=h.nextSibling,!b(h).is(":hidden")&&b(h).hasClass("jqgrow")){f=h.id;break}}else f=h.id;b(c).jqGrid("setSelection",f,!0,d),d.preventDefault()}37===d.keyCode&&(c.p.treeGrid&&c.p.data[i][j]&&b(a).find("div.treeclick").trigger("click"),b(c).triggerHandler("jqGridKeyLeft",[c.p.selrow]),b.isFunction(e.onLeftKey)&&e.onLeftKey.call(c,c.p.selrow)),39===d.keyCode&&(c.p.treeGrid&&!c.p.data[i][j]&&b(a).find("div.treeclick").trigger("click"),b(c).triggerHandler("jqGridKeyRight",[c.p.selrow]),b.isFunction(e.onRightKey)&&e.onRightKey.call(c,c.p.selrow))}else 13===d.keyCode?(b(c).triggerHandler("jqGridKeyEnter",[c.p.selrow]),b.isFunction(e.onEnter)&&e.onEnter.call(c,c.p.selrow)):32===d.keyCode&&(b(c).triggerHandler("jqGridKeySpace",[c.p.selrow]),b.isFunction(e.onSpace)&&e.onSpace.call(c,c.p.selrow))})})},unbindKeys:function(){return this.each(function(){b(this).unbind("keydown")})},getLocalRow:function(b){var c,e=!1;return this.each(function(){"undefined"!=typeof b&&(c=this.p._index[b],c>=0&&(e=this.p.data[c]))}),e}})}(jQuery),function(c){c.fmatter={},c.extend(c.fmatter,{isBoolean:function(a){return"boolean"==typeof a},isObject:function(a){return a&&("object"==typeof a||c.isFunction(a))||!1},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a&&isFinite(a)},isNull:function(a){return null===a},isUndefined:function(a){return"undefined"==typeof a},isValue:function(a){return this.isObject(a)||this.isString(a)||this.isNumber(a)||this.isBoolean(a)},isEmpty:function(a){return!this.isString(a)&&this.isValue(a)?!1:this.isValue(a)?(a=c.trim(a).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,""),""===a):!0}}),c.fn.fmatter=function(a,b,f,d,e){var g=b,f=c.extend({},c.jgrid.formatter,f);try{g=c.fn.fmatter[a].call(this,b,f,d,e)}catch(h){}return g},c.fmatter.util={NumberFormat:function(a,b){if(c.fmatter.isNumber(a)||(a*=1),c.fmatter.isNumber(a)){var g,f=0>a,d=a+"",e=b.decimalSeparator?b.decimalSeparator:".";if(c.fmatter.isNumber(b.decimalPlaces)){var h=b.decimalPlaces,d=Math.pow(10,h),d=Math.round(a*d)/d+"";if(g=d.lastIndexOf("."),h>0)for(0>g?(d+=e,g=d.length-1):"."!==e&&(d=d.replace(".",e));d.length-1-g<h;)d+="0"}if(b.thousandsSeparator){h=b.thousandsSeparator,g=d.lastIndexOf(e),g=g>-1?g:d.length;for(var e=d.substring(g),i=-1,j=g;j>0;j--)i++,0===i%3&&j!==g&&(!f||j>1)&&(e=h+e),e=d.charAt(j-1)+e;d=e}return d=b.prefix?b.prefix+d:d,d=b.suffix?d+b.suffix:d}return a},DateFormat:function(a,b,f,d){var j,e=/^\/Date\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\)\/$/,g="string"==typeof b?b.match(e):null,e=function(a,b){for(a=""+a,b=parseInt(b,10)||2;a.length<b;)a="0"+a;return a},h={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},i=0,k=["i18n"];if(k.i18n={dayNames:d.dayNames,monthNames:d.monthNames},a in d.masks&&(a=d.masks[a]),isNaN(b-0)||"u"!=(""+a).toLowerCase())if(b.constructor===Date)i=b;else if(null!==g)i=new Date(parseInt(g[1],10)),g[3]&&(a=60*Number(g[5])+Number(g[6]),a*="-"==g[4]?1:-1,a-=i.getTimezoneOffset(),i.setTime(Number(Number(i)+6e4*a)));else{for(b=(""+b).split(/[\\\/:_;.,\t\T\s-]/),a=a.split(/[\\\/:_;.,\t\T\s-]/),g=0,j=a.length;j>g;g++)"M"==a[g]&&(i=c.inArray(b[g],k.i18n.monthNames),-1!==i&&12>i&&(b[g]=i+1)),"F"==a[g]&&(i=c.inArray(b[g],k.i18n.monthNames),-1!==i&&i>11&&(b[g]=i+1-12)),b[g]&&(h[a[g].toLowerCase()]=parseInt(b[g],10));
if(h.f&&(h.m=h.f),0===h.m&&0===h.y&&0===h.d)return"&#160;";h.m=parseInt(h.m,10)-1,i=h.y,i>=70&&99>=i?h.y=1900+h.y:i>=0&&69>=i&&(h.y=2e3+h.y),i=new Date(h.y,h.m,h.d,h.h,h.i,h.s,h.u)}else i=new Date(1e3*parseFloat(b));f in d.masks?f=d.masks[f]:f||(f="Y-m-d"),a=i.getHours(),b=i.getMinutes(),h=i.getDate(),g=i.getMonth()+1,j=i.getTimezoneOffset();var l=i.getSeconds(),r=i.getMilliseconds(),n=i.getDay(),m=i.getFullYear(),o=(n+6)%7+1,p=(new Date(m,g-1,h)-new Date(m,0,1))/864e5,q={d:e(h),D:k.i18n.dayNames[n],j:h,l:k.i18n.dayNames[n+7],N:o,S:d.S(h),w:n,z:p,W:5>o?Math.floor((p+o-1)/7)+1:Math.floor((p+o-1)/7)||(4>(new Date(m-1,0,1).getDay()+6)%7?53:52),F:k.i18n.monthNames[g-1+12],m:e(g),M:k.i18n.monthNames[g-1],n:g,t:"?",L:"?",o:"?",Y:m,y:(""+m).substring(2),a:12>a?d.AmPm[0]:d.AmPm[1],A:12>a?d.AmPm[2]:d.AmPm[3],B:"?",g:a%12||12,G:a,h:e(a%12||12),H:e(a),i:e(b),s:e(l),u:r,e:"?",I:"?",O:(j>0?"-":"+")+e(100*Math.floor(Math.abs(j)/60)+Math.abs(j)%60,4),P:"?",T:((""+i).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(i/1e3)};return f.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(a){return a in q?q[a]:a.substring(1)})}},c.fn.fmatter.defaultFormat=function(a,b){return c.fmatter.isValue(a)&&""!==a?a:b.defaultValue?b.defaultValue:"&#160;"},c.fn.fmatter.email=function(a,b){return c.fmatter.isEmpty(a)?c.fn.fmatter.defaultFormat(a,b):'<a href="mailto:'+a+'">'+a+"</a>"},c.fn.fmatter.checkbox=function(a,b){var d,f=c.extend({},b.checkbox);return void 0!==b.colModel&&!c.fmatter.isUndefined(b.colModel.formatoptions)&&(f=c.extend({},f,b.colModel.formatoptions)),d=!0===f.disabled?'disabled="disabled"':"",(c.fmatter.isEmpty(a)||c.fmatter.isUndefined(a))&&(a=c.fn.fmatter.defaultFormat(a,f)),a=(a+"").toLowerCase(),'<input type="checkbox" '+(0>a.search(/(false|0|no|off)/i)?" checked='checked' ":"")+' value="'+a+'" offval="no" '+d+"/>"},c.fn.fmatter.link=function(a,b){var f={target:b.target},d="";return void 0!==b.colModel&&!c.fmatter.isUndefined(b.colModel.formatoptions)&&(f=c.extend({},f,b.colModel.formatoptions)),f.target&&(d="target="+f.target),c.fmatter.isEmpty(a)?c.fn.fmatter.defaultFormat(a,b):"<a "+d+' href="'+a+'">'+a+"</a>"},c.fn.fmatter.showlink=function(a,b){var f={baseLinkUrl:b.baseLinkUrl,showAction:b.showAction,addParam:b.addParam||"",target:b.target,idName:b.idName},d="";return void 0!==b.colModel&&!c.fmatter.isUndefined(b.colModel.formatoptions)&&(f=c.extend({},f,b.colModel.formatoptions)),f.target&&(d="target="+f.target),f=f.baseLinkUrl+f.showAction+"?"+f.idName+"="+b.rowId+f.addParam,c.fmatter.isString(a)||c.fmatter.isNumber(a)?"<a "+d+' href="'+f+'">'+a+"</a>":c.fn.fmatter.defaultFormat(a,b)},c.fn.fmatter.integer=function(a,b){var f=c.extend({},b.integer);return void 0!==b.colModel&&!c.fmatter.isUndefined(b.colModel.formatoptions)&&(f=c.extend({},f,b.colModel.formatoptions)),c.fmatter.isEmpty(a)?f.defaultValue:c.fmatter.util.NumberFormat(a,f)},c.fn.fmatter.number=function(a,b){var f=c.extend({},b.number);return void 0!==b.colModel&&!c.fmatter.isUndefined(b.colModel.formatoptions)&&(f=c.extend({},f,b.colModel.formatoptions)),c.fmatter.isEmpty(a)?f.defaultValue:c.fmatter.util.NumberFormat(a,f)},c.fn.fmatter.currency=function(a,b){var f=c.extend({},b.currency);return void 0!==b.colModel&&!c.fmatter.isUndefined(b.colModel.formatoptions)&&(f=c.extend({},f,b.colModel.formatoptions)),c.fmatter.isEmpty(a)?f.defaultValue:c.fmatter.util.NumberFormat(a,f)},c.fn.fmatter.date=function(a,b,f,d){return f=c.extend({},b.date),void 0!==b.colModel&&!c.fmatter.isUndefined(b.colModel.formatoptions)&&(f=c.extend({},f,b.colModel.formatoptions)),!f.reformatAfterEdit&&"edit"==d||c.fmatter.isEmpty(a)?c.fn.fmatter.defaultFormat(a,b):c.fmatter.util.DateFormat(f.srcformat,a,f.newformat,f)},c.fn.fmatter.select=function(a,b){var e,g,a=a+"",f=!1,d=[];if(c.fmatter.isUndefined(b.colModel.formatoptions)?c.fmatter.isUndefined(b.colModel.editoptions)||(f=b.colModel.editoptions.value,e=void 0===b.colModel.editoptions.separator?":":b.colModel.editoptions.separator,g=void 0===b.colModel.editoptions.delimiter?";":b.colModel.editoptions.delimiter):(f=b.colModel.formatoptions.value,e=void 0===b.colModel.formatoptions.separator?":":b.colModel.formatoptions.separator,g=void 0===b.colModel.formatoptions.delimiter?";":b.colModel.formatoptions.delimiter),f){var h=!0===b.colModel.editoptions.multiple?!0:!1,i=[];if(h&&(i=a.split(","),i=c.map(i,function(a){return c.trim(a)})),c.fmatter.isString(f)){for(var j=f.split(g),k=0,l=0;l<j.length;l++)if(g=j[l].split(e),2<g.length&&(g[1]=c.map(g,function(a,b){return b>0?a:void 0}).join(e)),h)-1<c.inArray(g[0],i)&&(d[k]=g[1],k++);else if(c.trim(g[0])==c.trim(a)){d[0]=g[1];break}}else c.fmatter.isObject(f)&&(h?d=c.map(i,function(a){return f[a]}):d[0]=f[a]||"")}return a=d.join(", "),""===a?c.fn.fmatter.defaultFormat(a,b):a},c.fn.fmatter.rowactions=function(a,b,f,d){var e={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null,restoreAfterError:!0,mtype:"POST",delOptions:{},editOptions:{}},a=c.jgrid.jqID(a),b=c.jgrid.jqID(b),d=c("#"+b)[0].p.colModel[d];c.fmatter.isUndefined(d.formatoptions)||(e=c.extend(e,d.formatoptions)),c.fmatter.isUndefined(c("#"+b)[0].p.editOptions)||(e.editOptions=c("#"+b)[0].p.editOptions),c.fmatter.isUndefined(c("#"+b)[0].p.delOptions)||(e.delOptions=c("#"+b)[0].p.delOptions);var g=c("#"+b)[0],d=function(d){c.isFunction(e.afterRestore)&&e.afterRestore.call(g,d),c("tr#"+a+" div.ui-inline-edit, tr#"+a+" div.ui-inline-del","#"+b+".ui-jqgrid-btable:first").show(),c("tr#"+a+" div.ui-inline-save, tr#"+a+" div.ui-inline-cancel","#"+b+".ui-jqgrid-btable:first").hide()};if(c("#"+a,"#"+b).hasClass("jqgrid-new-row")){var h=g.p.prmNames;e.extraparam[h.oper]=h.addoper}switch(h={keys:e.keys,oneditfunc:e.onEdit,successfunc:e.onSuccess,url:e.url,extraparam:e.extraparam,aftersavefunc:function(d,f){c.isFunction(e.afterSave)&&e.afterSave.call(g,d,f),c("tr#"+a+" div.ui-inline-edit, tr#"+a+" div.ui-inline-del","#"+b+".ui-jqgrid-btable:first").show(),c("tr#"+a+" div.ui-inline-save, tr#"+a+" div.ui-inline-cancel","#"+b+".ui-jqgrid-btable:first").hide()},errorfunc:e.onError,afterrestorefunc:d,restoreAfterError:e.restoreAfterError,mtype:e.mtype},f){case"edit":c("#"+b).jqGrid("editRow",a,h),c("tr#"+a+" div.ui-inline-edit, tr#"+a+" div.ui-inline-del","#"+b+".ui-jqgrid-btable:first").hide(),c("tr#"+a+" div.ui-inline-save, tr#"+a+" div.ui-inline-cancel","#"+b+".ui-jqgrid-btable:first").show(),c(g).triggerHandler("jqGridAfterGridComplete");break;case"save":c("#"+b).jqGrid("saveRow",a,h)&&(c("tr#"+a+" div.ui-inline-edit, tr#"+a+" div.ui-inline-del","#"+b+".ui-jqgrid-btable:first").show(),c("tr#"+a+" div.ui-inline-save, tr#"+a+" div.ui-inline-cancel","#"+b+".ui-jqgrid-btable:first").hide(),c(g).triggerHandler("jqGridAfterGridComplete"));break;case"cancel":c("#"+b).jqGrid("restoreRow",a,d),c("tr#"+a+" div.ui-inline-edit, tr#"+a+" div.ui-inline-del","#"+b+".ui-jqgrid-btable:first").show(),c("tr#"+a+" div.ui-inline-save, tr#"+a+" div.ui-inline-cancel","#"+b+".ui-jqgrid-btable:first").hide(),c(g).triggerHandler("jqGridAfterGridComplete");break;case"del":c("#"+b).jqGrid("delGridRow",a,e.delOptions);break;case"formedit":c("#"+b).jqGrid("setSelection",a),c("#"+b).jqGrid("editGridRow",a,e.editOptions)}},c.fn.fmatter.actions=function(a,b){var f={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1};c.fmatter.isUndefined(b.colModel.formatoptions)||(f=c.extend(f,b.colModel.formatoptions));var g,d=b.rowId,e="";return"undefined"==typeof d||c.fmatter.isEmpty(d)?"":(f.editformbutton?(g="onclick=jQuery.fn.fmatter.rowactions('"+d+"','"+b.gid+"','formedit',"+b.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",e=e+"<div title='"+c.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+g+"><span class='ui-icon ui-icon-pencil'></span></div>"):f.editbutton&&(g="onclick=jQuery.fn.fmatter.rowactions('"+d+"','"+b.gid+"','edit',"+b.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ",e=e+"<div title='"+c.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+g+"><span class='ui-icon ui-icon-pencil'></span></div>"),f.delbutton&&(g="onclick=jQuery.fn.fmatter.rowactions('"+d+"','"+b.gid+"','del',"+b.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",e=e+"<div title='"+c.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+g+"><span class='ui-icon ui-icon-trash'></span></div>"),g="onclick=jQuery.fn.fmatter.rowactions('"+d+"','"+b.gid+"','save',"+b.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",e=e+"<div title='"+c.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+g+"><span class='ui-icon ui-icon-disk'></span></div>",g="onclick=jQuery.fn.fmatter.rowactions('"+d+"','"+b.gid+"','cancel',"+b.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",e=e+"<div title='"+c.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+g+"><span class='ui-icon ui-icon-cancel'></span></div>","<div style='margin-left:8px;'>"+e+"</div>")},c.unformat=function(a,b,f,d){var e,g=b.colModel.formatter,h=b.colModel.formatoptions||{},i=/([\.\*\_\'\(\)\{\}\+\?\\])/g,j=b.colModel.unformat||c.fn.fmatter[g]&&c.fn.fmatter[g].unformat;if("undefined"!=typeof j&&c.isFunction(j))e=j.call(this,c(a).text(),b,a);else if(!c.fmatter.isUndefined(g)&&c.fmatter.isString(g))switch(e=c.jgrid.formatter||{},g){case"integer":h=c.extend({},e.integer,h),b=h.thousandsSeparator.replace(i,"\\$1"),b=RegExp(b,"g"),e=c(a).text().replace(b,"");break;case"number":h=c.extend({},e.number,h),b=h.thousandsSeparator.replace(i,"\\$1"),b=RegExp(b,"g"),e=c(a).text().replace(b,"").replace(h.decimalSeparator,".");break;case"currency":h=c.extend({},e.currency,h),b=h.thousandsSeparator.replace(i,"\\$1"),b=RegExp(b,"g"),e=c(a).text(),h.prefix&&h.prefix.length&&(e=e.substr(h.prefix.length)),h.suffix&&h.suffix.length&&(e=e.substr(0,e.length-h.suffix.length)),e=e.replace(b,"").replace(h.decimalSeparator,".");break;case"checkbox":h=b.colModel.editoptions?b.colModel.editoptions.value.split(":"):["Yes","No"],e=c("input",a).is(":checked")?h[0]:h[1];break;case"select":e=c.unformat.select(a,b,f,d);break;case"actions":return"";default:e=c(a).text()}return void 0!==e?e:!0===d?c(a).text():c.jgrid.htmlDecode(c(a).html())},c.unformat.select=function(a,b,f,d){if(f=[],a=c(a).text(),!0===d)return a;var d=c.extend({},c.fmatter.isUndefined(b.colModel.formatoptions)?b.colModel.editoptions:b.colModel.formatoptions),b=void 0===d.separator?":":d.separator,e=void 0===d.delimiter?";":d.delimiter;if(d.value){var g=d.value,d=!0===d.multiple?!0:!1,h=[];if(d&&(h=a.split(","),h=c.map(h,function(a){return c.trim(a)})),c.fmatter.isString(g)){for(var i=g.split(e),j=0,k=0;k<i.length;k++)if(e=i[k].split(b),2<e.length&&(e[1]=c.map(e,function(a,b){return b>0?a:void 0}).join(b)),d)-1<c.inArray(e[1],h)&&(f[j]=e[0],j++);else if(c.trim(e[1])==c.trim(a)){f[0]=e[0];break}}else(c.fmatter.isObject(g)||c.isArray(g))&&(d||(h[0]=a),f=c.map(h,function(a){var b;return c.each(g,function(c,d){return d==a?(b=c,!1):void 0}),"undefined"!=typeof b?b:void 0}));return f.join(", ")}return a||""},c.unformat.date=function(a,b){var f=c.jgrid.formatter.date||{};return c.fmatter.isUndefined(b.formatoptions)||(f=c.extend({},f,b.formatoptions)),c.fmatter.isEmpty(a)?c.fn.fmatter.defaultFormat(a,b):c.fmatter.util.DateFormat(f.newformat,a,f.srcformat,f)}}(jQuery),function(a){a.jgrid.extend({getColProp:function(a){var d={},c=this[0];if(!c.grid)return!1;for(var c=c.p.colModel,e=0;e<c.length;e++)if(c[e].name==a){d=c[e];break}return d},setColProp:function(b,d){return this.each(function(){if(this.grid&&d)for(var c=this.p.colModel,e=0;e<c.length;e++)if(c[e].name==b){a.extend(this.p.colModel[e],d);break}})},sortGrid:function(a,d,c){return this.each(function(){var e=-1;if(this.grid){a||(a=this.p.sortname);for(var h=0;h<this.p.colModel.length;h++)if(this.p.colModel[h].index==a||this.p.colModel[h].name==a){e=h;break}-1!=e&&(h=this.p.colModel[e].sortable,"boolean"!=typeof h&&(h=!0),"boolean"!=typeof d&&(d=!1),h&&this.sortData("jqgh_"+this.p.id+"_"+a,e,d,c))}})},clearBeforeUnload:function(){return this.each(function(){var b=this.grid;b.emptyRows.call(this,!0,!0),a(b.hDiv).unbind("mousemove"),a(this).unbind(),b.dragEnd=null,b.dragMove=null,b.dragStart=null,b.emptyRows=null,b.populate=null,b.populateVisible=null,b.scrollGrid=null,b.selectionPreserver=null,b.bDiv=null,b.cDiv=null,b.hDiv=null,b.cols=null;var d,c=b.headers.length;for(d=0;c>d;d++)b.headers[d].el=null;this.addJSONData=this.addXmlData=this.formatter=this.constructTr=this.setHeadCheckBox=this.refreshIndex=this.updatepager=this.sortData=this.formatCol=null})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&a(this.p.pager).remove();try{a(this).jqGrid("clearBeforeUnload"),a("#gbox_"+a.jgrid.jqID(this.id)).remove()}catch(b){}}})},GridUnload:function(){return this.each(function(){if(this.grid){var b=a(this).attr("id"),d=a(this).attr("class");this.p.pager&&a(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom");var c=document.createElement("table");a(c).attr({id:b}),c.className=d,b=a.jgrid.jqID(this.id),a(c).removeClass("ui-jqgrid-btable"),1===a(this.p.pager).parents("#gbox_"+b).length?(a(c).insertBefore("#gbox_"+b).show(),a(this.p.pager).insertBefore("#gbox_"+b)):a(c).insertBefore("#gbox_"+b).show(),a(this).jqGrid("clearBeforeUnload"),a("#gbox_"+b).remove()}})},setGridState:function(b){return this.each(function(){this.grid&&("hidden"==b?(a(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+a.jgrid.jqID(this.p.id)).slideUp("fast"),this.p.pager&&a(this.p.pager).slideUp("fast"),this.p.toppager&&a(this.p.toppager).slideUp("fast"),!0===this.p.toolbar[0]&&("both"==this.p.toolbar[1]&&a(this.grid.ubDiv).slideUp("fast"),a(this.grid.uDiv).slideUp("fast")),this.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+a.jgrid.jqID(this.p.id)).slideUp("fast"),a(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),this.p.gridstate="hidden"):"visible"==b&&(a(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+a.jgrid.jqID(this.p.id)).slideDown("fast"),this.p.pager&&a(this.p.pager).slideDown("fast"),this.p.toppager&&a(this.p.toppager).slideDown("fast"),!0===this.p.toolbar[0]&&("both"==this.p.toolbar[1]&&a(this.grid.ubDiv).slideDown("fast"),a(this.grid.uDiv).slideDown("fast")),this.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+a.jgrid.jqID(this.p.id)).slideDown("fast"),a(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),this.p.gridstate="visible"))})},filterToolbar:function(b){return b=a.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw"},b||{}),this.each(function(){function d(b,c){var d=a(b);d[0]&&jQuery.each(c,function(){void 0!==this.data?d.bind(this.type,this.data,this.fn):d.bind(this.type,this.fn)})}var c=this;if(!this.ftoolbar){var g,e=function(){var g,f,m,d={},j=0,h={};a.each(c.p.colModel,function(){if(f=this.index||this.name,m=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"select"==this.stype?"eq":b.defaultSearch,g=a("#gs_"+a.jgrid.jqID(this.name),!0===this.frozen&&!0===c.p.frozenColumns?c.grid.fhDiv:c.grid.hDiv).val())d[f]=g,h[f]=m,j++;else try{delete c.p.postData[f]}catch(e){}});var e=j>0?!0:!1;if(!0===b.stringResult||"local"==c.p.datatype){var k='{"groupOp":"'+b.groupOp+'","rules":[',l=0;a.each(d,function(a,b){l>0&&(k+=","),k+='{"field":"'+a+'",',k+='"op":"'+h[a]+'",',k+='"data":"'+(b+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',l++}),k+="]}",a.extend(c.p.postData,{filters:k}),a.each(["searchField","searchString","searchOper"],function(a,b){c.p.postData.hasOwnProperty(b)&&delete c.p.postData[b]})}else a.extend(c.p.postData,d);var p;c.p.searchurl&&(p=c.p.url,a(c).jqGrid("setGridParam",{url:c.p.searchurl}));var r="stop"===a(c).triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!r&&a.isFunction(b.beforeSearch)&&(r=b.beforeSearch.call(c)),r||a(c).jqGrid("setGridParam",{search:e}).trigger("reloadGrid",[{page:1}]),p&&a(c).jqGrid("setGridParam",{url:p}),a(c).triggerHandler("jqGridToolbarAfterSearch"),a.isFunction(b.afterSearch)&&b.afterSearch.call(c)},h=a("<tr class='ui-search-toolbar' role='rowheader'></tr>");a.each(c.p.colModel,function(){var j,q,f,n,i=this;if(q=a("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+c.p.direction+"'></th>"),j=a("<div style='width:100%;position:relative;height:100%;padding-right:0.3em;'></div>"),!0===this.hidden&&a(q).css("display","none"),this.search=!1===this.search?!1:!0,"undefined"==typeof this.stype&&(this.stype="text"),f=a.extend({},this.searchoptions||{}),this.search)switch(this.stype){case"select":if(n=this.surl||f.dataUrl)a.ajax(a.extend({url:n,dataType:"html",success:function(c){void 0!==f.buildSelect?(c=f.buildSelect(c))&&a(j).append(c):a(j).append(c),void 0!==f.defaultValue&&a("select",j).val(f.defaultValue),a("select",j).attr({name:i.index||i.name,id:"gs_"+i.name}),f.attr&&a("select",j).attr(f.attr),a("select",j).css({width:"100%"}),void 0!==f.dataInit&&f.dataInit(a("select",j)[0]),void 0!==f.dataEvents&&d(a("select",j)[0],f.dataEvents),b.autosearch===!0&&a("select",j).change(function(){return e(),!1}),c=null}},a.jgrid.ajaxOptions,c.p.ajaxSelectOptions||{}));else{var m,o,k;if(i.searchoptions?(m=void 0===i.searchoptions.value?"":i.searchoptions.value,o=void 0===i.searchoptions.separator?":":i.searchoptions.separator,k=void 0===i.searchoptions.delimiter?";":i.searchoptions.delimiter):i.editoptions&&(m=void 0===i.editoptions.value?"":i.editoptions.value,o=void 0===i.editoptions.separator?":":i.editoptions.separator,k=void 0===i.editoptions.delimiter?";":i.editoptions.delimiter),m){n=document.createElement("select"),n.style.width="100%",a(n).attr({name:i.index||i.name,id:"gs_"+i.name});var l;if("string"==typeof m){m=m.split(k);for(var p=0;p<m.length;p++)l=m[p].split(o),k=document.createElement("option"),k.value=l[0],k.innerHTML=l[1],n.appendChild(k)}else if("object"==typeof m)for(l in m)m.hasOwnProperty(l)&&(k=document.createElement("option"),k.value=l,k.innerHTML=m[l],n.appendChild(k));void 0!==f.defaultValue&&a(n).val(f.defaultValue),f.attr&&a(n).attr(f.attr),void 0!==f.dataInit&&f.dataInit(n),void 0!==f.dataEvents&&d(n,f.dataEvents),a(j).append(n),!0===b.autosearch&&a(n).change(function(){return e(),!1})}}break;case"text":o=void 0!==f.defaultValue?f.defaultValue:"",a(j).append("<input type='text' style='width:95%;padding:0px;' name='"+(i.index||i.name)+"' id='gs_"+i.name+"' value='"+o+"'/>"),f.attr&&a("input",j).attr(f.attr),void 0!==f.dataInit&&f.dataInit(a("input",j)[0]),void 0!==f.dataEvents&&d(a("input",j)[0],f.dataEvents),!0===b.autosearch&&(b.searchOnEnter?a("input",j).keypress(function(a){return 13==(a.charCode?a.charCode:a.keyCode?a.keyCode:0)?(e(),!1):this}):a("input",j).keydown(function(a){switch(a.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:g&&clearTimeout(g),g=setTimeout(function(){e()},500)}}))}a(q).append(j),a(h).append(q)}),a("table thead",c.grid.hDiv).append(h),this.ftoolbar=!0,this.triggerToolbar=e,this.clearToolbar=function(d){var f,j={},g=0,d="boolean"!=typeof d?!0:d;a.each(c.p.colModel,function(){var b;switch(this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(b=this.searchoptions.defaultValue),f=this.index||this.name,this.stype){case"select":if(a("#gs_"+a.jgrid.jqID(this.name)+" option",!0===this.frozen&&!0===c.p.frozenColumns?c.grid.fhDiv:c.grid.hDiv).each(function(c){return 0===c&&(this.selected=!0),a(this).val()==b?(this.selected=!0,!1):void 0}),void 0!==b)j[f]=b,g++;else try{delete c.p.postData[f]}catch(d){}break;case"text":if(a("#gs_"+a.jgrid.jqID(this.name),!0===this.frozen&&!0===c.p.frozenColumns?c.grid.fhDiv:c.grid.hDiv).val(b),void 0!==b)j[f]=b,g++;else try{delete c.p.postData[f]}catch(e){}}});var h=g>0?!0:!1;if(!0===b.stringResult||"local"==c.p.datatype){var e='{"groupOp":"'+b.groupOp+'","rules":[',o=0;a.each(j,function(a,b){o>0&&(e+=","),e+='{"field":"'+a+'",',e+='"op":"eq",',e+='"data":"'+(b+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',o++}),e+="]}",a.extend(c.p.postData,{filters:e}),a.each(["searchField","searchString","searchOper"],function(a,b){c.p.postData.hasOwnProperty(b)&&delete c.p.postData[b]})}else a.extend(c.p.postData,j);var k;c.p.searchurl&&(k=c.p.url,a(c).jqGrid("setGridParam",{url:c.p.searchurl}));var l="stop"===a(c).triggerHandler("jqGridToolbarBeforeClear")?!0:!1;!l&&a.isFunction(b.beforeClear)&&(l=b.beforeClear.call(c)),l||d&&a(c).jqGrid("setGridParam",{search:h}).trigger("reloadGrid",[{page:1}]),k&&a(c).jqGrid("setGridParam",{url:k}),a(c).triggerHandler("jqGridToolbarAfterClear"),a.isFunction(b.afterClear)&&b.afterClear()},this.toggleToolbar=function(){var b=a("tr.ui-search-toolbar",c.grid.hDiv),d=!0===c.p.frozenColumns?a("tr.ui-search-toolbar",c.grid.fhDiv):!1;"none"==b.css("display")?(b.show(),d&&d.show()):(b.hide(),d&&d.hide())}}})},destroyGroupHeader:function(b){return"undefined"==typeof b&&(b=!0),this.each(function(){var d,c,e,h,g,i;c=this.grid;var j=a("table.ui-jqgrid-htable thead",c.hDiv),q=this.p.colModel;if(c){for(a(this).unbind(".setGroupHeaders"),d=a("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels"),h=c.headers,c=0,e=h.length;e>c;c++){g=q[c].hidden?"none":"",g=a(h[c].el).width(h[c].width).css("display",g);try{g.removeAttr("rowSpan")}catch(f){g.attr("rowSpan",1)}d.append(g),i=g.children("span.ui-jqgrid-resize"),0<i.length&&(i[0].style.height=""),g.children("div")[0].style.top=""}a(j).children("tr.ui-jqgrid-labels").remove(),a(j).prepend(d),!0===b&&a(this).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(b){return b=a.extend({useColSpanStyle:!1,groupHeaders:[]},b||{}),this.each(function(){this.p.groupHeader=b;var d,c,h,g,i,j,q,e=0,f=this.p.colModel,n=f.length,m=this.grid.headers,o=a("table.ui-jqgrid-htable",this.grid.hDiv),k=o.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header");h=o.children("thead");var l=o.find(".jqg-first-row-header");void 0===l[0]?l=a("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):l.empty();var p,r=function(a,b){for(var c=0,d=b.length;d>c;c++)if(b[c].startColumnName===a)return c;return-1};for(a(this).prepend(h),h=a("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels jqg-third-row-header"),d=0;n>d;d++)if(i=m[d].el,j=a(i),c=f[d],g={height:"0px",width:m[d].width+"px",display:c.hidden?"none":""},a("<th>",{role:"gridcell"}).css(g).addClass("ui-first-th-"+this.p.direction).appendTo(l),i.style.width="",g=r(c.name,b.groupHeaders),g>=0){for(g=b.groupHeaders[g],e=g.numberOfColumns,q=g.titleText,g=c=0;e>g&&n>d+g;g++)f[d+g].hidden||c++;g=a("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+this.p.direction).css({height:"22px","border-top":"0px none"}).html(q),c>0&&g.attr("colspan",""+c),this.p.headertitles&&g.attr("title",g.text()),0===c&&g.hide(),j.before(g),h.append(i),e-=1}else 0===e?b.useColSpanStyle?j.attr("rowspan","2"):(a("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+this.p.direction).css({display:c.hidden?"none":"","border-top":"0px none"}).insertBefore(j),h.append(i)):(h.append(i),e--);f=a(this).children("thead"),f.prepend(l),h.insertAfter(k),o.append(f),b.useColSpanStyle&&(o.find("span.ui-jqgrid-resize").each(function(){var b=a(this).parent();b.is(":visible")&&(this.style.cssText="height: "+b.height()+"px !important; cursor: col-resize;")}),o.find("div.ui-jqgrid-sortable").each(function(){var b=a(this),c=b.parent();c.is(":visible")&&c.is(":has(span.ui-jqgrid-resize)")&&b.css("top",(c.height()-b.outerHeight())/2+"px")})),p=f.find("tr.jqg-first-row-header"),a(this).bind("jqGridResizeStop.setGroupHeaders",function(a,b,c){p.find("th").eq(c).width(b)})})},setFrozenColumns:function(){return this.each(function(){if(this.grid){var b=this,d=b.p.colModel,c=0,e=d.length,h=-1,g=!1;if(!(!0===b.p.subGrid||!0===b.p.treeGrid||!0===b.p.cellEdit||b.p.sortable||b.p.scroll||b.p.grouping)){for(b.p.rownumbers&&c++,b.p.multiselect&&c++;e>c&&!0===d[c].frozen;)g=!0,h=c,c++;if(h>=0&&g){if(d=b.p.caption?a(b.grid.cDiv).outerHeight():0,c=a(".ui-jqgrid-htable","#gview_"+a.jgrid.jqID(b.p.id)).height(),b.p.toppager&&(d+=a(b.grid.topDiv).outerHeight()),!0===b.p.toolbar[0]&&"bottom"!=b.p.toolbar[1]&&(d+=a(b.grid.uDiv).outerHeight()),b.grid.fhDiv=a('<div style="position:absolute;left:0px;top:'+d+"px;height:"+c+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>'),b.grid.fbDiv=a('<div style="position:absolute;left:0px;top:'+(parseInt(d,10)+parseInt(c,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>'),a("#gview_"+a.jgrid.jqID(b.p.id)).append(b.grid.fhDiv),d=a(".ui-jqgrid-htable","#gview_"+a.jgrid.jqID(b.p.id)).clone(!0),b.p.groupHeader){a("tr.jqg-first-row-header, tr.jqg-third-row-header",d).each(function(){a("th:gt("+h+")",this).remove()});var i=-1,j=-1;a("tr.jqg-second-row-header th",d).each(function(){var b=parseInt(a(this).attr("colspan"),10);return b&&(i+=b,j++),i===h?!1:void 0}),i!==h&&(j=h),a("tr.jqg-second-row-header",d).each(function(){a("th:gt("+j+")",this).remove()})}else a("tr",d).each(function(){a("th:gt("+h+")",this).remove()});a(d).width(1),a(b.grid.fhDiv).append(d).mousemove(function(a){return b.grid.resizing?(b.grid.dragMove(a),!1):void 0}),a(b).bind("jqGridResizeStop.setFrozenColumns",function(c,d,e){c=a(".ui-jqgrid-htable",b.grid.fhDiv),a("th:eq("+e+")",c).width(d),c=a(".ui-jqgrid-btable",b.grid.fbDiv),a("tr:first td:eq("+e+")",c).width(d)}),a(b).bind("jqGridOnSortCol.setFrozenColumns",function(c,d){var e=a("tr.ui-jqgrid-labels:last th:eq("+b.p.lastsort+")",b.grid.fhDiv),g=a("tr.ui-jqgrid-labels:last th:eq("+d+")",b.grid.fhDiv);a("span.ui-grid-ico-sort",e).addClass("ui-state-disabled"),a(e).attr("aria-selected","false"),a("span.ui-icon-"+b.p.sortorder,g).removeClass("ui-state-disabled"),a(g).attr("aria-selected","true"),!b.p.viewsortcols[0]&&b.p.lastsort!=d&&(a("span.s-ico",e).hide(),a("span.s-ico",g).show())}),a("#gview_"+a.jgrid.jqID(b.p.id)).append(b.grid.fbDiv),jQuery(b.grid.bDiv).scroll(function(){jQuery(b.grid.fbDiv).scrollTop(jQuery(this).scrollTop())}),!0===b.p.hoverrows&&a("#"+a.jgrid.jqID(b.p.id)).unbind("mouseover").unbind("mouseout"),a(b).bind("jqGridAfterGridComplete.setFrozenColumns",function(){a("#"+a.jgrid.jqID(b.p.id)+"_frozen").remove(),jQuery(b.grid.fbDiv).height(jQuery(b.grid.bDiv).height()-16);var c=a("#"+a.jgrid.jqID(b.p.id)).clone(!0);a("tr",c).each(function(){a("td:gt("+h+")",this).remove()}),a(c).width(1).attr("id",b.p.id+"_frozen"),a(b.grid.fbDiv).append(c),!0===b.p.hoverrows&&(a("tr.jqgrow",c).hover(function(){a(this).addClass("ui-state-hover"),a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(b.p.id)).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover"),a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(b.p.id)).removeClass("ui-state-hover")}),a("tr.jqgrow","#"+a.jgrid.jqID(b.p.id)).hover(function(){a(this).addClass("ui-state-hover"),a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(b.p.id)+"_frozen").addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover"),a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(b.p.id)+"_frozen").removeClass("ui-state-hover")})),c=null}),b.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){if(this.grid&&!0===this.p.frozenColumns){if(a(this.grid.fhDiv).remove(),a(this.grid.fbDiv).remove(),this.grid.fhDiv=null,this.grid.fbDiv=null,a(this).unbind(".setFrozenColumns"),!0===this.p.hoverrows){var b;a("#"+a.jgrid.jqID(this.p.id)).bind("mouseover",function(d){b=a(d.target).closest("tr.jqgrow"),"ui-subgrid"!==a(b).attr("class")&&a(b).addClass("ui-state-hover")}).bind("mouseout",function(d){b=a(d.target).closest("tr.jqgrow"),a(b).removeClass("ui-state-hover")})}this.p.frozenColumns=!1}})}})}(jQuery),function(a){a.extend(a.jgrid,{showModal:function(a){a.w.show()},closeModal:function(a){a.w.hide().attr("aria-hidden","true"),a.o&&a.o.remove()},hideModal:function(d,b){if(b=a.extend({jqm:!0,gb:""},b||{}),b.onClose){var c=b.onClose(d);if("boolean"==typeof c&&!c)return}if(a.fn.jqm&&!0===b.jqm)a(d).attr("aria-hidden","true").jqmHide();else{if(""!==b.gb)try{a(".jqgrid-overlay:first",b.gb).hide()}catch(f){}a(d).hide().attr("aria-hidden","true")}},findPos:function(a){var b=0,c=0;if(a.offsetParent)do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return[b,c]},createModal:function(d,b,c,f,g,h,i){var l,c=a.extend(!0,a.jgrid.jqModal||{},c),e=document.createElement("div"),j=this,i=a.extend({},i||{});l="rtl"==a(c.gbox).attr("dir")?!0:!1,e.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog",e.id=d.themodal;var k=document.createElement("div");k.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix",k.id=d.modalhead,a(k).append("<span class='ui-jqdialog-title'>"+c.caption+"</span>");var n=a("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){n.addClass("ui-state-hover")},function(){n.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");a(k).append(n),l?(e.dir="rtl",a(".ui-jqdialog-title",k).css("float","right"),a(".ui-jqdialog-titlebar-close",k).css("left","0.3em")):(e.dir="ltr",a(".ui-jqdialog-title",k).css("float","left"),a(".ui-jqdialog-titlebar-close",k).css("right","0.3em"));var m=document.createElement("div");if(a(m).addClass("ui-jqdialog-content ui-widget-content").attr("id",d.modalcontent),a(m).append(b),e.appendChild(m),a(e).prepend(k),!0===h?a("body").append(e):"string"==typeof h?a(h).append(e):a(e).insertBefore(f),a(e).css(i),"undefined"==typeof c.jqModal&&(c.jqModal=!0),b={},a.fn.jqm&&!0===c.jqModal?(0===c.left&&0===c.top&&c.overlay&&(i=[],i=a.jgrid.findPos(g),c.left=i[0]+4,c.top=i[1]+4),b.top=c.top+"px",b.left=c.left):(0!==c.left||0!==c.top)&&(b.left=c.left,b.top=c.top+"px"),a("a.ui-jqdialog-titlebar-close",k).click(function(){var b=a("#"+a.jgrid.jqID(d.themodal)).data("onClose")||c.onClose,e=a("#"+a.jgrid.jqID(d.themodal)).data("gbox")||c.gbox;return j.hideModal("#"+a.jgrid.jqID(d.themodal),{gb:e,jqm:c.jqModal,onClose:b}),!1}),0!==c.width&&c.width||(c.width=300),0!==c.height&&c.height||(c.height=200),c.zIndex||(f=a(f).parents("*[role=dialog]").filter(":first").css("z-index"),c.zIndex=f?parseInt(f,10)+2:950),f=0,l&&b.left&&!h&&(f=a(c.gbox).width()-(isNaN(c.width)?0:parseInt(c.width,10))-8,b.left=parseInt(b.left,10)+parseInt(f,10)),b.left&&(b.left+="px"),a(e).css(a.extend({width:isNaN(c.width)?"auto":c.width+"px",height:isNaN(c.height)?"auto":c.height+"px",zIndex:c.zIndex,overflow:"hidden"},b)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":d.modalhead,"aria-hidden":"true"}),"undefined"==typeof c.drag&&(c.drag=!0),"undefined"==typeof c.resize&&(c.resize=!0),c.drag)if(a(k).css("cursor","move"),a.fn.jqDrag)a(e).jqDrag(k);else try{a(e).draggable({handle:a("#"+a.jgrid.jqID(k.id))})}catch(o){}if(c.resize)if(a.fn.jqResize)a(e).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>"),a("#"+a.jgrid.jqID(d.themodal)).jqResize(".jqResize",d.scrollelm?"#"+a.jgrid.jqID(d.scrollelm):!1);else try{a(e).resizable({handles:"se, sw",alsoResize:d.scrollelm?"#"+a.jgrid.jqID(d.scrollelm):!1})
}catch(p){}!0===c.closeOnEscape&&a(e).keydown(function(b){27==b.which&&(b=a("#"+a.jgrid.jqID(d.themodal)).data("onClose")||c.onClose,j.hideModal(this,{gb:c.gbox,jqm:c.jqModal,onClose:b}))})},viewModal:function(d,b){if(b=a.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:a.jgrid.showModal,onHide:a.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},b||{}),a.fn.jqm&&!0===b.jqm)b.jqM?a(d).attr("aria-hidden","false").jqm(b).jqmShow():a(d).attr("aria-hidden","false").jqmShow();else{""!==b.gbox&&(a(".jqgrid-overlay:first",b.gbox).show(),a(d).data("gbox",b.gbox)),a(d).show().attr("aria-hidden","false");try{a(":input:visible",d)[0].focus()}catch(c){}}},info_dialog:function(d,b,c,f){var g={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,caption:"<b>"+d+"</b>",left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};a.extend(g,f||{});var h=g.jqModal,i=this;if(a.fn.jqm&&!h&&(h=!1),d="",0<g.buttons.length)for(f=0;f<g.buttons.length;f++)"undefined"==typeof g.buttons[f].id&&(g.buttons[f].id="info_button_"+f),d+="<a href='javascript:void(0)' id='"+g.buttons[f].id+"' class='fm-button ui-state-default ui-corner-all'>"+g.buttons[f].text+"</a>";f=isNaN(g.dataheight)?g.dataheight:g.dataheight+"px",b="<div id='info_id'>"+("<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+f+";"+("text-align:"+g.align+";")+"'>"+b+"</div>"),b+=c?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+g.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+c+"</a>"+d+"</div>":""!==d?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+g.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+d+"</div>":"",b+="</div>";try{"false"==a("#info_dialog").attr("aria-hidden")&&a.jgrid.hideModal("#info_dialog",{jqm:h}),a("#info_dialog").remove()}catch(e){}a.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},b,g,"","",!0),d&&a.each(g.buttons,function(b){a("#"+a.jgrid.jqID(this.id),"#info_id").bind("click",function(){return g.buttons[b].onClick.call(a("#info_dialog")),!1})}),a("#closedialog","#info_id").click(function(){return i.hideModal("#info_dialog",{jqm:h}),!1}),a(".fm-button","#info_dialog").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),a.isFunction(g.beforeOpen)&&g.beforeOpen(),a.jgrid.viewModal("#info_dialog",{onHide:function(a){a.w.hide().remove(),a.o&&a.o.remove()},modal:g.modal,jqm:h}),a.isFunction(g.afterOpen)&&g.afterOpen();try{a("#info_dialog").focus()}catch(l){}},createEl:function(d,b,c,f,g){function h(b,d){return a.isFunction(d.dataInit)&&d.dataInit.call(l,b),d.dataEvents&&a.each(d.dataEvents,function(){void 0!==this.data?a(b).bind(this.type,this.data,this.fn):a(b).bind(this.type,this.fn)}),d}function i(b,d,c){var e="dataInit dataEvents dataUrl buildSelect sopt searchhidden defaultValue attr".split(" ");"undefined"!=typeof c&&a.isArray(c)&&a.merge(e,c),a.each(d,function(d,c){-1===a.inArray(d,e)&&a(b).attr(d,c)}),d.hasOwnProperty("id")||a(b).attr("id",a.jgrid.randId())}var e="",l=this;switch(d){case"textarea":e=document.createElement("textarea"),f?b.cols||a(e).css({width:"98%"}):b.cols||(b.cols=20),b.rows||(b.rows=2),("&nbsp;"==c||"&#160;"==c||1==c.length&&160==c.charCodeAt(0))&&(c=""),e.value=c,i(e,b),b=h(e,b),a(e).attr({role:"textbox",multiline:"true"});break;case"checkbox":e=document.createElement("input"),e.type="checkbox",b.value?(d=b.value.split(":"),c===d[0]&&(e.checked=!0,e.defaultChecked=!0),e.value=d[0],a(e).attr("offval",d[1])):(d=c.toLowerCase(),0>d.search(/(false|0|no|off|undefined)/i)&&""!==d?(e.checked=!0,e.defaultChecked=!0,e.value=c):e.value="on",a(e).attr("offval","off")),i(e,b,["value"]),b=h(e,b),a(e).attr("role","checkbox");break;case"select":if(e=document.createElement("select"),e.setAttribute("role","select"),f=[],!0===b.multiple?(d=!0,e.multiple="multiple",a(e).attr("aria-multiselectable","true")):d=!1,"undefined"!=typeof b.dataUrl)a.ajax(a.extend({url:b.dataUrl,type:"GET",dataType:"html",context:{elem:e,options:b,vl:c},success:function(d){var b=[],c=this.elem,e=this.vl,f=a.extend({},this.options),g=f.multiple===!0;a.isFunction(f.buildSelect)&&(d=f.buildSelect.call(l,d)),(d=a(d).html())&&(a(c).append(d),i(c,f),f=h(c,f),"undefined"==typeof f.size&&(f.size=g?3:1),g?(b=e.split(","),b=a.map(b,function(b){return a.trim(b)})):b[0]=a.trim(e),setTimeout(function(){a("option",c).each(function(d){0===d&&c.multiple&&(this.selected=!1),a(this).attr("role","option"),(a.inArray(a.trim(a(this).text()),b)>-1||a.inArray(a.trim(a(this).val()),b)>-1)&&(this.selected="selected")})},0))}},g||{}));else if(b.value){var j;"undefined"==typeof b.size&&(b.size=d?3:1),d&&(f=c.split(","),f=a.map(f,function(b){return a.trim(b)})),"function"==typeof b.value&&(b.value=b.value());var k,n,m=void 0===b.separator?":":b.separator,g=void 0===b.delimiter?";":b.delimiter;if("string"==typeof b.value)for(k=b.value.split(g),j=0;j<k.length;j++)n=k[j].split(m),2<n.length&&(n[1]=a.map(n,function(a,b){return b>0?a:void 0}).join(m)),g=document.createElement("option"),g.setAttribute("role","option"),g.value=n[0],g.innerHTML=n[1],e.appendChild(g),d||a.trim(n[0])!=a.trim(c)&&a.trim(n[1])!=a.trim(c)||(g.selected="selected"),d&&(-1<a.inArray(a.trim(n[1]),f)||-1<a.inArray(a.trim(n[0]),f))&&(g.selected="selected");else if("object"==typeof b.value)for(j in m=b.value)m.hasOwnProperty(j)&&(g=document.createElement("option"),g.setAttribute("role","option"),g.value=j,g.innerHTML=m[j],e.appendChild(g),d||a.trim(j)!=a.trim(c)&&a.trim(m[j])!=a.trim(c)||(g.selected="selected"),d&&(-1<a.inArray(a.trim(m[j]),f)||-1<a.inArray(a.trim(j),f))&&(g.selected="selected"));i(e,b,["value"]),b=h(e,b)}break;case"text":case"password":case"button":j="button"==d?"button":"textbox",e=document.createElement("input"),e.type=d,e.value=c,i(e,b),b=h(e,b),"button"!=d&&(f?b.size||a(e).css({width:"98%"}):b.size||(b.size=20)),a(e).attr("role",j);break;case"image":case"file":e=document.createElement("input"),e.type=d,i(e,b),b=h(e,b);break;case"custom":e=document.createElement("span");try{if(!a.isFunction(b.custom_element))throw"e1";if(!(m=b.custom_element.call(l,c,b)))throw"e2";m=a(m).addClass("customelement").attr({id:b.id,name:b.name}),a(e).empty().append(m)}catch(o){"e1"==o&&a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"==o?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,"string"==typeof o?o:o.message,a.jgrid.edit.bClose)}}return e},checkDate:function(a,b){var f,c={},a=a.toLowerCase();if(f=-1!=a.indexOf("/")?"/":-1!=a.indexOf("-")?"-":-1!=a.indexOf(".")?".":"/",a=a.split(f),b=b.split(f),3!=b.length)return!1;f=-1;for(var g,h=-1,i=-1,e=0;e<a.length;e++)g=isNaN(b[e])?0:parseInt(b[e],10),c[a[e]]=g,g=a[e],-1!=g.indexOf("y")&&(f=e),-1!=g.indexOf("m")&&(i=e),-1!=g.indexOf("d")&&(h=e);g="y"==a[f]||"yyyy"==a[f]?4:"yy"==a[f]?2:-1;var l,e=function(a){for(var b=1;a>=b;b++)this[b]=31,(4==b||6==b||9==b||11==b)&&(this[b]=30),2==b&&(this[b]=29);return this}(12);return-1===f?!1:(l=c[a[f]].toString(),2==g&&1==l.length&&(g=1),l.length!=g||0===c[a[f]]&&"00"!=b[f]||-1===i?!1:(l=c[a[i]].toString(),1>l.length||1>c[a[i]]||12<c[a[i]]||-1===h?!1:(l=c[a[h]].toString(),1>l.length||1>c[a[h]]||31<c[a[h]]||2==c[a[i]]&&c[a[h]]>(0!==c[a[f]]%4||0===c[a[f]]%100&&0!==c[a[f]]%400?28:29)||c[a[h]]>e[c[a[i]]]?!1:!0)))},isEmpty:function(a){return a.match(/^\s+$/)||""===a?!0:!1},checkTime:function(d){var b=/^(\d{1,2}):(\d{2})([ap]m)?$/;if(!a.jgrid.isEmpty(d)){if(!(d=d.match(b)))return!1;if(d[3]){if(1>d[1]||12<d[1])return!1}else if(23<d[1])return!1;if(59<d[2])return!1}return!0},checkValues:function(d,b,c,f,g){var h,i;if("undefined"==typeof f)if("string"==typeof b){for(f=0,g=c.p.colModel.length;g>f;f++)if(c.p.colModel[f].name==b){h=c.p.colModel[f].editrules,b=f;try{i=c.p.colModel[f].formoptions.label}catch(e){}break}}else b>=0&&(h=c.p.colModel[b].editrules);else h=f,i=void 0===g?"_":g;if(h){if(i||(i=c.p.colNames[b]),!0===h.required&&a.jgrid.isEmpty(d))return[!1,i+": "+a.jgrid.edit.msg.required,""];if(f=!1===h.required?!1:!0,!0===h.number&&(!1!==f||!a.jgrid.isEmpty(d))&&isNaN(d))return[!1,i+": "+a.jgrid.edit.msg.number,""];if("undefined"!=typeof h.minValue&&!isNaN(h.minValue)&&parseFloat(d)<parseFloat(h.minValue))return[!1,i+": "+a.jgrid.edit.msg.minValue+" "+h.minValue,""];if("undefined"!=typeof h.maxValue&&!isNaN(h.maxValue)&&parseFloat(d)>parseFloat(h.maxValue))return[!1,i+": "+a.jgrid.edit.msg.maxValue+" "+h.maxValue,""];if(!(!0!==h.email||!1===f&&a.jgrid.isEmpty(d)||(g=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,g.test(d))))return[!1,i+": "+a.jgrid.edit.msg.email,""];if(!(!0!==h.integer||!1===f&&a.jgrid.isEmpty(d)||!isNaN(d)&&0===d%1&&-1==d.indexOf(".")))return[!1,i+": "+a.jgrid.edit.msg.integer,""];if(!(!0!==h.date||!1===f&&a.jgrid.isEmpty(d)||(b=c.p.colModel[b].formatoptions&&c.p.colModel[b].formatoptions.newformat?c.p.colModel[b].formatoptions.newformat:c.p.colModel[b].datefmt||"Y-m-d",a.jgrid.checkDate(b,d))))return[!1,i+": "+a.jgrid.edit.msg.date+" - "+b,""];if(!(!0!==h.time||!1===f&&a.jgrid.isEmpty(d)||a.jgrid.checkTime(d)))return[!1,i+": "+a.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(!(!0!==h.url||!1===f&&a.jgrid.isEmpty(d)||(g=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,g.test(d))))return[!1,i+": "+a.jgrid.edit.msg.url,""];if(!0===h.custom&&(!1!==f||!a.jgrid.isEmpty(d)))return a.isFunction(h.custom_func)?(d=h.custom_func.call(c,d,i),a.isArray(d)?d:[!1,a.jgrid.edit.msg.customarray,""]):[!1,a.jgrid.edit.msg.customfcheck,""]}return[!0,"",""]}})}(jQuery),function(b){b.extend(b.jgrid,{template:function(a){var c=b.makeArray(arguments).slice(1),f=1;return void 0===a&&(a=""),a.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(a,d){if(!isNaN(parseInt(d,10)))return f++,c[parseInt(d,10)];for(var b=c[f],g=b.length;g--;)if(d===b[g].nm)return b[g].v;f++})}}),b.jgrid.extend({groupingSetup:function(){return this.each(function(){var a=this.p.groupingView;if(null===a||"object"!=typeof a&&!b.isFunction(a))this.p.grouping=!1;else if(a.groupField.length){"undefined"==typeof a.visibiltyOnNextGrouping&&(a.visibiltyOnNextGrouping=[]),a.lastvalues=[],a.groups=[],a.counters=[];for(var c=0;c<a.groupField.length;c++)a.groupOrder[c]||(a.groupOrder[c]="asc"),a.groupText[c]||(a.groupText[c]="{0}"),"boolean"!=typeof a.groupColumnShow[c]&&(a.groupColumnShow[c]=!0),"boolean"!=typeof a.groupSummary[c]&&(a.groupSummary[c]=!1),!0===a.groupColumnShow[c]?(a.visibiltyOnNextGrouping[c]=!0,b(this).jqGrid("showCol",a.groupField[c])):(a.visibiltyOnNextGrouping[c]=b("#"+b.jgrid.jqID(this.p.id+"_"+a.groupField[c])).is(":visible"),b(this).jqGrid("hideCol",a.groupField[c]));a.summary=[];for(var c=this.p.colModel,f=0,e=c.length;e>f;f++)c[f].summaryType&&a.summary.push({nm:c[f].name,st:c[f].summaryType,v:"",sr:c[f].summaryRound,srt:c[f].summaryRoundType||"round"})}else this.p.grouping=!1})},groupingPrepare:function(a,c,f,e){return this.each(function(){for(var k,j,d=this.p.groupingView,h=this,g=d.groupField.length,p=0,i=0;g>i;i++)k=d.groupField[i],j=f[k],void 0!==j&&(0===e?(d.groups.push({idx:i,dataIndex:k,value:j,startRow:e,cnt:1,summary:[]}),d.lastvalues[i]=j,d.counters[i]={cnt:1,pos:d.groups.length-1,summary:b.extend(!0,[],d.summary)}):"object"!=typeof j&&d.lastvalues[i]!==j?(d.groups.push({idx:i,dataIndex:k,value:j,startRow:e,cnt:1,summary:[]}),d.lastvalues[i]=j,p=1,d.counters[i]={cnt:1,pos:d.groups.length-1,summary:b.extend(!0,[],d.summary)}):1===p?(d.groups.push({idx:i,dataIndex:k,value:j,startRow:e,cnt:1,summary:[]}),d.lastvalues[i]=j,d.counters[i]={cnt:1,pos:d.groups.length-1,summary:b.extend(!0,[],d.summary)}):(d.counters[i].cnt+=1,d.groups[d.counters[i].pos].cnt=d.counters[i].cnt),b.each(d.counters[i].summary,function(){this.v=b.isFunction(this.st)?this.st.call(h,this.v,this.nm,f):b(h).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,f)}),d.groups[d.counters[i].pos].summary=d.counters[i].summary);c.push(a)}),c},groupingToggle:function(a){return this.each(function(){var c=this.p.groupingView,f=a.split("_"),e=parseInt(f[f.length-2],10);f.splice(f.length-2,2);var f=f.join("_"),d=c.minusicon,h=c.plusicon,g=b("#"+b.jgrid.jqID(a)),g=g.length?g[0].nextSibling:null,k=b("#"+b.jgrid.jqID(a)+" span.tree-wrap-"+this.p.direction),j=!1;if(k.hasClass(d)){if(c.showSummaryOnHide){if(g)for(;g&&!(b(g).hasClass("jqfoot")&&parseInt(b(g).attr("jqfootlevel"),10)<=e);)b(g).hide(),g=g.nextSibling}else if(g)for(;g&&!b(g).hasClass(f+"_"+e)&&!b(g).hasClass(f+"_"+(e-1));)b(g).hide(),g=g.nextSibling;k.removeClass(d).addClass(h),j=!0}else{if(g)for(;g&&!b(g).hasClass(f+"_"+e)&&!b(g).hasClass(f+"_"+(e-1));)b(g).show(),(c=b(g).find("span.tree-wrap-"+this.p.direction))&&b(c).hasClass(h)&&b(c).removeClass(h).addClass(d),g=g.nextSibling;k.removeClass(h).addClass(d)}b(this).triggerHandler("jqGridGroupingClickGroup",[a,j]),b.isFunction(this.p.onClickGroup)&&this.p.onClickGroup.call(this,a,j)}),!1},groupingRender:function(a,c){return this.each(function(){function f(a,b,c){if(0===b)return c[a];var d=c[a].idx;if(0===d)return c[a];for(;a>=0;a--)if(c[a].idx===d-b)return c[a]}var k,j,i,e=this,d=e.p.groupingView,h="",g="",p=d.groupCollapse?d.plusicon:d.minusicon,w=[],x=d.groupField.length,p=p+(" tree-wrap-"+e.p.direction);b.each(e.p.colModel,function(a,b){for(var c=0;x>c;c++)if(d.groupField[c]===b.name){w[c]=a;break}});var s=0,y=b.makeArray(d.groupSummary);y.reverse(),b.each(d.groups,function(r,l){s++,j=e.p.id+"ghead_"+l.idx,k=j+"_"+r,g="<span style='cursor:pointer;' class='ui-icon "+p+"' onclick=\"jQuery('#"+b.jgrid.jqID(e.p.id)+"').jqGrid('groupingToggle','"+k+"');return false;\"></span>";try{i=e.formatter(k,l.value,w[l.idx],l.value)}catch(C){i=l.value}if(h+='<tr id="'+k+'" role="row" class= "ui-widget-content jqgroup ui-row-'+e.p.direction+" "+j+'"><td style="padding-left:'+12*l.idx+'px;" colspan="'+c+'">'+g+b.jgrid.template(d.groupText[l.idx],i,l.cnt,l.summary)+"</td></tr>",x-1===l.idx){for(var m=d.groups[r+1],o=void 0!==m?d.groups[r+1].startRow:a.length,t=l.startRow;o>t;t++)h+=a[t].join("");var q;if(void 0!==m){for(q=0;q<d.groupField.length&&m.dataIndex!==d.groupField[q];q++);s=d.groupField.length-q}for(m=0;s>m;m++)if(y[m]){o="",d.groupCollapse&&!d.showSummaryOnHide&&(o=' style="display:none;"'),h+="<tr"+o+' jqfootlevel="'+(l.idx-m)+'" role="row" class="ui-widget-content jqfoot ui-row-'+e.p.direction+'">';for(var v,o=f(r,m,d.groups),u=e.p.colModel,z=o.cnt,n=0;c>n;n++){var A="<td "+e.formatCol(n,1,"")+">&#160;</td>",B="{0}";b.each(o.summary,function(){if(this.nm===u[n].name){u[n].summaryTpl&&(B=u[n].summaryTpl),"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&this.v&&z>0&&(this.v/=z);try{v=e.formatter("",this.v,n,this)}catch(a){v=this.v}return A="<td "+e.formatCol(n,1,"")+">"+b.jgrid.format(B,v)+"</td>",!1}}),h+=A}h+="</tr>"}s=q}}),b("#"+b.jgrid.jqID(e.p.id)+" tbody:first").append(h),h=null})},groupingGroupBy:function(a,c){return this.each(function(){"string"==typeof a&&(a=[a]);var f=this.p.groupingView;this.p.grouping=!0,"undefined"==typeof f.visibiltyOnNextGrouping&&(f.visibiltyOnNextGrouping=[]);var e;for(e=0;e<f.groupField.length;e++)!f.groupColumnShow[e]&&f.visibiltyOnNextGrouping[e]&&b(this).jqGrid("showCol",f.groupField[e]);for(e=0;e<a.length;e++)f.visibiltyOnNextGrouping[e]=b("#"+b.jgrid.jqID(this.p.id)+"_"+b.jgrid.jqID(a[e])).is(":visible");this.p.groupingView=b.extend(this.p.groupingView,c||{}),f.groupField=a,b(this).trigger("reloadGrid")})},groupingRemove:function(a){return this.each(function(){if("undefined"==typeof a&&(a=!0),this.p.grouping=!1,!0===a){for(var c=this.p.groupingView,f=0;f<c.groupField.length;f++)!c.groupColumnShow[f]&&c.visibiltyOnNextGrouping[f]&&b(this).jqGrid("showCol",c.groupField);b("tr.jqgroup, tr.jqfoot","#"+b.jgrid.jqID(this.p.id)+" tbody:first").remove(),b("tr.jqgrow:hidden","#"+b.jgrid.jqID(this.p.id)+" tbody:first").show()}else b(this).trigger("reloadGrid")})},groupingCalculations:{handler:function(a,c,b,e,d,h){var g={sum:function(){return parseFloat(c||0)+parseFloat(h[b]||0)},min:function(){return""===c?parseFloat(h[b]||0):Math.min(parseFloat(c),parseFloat(h[b]||0))},max:function(){return""===c?parseFloat(h[b]||0):Math.max(parseFloat(c),parseFloat(h[b]||0))},count:function(){return""===c&&(c=0),h.hasOwnProperty(b)?c+1:0},avg:function(){return g.sum()}};if(!g[a])throw"jqGrid Grouping No such method: "+a;return a=g[a](),null!=e&&("fixed"==d?a=a.toFixed(e):(e=Math.pow(10,e),a=Math.round(a*e)/e)),a}}})}(jQuery),function(b){if(b.browser.msie&&8==b.browser.version&&(b.expr[":"].hidden=function(b){return 0===b.offsetWidth||0===b.offsetHeight||"none"==b.style.display}),b.jgrid._multiselect=!1,b.ui&&b.ui.multiselect){if(b.ui.multiselect.prototype._setSelected){var m=b.ui.multiselect.prototype._setSelected;b.ui.multiselect.prototype._setSelected=function(a,e){var c=m.call(this,a,e);if(e&&this.selectedList){var d=this.element;this.selectedList.find("li").each(function(){b(this).data("optionLink")&&b(this).data("optionLink").remove().appendTo(d)})}return c}}b.ui.multiselect.prototype.destroy&&(b.ui.multiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),void 0===b.Widget?b.widget.prototype.destroy.apply(this,arguments):b.Widget.prototype.destroy.apply(this,arguments)}),b.jgrid._multiselect=!0}b.jgrid.extend({sortableColumns:function(a){return this.each(function(){function e(){c.p.disableClick=!0}var c=this,d=b.jgrid.jqID(c.p.id),d={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+d+"_cb,#jqgh_"+d+"_rn,#jqgh_"+d+"_subgrid),:hidden)",placeholder:{element:function(a){return b(document.createElement(a[0].nodeName)).addClass(a[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(b,a){a.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),a.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}},update:function(a,g){var d=b(g.item).parent(),d=b(">th",d),e={},i=c.p.id+"_";b.each(c.p.colModel,function(b){e[this.name]=b});var h=[];d.each(function(){var a=b(">div",this).get(0).id.replace(/^jqgh_/,"").replace(i,"");a in e&&h.push(e[a])}),b(c).jqGrid("remapColumns",h,!0,!0),b.isFunction(c.p.sortable.update)&&c.p.sortable.update(h),setTimeout(function(){c.p.disableClick=!1},50)}};if(c.p.sortable.options?b.extend(d,c.p.sortable.options):b.isFunction(c.p.sortable)&&(c.p.sortable={update:c.p.sortable}),d.start){var g=d.start;d.start=function(b,a){e(),g.call(this,b,a)}}else d.start=e;c.p.sortable.exclude&&(d.items=d.items+(":not("+c.p.sortable.exclude+")")),a.sortable(d).data("sortable").floating=!0})},columnChooser:function(a){function e(a,c){a&&("string"==typeof a?b.fn[a]&&b.fn[a].apply(c,b.makeArray(arguments).slice(2)):b.isFunction(a)&&a.apply(c,b.makeArray(arguments).slice(2)))}var c=this;if(!b("#colchooser_"+b.jgrid.jqID(c[0].p.id)).length){var d=b('<div id="colchooser_'+c[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),g=b("select",d),a=b.extend({width:420,height:240,classname:null,done:function(b){b&&c.jqGrid("remapColumns",b,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470},dlog_opts:function(a){var c={};return c[a.bSubmit]=function(){a.apply_perm(),a.cleanup(!1)},c[a.bCancel]=function(){a.cleanup(!0)},b.extend(!0,{buttons:c,close:function(){a.cleanup(!0)},modal:a.modal?a.modal:!1,resizable:a.resizable?a.resizable:!0,width:a.width+20},a.dialog_opts||{})},apply_perm:function(){b("option",g).each(function(){this.selected?c.jqGrid("showCol",k[this.value].name):c.jqGrid("hideCol",k[this.value].name)});var d=[];b("option:selected",g).each(function(){d.push(parseInt(this.value,10))}),b.each(d,function(){delete f[k[parseInt(this,10)].name]}),b.each(f,function(){var b=parseInt(this,10),a=d,c=b;if(c>=0){var g=a.slice(),e=g.splice(c,Math.max(a.length-c,c));c>a.length&&(c=a.length),g[c]=b,d=g.concat(e)}else d=void 0}),a.done&&a.done.call(c,d)},cleanup:function(b){e(a.dlog,d,"destroy"),e(a.msel,g,"destroy"),d.remove(),b&&a.done&&a.done.call(c)},msel_opts:{}},b.jgrid.col,a||{});if(b.ui&&b.ui.multiselect&&"multiselect"==a.msel){if(!b.jgrid._multiselect)return void alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");a.msel_opts=b.extend(b.ui.multiselect.defaults,a.msel_opts)}a.caption&&d.attr("title",a.caption),a.classname&&(d.addClass(a.classname),g.addClass(a.classname)),a.width&&(b(">div",d).css({width:a.width,margin:"0 auto"}),g.css("width",a.width)),a.height&&(b(">div",d).css("height",a.height),g.css("height",a.height-10));var k=c.jqGrid("getGridParam","colModel"),p=c.jqGrid("getGridParam","colNames"),f={},j=[];g.empty(),b.each(k,function(b){f[this.name]=b,this.hidedlg?this.hidden||j.push(b):g.append("<option value='"+b+"' "+(this.hidden?"":"selected='selected'")+">"+jQuery.jgrid.stripHtml(p[b])+"</option>")});var i=b.isFunction(a.dlog_opts)?a.dlog_opts.call(c,a):a.dlog_opts;e(a.dlog,d,i),i=b.isFunction(a.msel_opts)?a.msel_opts.call(c,a):a.msel_opts,e(a.msel,g,i)}},sortableRows:function(a){return this.each(function(){var e=this;e.grid&&!e.p.treeGrid&&b.fn.sortable&&(a=b.extend({cursor:"move",axis:"y",items:".jqgrow"},a||{}),a.start&&b.isFunction(a.start)?(a._start_=a.start,delete a.start):a._start_=!1,a.update&&b.isFunction(a.update)?(a._update_=a.update,delete a.update):a._update_=!1,a.start=function(c,d){if(b(d.item).css("border-width","0px"),b("td",d.item).each(function(b){this.style.width=e.grid.cols[b].style.width}),e.p.subGrid){var g=b(d.item).attr("id");try{b(e).jqGrid("collapseSubGridRow",g)}catch(k){}}a._start_&&a._start_.apply(this,[c,d])},a.update=function(c,d){b(d.item).css("border-width",""),e.p.rownumbers===!0&&b("td.jqgrid-rownum",e.rows).each(function(a){b(this).html(a+1+(parseInt(e.p.page,10)-1)*parseInt(e.p.rowNum,10))}),a._update_&&a._update_.apply(this,[c,d])},b("tbody:first",e).sortable(a),b("tbody:first",e).disableSelection())})},gridDnD:function(a){return this.each(function(){function e(){var a=b.data(c,"dnd");b("tr.jqgrow:not(.ui-draggable)",c).draggable(b.isFunction(a.drag)?a.drag.call(b(c),a):a.drag)}var c=this;if(c.grid&&!c.p.treeGrid&&b.fn.draggable&&b.fn.droppable)if(void 0===b("#jqgrid_dnd")[0]&&b("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>"),"string"==typeof a&&"updateDnD"==a&&c.p.jqgdnd===!0)e();else if(a=b.extend({drag:function(a){return b.extend({start:function(d,e){if(c.p.subGrid){var f=b(e.helper).attr("id");try{b(c).jqGrid("collapseSubGridRow",f)}catch(j){}}for(f=0;f<b.data(c,"dnd").connectWith.length;f++)"0"==b(b.data(c,"dnd").connectWith[f]).jqGrid("getGridParam","reccount")&&b(b.data(c,"dnd").connectWith[f]).jqGrid("addRowData","jqg_empty_row",{});e.helper.addClass("ui-state-highlight"),b("td",e.helper).each(function(b){this.style.width=c.grid.headers[b].width+"px"}),a.onstart&&b.isFunction(a.onstart)&&a.onstart.call(b(c),d,e)},stop:function(d,e){if(e.helper.dropped&&!a.dragcopy){var f=b(e.helper).attr("id");void 0===f&&(f=b(this).attr("id")),b(c).jqGrid("delRowData",f)}for(f=0;f<b.data(c,"dnd").connectWith.length;f++)b(b.data(c,"dnd").connectWith[f]).jqGrid("delRowData","jqg_empty_row");a.onstop&&b.isFunction(a.onstop)&&a.onstop.call(b(c),d,e)}},a.drag_opts||{})},drop:function(a){return b.extend({accept:function(a){return b(a).hasClass("jqgrow")?(a=b(a).closest("table.ui-jqgrid-btable"),a.length>0&&void 0!==b.data(a[0],"dnd")?(a=b.data(a[0],"dnd").connectWith,-1!=b.inArray("#"+b.jgrid.jqID(this.id),a)?!0:!1):!1):a},drop:function(d,e){if(b(e.draggable).hasClass("jqgrow")){var f=b(e.draggable).attr("id"),f=e.draggable.parent().parent().jqGrid("getRowData",f);if(!a.dropbyname){var h,j=0,i={},n=b("#"+b.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(var o in f)h=n[j].name,"cb"==h||"rn"==h||"subgrid"==h||f.hasOwnProperty(o)&&n[j]&&(i[h]=f[o]),j++;f=i}catch(m){}}if(e.helper.dropped=!0,a.beforedrop&&b.isFunction(a.beforedrop)&&(h=a.beforedrop.call(this,d,e,f,b("#"+b.jgrid.jqID(c.p.id)),b(this)),"undefined"!=typeof h&&null!==h&&"object"==typeof h&&(f=h)),e.helper.dropped){var l;a.autoid&&(b.isFunction(a.autoid)?l=a.autoid.call(this,f):(l=Math.ceil(1e3*Math.random()),l=a.autoidprefix+l)),b("#"+b.jgrid.jqID(this.id)).jqGrid("addRowData",l,f,a.droppos)}a.ondrop&&b.isFunction(a.ondrop)&&a.ondrop.call(this,d,e,f)}}},a.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},a||{}),a.connectWith){a.connectWith=a.connectWith.split(","),a.connectWith=b.map(a.connectWith,function(a){return b.trim(a)}),b.data(c,"dnd",a),"0"!=c.p.reccount&&!c.p.jqgdnd&&e(),c.p.jqgdnd=!0;for(var d=0;d<a.connectWith.length;d++)b(a.connectWith[d]).droppable(b.isFunction(a.drop)?a.drop.call(b(c),a):a.drop)}})},gridResize:function(a){return this.each(function(){var e=this,c=b.jgrid.jqID(e.p.id);e.grid&&b.fn.resizable&&(a=b.extend({},a||{}),a.alsoResize?(a._alsoResize_=a.alsoResize,delete a.alsoResize):a._alsoResize_=!1,a.stop&&b.isFunction(a.stop)?(a._stop_=a.stop,delete a.stop):a._stop_=!1,a.stop=function(d,g){b(e).jqGrid("setGridParam",{height:b("#gview_"+c+" .ui-jqgrid-bdiv").height()}),b(e).jqGrid("setGridWidth",g.size.width,a.shrinkToFit),a._stop_&&a._stop_.call(e,d,g)},a.alsoResize=a._alsoResize_?eval("("+("{'#gview_"+c+" .ui-jqgrid-bdiv':true,'"+a._alsoResize_+"':true}")+")"):b(".ui-jqgrid-bdiv","#gview_"+c),delete a._alsoResize_,b("#gbox_"+c).resizable(a))})}})}(jQuery),function($){"use strict";$.jgrid=$.jgrid||{},$.extend($.jgrid,{version:"4.4.1",htmlDecode:function(value){return value&&("&nbsp;"==value||"&#160;"==value||1===value.length&&160===value.charCodeAt(0))?"":value?String(value).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):value},htmlEncode:function(value){return value?String(value).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):value},format:function(format){var args=$.makeArray(arguments).slice(1);return void 0===format&&(format=""),format.replace(/\{(\d+)\}/g,function(m,i){return args[i]})},getCellIndex:function(cell){var c=$(cell);return c.is("tr")?-1:(c=(c.is("td")||c.is("th")?c:c.closest("td,th"))[0],$.browser.msie?$.inArray(c,c.parentNode.cells):c.cellIndex)},stripHtml:function(v){v+="";var regexp=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return v?(v=v.replace(regexp,""),v&&"&nbsp;"!==v&&"&#160;"!==v?v.replace(/\"/g,"'"):""):v},stripPref:function(pref,id){var obj=$.type(pref);return("string"==obj||"number"==obj)&&(pref=String(pref),id=""!==pref?String(id).replace(String(pref),""):id),id},stringToDoc:function(xmlString){var xmlDoc;if("string"!=typeof xmlString)return xmlString;try{var parser=new DOMParser;xmlDoc=parser.parseFromString(xmlString,"text/xml")}catch(e){xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async=!1,xmlDoc.loadXML(xmlString)}return xmlDoc&&xmlDoc.documentElement&&"parsererror"!=xmlDoc.documentElement.tagName?xmlDoc:null},parse:function(jsonString){var js=jsonString;return"while(1);"==js.substr(0,9)&&(js=js.substr(9)),"/*"==js.substr(0,2)&&(js=js.substr(2,js.length-4)),js||(js="{}"),$.jgrid.useJSON===!0&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(js):eval("("+js+")")},parseDate:function(format,date){var k,hl,dM,tsp={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},regdate=/[\\\/:_;.,\t\T\s-]/;if(date&&null!==date&&void 0!==date){date=$.trim(date),date=date.split(regdate),void 0!==$.jgrid.formatter.date.masks[format]&&(format=$.jgrid.formatter.date.masks[format]),format=format.split(regdate);var dfmt=$.jgrid.formatter.date.monthNames,afmt=$.jgrid.formatter.date.AmPm,h12to24=function(ampm,h){return 0===ampm?12===h&&(h=0):12!==h&&(h+=12),h};for(k=0,hl=format.length;hl>k;k++)"M"==format[k]&&(dM=$.inArray(date[k],dfmt),-1!==dM&&12>dM&&(date[k]=dM+1,tsp.m=date[k])),"F"==format[k]&&(dM=$.inArray(date[k],dfmt),-1!==dM&&dM>11&&(date[k]=dM+1-12,tsp.m=date[k])),"a"==format[k]&&(dM=$.inArray(date[k],afmt),-1!==dM&&2>dM&&date[k]==afmt[dM]&&(date[k]=dM,tsp.h=h12to24(date[k],tsp.h))),"A"==format[k]&&(dM=$.inArray(date[k],afmt),-1!==dM&&dM>1&&date[k]==afmt[dM]&&(date[k]=dM-2,tsp.h=h12to24(date[k],tsp.h))),"g"===format[k]&&(tsp.h=parseInt(date[k],10)),void 0!==date[k]&&(tsp[format[k].toLowerCase()]=parseInt(date[k],10));tsp.m=parseInt(tsp.m,10)-1;var ty=tsp.y;ty>=70&&99>=ty?tsp.y=1900+tsp.y:ty>=0&&69>=ty&&(tsp.y=2e3+tsp.y),void 0!==tsp.j&&(tsp.d=tsp.j),void 0!==tsp.n&&(tsp.m=parseInt(tsp.n,10)-1)}return new Date(tsp.y,tsp.m,tsp.d,tsp.h,tsp.i,tsp.s,tsp.u)},jqID:function(sid){return String(sid).replace(/[!"#$%&'()*+,.\/:;<=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(prefix){return(prefix?prefix:$.jgrid.uidPref)+$.jgrid.guid++},getAccessor:function(obj,expr){var ret,p,i,prm=[];if("function"==typeof expr)return expr(obj);if(ret=obj[expr],void 0===ret)try{if("string"==typeof expr&&(prm=expr.split(".")),i=prm.length)for(ret=obj;ret&&i--;)p=prm.shift(),ret=ret[p]}catch(e){}return ret},getXmlData:function(obj,expr,returnObj){var ret,m="string"==typeof expr?expr.match(/^(.*)\[(\w+)\]$/):null;return"function"==typeof expr?expr(obj):m&&m[2]?m[1]?$(m[1],obj).attr(m[2]):$(obj).attr(m[2]):(ret=$(expr,obj),returnObj?ret:ret.length>0?$(ret).text():void 0)},cellWidth:function(){var $testDiv=$("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;'></td></tr></table></div>"),testCell=$testDiv.appendTo("body").find("td").width();return $testDiv.remove(),5!==testCell},ajaxOptions:{},from:function(source){var QueryObject=function(d,q){"string"==typeof d&&(d=$.data(d));var self=this,_data=d,_usecase=!0,_trim=!1,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=!1,_queuedOperator="",_sorting=[],_useProperties=!0;if("object"!=typeof d||!d.push)throw"data provides is not an array";return d.length>0&&(_useProperties="object"!=typeof d[0]?!1:!0),this._hasData=function(){return null===_data?!1:0===_data.length?!1:!0},this._getStr=function(s){var phrase=[];return _trim&&phrase.push("jQuery.trim("),phrase.push("String("+s+")"),_trim&&phrase.push(")"),_usecase||phrase.push(".toLowerCase()"),phrase.join("")},this._strComp=function(val){return"string"==typeof val?".toString()":""},this._group=function(f,u){return{field:f.toString(),unique:u,items:[]}},this._toStr=function(phrase){return _trim&&(phrase=$.trim(phrase)),phrase=phrase.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),_usecase?phrase:phrase.toLowerCase()
},this._funcLoop=function(func){var results=[];return $.each(_data,function(i,v){results.push(func(v))}),results},this._append=function(s){var i;for(null===_query?_query="":_query+=""===_queuedOperator?" && ":_queuedOperator,i=0;_orDepth>i;i++)_query+="(";_negate&&(_query+="!"),_query+="("+s+")",_negate=!1,_queuedOperator="",_orDepth=0},this._setCommand=function(f,c){_lastCommand=f,_lastField=c},this._resetNegate=function(){_negate=!1},this._repeatCommand=function(f,v){return null===_lastCommand?self:null!==f&&null!==v?_lastCommand(f,v):null===_lastField?_lastCommand(f):_useProperties?_lastCommand(_lastField,f):_lastCommand(f)},this._equals=function(a,b){return 0===self._compare(a,b,1)},this._compare=function(a,b,d){var toString=Object.prototype.toString;return void 0===d&&(d=1),void 0===a&&(a=null),void 0===b&&(b=null),null===a&&null===b?0:null===a&&null!==b?1:null!==a&&null===b?-1:"[object Date]"===toString.call(a)&&"[object Date]"===toString.call(b)?b>a?-d:a>b?d:0:(_usecase||"number"==typeof a||"number"==typeof b||(a=String(a).toLowerCase(),b=String(b).toLowerCase()),b>a?-d:a>b?d:0)},this._performSort=function(){0!==_sorting.length&&(_data=self._doSort(_data,0))},this._doSort=function(d,q){var by=_sorting[q].by,dir=_sorting[q].dir,type=_sorting[q].type,dfmt=_sorting[q].datefmt;if(q==_sorting.length-1)return self._getOrder(d,by,dir,type,dfmt);q++;for(var values=self._getGroup(d,by,dir,type,dfmt),results=[],i=0;i<values.length;i++)for(var sorted=self._doSort(values[i].items,q),j=0;j<sorted.length;j++)results.push(sorted[j]);return results},this._getOrder=function(data,by,dir,type,dfmt){var i,ab,j,findSortKey,sortData=[],_sortData=[],newDir="a"==dir?1:-1;void 0===type&&(type="text"),findSortKey="float"==type||"number"==type||"currency"==type||"numeric"==type?function($cell){var key=parseFloat(String($cell).replace(_stripNum,""));return isNaN(key)?0:key}:"int"==type||"integer"==type?function($cell){return $cell?parseFloat(String($cell).replace(_stripNum,"")):0}:"date"==type||"datetime"==type?function($cell){return $.jgrid.parseDate(dfmt,$cell).getTime()}:$.isFunction(type)?type:function($cell){return $cell||($cell=""),$.trim(String($cell).toUpperCase())},$.each(data,function(i,v){ab=""!==by?$.jgrid.getAccessor(v,by):v,void 0===ab&&(ab=""),ab=findSortKey(ab,v),_sortData.push({vSort:ab,index:i})}),_sortData.sort(function(a,b){return a=a.vSort,b=b.vSort,self._compare(a,b,newDir)}),j=0;for(var nrec=data.length;nrec>j;)i=_sortData[j].index,sortData.push(data[i]),j++;return sortData},this._getGroup=function(data,by,dir,type,dfmt){var val,results=[],group=null,last=null;return $.each(self._getOrder(data,by,dir,type,dfmt),function(i,v){val=$.jgrid.getAccessor(v,by),void 0===val&&(val=""),self._equals(last,val)||(last=val,null!==group&&results.push(group),group=self._group(by,val)),group.items.push(v)}),null!==group&&results.push(group),results},this.ignoreCase=function(){return _usecase=!1,self},this.useCase=function(){return _usecase=!0,self},this.trim=function(){return _trim=!0,self},this.noTrim=function(){return _trim=!1,self},this.execute=function(){var match=_query,results=[];return null===match?self:($.each(_data,function(){eval(match)&&results.push(this)}),_data=results,self)},this.data=function(){return _data},this.select=function(f){if(self._performSort(),!self._hasData())return[];if(self.execute(),$.isFunction(f)){var results=[];return $.each(_data,function(i,v){results.push(f(v))}),results}return _data},this.hasMatch=function(){return self._hasData()?(self.execute(),_data.length>0):!1},this.andNot=function(f,v,x){return _negate=!_negate,self.and(f,v,x)},this.orNot=function(f,v,x){return _negate=!_negate,self.or(f,v,x)},this.not=function(f,v,x){return self.andNot(f,v,x)},this.and=function(f,v,x){return _queuedOperator=" && ",void 0===f?self:self._repeatCommand(f,v,x)},this.or=function(f,v,x){return _queuedOperator=" || ",void 0===f?self:self._repeatCommand(f,v,x)},this.orBegin=function(){return _orDepth++,self},this.orEnd=function(){return null!==_query&&(_query+=")"),self},this.isNot=function(f){return _negate=!_negate,self.is(f)},this.is=function(f){return self._append("this."+f),self._resetNegate(),self},this._compareValues=function(func,f,v,how,t){var fld;fld=_useProperties?"jQuery.jgrid.getAccessor(this,'"+f+"')":"this",void 0===v&&(v=null);var val=v,swst=void 0===t.stype?"text":t.stype;if(null!==v)switch(swst){case"int":case"integer":val=isNaN(Number(val))||""===val?"0":val,fld="parseInt("+fld+",10)",val="parseInt("+val+",10)";break;case"float":case"number":case"numeric":val=String(val).replace(_stripNum,""),val=isNaN(Number(val))||""===val?"0":val,fld="parseFloat("+fld+")",val="parseFloat("+val+")";break;case"date":case"datetime":val=String($.jgrid.parseDate(t.newfmt||"Y-m-d",val).getTime()),fld='jQuery.jgrid.parseDate("'+t.srcfmt+'",'+fld+").getTime()";break;default:fld=self._getStr(fld),val=self._getStr('"'+self._toStr(val)+'"')}return self._append(fld+" "+how+" "+val),self._setCommand(func,f),self._resetNegate(),self},this.equals=function(f,v,t){return self._compareValues(self.equals,f,v,"==",t)},this.notEquals=function(f,v,t){return self._compareValues(self.equals,f,v,"!==",t)},this.isNull=function(f,v,t){return self._compareValues(self.equals,f,null,"===",t)},this.greater=function(f,v,t){return self._compareValues(self.greater,f,v,">",t)},this.less=function(f,v,t){return self._compareValues(self.less,f,v,"<",t)},this.greaterOrEquals=function(f,v,t){return self._compareValues(self.greaterOrEquals,f,v,">=",t)},this.lessOrEquals=function(f,v,t){return self._compareValues(self.lessOrEquals,f,v,"<=",t)},this.startsWith=function(f,v){var val=void 0===v||null===v?f:v,length=_trim?$.trim(val.toString()).length:val.toString().length;return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+f+"')")+".substr(0,"+length+") == "+self._getStr('"'+self._toStr(v)+'"')):(length=_trim?$.trim(v.toString()).length:v.toString().length,self._append(self._getStr("this")+".substr(0,"+length+") == "+self._getStr('"'+self._toStr(f)+'"'))),self._setCommand(self.startsWith,f),self._resetNegate(),self},this.endsWith=function(f,v){var val=void 0===v||null===v?f:v,length=_trim?$.trim(val.toString()).length:val.toString().length;return self._append(_useProperties?self._getStr("jQuery.jgrid.getAccessor(this,'"+f+"')")+".substr("+self._getStr("jQuery.jgrid.getAccessor(this,'"+f+"')")+".length-"+length+","+length+') == "'+self._toStr(v)+'"':self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(f)+'".length,"'+self._toStr(f)+'".length) == "'+self._toStr(f)+'"'),self._setCommand(self.endsWith,f),self._resetNegate(),self},this.contains=function(f,v){return self._append(_useProperties?self._getStr("jQuery.jgrid.getAccessor(this,'"+f+"')")+'.indexOf("'+self._toStr(v)+'",0) > -1':self._getStr("this")+'.indexOf("'+self._toStr(f)+'",0) > -1'),self._setCommand(self.contains,f),self._resetNegate(),self},this.groupBy=function(by,dir,type,datefmt){return self._hasData()?self._getGroup(_data,by,dir,type,datefmt):null},this.orderBy=function(by,dir,stype,dfmt){return dir=void 0===dir||null===dir?"a":$.trim(dir.toString().toLowerCase()),(null===stype||void 0===stype)&&(stype="text"),(null===dfmt||void 0===dfmt)&&(dfmt="Y-m-d"),("desc"==dir||"descending"==dir)&&(dir="d"),("asc"==dir||"ascending"==dir)&&(dir="a"),_sorting.push({by:by,dir:dir,type:stype,datefmt:dfmt}),self},self};return new QueryObject(source,null)},extend:function(methods){$.extend($.fn.jqGrid,methods),this.no_legacy_api||$.fn.extend(methods)}}),$.fn.jqGrid=function(pin){if("string"==typeof pin){var fn=$.jgrid.getAccessor($.fn.jqGrid,pin);if(!fn)throw"jqGrid - No such method: "+pin;var args=$.makeArray(arguments).slice(1);return fn.apply(this,args)}return this.each(function(){if(!this.grid){var p=$.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus"},ignoreCase:!1,cmTemplate:{},idPrefix:""},$.jgrid.defaults,pin||{}),ts=this,grid={headers:[],cols:[],footers:[],dragStart:function(i,x,y){this.resizing={idx:i,startX:x.clientX,sOL:y[0]},this.hDiv.style.cursor="col-resize",this.curGbox=$("#rs_m"+$.jgrid.jqID(p.id),"#gbox_"+$.jgrid.jqID(p.id)),this.curGbox.css({display:"block",left:y[0],top:y[1],height:y[2]}),$(ts).triggerHandler("jqGridResizeStart",[x,i]),$.isFunction(p.resizeStart)&&p.resizeStart.call(this,x,i),document.onselectstart=function(){return!1}},dragMove:function(x){if(this.resizing){var hn,nWn,diff=x.clientX-this.resizing.startX,h=this.headers[this.resizing.idx],newWidth="ltr"===p.direction?h.width+diff:h.width-diff;newWidth>33&&(this.curGbox.css({left:this.resizing.sOL+diff}),p.forceFit===!0?(hn=this.headers[this.resizing.idx+p.nv],nWn="ltr"===p.direction?hn.width-diff:hn.width+diff,nWn>33&&(h.newWidth=newWidth,hn.newWidth=nWn)):(this.newWidth="ltr"===p.direction?p.tblwidth+diff:p.tblwidth-diff,h.newWidth=newWidth))}},dragEnd:function(){if(this.hDiv.style.cursor="default",this.resizing){var idx=this.resizing.idx,nw=this.headers[idx].newWidth||this.headers[idx].width;nw=parseInt(nw,10),this.resizing=!1,$("#rs_m"+$.jgrid.jqID(p.id)).css("display","none"),p.colModel[idx].width=nw,this.headers[idx].width=nw,this.headers[idx].el.style.width=nw+"px",this.cols[idx].style.width=nw+"px",this.footers.length>0&&(this.footers[idx].style.width=nw+"px"),p.forceFit===!0?(nw=this.headers[idx+p.nv].newWidth||this.headers[idx+p.nv].width,this.headers[idx+p.nv].width=nw,this.headers[idx+p.nv].el.style.width=nw+"px",this.cols[idx+p.nv].style.width=nw+"px",this.footers.length>0&&(this.footers[idx+p.nv].style.width=nw+"px"),p.colModel[idx+p.nv].width=nw):(p.tblwidth=this.newWidth||p.tblwidth,$("table:first",this.bDiv).css("width",p.tblwidth+"px"),$("table:first",this.hDiv).css("width",p.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,p.footerrow&&($("table:first",this.sDiv).css("width",p.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft)),$(ts).triggerHandler("jqGridResizeStop",[nw,idx]),$.isFunction(p.resizeStop)&&p.resizeStop.call(this,nw,idx)}this.curGbox=null,document.onselectstart=function(){return!0}},populateVisible:function(){grid.timer&&clearTimeout(grid.timer),grid.timer=null;var dh=$(grid.bDiv).height();if(dh){var rows,rh,table=$("table:first",grid.bDiv);if(table[0].rows.length)try{rows=table[0].rows[1],rh=rows?$(rows).outerHeight()||grid.prevRowHeight:grid.prevRowHeight}catch(pv){rh=grid.prevRowHeight}if(rh){grid.prevRowHeight=rh;var page,npage,empty,rn=p.rowNum,scrollTop=grid.scrollTop=grid.bDiv.scrollTop,ttop=Math.round(table.position().top)-scrollTop,tbot=ttop+table.height(),div=rh*rn;if(dh>tbot&&0>=ttop&&(void 0===p.lastpage||parseInt((tbot+scrollTop+div-1)/div,10)<=p.lastpage)&&(npage=parseInt((dh-tbot+div-1)/div,10),tbot>=0||2>npage||p.scroll===!0?(page=Math.round((tbot+scrollTop)/div)+1,ttop=-1):ttop=1),ttop>0&&(page=parseInt(scrollTop/div,10)+1,npage=parseInt((scrollTop+dh)/div,10)+2-page,empty=!0),npage){if(p.lastpage&&page>p.lastpage||1==p.lastpage||page===p.page&&page===p.lastpage)return;grid.hDiv.loading?grid.timer=setTimeout(grid.populateVisible,p.scrollTimeout):(p.page=page,empty&&(grid.selectionPreserver(table[0]),grid.emptyRows.call(table[0],!1,!1)),grid.populate(npage))}}}},scrollGrid:function(e){if(p.scroll){var scrollTop=grid.bDiv.scrollTop;void 0===grid.scrollTop&&(grid.scrollTop=0),scrollTop!=grid.scrollTop&&(grid.scrollTop=scrollTop,grid.timer&&clearTimeout(grid.timer),grid.timer=setTimeout(grid.populateVisible,p.scrollTimeout))}grid.hDiv.scrollLeft=grid.bDiv.scrollLeft,p.footerrow&&(grid.sDiv.scrollLeft=grid.bDiv.scrollLeft),e&&e.stopPropagation()},selectionPreserver:function(ts){var p=ts.p,sr=p.selrow,sra=p.selarrrow?$.makeArray(p.selarrrow):null,left=ts.grid.bDiv.scrollLeft,restoreSelection=function(){var i;if(p.selrow=null,p.selarrrow=[],p.multiselect&&sra&&sra.length>0)for(i=0;i<sra.length;i++)sra[i]!=sr&&$(ts).jqGrid("setSelection",sra[i],!1,null);sr&&$(ts).jqGrid("setSelection",sr,!1,null),ts.grid.bDiv.scrollLeft=left,$(ts).unbind(".selectionPreserver",restoreSelection)};$(ts).bind("jqGridGridComplete.selectionPreserver",restoreSelection)}};if("TABLE"!=this.tagName.toUpperCase())return void alert("Element is not a table");if(void 0!==document.documentMode&&document.documentMode<=5)return void alert("Grid can not be used in this ('quirks') mode!");$(this).empty().attr("tabindex","1"),this.p=p,this.p.useProp=!!$.fn.prop;var i,dir;if(0===this.p.colNames.length)for(i=0;i<this.p.colModel.length;i++)this.p.colNames[i]=this.p.colModel[i].label||this.p.colModel[i].name;if(this.p.colNames.length!==this.p.colModel.length)return void alert($.jgrid.errors.model);var ii,gv=$("<div class='ui-jqgrid-view'></div>"),isMSIE=$.browser.msie?!0:!1;ts.p.direction=$.trim(ts.p.direction.toLowerCase()),-1==$.inArray(ts.p.direction,["ltr","rtl"])&&(ts.p.direction="ltr"),dir=ts.p.direction,$(gv).insertBefore(this),$(this).appendTo(gv).removeClass("scroll");var eg=$("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");$(eg).insertBefore(gv).attr({id:"gbox_"+this.id,dir:dir}),$(gv).appendTo(eg).attr("id","gview_"+this.id),ii=isMSIE&&$.browser.version<=6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"",$("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").append(ii).insertBefore(gv),$("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(gv),$(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var sortkeys=["shiftKey","altKey","ctrlKey"],intNum=function(val,defval){return val=parseInt(val,10),isNaN(val)?defval?defval:0:val},formatCol=function(pos,rowInd,tv,rawObject,rowId,rdata){var celp,cm=ts.p.colModel[pos],ral=cm.align,result='style="',clas=cm.classes,nm=cm.name,acp=[];return ral&&(result+="text-align:"+ral+";"),cm.hidden===!0&&(result+="display:none;"),0===rowInd?result+="width: "+grid.headers[pos].width+"px;":cm.cellattr&&$.isFunction(cm.cellattr)&&(celp=cm.cellattr.call(ts,rowId,tv,rawObject,cm,rdata),celp&&"string"==typeof celp&&(celp=celp.replace(/style/i,"style").replace(/title/i,"title"),celp.indexOf("title")>-1&&(cm.title=!1),celp.indexOf("class")>-1&&(clas=void 0),acp=celp.split("style"),2===acp.length?(acp[1]=$.trim(acp[1].replace("=","")),(0===acp[1].indexOf("'")||0===acp[1].indexOf('"'))&&(acp[1]=acp[1].substring(1)),result+=acp[1].replace(/'/gi,'"')):result+='"')),acp.length||(acp[0]="",result+='"'),result+=(void 0!==clas?' class="'+clas+'"':"")+(cm.title&&tv?' title="'+$.jgrid.stripHtml(tv)+'"':""),result+=' aria-describedby="'+ts.p.id+"_"+nm+'"',result+acp[0]},cellVal=function(val){return void 0===val||null===val||""===val?"&#160;":ts.p.autoencode?$.jgrid.htmlEncode(val):val+""},formatter=function(rowId,cellval,colpos,rwdat,_act){var v,cm=ts.p.colModel[colpos];if("undefined"!=typeof cm.formatter){var opts={rowId:rowId,colModel:cm,gid:ts.p.id,pos:colpos};v=$.isFunction(cm.formatter)?cm.formatter.call(ts,cellval,opts,rwdat,_act):$.fmatter?$.fn.fmatter.call(ts,cm.formatter,cellval,opts,rwdat,_act):cellVal(cellval)}else v=cellVal(cellval);return v},addCell=function(rowId,cell,pos,irow,srvr){var v,prp;return v=formatter(rowId,cell,pos,srvr,"add"),prp=formatCol(pos,irow,v,srvr,rowId,!0),'<td role="gridcell" '+prp+">"+v+"</td>"},addMulti=function(rowid,pos,irow,checked){var v='<input role="checkbox" type="checkbox" id="jqg_'+ts.p.id+"_"+rowid+'" class="cbox" name="jqg_'+ts.p.id+"_"+rowid+'"'+(checked?'checked="checked"':"")+"/>",prp=formatCol(pos,irow,"",null,rowid,!0);return'<td role="gridcell" '+prp+">"+v+"</td>"},addRowNum=function(pos,irow,pG,rN){var v=(parseInt(pG,10)-1)*parseInt(rN,10)+1+irow,prp=formatCol(pos,irow,v,null,irow,!0);return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+prp+">"+v+"</td>"},reader=function(datatype){var field,i,f=[],j=0;for(i=0;i<ts.p.colModel.length;i++)field=ts.p.colModel[i],"cb"!==field.name&&"subgrid"!==field.name&&"rn"!==field.name&&(f[j]="local"==datatype?field.name:"xml"==datatype||"xmlstring"===datatype?field.xmlmap||field.name:field.jsonmap||field.name,j++);return f},orderedCols=function(offset){var order=ts.p.remapColumns;return order&&order.length||(order=$.map(ts.p.colModel,function(v,i){return i})),offset&&(order=$.map(order,function(v){return offset>v?null:v-offset})),order},emptyRows=function(scroll,locdata){var firstrow;this.p.deepempty?$(this.rows).slice(1).remove():(firstrow=this.rows.length>0?this.rows[0]:null,$(this.firstChild).empty().append(firstrow)),scroll&&this.p.scroll&&($(this.grid.bDiv.firstChild).css({height:"auto"}),$(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0)),locdata===!0&&this.p.treeGrid&&(this.p.data=[],this.p._index={})},refreshIndex=function(){var idname,i,val,datalen=ts.p.data.length,ni=ts.p.rownumbers===!0?1:0,gi=ts.p.multiselect===!0?1:0,si=ts.p.subGrid===!0?1:0;for(idname=ts.p.keyIndex===!1||ts.p.loadonce===!0?ts.p.localReader.id:ts.p.colModel[ts.p.keyIndex+gi+si+ni].name,i=0;datalen>i;i++)val=$.jgrid.getAccessor(ts.p.data[i],idname),ts.p._index[val]=i},constructTr=function(id,hide,altClass,rd,cur,selected){var attrName,tabindex="-1",restAttr="",style=hide?"display:none;":"",classes="ui-widget-content jqgrow ui-row-"+ts.p.direction+altClass+(selected?" ui-state-highlight":""),rowAttrObj=$.isFunction(ts.p.rowattr)?ts.p.rowattr.call(ts,rd,cur):{};if(!$.isEmptyObject(rowAttrObj)){rowAttrObj.hasOwnProperty("id")&&(id=rowAttrObj.id,delete rowAttrObj.id),rowAttrObj.hasOwnProperty("tabindex")&&(tabindex=rowAttrObj.tabindex,delete rowAttrObj.tabindex),rowAttrObj.hasOwnProperty("style")&&(style+=rowAttrObj.style,delete rowAttrObj.style),rowAttrObj.hasOwnProperty("class")&&(classes+=" "+rowAttrObj["class"],delete rowAttrObj["class"]);try{delete rowAttrObj.role}catch(ra){}for(attrName in rowAttrObj)rowAttrObj.hasOwnProperty(attrName)&&(restAttr+=" "+attrName+"="+rowAttrObj[attrName])}return'<tr role="row" id="'+id+'" tabindex="'+tabindex+'" class="'+classes+'"'+(""===style?"":' style="'+style+'"')+restAttr+">"},addXmlData=function(xml,t,rcnt,more,adjust){var startReq=new Date,locdata="local"!=ts.p.datatype&&ts.p.loadonce||"xmlstring"==ts.p.datatype,xmlid="_id_",xmlRd=ts.p.xmlReader,frd="local"==ts.p.datatype?"local":"xml";if(locdata&&(ts.p.data=[],ts.p._index={},ts.p.localReader.id=xmlid),ts.p.reccount=0,$.isXMLDoc(xml)){-1!==ts.p.treeANode||ts.p.scroll?rcnt=rcnt>1?rcnt:1:(emptyRows.call(ts,!1,!0),rcnt=1);var i,fpos,v,idn,getId,F,xmlr,rid,cn1,ir=0,gi=ts.p.multiselect===!0?1:0,si=ts.p.subGrid===!0?1:0,ni=ts.p.rownumbers===!0?1:0,f=[],rd={},rowData=[],cn=ts.p.altRows===!0?" "+ts.p.altclass:"";xmlRd.repeatitems||(f=reader(frd)),idn=ts.p.keyIndex===!1?$.isFunction(xmlRd.id)?xmlRd.id.call(ts,xml):xmlRd.id:ts.p.keyIndex,f.length>0&&!isNaN(idn)&&(ts.p.remapColumns&&ts.p.remapColumns.length&&(idn=$.inArray(idn,ts.p.remapColumns)),idn=f[idn]),getId=-1===(idn+"").indexOf("[")?f.length?function(trow,k){return $(idn,trow).text()||k}:function(trow,k){return $(xmlRd.cell,trow).eq(idn).text()||k}:function(trow,k){return trow.getAttribute(idn.replace(/[\[\]]/g,""))||k},ts.p.userData={},ts.p.page=$.jgrid.getXmlData(xml,xmlRd.page)||ts.p.page||0,ts.p.lastpage=$.jgrid.getXmlData(xml,xmlRd.total),void 0===ts.p.lastpage&&(ts.p.lastpage=1),ts.p.records=$.jgrid.getXmlData(xml,xmlRd.records)||0,$.isFunction(xmlRd.userdata)?ts.p.userData=xmlRd.userdata.call(ts,xml)||{}:$.jgrid.getXmlData(xml,xmlRd.userdata,!0).each(function(){ts.p.userData[this.getAttribute("name")]=$(this).text()});var gxml=$.jgrid.getXmlData(xml,xmlRd.root,!0);gxml=$.jgrid.getXmlData(gxml,xmlRd.row,!0),gxml||(gxml=[]);var gl=gxml.length,j=0,grpdata=[],rn=parseInt(ts.p.rowNum,10);if(gl>0&&ts.p.page<=0&&(ts.p.page=1),gxml&&gl){var altr,br=ts.p.scroll?$.jgrid.randId():1;adjust&&(rn*=adjust+1);for(var afterInsRow=$.isFunction(ts.p.afterInsertRow),hiderow=ts.p.grouping&&ts.p.groupingView.groupCollapse===!0;gl>j;){xmlr=gxml[j],rid=getId(xmlr,br+j),rid=ts.p.idPrefix+rid,altr=0===rcnt?0:rcnt+1,cn1=(altr+j)%2==1?cn:"";var iStartTrTag=rowData.length;if(rowData.push(""),ni&&rowData.push(addRowNum(0,j,ts.p.page,ts.p.rowNum)),gi&&rowData.push(addMulti(rid,ni,j,!1)),si&&rowData.push($(ts).jqGrid("addSubGridCell",gi+ni,j+rcnt)),xmlRd.repeatitems){F||(F=orderedCols(gi+si+ni));var cells=$.jgrid.getXmlData(xmlr,xmlRd.cell,!0);$.each(F,function(k){var cell=cells[this];return cell?(v=cell.textContent||cell.text,rd[ts.p.colModel[k+gi+si+ni].name]=v,void rowData.push(addCell(rid,v,k+gi+si+ni,j+rcnt,xmlr))):!1})}else for(i=0;i<f.length;i++)v=$.jgrid.getXmlData(xmlr,f[i]),rd[ts.p.colModel[i+gi+si+ni].name]=v,rowData.push(addCell(rid,v,i+gi+si+ni,j+rcnt,xmlr));if(rowData[iStartTrTag]=constructTr(rid,hiderow,cn1,rd,xmlr,!1),rowData.push("</tr>"),ts.p.grouping&&(grpdata=$(ts).jqGrid("groupingPrepare",rowData,grpdata,rd,j),rowData=[]),(locdata||ts.p.treeGrid===!0)&&(rd[xmlid]=rid,ts.p.data.push(rd),ts.p._index[rid]=ts.p.data.length-1),ts.p.gridview===!1&&($("tbody:first",t).append(rowData.join("")),$(ts).triggerHandler("jqGridAfterInsertRow",[rid,rd,xmlr]),afterInsRow&&ts.p.afterInsertRow.call(ts,rid,rd,xmlr),rowData=[]),rd={},ir++,j++,ir==rn)break}}if(ts.p.gridview===!0&&(fpos=ts.p.treeANode>-1?ts.p.treeANode:0,ts.p.grouping?($(ts).jqGrid("groupingRender",grpdata,ts.p.colModel.length),grpdata=null):ts.p.treeGrid===!0&&fpos>0?$(ts.rows[fpos]).after(rowData.join("")):$("tbody:first",t).append(rowData.join(""))),ts.p.subGrid===!0)try{$(ts).jqGrid("addSubGrid",gi+ni)}catch(_){}if(ts.p.totaltime=new Date-startReq,ir>0&&0===ts.p.records&&(ts.p.records=gl),rowData=null,ts.p.treeGrid===!0)try{$(ts).jqGrid("setTreeNode",fpos+1,ir+fpos+1)}catch(e){}if(ts.p.treeGrid||ts.p.scroll||(ts.grid.bDiv.scrollTop=0),ts.p.reccount=ir,ts.p.treeANode=-1,ts.p.userDataOnFooter&&$(ts).jqGrid("footerData","set",ts.p.userData,!0),locdata&&(ts.p.records=gl,ts.p.lastpage=Math.ceil(gl/rn)),more||ts.updatepager(!1,!0),locdata)for(;gl>ir;){if(xmlr=gxml[ir],rid=getId(xmlr,ir+br),rid=ts.p.idPrefix+rid,xmlRd.repeatitems){F||(F=orderedCols(gi+si+ni));var cells2=$.jgrid.getXmlData(xmlr,xmlRd.cell,!0);$.each(F,function(k){var cell=cells2[this];return cell?(v=cell.textContent||cell.text,void(rd[ts.p.colModel[k+gi+si+ni].name]=v)):!1})}else for(i=0;i<f.length;i++)v=$.jgrid.getXmlData(xmlr,f[i]),rd[ts.p.colModel[i+gi+si+ni].name]=v;rd[xmlid]=rid,ts.p.data.push(rd),ts.p._index[rid]=ts.p.data.length-1,rd={},ir++}}},addJSONData=function(data,t,rcnt,more,adjust){var startReq=new Date;if(data){-1!==ts.p.treeANode||ts.p.scroll?rcnt=rcnt>1?rcnt:1:(emptyRows.call(ts,!1,!0),rcnt=1);var dReader,frd,locid="_id_",locdata="local"!=ts.p.datatype&&ts.p.loadonce||"jsonstring"==ts.p.datatype;locdata&&(ts.p.data=[],ts.p._index={},ts.p.localReader.id=locid),ts.p.reccount=0,"local"==ts.p.datatype?(dReader=ts.p.localReader,frd="local"):(dReader=ts.p.jsonReader,frd="json");var v,i,j,F,cur,len,drows,idn,fpos,idr,cn1,lp,ir=0,f=[],gi=ts.p.multiselect?1:0,si=ts.p.subGrid?1:0,ni=ts.p.rownumbers===!0?1:0,rd={},rowData=[],cn=ts.p.altRows===!0?" "+ts.p.altclass:"";ts.p.page=$.jgrid.getAccessor(data,dReader.page)||ts.p.page||0,lp=$.jgrid.getAccessor(data,dReader.total),ts.p.lastpage=void 0===lp?1:lp,ts.p.records=$.jgrid.getAccessor(data,dReader.records)||0,ts.p.userData=$.jgrid.getAccessor(data,dReader.userdata)||{},dReader.repeatitems||(F=f=reader(frd)),idn=ts.p.keyIndex===!1?$.isFunction(dReader.id)?dReader.id.call(ts,data):dReader.id:ts.p.keyIndex,f.length>0&&!isNaN(idn)&&(ts.p.remapColumns&&ts.p.remapColumns.length&&(idn=$.inArray(idn,ts.p.remapColumns)),idn=f[idn]),drows=$.jgrid.getAccessor(data,dReader.root),drows||(drows=[]),len=drows.length,i=0,len>0&&ts.p.page<=0&&(ts.p.page=1);var altr,selr,rn=parseInt(ts.p.rowNum,10),br=ts.p.scroll?$.jgrid.randId():1,selected=!1;adjust&&(rn*=adjust+1),"local"!==ts.p.datatype||ts.p.deselectAfterSort||(selected=!0);for(var afterInsRow=$.isFunction(ts.p.afterInsertRow),grpdata=[],hiderow=ts.p.grouping&&ts.p.groupingView.groupCollapse===!0;len>i;){if(cur=drows[i],idr=$.jgrid.getAccessor(cur,idn),void 0===idr&&(idr=br+i,0===f.length&&dReader.cell)){var ccur=$.jgrid.getAccessor(cur,dReader.cell);idr=void 0!==ccur?ccur[idn]||idr:idr,ccur=null}idr=ts.p.idPrefix+idr,altr=1===rcnt?0:rcnt,cn1=(altr+i)%2==1?cn:"",selected&&(selr=ts.p.multiselect?-1!==$.inArray(idr,ts.p.selarrrow):idr===ts.p.selrow);var iStartTrTag=rowData.length;for(rowData.push(""),ni&&rowData.push(addRowNum(0,i,ts.p.page,ts.p.rowNum)),gi&&rowData.push(addMulti(idr,ni,i,selr)),si&&rowData.push($(ts).jqGrid("addSubGridCell",gi+ni,i+rcnt)),dReader.repeatitems&&(dReader.cell&&(cur=$.jgrid.getAccessor(cur,dReader.cell)),F||(F=orderedCols(gi+si+ni))),j=0;j<F.length;j++)v=$.jgrid.getAccessor(cur,F[j]),rowData.push(addCell(idr,v,j+gi+si+ni,i+rcnt,cur)),rd[ts.p.colModel[j+gi+si+ni].name]=v;if(rowData[iStartTrTag]=constructTr(idr,hiderow,cn1,rd,cur,selr),rowData.push("</tr>"),ts.p.grouping&&(grpdata=$(ts).jqGrid("groupingPrepare",rowData,grpdata,rd,i),rowData=[]),(locdata||ts.p.treeGrid===!0)&&(rd[locid]=idr,ts.p.data.push(rd),ts.p._index[idr]=ts.p.data.length-1),ts.p.gridview===!1&&($("#"+$.jgrid.jqID(ts.p.id)+" tbody:first").append(rowData.join("")),$(ts).triggerHandler("jqGridAfterInsertRow",[idr,rd,cur]),afterInsRow&&ts.p.afterInsertRow.call(ts,idr,rd,cur),rowData=[]),rd={},ir++,i++,ir==rn)break}if(ts.p.gridview===!0&&(fpos=ts.p.treeANode>-1?ts.p.treeANode:0,ts.p.grouping?($(ts).jqGrid("groupingRender",grpdata,ts.p.colModel.length),grpdata=null):ts.p.treeGrid===!0&&fpos>0?$(ts.rows[fpos]).after(rowData.join("")):$("#"+$.jgrid.jqID(ts.p.id)+" tbody:first").append(rowData.join(""))),ts.p.subGrid===!0)try{$(ts).jqGrid("addSubGrid",gi+ni)}catch(_){}if(ts.p.totaltime=new Date-startReq,ir>0&&0===ts.p.records&&(ts.p.records=len),rowData=null,ts.p.treeGrid===!0)try{$(ts).jqGrid("setTreeNode",fpos+1,ir+fpos+1)}catch(e){}if(ts.p.treeGrid||ts.p.scroll||(ts.grid.bDiv.scrollTop=0),ts.p.reccount=ir,ts.p.treeANode=-1,ts.p.userDataOnFooter&&$(ts).jqGrid("footerData","set",ts.p.userData,!0),locdata&&(ts.p.records=len,ts.p.lastpage=Math.ceil(len/rn)),more||ts.updatepager(!1,!0),locdata)for(;len>ir&&drows[ir];){if(cur=drows[ir],idr=$.jgrid.getAccessor(cur,idn),void 0===idr&&(idr=br+ir,0===f.length&&dReader.cell)){var ccur2=$.jgrid.getAccessor(cur,dReader.cell);idr=ccur2[idn]||idr,ccur2=null}if(cur){for(idr=ts.p.idPrefix+idr,dReader.repeatitems&&(dReader.cell&&(cur=$.jgrid.getAccessor(cur,dReader.cell)),F||(F=orderedCols(gi+si+ni))),j=0;j<F.length;j++)v=$.jgrid.getAccessor(cur,F[j]),rd[ts.p.colModel[j+gi+si+ni].name]=v;rd[locid]=idr,ts.p.data.push(rd),ts.p._index[idr]=ts.p.data.length-1,rd={}}ir++}}},addLocalData=function(){function tojLinq(group){var index,gor,ror,opr,rule,s=0;if(void 0!==group.groups){for(gor=group.groups.length&&"OR"===group.groupOp.toString().toUpperCase(),gor&&query.orBegin(),index=0;index<group.groups.length;index++){s>0&&gor&&query.or();try{tojLinq(group.groups[index])}catch(e){alert(e)}s++}gor&&query.orEnd()}if(void 0!==group.rules){if(s>0){var result=query.select();query=$.jgrid.from(result),ts.p.ignoreCase&&(query=query.ignoreCase())}try{for(ror=group.rules.length&&"OR"===group.groupOp.toString().toUpperCase(),ror&&query.orBegin(),index=0;index<group.rules.length;index++)rule=group.rules[index],opr=group.groupOp.toString().toUpperCase(),compareFnMap[rule.op]&&rule.field&&(s>0&&opr&&"OR"===opr&&(query=query.or()),query=compareFnMap[rule.op](query,opr)(rule.field,rule.data,cmtypes[rule.field])),s++;ror&&query.orEnd()}catch(g){alert(g)}}}var st,srcformat,sorttype,newformat,fndsort=!1,cmtypes={},grtypes=[],grindexes=[];if($.isArray(ts.p.data)){var lengrp,gin,grpview=ts.p.grouping?ts.p.groupingView:!1;if($.each(ts.p.colModel,function(){if(sorttype=this.sorttype||"text","date"==sorttype||"datetime"==sorttype?(this.formatter&&"string"==typeof this.formatter&&"date"==this.formatter?(srcformat=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:$.jgrid.formatter.date.srcformat,newformat=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:$.jgrid.formatter.date.newformat):srcformat=newformat=this.datefmt||"Y-m-d",cmtypes[this.name]={stype:sorttype,srcfmt:srcformat,newfmt:newformat}):cmtypes[this.name]={stype:sorttype,srcfmt:"",newfmt:""},ts.p.grouping)for(gin=0,lengrp=grpview.groupField.length;lengrp>gin;gin++)if(this.name==grpview.groupField[gin]){var grindex=this.name;"undefined"!=typeof this.index&&(grindex=this.index),grtypes[gin]=cmtypes[grindex],grindexes[gin]=grindex}fndsort||this.index!=ts.p.sortname&&this.name!=ts.p.sortname||(st=this.name,fndsort=!0)}),ts.p.treeGrid)return void $(ts).jqGrid("SortTree",st,ts.p.sortorder,cmtypes[st].stype,cmtypes[st].srcfmt);var compareFnMap={eq:function(queryObj){return queryObj.equals},ne:function(queryObj){return queryObj.notEquals},lt:function(queryObj){return queryObj.less},le:function(queryObj){return queryObj.lessOrEquals},gt:function(queryObj){return queryObj.greater},ge:function(queryObj){return queryObj.greaterOrEquals},cn:function(queryObj){return queryObj.contains},nc:function(queryObj,op){return"OR"===op?queryObj.orNot().contains:queryObj.andNot().contains},bw:function(queryObj){return queryObj.startsWith},bn:function(queryObj,op){return"OR"===op?queryObj.orNot().startsWith:queryObj.andNot().startsWith},en:function(queryObj,op){return"OR"===op?queryObj.orNot().endsWith:queryObj.andNot().endsWith},ew:function(queryObj){return queryObj.endsWith},ni:function(queryObj,op){return"OR"===op?queryObj.orNot().equals:queryObj.andNot().equals},"in":function(queryObj){return queryObj.equals},nu:function(queryObj){return queryObj.isNull},nn:function(queryObj,op){return"OR"===op?queryObj.orNot().isNull:queryObj.andNot().isNull}},query=$.jgrid.from(ts.p.data);if(ts.p.ignoreCase&&(query=query.ignoreCase()),ts.p.search===!0){var srules=ts.p.postData.filters;if(srules)"string"==typeof srules&&(srules=$.jgrid.parse(srules)),tojLinq(srules);else try{query=compareFnMap[ts.p.postData.searchOper](query)(ts.p.postData.searchField,ts.p.postData.searchString,cmtypes[ts.p.postData.searchField])
}catch(se){}}if(ts.p.grouping)for(gin=0;lengrp>gin;gin++)query.orderBy(grindexes[gin],grpview.groupOrder[gin],grtypes[gin].stype,grtypes[gin].srcfmt);st&&ts.p.sortorder&&fndsort&&("DESC"==ts.p.sortorder.toUpperCase()?query.orderBy(ts.p.sortname,"d",cmtypes[st].stype,cmtypes[st].srcfmt):query.orderBy(ts.p.sortname,"a",cmtypes[st].stype,cmtypes[st].srcfmt));var queryResults=query.select(),recordsperpage=parseInt(ts.p.rowNum,10),total=queryResults.length,page=parseInt(ts.p.page,10),totalpages=Math.ceil(total/recordsperpage),retresult={};return queryResults=queryResults.slice((page-1)*recordsperpage,page*recordsperpage),query=null,cmtypes=null,retresult[ts.p.localReader.total]=totalpages,retresult[ts.p.localReader.page]=page,retresult[ts.p.localReader.records]=total,retresult[ts.p.localReader.root]=queryResults,retresult[ts.p.localReader.userdata]=ts.p.userData,queryResults=null,retresult}},updatepager=function(rn,dnd){var cp,last,base,from,to,tot,fmt,sppg,pgboxes="",tspg=ts.p.pager?"_"+$.jgrid.jqID(ts.p.pager.substr(1)):"",tspg_t=ts.p.toppager?"_"+ts.p.toppager.substr(1):"";if(base=parseInt(ts.p.page,10)-1,0>base&&(base=0),base*=parseInt(ts.p.rowNum,10),to=base+ts.p.reccount,ts.p.scroll){var rows=$("tbody:first > tr:gt(0)",ts.grid.bDiv);base=to-rows.length,ts.p.reccount=rows.length;var rh=rows.outerHeight()||ts.grid.prevRowHeight;if(rh){var top=base*rh,height=parseInt(ts.p.records,10)*rh;$(">div:first",ts.grid.bDiv).css({height:height}).children("div:first").css({height:top,display:top?"":"none"})}ts.grid.bDiv.scrollLeft=ts.grid.hDiv.scrollLeft}pgboxes=ts.p.pager?ts.p.pager:"",pgboxes+=ts.p.toppager?pgboxes?","+ts.p.toppager:ts.p.toppager:"",pgboxes&&(fmt=$.jgrid.formatter.integer||{},cp=intNum(ts.p.page),last=intNum(ts.p.lastpage),$(".selbox",pgboxes)[this.p.useProp?"prop":"attr"]("disabled",!1),ts.p.pginput===!0&&($(".ui-pg-input",pgboxes).val(ts.p.page),sppg=ts.p.toppager?"#sp_1"+tspg+",#sp_1"+tspg_t:"#sp_1"+tspg,$(sppg).html($.fmatter?$.fmatter.util.NumberFormat(ts.p.lastpage,fmt):ts.p.lastpage)),ts.p.viewrecords&&(0===ts.p.reccount?$(".ui-paging-info",pgboxes).html(ts.p.emptyrecords):(from=base+1,tot=ts.p.records,$.fmatter&&(from=$.fmatter.util.NumberFormat(from,fmt),to=$.fmatter.util.NumberFormat(to,fmt),tot=$.fmatter.util.NumberFormat(tot,fmt)),$(".ui-paging-info",pgboxes).html($.jgrid.format(ts.p.recordtext,from,to,tot)))),ts.p.pgbuttons===!0&&(0>=cp&&(cp=last=0),1==cp||0===cp?($("#first"+tspg+", #prev"+tspg).addClass("ui-state-disabled").removeClass("ui-state-hover"),ts.p.toppager&&$("#first_t"+tspg_t+", #prev_t"+tspg_t).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#first"+tspg+", #prev"+tspg).removeClass("ui-state-disabled"),ts.p.toppager&&$("#first_t"+tspg_t+", #prev_t"+tspg_t).removeClass("ui-state-disabled")),cp==last||0===cp?($("#next"+tspg+", #last"+tspg).addClass("ui-state-disabled").removeClass("ui-state-hover"),ts.p.toppager&&$("#next_t"+tspg_t+", #last_t"+tspg_t).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#next"+tspg+", #last"+tspg).removeClass("ui-state-disabled"),ts.p.toppager&&$("#next_t"+tspg_t+", #last_t"+tspg_t).removeClass("ui-state-disabled")))),rn===!0&&ts.p.rownumbers===!0&&$("td.jqgrid-rownum",ts.rows).each(function(i){$(this).html(base+1+i)}),dnd&&ts.p.jqgdnd&&$(ts).jqGrid("gridDnD","updateDnD"),$(ts).triggerHandler("jqGridGridComplete"),$.isFunction(ts.p.gridComplete)&&ts.p.gridComplete.call(ts),$(ts).triggerHandler("jqGridAfterGridComplete")},beginReq=function(){if(ts.grid.hDiv.loading=!0,!ts.p.hiddengrid)switch(ts.p.loadui){case"disable":break;case"enable":$("#load_"+$.jgrid.jqID(ts.p.id)).show();break;case"block":$("#lui_"+$.jgrid.jqID(ts.p.id)).show(),$("#load_"+$.jgrid.jqID(ts.p.id)).show()}},endReq=function(){switch(ts.grid.hDiv.loading=!1,ts.p.loadui){case"disable":break;case"enable":$("#load_"+$.jgrid.jqID(ts.p.id)).hide();break;case"block":$("#lui_"+$.jgrid.jqID(ts.p.id)).hide(),$("#load_"+$.jgrid.jqID(ts.p.id)).hide()}},populate=function(npage){if(!ts.grid.hDiv.loading){var dt,dstr,pvis=ts.p.scroll&&npage===!1,prm={},pN=ts.p.prmNames;ts.p.page<=0&&(ts.p.page=1),null!==pN.search&&(prm[pN.search]=ts.p.search),null!==pN.nd&&(prm[pN.nd]=(new Date).getTime()),null!==pN.rows&&(prm[pN.rows]=ts.p.rowNum),null!==pN.page&&(prm[pN.page]=ts.p.page),null!==pN.sort&&(prm[pN.sort]=ts.p.sortname),null!==pN.order&&(prm[pN.order]=ts.p.sortorder),null!==ts.p.rowTotal&&null!==pN.totalrows&&(prm[pN.totalrows]=ts.p.rowTotal);var lcf=$.isFunction(ts.p.loadComplete),lc=lcf?ts.p.loadComplete:null,adjust=0;if(npage=npage||1,npage>1?null!==pN.npage?(prm[pN.npage]=npage,adjust=npage-1,npage=1):lc=function(req){ts.p.page++,ts.grid.hDiv.loading=!1,lcf&&ts.p.loadComplete.call(ts,req),populate(npage-1)}:null!==pN.npage&&delete ts.p.postData[pN.npage],ts.p.grouping){$(ts).jqGrid("groupingSetup");var gi,grp=ts.p.groupingView,gs="";for(gi=0;gi<grp.groupField.length;gi++){var index=grp.groupField[gi];$.each(ts.p.colModel,function(cmIndex,cmValue){cmValue.name==index&&cmValue.index&&(index=cmValue.index)}),gs+=index+" "+grp.groupOrder[gi]+", "}prm[pN.sort]=gs+prm[pN.sort]}$.extend(ts.p.postData,prm);var rcnt=ts.p.scroll?ts.rows.length-1:1,bfr=$(ts).triggerHandler("jqGridBeforeRequest");if(bfr===!1||"stop"===bfr)return;if($.isFunction(ts.p.datatype))return void ts.p.datatype.call(ts,ts.p.postData,"load_"+ts.p.id);if($.isFunction(ts.p.beforeRequest)&&(bfr=ts.p.beforeRequest.call(ts),void 0===bfr&&(bfr=!0),bfr===!1))return;switch(dt=ts.p.datatype.toLowerCase()){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:ts.p.url,type:ts.p.mtype,dataType:dt,data:$.isFunction(ts.p.serializeGridData)?ts.p.serializeGridData.call(ts,ts.p.postData):ts.p.postData,success:function(data,st,xhr){return $.isFunction(ts.p.beforeProcessing)&&ts.p.beforeProcessing.call(ts,data,st,xhr)===!1?void endReq():("xml"===dt?addXmlData(data,ts.grid.bDiv,rcnt,npage>1,adjust):addJSONData(data,ts.grid.bDiv,rcnt,npage>1,adjust),$(ts).triggerHandler("jqGridLoadComplete",[data]),lc&&lc.call(ts,data),$(ts).triggerHandler("jqGridAfterLoadComplete",[data]),pvis&&ts.grid.populateVisible(),(ts.p.loadonce||ts.p.treeGrid)&&(ts.p.datatype="local"),data=null,void(1===npage&&endReq()))},error:function(xhr,st,err){$.isFunction(ts.p.loadError)&&ts.p.loadError.call(ts,xhr,st,err),1===npage&&endReq(),xhr=null},beforeSend:function(xhr,settings){var gotoreq=!0;return $.isFunction(ts.p.loadBeforeSend)&&(gotoreq=ts.p.loadBeforeSend.call(ts,xhr,settings)),void 0===gotoreq&&(gotoreq=!0),gotoreq===!1?!1:void beginReq()}},$.jgrid.ajaxOptions,ts.p.ajaxGridOptions));break;case"xmlstring":beginReq(),dstr=$.jgrid.stringToDoc(ts.p.datastr),addXmlData(dstr,ts.grid.bDiv),$(ts).triggerHandler("jqGridLoadComplete",[dstr]),lcf&&ts.p.loadComplete.call(ts,dstr),$(ts).triggerHandler("jqGridAfterLoadComplete",[dstr]),ts.p.datatype="local",ts.p.datastr=null,endReq();break;case"jsonstring":beginReq(),dstr="string"==typeof ts.p.datastr?$.jgrid.parse(ts.p.datastr):ts.p.datastr,addJSONData(dstr,ts.grid.bDiv),$(ts).triggerHandler("jqGridLoadComplete",[dstr]),lcf&&ts.p.loadComplete.call(ts,dstr),$(ts).triggerHandler("jqGridAfterLoadComplete",[dstr]),ts.p.datatype="local",ts.p.datastr=null,endReq();break;case"local":case"clientside":beginReq(),ts.p.datatype="local";var req=addLocalData();addJSONData(req,ts.grid.bDiv,rcnt,npage>1,adjust),$(ts).triggerHandler("jqGridLoadComplete",[req]),lc&&lc.call(ts,req),$(ts).triggerHandler("jqGridAfterLoadComplete",[req]),pvis&&ts.grid.populateVisible(),endReq()}}},setHeadCheckBox=function(checked){$("#cb_"+$.jgrid.jqID(ts.p.id),ts.grid.hDiv)[ts.p.useProp?"prop":"attr"]("checked",checked);var fid=ts.p.frozenColumns?ts.p.id+"_frozen":"";fid&&$("#cb_"+$.jgrid.jqID(ts.p.id),ts.grid.fhDiv)[ts.p.useProp?"prop":"attr"]("checked",checked)},setPager=function(pgid,tp){var pgcnt,lft,cent,rgt,twd,tdw,i,sep="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",pginp="",pgl="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",str="",clearVals=function(onpaging){var ret;return $.isFunction(ts.p.onPaging)&&(ret=ts.p.onPaging.call(ts,onpaging)),ts.p.selrow=null,ts.p.multiselect&&(ts.p.selarrrow=[],setHeadCheckBox(!1)),ts.p.savedRow=[],"stop"==ret?!1:!0};if(pgid=pgid.substr(1),tp+="_"+pgid,pgcnt="pg_"+pgid,lft=pgid+"_left",cent=pgid+"_center",rgt=pgid+"_right",$("#"+$.jgrid.jqID(pgid)).append("<div id='"+pgcnt+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+lft+"' align='left'></td><td id='"+cent+"' align='center' style='white-space:pre;'></td><td id='"+rgt+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr"),ts.p.rowList.length>0){for(str="<td dir='"+dir+"'>",str+="<select class='ui-pg-selbox' role='listbox'>",i=0;i<ts.p.rowList.length;i++)str+='<option role="option" value="'+ts.p.rowList[i]+'"'+(ts.p.rowNum==ts.p.rowList[i]?' selected="selected"':"")+">"+ts.p.rowList[i]+"</option>";str+="</select></td>"}if("rtl"==dir&&(pgl+=str),ts.p.pginput===!0&&(pginp="<td dir='"+dir+"'>"+$.jgrid.format(ts.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(pgid)+"'></span>")+"</td>"),ts.p.pgbuttons===!0){var po=["first"+tp,"prev"+tp,"next"+tp,"last"+tp];"rtl"==dir&&po.reverse(),pgl+="<td id='"+po[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>",pgl+="<td id='"+po[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>",pgl+=""!==pginp?sep+pginp+sep:"",pgl+="<td id='"+po[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>",pgl+="<td id='"+po[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>"}else""!==pginp&&(pgl+=pginp);"ltr"==dir&&(pgl+=str),pgl+="</tr></tbody></table>",ts.p.viewrecords===!0&&$("td#"+pgid+"_"+ts.p.recordpos,"#"+pgcnt).append("<div dir='"+dir+"' style='text-align:"+ts.p.recordpos+"' class='ui-paging-info'></div>"),$("td#"+pgid+"_"+ts.p.pagerpos,"#"+pgcnt).append(pgl),tdw=$(".ui-jqgrid").css("font-size")||"11px",$(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+tdw+";visibility:hidden;' ></div>"),twd=$(pgl).clone().appendTo("#testpg").width(),$("#testpg").remove(),twd>0&&(""!==pginp&&(twd+=50),$("td#"+pgid+"_"+ts.p.pagerpos,"#"+pgcnt).width(twd)),ts.p._nvtd=[],ts.p._nvtd[0]=Math.floor(twd?(ts.p.width-twd)/2:ts.p.width/3),ts.p._nvtd[1]=0,pgl=null,$(".ui-pg-selbox","#"+pgcnt).bind("change",function(){return ts.p.page=Math.round(ts.p.rowNum*(ts.p.page-1)/this.value-.5)+1,ts.p.rowNum=this.value,ts.p.pager&&$(".ui-pg-selbox",ts.p.pager).val(this.value),ts.p.toppager&&$(".ui-pg-selbox",ts.p.toppager).val(this.value),clearVals("records")?(populate(),!1):!1}),ts.p.pgbuttons===!0&&($(".ui-pg-button","#"+pgcnt).hover(function(){$(this).hasClass("ui-state-disabled")?this.style.cursor="default":($(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){$(this).hasClass("ui-state-disabled")||($(this).removeClass("ui-state-hover"),this.style.cursor="default")}),$("#first"+$.jgrid.jqID(tp)+", #prev"+$.jgrid.jqID(tp)+", #next"+$.jgrid.jqID(tp)+", #last"+$.jgrid.jqID(tp)).click(function(){var cp=intNum(ts.p.page,1),last=intNum(ts.p.lastpage,1),selclick=!1,fp=!0,pp=!0,np=!0,lp=!0;if(0===last||1===last?(fp=!1,pp=!1,np=!1,lp=!1):last>1&&cp>=1?1===cp?(fp=!1,pp=!1):cp===last&&(np=!1,lp=!1):last>1&&0===cp&&(np=!1,lp=!1,cp=last-1),this.id==="first"+tp&&fp&&(ts.p.page=1,selclick=!0),this.id==="prev"+tp&&pp&&(ts.p.page=cp-1,selclick=!0),this.id==="next"+tp&&np&&(ts.p.page=cp+1,selclick=!0),this.id==="last"+tp&&lp&&(ts.p.page=last,selclick=!0),selclick){if(!clearVals(this.id))return!1;populate()}return!1})),ts.p.pginput===!0&&$("input.ui-pg-input","#"+pgcnt).keypress(function(e){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;return 13==key?(ts.p.page=$(this).val()>0?$(this).val():ts.p.page,clearVals("user")?(populate(),!1):!1):this})},sortData=function(index,idxcol,reload,sor){if(ts.p.colModel[idxcol].sortable){var so;if(!(ts.p.savedRow.length>0)){if(reload||(ts.p.lastsort==idxcol?"asc"==ts.p.sortorder?ts.p.sortorder="desc":"desc"==ts.p.sortorder&&(ts.p.sortorder="asc"):ts.p.sortorder=ts.p.colModel[idxcol].firstsortorder||"asc",ts.p.page=1),sor){if(ts.p.lastsort==idxcol&&ts.p.sortorder==sor&&!reload)return;ts.p.sortorder=sor}var previousSelectedTh=ts.grid.headers[ts.p.lastsort].el,newSelectedTh=ts.grid.headers[idxcol].el;if($("span.ui-grid-ico-sort",previousSelectedTh).addClass("ui-state-disabled"),$(previousSelectedTh).attr("aria-selected","false"),$("span.ui-icon-"+ts.p.sortorder,newSelectedTh).removeClass("ui-state-disabled"),$(newSelectedTh).attr("aria-selected","true"),ts.p.viewsortcols[0]||ts.p.lastsort!=idxcol&&($("span.s-ico",previousSelectedTh).hide(),$("span.s-ico",newSelectedTh).show()),index=index.substring(5+ts.p.id.length+1),ts.p.sortname=ts.p.colModel[idxcol].index||index,so=ts.p.sortorder,"stop"===$(ts).triggerHandler("jqGridSortCol",[index,idxcol,so]))return void(ts.p.lastsort=idxcol);if($.isFunction(ts.p.onSortCol)&&"stop"==ts.p.onSortCol.call(ts,index,idxcol,so))return void(ts.p.lastsort=idxcol);if("local"==ts.p.datatype?ts.p.deselectAfterSort&&$(ts).jqGrid("resetSelection"):(ts.p.selrow=null,ts.p.multiselect&&setHeadCheckBox(!1),ts.p.selarrrow=[],ts.p.savedRow=[]),ts.p.scroll){var sscroll=ts.grid.bDiv.scrollLeft;emptyRows.call(ts,!0,!1),ts.grid.hDiv.scrollLeft=sscroll}ts.p.subGrid&&"local"==ts.p.datatype&&$("td.sgexpanded","#"+$.jgrid.jqID(ts.p.id)).each(function(){$(this).trigger("click")}),populate(),ts.p.lastsort=idxcol,ts.p.sortname!=index&&idxcol&&(ts.p.lastsort=idxcol)}}},setColWidth=function(){var lvc,cw,aw,cr,initwidth=0,brd=$.jgrid.cellWidth()?0:intNum(ts.p.cellLayout,0),vc=0,scw=intNum(ts.p.scrollOffset,0),hs=!1,gw=0,cl=0;$.each(ts.p.colModel,function(){"undefined"==typeof this.hidden&&(this.hidden=!1),this.widthOrg=cw=intNum(this.width,0),this.hidden===!1&&(initwidth+=cw+brd,this.fixed?gw+=cw+brd:vc++,cl++)}),isNaN(ts.p.width)&&(ts.p.width=initwidth+(ts.p.shrinkToFit!==!1||isNaN(ts.p.height)?0:scw)),grid.width=ts.p.width,ts.p.tblwidth=initwidth,ts.p.shrinkToFit===!1&&ts.p.forceFit===!0&&(ts.p.forceFit=!1),ts.p.shrinkToFit===!0&&vc>0&&(aw=grid.width-brd*vc-gw,isNaN(ts.p.height)||(aw-=scw,hs=!0),initwidth=0,$.each(ts.p.colModel,function(i){this.hidden!==!1||this.fixed||(cw=Math.round(aw*this.width/(ts.p.tblwidth-brd*vc-gw)),this.width=cw,initwidth+=cw,lvc=i)}),cr=0,hs?grid.width-gw-(initwidth+brd*vc)!==scw&&(cr=grid.width-gw-(initwidth+brd*vc)-scw):hs||1===Math.abs(grid.width-gw-(initwidth+brd*vc))||(cr=grid.width-gw-(initwidth+brd*vc)),ts.p.colModel[lvc].width+=cr,ts.p.tblwidth=initwidth+cr+brd*vc+gw,ts.p.tblwidth>ts.p.width&&(ts.p.colModel[lvc].width-=ts.p.tblwidth-parseInt(ts.p.width,10),ts.p.tblwidth=ts.p.width))},nextVisible=function(iCol){var i,ret=iCol,j=iCol;for(i=iCol+1;i<ts.p.colModel.length;i++)if(ts.p.colModel[i].hidden!==!0){j=i;break}return j-ret},getOffset=function(iCol){var i,ret={},brd1=$.jgrid.cellWidth()?0:ts.p.cellLayout;for(ret[0]=ret[1]=ret[2]=0,i=0;iCol>=i;i++)ts.p.colModel[i].hidden===!1&&(ret[0]+=ts.p.colModel[i].width+brd1);return"rtl"==ts.p.direction&&(ret[0]=ts.p.width-ret[0]),ret[0]=ret[0]-ts.grid.bDiv.scrollLeft,$(ts.grid.cDiv).is(":visible")&&(ret[1]+=$(ts.grid.cDiv).height()+parseInt($(ts.grid.cDiv).css("padding-top"),10)+parseInt($(ts.grid.cDiv).css("padding-bottom"),10)),ts.p.toolbar[0]!==!0||"top"!=ts.p.toolbar[1]&&"both"!=ts.p.toolbar[1]||(ret[1]+=$(ts.grid.uDiv).height()+parseInt($(ts.grid.uDiv).css("border-top-width"),10)+parseInt($(ts.grid.uDiv).css("border-bottom-width"),10)),ts.p.toppager&&(ret[1]+=$(ts.grid.topDiv).height()+parseInt($(ts.grid.topDiv).css("border-bottom-width"),10)),ret[2]+=$(ts.grid.bDiv).height()+$(ts.grid.hDiv).height(),ret},getColumnHeaderIndex=function(th){var i,headers=ts.grid.headers,ci=$.jgrid.getCellIndex(th);for(i=0;i<headers.length;i++)if(th===headers[i].el){ci=i;break}return ci};for(this.p.id=this.id,-1==$.inArray(ts.p.multikey,sortkeys)&&(ts.p.multikey=!1),ts.p.keyIndex=!1,i=0;i<ts.p.colModel.length;i++)ts.p.colModel[i]=$.extend(!0,{},ts.p.cmTemplate,ts.p.colModel[i].template||{},ts.p.colModel[i]),ts.p.keyIndex===!1&&ts.p.colModel[i].key===!0&&(ts.p.keyIndex=i);if(ts.p.sortorder=ts.p.sortorder.toLowerCase(),ts.p.grouping===!0&&(ts.p.scroll=!1,ts.p.rownumbers=!1,ts.p.treeGrid=!1,ts.p.gridview=!0),this.p.treeGrid===!0){try{$(this).jqGrid("setTreeGrid")}catch(_){}"local"!=ts.p.datatype&&(ts.p.localReader={id:"_id_"})}if(this.p.subGrid)try{$(ts).jqGrid("setSubGrid")}catch(s){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:$.jgrid.cellWidth()?ts.p.multiselectWidth+ts.p.cellLayout:ts.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:ts.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),ts.p.xmlReader=$.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},ts.p.xmlReader),ts.p.jsonReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},ts.p.jsonReader),ts.p.localReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},ts.p.localReader),ts.p.scroll&&(ts.p.pgbuttons=!1,ts.p.pginput=!1,ts.p.rowList=[]),ts.p.data.length&&refreshIndex();var tdc,idn,w,res,sort,td,ptr,tbody,imgs,thead="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",iac="",idc="";if(ts.p.shrinkToFit===!0&&ts.p.forceFit===!0)for(i=ts.p.colModel.length-1;i>=0;i--)if(!ts.p.colModel[i].hidden){ts.p.colModel[i].resizable=!1;break}for("horizontal"==ts.p.viewsortcols[1]&&(iac=" ui-i-asc",idc=" ui-i-desc"),tdc=isMSIE?"class='ui-th-div-ie'":"",imgs="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+iac+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+dir+"'></span>",imgs+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+idc+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+dir+"'></span></span>",i=0;i<this.p.colNames.length;i++){var tooltip=ts.p.headertitles?' title="'+$.jgrid.stripHtml(ts.p.colNames[i])+'"':"";thead+="<th id='"+ts.p.id+"_"+ts.p.colModel[i].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+dir+"'"+tooltip+">",idn=ts.p.colModel[i].index||ts.p.colModel[i].name,thead+="<div id='jqgh_"+ts.p.id+"_"+ts.p.colModel[i].name+"' "+tdc+">"+ts.p.colNames[i],ts.p.colModel[i].width=ts.p.colModel[i].width?parseInt(ts.p.colModel[i].width,10):150,"boolean"!=typeof ts.p.colModel[i].title&&(ts.p.colModel[i].title=!0),idn==ts.p.sortname&&(ts.p.lastsort=i),thead+=imgs+"</div></th>"}if(thead+="</tr></thead>",imgs=null,$(this).append(thead),$("thead tr:first th",this).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),this.p.multiselect){var chk,emp=[];$("#cb_"+$.jgrid.jqID(ts.p.id),this).bind("click",function(){ts.p.selarrrow=[];var froz=ts.p.frozenColumns===!0?ts.p.id+"_frozen":"";this.checked?($(ts.rows).each(function(i){i>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass("ui-state-disabled")||($("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(this.id))[ts.p.useProp?"prop":"attr"]("checked",!0),$(this).addClass("ui-state-highlight").attr("aria-selected","true"),ts.p.selarrrow.push(this.id),ts.p.selrow=this.id,froz&&($("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(this.id),ts.grid.fbDiv)[ts.p.useProp?"prop":"attr"]("checked",!0),$("#"+$.jgrid.jqID(this.id),ts.grid.fbDiv).addClass("ui-state-highlight"))))}),chk=!0,emp=[]):($(ts.rows).each(function(i){i>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("ui-state-disabled")||($("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(this.id))[ts.p.useProp?"prop":"attr"]("checked",!1),$(this).removeClass("ui-state-highlight").attr("aria-selected","false"),emp.push(this.id),froz&&($("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(this.id),ts.grid.fbDiv)[ts.p.useProp?"prop":"attr"]("checked",!1),$("#"+$.jgrid.jqID(this.id),ts.grid.fbDiv).removeClass("ui-state-highlight"))))}),ts.p.selrow=null,chk=!1),$(ts).triggerHandler("jqGridSelectAll",[chk?ts.p.selarrrow:emp,chk]),$.isFunction(ts.p.onSelectAll)&&ts.p.onSelectAll.call(ts,chk?ts.p.selarrrow:emp,chk)})}if(ts.p.autowidth===!0){var pw=$(eg).innerWidth();ts.p.width=pw>0?pw:"nw"}setColWidth(),$(eg).css("width",grid.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+ts.p.id+"'>&#160;</div>"),$(gv).css("width",grid.width+"px"),thead=$("thead:first",ts).get(0);var tfoot="";ts.p.footerrow&&(tfoot+="<table role='grid' style='width:"+ts.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+dir+"'>");var thr=$("tr:first",thead),firstr="<tr class='jqgfirstrow' role='row' style='height:auto'>";if(ts.p.disableClick=!1,$("th",thr).each(function(j){w=ts.p.colModel[j].width,"undefined"==typeof ts.p.colModel[j].resizable&&(ts.p.colModel[j].resizable=!0),ts.p.colModel[j].resizable?(res=document.createElement("span"),$(res).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+dir),$.browser.opera||$(res).css("cursor","col-resize"),$(this).addClass(ts.p.resizeclass)):res="",$(this).css("width",w+"px").prepend(res);var hdcol="";ts.p.colModel[j].hidden&&($(this).css("display","none"),hdcol="display:none;"),firstr+="<td role='gridcell' style='height:0px;width:"+w+"px;"+hdcol+"'></td>",grid.headers[j]={width:w,el:this},sort=ts.p.colModel[j].sortable,"boolean"!=typeof sort&&(ts.p.colModel[j].sortable=!0,sort=!0);var nm=ts.p.colModel[j].name;"cb"!=nm&&"subgrid"!=nm&&"rn"!=nm&&ts.p.viewsortcols[2]&&$(">div",this).addClass("ui-jqgrid-sortable"),sort&&(ts.p.viewsortcols[0]?($("div span.s-ico",this).show(),j==ts.p.lastsort&&$("div span.ui-icon-"+ts.p.sortorder,this).removeClass("ui-state-disabled")):j==ts.p.lastsort&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+ts.p.sortorder,this).removeClass("ui-state-disabled"))),ts.p.footerrow&&(tfoot+="<td role='gridcell' "+formatCol(j,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(e){if(1==$(e.target).closest("th>span.ui-jqgrid-resize").length){var ci=getColumnHeaderIndex(this);return ts.p.forceFit===!0&&(ts.p.nv=nextVisible(ci)),grid.dragStart(ci,e,getOffset(ci)),!1}}).click(function(e){if(ts.p.disableClick)return ts.p.disableClick=!1,!1;var r,d,s="th>div.ui-jqgrid-sortable";ts.p.viewsortcols[2]||(s="th>div>span>span.ui-grid-ico-sort");var t=$(e.target).closest(s);if(1==t.length){var ci=getColumnHeaderIndex(this);return ts.p.viewsortcols[2]||(r=!0,d=t.attr("sort")),sortData($("div",this)[0].id,ci,r,d),!1}}),ts.p.sortable&&$.fn.sortable)try{$(ts).jqGrid("sortableColumns",thr)}catch(e){}ts.p.footerrow&&(tfoot+="</tr></tbody></table>"),firstr+="</tr>",tbody=document.createElement("tbody"),this.appendChild(tbody),$(this).addClass("ui-jqgrid-btable").append(firstr),firstr=null;var hTable=$("<table class='ui-jqgrid-htable' style='width:"+ts.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(thead),hg=ts.p.caption&&ts.p.hiddengrid===!0?!0:!1,hb=$("<div class='ui-jqgrid-hbox"+("rtl"==dir?"-rtl":"")+"'></div>");thead=null,grid.hDiv=document.createElement("div"),$(grid.hDiv).css({width:grid.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(hb),$(hb).append(hTable),hTable=null,hg&&$(grid.hDiv).hide(),ts.p.pager&&("string"==typeof ts.p.pager?"#"!=ts.p.pager.substr(0,1)&&(ts.p.pager="#"+ts.p.pager):ts.p.pager="#"+$(ts.p.pager).attr("id"),$(ts.p.pager).css({width:grid.width+"px"}).appendTo(eg).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom"),hg&&$(ts.p.pager).hide(),setPager(ts.p.pager,"")),ts.p.cellEdit===!1&&ts.p.hoverrows===!0&&$(ts).bind("mouseover",function(e){ptr=$(e.target).closest("tr.jqgrow"),"ui-subgrid"!==$(ptr).attr("class")&&$(ptr).addClass("ui-state-hover")}).bind("mouseout",function(e){ptr=$(e.target).closest("tr.jqgrow"),$(ptr).removeClass("ui-state-hover")});var ri,ci,tdHtml;$(ts).before(grid.hDiv).click(function(e){if(td=e.target,ptr=$(td,ts.rows).closest("tr.jqgrow"),0===$(ptr).length||ptr[0].className.indexOf("ui-state-disabled")>-1||($(td,ts).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==ts.id)return this;var scb=$(td).hasClass("cbox"),cSel=$(ts).triggerHandler("jqGridBeforeSelectRow",[ptr[0].id,e]);if(cSel=cSel===!1||"stop"===cSel?!1:!0,cSel&&$.isFunction(ts.p.beforeSelectRow)&&(cSel=ts.p.beforeSelectRow.call(ts,ptr[0].id,e)),"A"!=td.tagName&&("INPUT"!=td.tagName&&"TEXTAREA"!=td.tagName&&"OPTION"!=td.tagName&&"SELECT"!=td.tagName||scb)&&cSel===!0)if(ri=ptr[0].id,ci=$.jgrid.getCellIndex(td),tdHtml=$(td).closest("td,th").html(),$(ts).triggerHandler("jqGridCellSelect",[ri,ci,tdHtml,e]),$.isFunction(ts.p.onCellSelect)&&ts.p.onCellSelect.call(ts,ri,ci,tdHtml,e),ts.p.cellEdit===!0)if(ts.p.multiselect&&scb)$(ts).jqGrid("setSelection",ri,!0,e);else{ri=ptr[0].rowIndex;try{$(ts).jqGrid("editCell",ri,ci,!0)}catch(_){}}else if(ts.p.multikey)e[ts.p.multikey]?$(ts).jqGrid("setSelection",ri,!0,e):ts.p.multiselect&&scb&&(scb=$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+ri).is(":checked"),$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+ri)[ts.p.useProp?"prop":"attr"]("checked",scb));else if(ts.p.multiselect&&ts.p.multiboxonly)if(scb)$(ts).jqGrid("setSelection",ri,!0,e);else{var frz=ts.p.frozenColumns?ts.p.id+"_frozen":"";$(ts.p.selarrrow).each(function(i,n){var ind=ts.rows.namedItem(n);$(ind).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(n))[ts.p.useProp?"prop":"attr"]("checked",!1),frz&&($("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(frz)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(ts.p.id)+"_"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(frz))[ts.p.useProp?"prop":"attr"]("checked",!1))}),ts.p.selarrrow=[],$(ts).jqGrid("setSelection",ri,!0,e)}else $(ts).jqGrid("setSelection",ri,!0,e)}).bind("reloadGrid",function(e,opts){if(ts.p.treeGrid===!0&&(ts.p.datatype=ts.p.treedatatype),opts&&opts.current&&ts.grid.selectionPreserver(ts),"local"==ts.p.datatype?($(ts).jqGrid("resetSelection"),ts.p.data.length&&refreshIndex()):ts.p.treeGrid||(ts.p.selrow=null,ts.p.multiselect&&(ts.p.selarrrow=[],setHeadCheckBox(!1)),ts.p.savedRow=[]),ts.p.scroll&&emptyRows.call(ts,!0,!1),opts&&opts.page){var page=opts.page;page>ts.p.lastpage&&(page=ts.p.lastpage),1>page&&(page=1),ts.p.page=page,ts.grid.bDiv.scrollTop=ts.grid.prevRowHeight?(page-1)*ts.grid.prevRowHeight*ts.p.rowNum:0}return ts.grid.prevRowHeight&&ts.p.scroll?(delete ts.p.lastpage,ts.grid.populateVisible()):ts.grid.populate(),ts.p._inlinenav===!0&&$(ts).jqGrid("showAddEditButtons"),!1}).dblclick(function(e){td=e.target,ptr=$(td,ts.rows).closest("tr.jqgrow"),0!==$(ptr).length&&(ri=ptr[0].rowIndex,ci=$.jgrid.getCellIndex(td),$(ts).triggerHandler("jqGridDblClickRow",[$(ptr).attr("id"),ri,ci,e]),$.isFunction(this.p.ondblClickRow)&&ts.p.ondblClickRow.call(ts,$(ptr).attr("id"),ri,ci,e))}).bind("contextmenu",function(e){td=e.target,ptr=$(td,ts.rows).closest("tr.jqgrow"),0!==$(ptr).length&&(ts.p.multiselect||$(ts).jqGrid("setSelection",ptr[0].id,!0,e),ri=ptr[0].rowIndex,ci=$.jgrid.getCellIndex(td),$(ts).triggerHandler("jqGridRightClickRow",[$(ptr).attr("id"),ri,ci,e]),$.isFunction(this.p.onRightClickRow)&&ts.p.onRightClickRow.call(ts,$(ptr).attr("id"),ri,ci,e))}),grid.bDiv=document.createElement("div"),isMSIE&&"auto"===String(ts.p.height).toLowerCase()&&(ts.p.height="100%"),$(grid.bDiv).append($('<div style="position:relative;'+(isMSIE&&$.browser.version<8?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:ts.p.height+(isNaN(ts.p.height)?"":"px"),width:grid.width+"px"}).scroll(grid.scrollGrid),$("table:first",grid.bDiv).css({width:ts.p.tblwidth+"px"}),isMSIE?(2==$("tbody",this).length&&$("tbody:gt(0)",this).remove(),ts.p.multikey&&$(grid.bDiv).bind("selectstart",function(){return!1})):ts.p.multikey&&$(grid.bDiv).bind("mousedown",function(){return!1}),hg&&$(grid.bDiv).hide(),grid.cDiv=document.createElement("div");var arf=ts.p.hidegrid===!0?$("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){arf.addClass("ui-state-hover")},function(){arf.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css("rtl"==dir?"left":"right","0px"):"";if($(grid.cDiv).append(arf).append("<span class='ui-jqgrid-title"+("rtl"==dir?"-rtl":"")+"'>"+ts.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix"),$(grid.cDiv).insertBefore(grid.hDiv),ts.p.toolbar[0]&&(grid.uDiv=document.createElement("div"),"top"==ts.p.toolbar[1]?$(grid.uDiv).insertBefore(grid.hDiv):"bottom"==ts.p.toolbar[1]&&$(grid.uDiv).insertAfter(grid.hDiv),"both"==ts.p.toolbar[1]?(grid.ubDiv=document.createElement("div"),$(grid.uDiv).insertBefore(grid.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),$(grid.ubDiv).insertAfter(grid.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id),hg&&$(grid.ubDiv).hide()):$(grid.uDiv).width(grid.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),hg&&$(grid.uDiv).hide()),ts.p.toppager&&(ts.p.toppager=$.jgrid.jqID(ts.p.id)+"_toppager",grid.topDiv=$("<div id='"+ts.p.toppager+"'></div>")[0],ts.p.toppager="#"+ts.p.toppager,$(grid.topDiv).insertBefore(grid.hDiv).addClass("ui-state-default ui-jqgrid-toppager").width(grid.width),setPager(ts.p.toppager,"_t")),ts.p.footerrow&&(grid.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0],hb=$("<div class='ui-jqgrid-hbox"+("rtl"==dir?"-rtl":"")+"'></div>"),$(grid.sDiv).append(hb).insertAfter(grid.hDiv).width(grid.width),$(hb).append(tfoot),grid.footers=$(".ui-jqgrid-ftable",grid.sDiv)[0].rows[0].cells,ts.p.rownumbers&&(grid.footers[0].className="ui-state-default jqgrid-rownum"),hg&&$(grid.sDiv).hide()),hb=null,ts.p.caption){var tdt=ts.p.datatype;ts.p.hidegrid===!0&&($(".ui-jqgrid-titlebar-close",grid.cDiv).click(function(e){var counter,onHdCl=$.isFunction(ts.p.onHeaderClick),elems=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",self=this;return ts.p.toolbar[0]===!0&&("both"==ts.p.toolbar[1]&&(elems+=", #"+$(grid.ubDiv).attr("id")),elems+=", #"+$(grid.uDiv).attr("id")),counter=$(elems,"#gview_"+$.jgrid.jqID(ts.p.id)).length,"visible"==ts.p.gridstate?$(elems,"#gbox_"+$.jgrid.jqID(ts.p.id)).slideUp("fast",function(){counter--,0===counter&&($("span",self).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),ts.p.gridstate="hidden",$("#gbox_"+$.jgrid.jqID(ts.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(ts.p.id)).hide(),$(ts).triggerHandler("jqGridHeaderClick",[ts.p.gridstate,e]),onHdCl&&(hg||ts.p.onHeaderClick.call(ts,ts.p.gridstate,e)))}):"hidden"==ts.p.gridstate&&$(elems,"#gbox_"+$.jgrid.jqID(ts.p.id)).slideDown("fast",function(){counter--,0===counter&&($("span",self).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),hg&&(ts.p.datatype=tdt,populate(),hg=!1),ts.p.gridstate="visible",$("#gbox_"+$.jgrid.jqID(ts.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(ts.p.id)).show(),$(ts).triggerHandler("jqGridHeaderClick",[ts.p.gridstate,e]),onHdCl&&(hg||ts.p.onHeaderClick.call(ts,ts.p.gridstate,e)))
}),!1}),hg&&(ts.p.datatype="local",$(".ui-jqgrid-titlebar-close",grid.cDiv).trigger("click")))}else $(grid.cDiv).hide();$(grid.hDiv).after(grid.bDiv).mousemove(function(e){return grid.resizing?(grid.dragMove(e),!1):void 0}),$(".ui-jqgrid-labels",grid.hDiv).bind("selectstart",function(){return!1}),$(document).mouseup(function(){return grid.resizing?(grid.dragEnd(),!1):!0}),ts.formatCol=formatCol,ts.sortData=sortData,ts.updatepager=updatepager,ts.refreshIndex=refreshIndex,ts.setHeadCheckBox=setHeadCheckBox,ts.constructTr=constructTr,ts.formatter=function(rowId,cellval,colpos,rwdat,act){return formatter(rowId,cellval,colpos,rwdat,act)},$.extend(grid,{populate:populate,emptyRows:emptyRows}),this.grid=grid,ts.addXmlData=function(d){addXmlData(d,ts.grid.bDiv)},ts.addJSONData=function(d){addJSONData(d,ts.grid.bDiv)},this.grid.cols=this.rows[0].cells,populate(),ts.p.hiddengrid=!1}})},$.jgrid.extend({getGridParam:function(pName){var $t=this[0];if($t&&$t.grid)return pName?"undefined"!=typeof $t.p[pName]?$t.p[pName]:null:$t.p},setGridParam:function(newParams){return this.each(function(){this.grid&&"object"==typeof newParams&&$.extend(!0,this.p,newParams)})},getDataIDs:function(){var len,ids=[],i=0,j=0;return this.each(function(){if(len=this.rows.length,len&&len>0)for(;len>i;)$(this.rows[i]).hasClass("jqgrow")&&(ids[j]=this.rows[i].id,j++),i++}),ids},setSelection:function(selection,onsr,e){return this.each(function(){function scrGrid(iR){var ch=$($t.grid.bDiv)[0].clientHeight,st=$($t.grid.bDiv)[0].scrollTop,rpos=$($t.rows[iR]).position().top,rh=$t.rows[iR].clientHeight;rpos+rh>=ch+st?$($t.grid.bDiv)[0].scrollTop=rpos-(ch+st)+rh+st:ch+st>rpos&&st>rpos&&($($t.grid.bDiv)[0].scrollTop=rpos)}var stat,pt,ner,ia,tpsr,fid,$t=this;void 0!==selection&&(onsr=onsr===!1?!1:!0,pt=$t.rows.namedItem(selection+""),!pt||!pt.className||pt.className.indexOf("ui-state-disabled")>-1||($t.p.scrollrows===!0&&(ner=$t.rows.namedItem(selection).rowIndex,ner>=0&&scrGrid(ner)),$t.p.frozenColumns===!0&&(fid=$t.p.id+"_frozen"),$t.p.multiselect?($t.setHeadCheckBox(!1),$t.p.selrow=pt.id,ia=$.inArray($t.p.selrow,$t.p.selarrrow),-1===ia?("ui-subgrid"!==pt.className&&$(pt).addClass("ui-state-highlight").attr("aria-selected","true"),stat=!0,$t.p.selarrrow.push($t.p.selrow)):("ui-subgrid"!==pt.className&&$(pt).removeClass("ui-state-highlight").attr("aria-selected","false"),stat=!1,$t.p.selarrrow.splice(ia,1),tpsr=$t.p.selarrrow[0],$t.p.selrow=void 0===tpsr?null:tpsr),$("#jqg_"+$.jgrid.jqID($t.p.id)+"_"+$.jgrid.jqID(pt.id))[$t.p.useProp?"prop":"attr"]("checked",stat),fid&&(-1===ia?$("#"+$.jgrid.jqID(selection),"#"+$.jgrid.jqID(fid)).addClass("ui-state-highlight"):$("#"+$.jgrid.jqID(selection),"#"+$.jgrid.jqID(fid)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID($t.p.id)+"_"+$.jgrid.jqID(selection),"#"+$.jgrid.jqID(fid))[$t.p.useProp?"prop":"attr"]("checked",stat)),$($t).triggerHandler("jqGridSelectRow",[pt.id,stat,e]),$t.p.onSelectRow&&onsr&&$t.p.onSelectRow.call($t,pt.id,stat,e)):"ui-subgrid"!==pt.className&&($t.p.selrow!=pt.id?($($t.rows.namedItem($t.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),$(pt).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),fid&&($("#"+$.jgrid.jqID($t.p.selrow),"#"+$.jgrid.jqID(fid)).removeClass("ui-state-highlight"),$("#"+$.jgrid.jqID(selection),"#"+$.jgrid.jqID(fid)).addClass("ui-state-highlight")),stat=!0):stat=!1,$t.p.selrow=pt.id,$($t).triggerHandler("jqGridSelectRow",[pt.id,stat,e]),$t.p.onSelectRow&&onsr&&$t.p.onSelectRow.call($t,pt.id,stat,e))))})},resetSelection:function(rowid){return this.each(function(){var ind,sr,fid,t=this;t.p.frozenColumns===!0&&(fid=t.p.id+"_frozen"),"undefined"!=typeof rowid?(sr=rowid===t.p.selrow?t.p.selrow:rowid,$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(sr)).removeClass("ui-state-highlight").attr("aria-selected","false"),fid&&$("#"+$.jgrid.jqID(sr),"#"+$.jgrid.jqID(fid)).removeClass("ui-state-highlight"),t.p.multiselect&&($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(sr),"#"+$.jgrid.jqID(t.p.id))[t.p.useProp?"prop":"attr"]("checked",!1),fid&&$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(sr),"#"+$.jgrid.jqID(fid))[t.p.useProp?"prop":"attr"]("checked",!1),t.setHeadCheckBox(!1)),sr=null):t.p.multiselect?($(t.p.selarrrow).each(function(i,n){ind=t.rows.namedItem(n),$(ind).removeClass("ui-state-highlight").attr("aria-selected","false"),$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(n))[t.p.useProp?"prop":"attr"]("checked",!1),fid&&($("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(fid)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(fid))[t.p.useProp?"prop":"attr"]("checked",!1))}),t.setHeadCheckBox(!1),t.p.selarrrow=[]):t.p.selrow&&($("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(t.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),fid&&$("#"+$.jgrid.jqID(t.p.selrow),"#"+$.jgrid.jqID(fid)).removeClass("ui-state-highlight"),t.p.selrow=null),t.p.cellEdit===!0&&parseInt(t.p.iCol,10)>=0&&parseInt(t.p.iRow,10)>=0&&($("td:eq("+t.p.iCol+")",t.rows[t.p.iRow]).removeClass("edit-cell ui-state-highlight"),$(t.rows[t.p.iRow]).removeClass("selected-row ui-state-hover")),t.p.savedRow=[]})},getRowData:function(rowid){var resall,len,res={},getall=!1,j=0;return this.each(function(){var nm,ind,$t=this;if("undefined"==typeof rowid)getall=!0,resall=[],len=$t.rows.length;else{if(ind=$t.rows.namedItem(rowid),!ind)return res;len=2}for(;len>j;)getall&&(ind=$t.rows[j]),$(ind).hasClass("jqgrow")&&($('td[role="gridcell"]',ind).each(function(i){if(nm=$t.p.colModel[i].name,"cb"!==nm&&"subgrid"!==nm&&"rn"!==nm)if($t.p.treeGrid===!0&&nm==$t.p.ExpandColumn)res[nm]=$.jgrid.htmlDecode($("span:first",this).html());else try{res[nm]=$.unformat.call($t,this,{rowId:ind.id,colModel:$t.p.colModel[i]},i)}catch(e){res[nm]=$.jgrid.htmlDecode($(this).html())}}),getall&&(resall.push(res),res={})),j++}),resall?resall:res},delRowData:function(rowid){var rowInd,ia,ri,success=!1;return this.each(function(){var $t=this;if(rowInd=$t.rows.namedItem(rowid),!rowInd)return!1;if(ri=rowInd.rowIndex,$(rowInd).remove(),$t.p.records--,$t.p.reccount--,$t.updatepager(!0,!1),success=!0,$t.p.multiselect&&(ia=$.inArray(rowid,$t.p.selarrrow),-1!=ia&&$t.p.selarrrow.splice(ia,1)),rowid==$t.p.selrow&&($t.p.selrow=null),"local"==$t.p.datatype){var id=$.jgrid.stripPref($t.p.idPrefix,rowid),pos=$t.p._index[id];"undefined"!=typeof pos&&($t.p.data.splice(pos,1),$t.refreshIndex())}if($t.p.altRows===!0&&success){var cn=$t.p.altclass;$($t.rows).each(function(i){i%2==1?$(this).addClass(cn):$(this).removeClass(cn)})}}),success},setRowData:function(rowid,data,cssp){var nm,title,success=!0;return this.each(function(){if(!this.grid)return!1;var vl,ind,t=this,cp=typeof cssp,lcdata={};if(ind=t.rows.namedItem(rowid),!ind)return!1;if(data)try{if($(this.p.colModel).each(function(i){nm=this.name,void 0!==data[nm]&&(lcdata[nm]=this.formatter&&"string"==typeof this.formatter&&"date"==this.formatter?$.unformat.date.call(t,data[nm],this):data[nm],vl=t.formatter(rowid,data[nm],i,data,"edit"),title=this.title?{title:$.jgrid.stripHtml(vl)}:{},t.p.treeGrid===!0&&nm==t.p.ExpandColumn?$("td:eq("+i+") > span:first",ind).html(vl).attr(title):$("td:eq("+i+")",ind).html(vl).attr(title))}),"local"==t.p.datatype){var id=$.jgrid.stripPref(t.p.idPrefix,rowid),pos=t.p._index[id];if(t.p.treeGrid)for(var key in t.p.treeReader)lcdata.hasOwnProperty(t.p.treeReader[key])&&delete lcdata[t.p.treeReader[key]];"undefined"!=typeof pos&&(t.p.data[pos]=$.extend(!0,t.p.data[pos],lcdata)),lcdata=null}}catch(e){success=!1}success&&("string"===cp?$(ind).addClass(cssp):"object"===cp&&$(ind).css(cssp),$(t).triggerHandler("jqGridAfterGridComplete"))}),success},addRowData:function(rowid,rdata,pos,src){pos||(pos="last");var nm,row,gi,si,ni,sind,i,v,aradd,cnm,cn,data,cm,id,success=!1,prp="";return rdata&&($.isArray(rdata)?(aradd=!0,pos="last",cnm=rowid):(rdata=[rdata],aradd=!1),this.each(function(){var t=this,datalen=rdata.length;ni=t.p.rownumbers===!0?1:0,gi=t.p.multiselect===!0?1:0,si=t.p.subGrid===!0?1:0,aradd||("undefined"!=typeof rowid?rowid+="":(rowid=$.jgrid.randId(),t.p.keyIndex!==!1&&(cnm=t.p.colModel[t.p.keyIndex+gi+si+ni].name,"undefined"!=typeof rdata[0][cnm]&&(rowid=rdata[0][cnm])))),cn=t.p.altclass;for(var k=0,cna="",lcdata={},air=$.isFunction(t.p.afterInsertRow)?!0:!1;datalen>k;){if(data=rdata[k],row=[],aradd){try{rowid=data[cnm]}catch(e){rowid=$.jgrid.randId()}cna=t.p.altRows===!0&&(t.rows.length-1)%2===0?cn:""}for(id=rowid,rowid=t.p.idPrefix+rowid,ni&&(prp=t.formatCol(0,1,"",null,rowid,!0),row[row.length]='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+prp+">0</td>"),gi&&(v='<input role="checkbox" type="checkbox" id="jqg_'+t.p.id+"_"+rowid+'" class="cbox"/>',prp=t.formatCol(ni,1,"",null,rowid,!0),row[row.length]='<td role="gridcell" '+prp+">"+v+"</td>"),si&&(row[row.length]=$(t).jqGrid("addSubGridCell",gi+ni,1)),i=gi+si+ni;i<t.p.colModel.length;i++)cm=t.p.colModel[i],nm=cm.name,lcdata[nm]=data[nm],v=t.formatter(rowid,$.jgrid.getAccessor(data,nm),i,data),prp=t.formatCol(i,1,v,data,rowid,!0),row[row.length]='<td role="gridcell" '+prp+">"+v+"</td>";if(row.unshift(t.constructTr(rowid,!1,cna,lcdata,data,!1)),row[row.length]="</tr>",0===t.rows.length)$("table:first",t.grid.bDiv).append(row.join(""));else switch(pos){case"last":$(t.rows[t.rows.length-1]).after(row.join("")),sind=t.rows.length-1;break;case"first":$(t.rows[0]).after(row.join("")),sind=1;break;case"after":sind=t.rows.namedItem(src),sind&&($(t.rows[sind.rowIndex+1]).hasClass("ui-subgrid")?$(t.rows[sind.rowIndex+1]).after(row):$(sind).after(row.join(""))),sind++;break;case"before":sind=t.rows.namedItem(src),sind&&($(sind).before(row.join("")),sind=sind.rowIndex),sind--}t.p.subGrid===!0&&$(t).jqGrid("addSubGrid",gi+ni,sind),t.p.records++,t.p.reccount++,$(t).triggerHandler("jqGridAfterInsertRow",[rowid,data,data]),air&&t.p.afterInsertRow.call(t,rowid,data,data),k++,"local"==t.p.datatype&&(lcdata[t.p.localReader.id]=id,t.p._index[id]=t.p.data.length,t.p.data.push(lcdata),lcdata={})}t.p.altRows!==!0||aradd||("last"==pos?(t.rows.length-1)%2==1&&$(t.rows[t.rows.length-1]).addClass(cn):$(t.rows).each(function(i){i%2==1?$(this).addClass(cn):$(this).removeClass(cn)})),t.updatepager(!0,!0),success=!0})),success},footerData:function(action,data,format){function isEmpty(obj){for(var i in obj)if(obj.hasOwnProperty(i))return!1;return!0}var nm,title,success=!1,res={};return"undefined"==typeof action&&(action="get"),"boolean"!=typeof format&&(format=!0),action=action.toLowerCase(),this.each(function(){var vl,t=this;return t.grid&&t.p.footerrow?"set"==action&&isEmpty(data)?!1:(success=!0,void $(this.p.colModel).each(function(i){nm=this.name,"set"==action?void 0!==data[nm]&&(vl=format?t.formatter("",data[nm],i,data,"edit"):data[nm],title=this.title?{title:$.jgrid.stripHtml(vl)}:{},$("tr.footrow td:eq("+i+")",t.grid.sDiv).html(vl).attr(title),success=!0):"get"==action&&(res[nm]=$("tr.footrow td:eq("+i+")",t.grid.sDiv).html())})):!1}),"get"==action?res:success},showHideCol:function(colname,show){return this.each(function(){var cw,$t=this,fndh=!1,brd=$.jgrid.cellWidth()?0:$t.p.cellLayout;if($t.grid){"string"==typeof colname&&(colname=[colname]),show="none"!=show?"":"none";var sw=""===show?!0:!1,gh=$t.p.groupHeader&&("object"==typeof $t.p.groupHeader||$.isFunction($t.p.groupHeader));gh&&$($t).jqGrid("destroyGroupHeader",!1),$(this.p.colModel).each(function(i){if(-1!==$.inArray(this.name,colname)&&this.hidden===sw){if($t.p.frozenColumns===!0&&this.frozen===!0)return!0;$("tr",$t.grid.hDiv).each(function(){$(this.cells[i]).css("display",show)}),$($t.rows).each(function(){$(this).hasClass("jqgroup")||$(this.cells[i]).css("display",show)}),$t.p.footerrow&&$("tr.footrow td:eq("+i+")",$t.grid.sDiv).css("display",show),cw=parseInt(this.width,10),"none"===show?$t.p.tblwidth-=cw+brd:$t.p.tblwidth+=cw+brd,this.hidden=!sw,fndh=!0,$($t).triggerHandler("jqGridShowHideCol",[sw,this.name,i])}}),fndh===!0&&($t.p.shrinkToFit!==!0||isNaN($t.p.height)||($t.p.tblwidth+=parseInt($t.p.scrollOffset,10)),$($t).jqGrid("setGridWidth",$t.p.shrinkToFit===!0?$t.p.tblwidth:$t.p.width)),gh&&$($t).jqGrid("setGroupHeaders",$t.p.groupHeader)}})},hideCol:function(colname){return this.each(function(){$(this).jqGrid("showHideCol",colname,"none")})},showCol:function(colname){return this.each(function(){$(this).jqGrid("showHideCol",colname,"")})},remapColumns:function(permutation,updateCells,keepHeader){function resortArray(a){var ac;ac=a.length?$.makeArray(a):$.extend({},a),$.each(permutation,function(i){a[i]=ac[this]})}function resortRows(parent,clobj){$(">tr"+(clobj||""),parent).each(function(){var row=this,elems=$.makeArray(row.cells);$.each(permutation,function(){var e=elems[this];e&&row.appendChild(e)})})}var ts=this.get(0);resortArray(ts.p.colModel),resortArray(ts.p.colNames),resortArray(ts.grid.headers),resortRows($("thead:first",ts.grid.hDiv),keepHeader&&":not(.ui-jqgrid-labels)"),updateCells&&resortRows($("#"+$.jgrid.jqID(ts.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot"),ts.p.footerrow&&resortRows($("tbody:first",ts.grid.sDiv)),ts.p.remapColumns&&(ts.p.remapColumns.length?resortArray(ts.p.remapColumns):ts.p.remapColumns=$.makeArray(permutation)),ts.p.lastsort=$.inArray(ts.p.lastsort,permutation),ts.p.treeGrid&&(ts.p.expColInd=$.inArray(ts.p.expColInd,permutation)),$(ts).triggerHandler("jqGridRemapColumns",[permutation,updateCells,keepHeader])},setGridWidth:function(nwidth,shrink){return this.each(function(){if(this.grid){var cw,lvc,aw,cr,$t=this,initwidth=0,brd=$.jgrid.cellWidth()?0:$t.p.cellLayout,vc=0,hs=!1,scw=$t.p.scrollOffset,gw=0,cl=0;if("boolean"!=typeof shrink&&(shrink=$t.p.shrinkToFit),!isNaN(nwidth)){if(nwidth=parseInt(nwidth,10),$t.grid.width=$t.p.width=nwidth,$("#gbox_"+$.jgrid.jqID($t.p.id)).css("width",nwidth+"px"),$("#gview_"+$.jgrid.jqID($t.p.id)).css("width",nwidth+"px"),$($t.grid.bDiv).css("width",nwidth+"px"),$($t.grid.hDiv).css("width",nwidth+"px"),$t.p.pager&&$($t.p.pager).css("width",nwidth+"px"),$t.p.toppager&&$($t.p.toppager).css("width",nwidth+"px"),$t.p.toolbar[0]===!0&&($($t.grid.uDiv).css("width",nwidth+"px"),"both"==$t.p.toolbar[1]&&$($t.grid.ubDiv).css("width",nwidth+"px")),$t.p.footerrow&&$($t.grid.sDiv).css("width",nwidth+"px"),shrink===!1&&$t.p.forceFit===!0&&($t.p.forceFit=!1),shrink===!0){if($.each($t.p.colModel,function(){this.hidden===!1&&(cw=this.widthOrg,initwidth+=cw+brd,this.fixed?gw+=cw+brd:vc++,cl++)}),0===vc)return;$t.p.tblwidth=initwidth,aw=nwidth-brd*vc-gw,isNaN($t.p.height)||($($t.grid.bDiv)[0].clientHeight<$($t.grid.bDiv)[0].scrollHeight||1===$t.rows.length)&&(hs=!0,aw-=scw),initwidth=0;var cle=$t.grid.cols.length>0;if($.each($t.p.colModel,function(i){if(this.hidden===!1&&!this.fixed){if(cw=this.widthOrg,cw=Math.round(aw*cw/($t.p.tblwidth-brd*vc-gw)),0>cw)return;this.width=cw,initwidth+=cw,$t.grid.headers[i].width=cw,$t.grid.headers[i].el.style.width=cw+"px",$t.p.footerrow&&($t.grid.footers[i].style.width=cw+"px"),cle&&($t.grid.cols[i].style.width=cw+"px"),lvc=i}}),!lvc)return;if(cr=0,hs?nwidth-gw-(initwidth+brd*vc)!==scw&&(cr=nwidth-gw-(initwidth+brd*vc)-scw):1!==Math.abs(nwidth-gw-(initwidth+brd*vc))&&(cr=nwidth-gw-(initwidth+brd*vc)),$t.p.colModel[lvc].width+=cr,$t.p.tblwidth=initwidth+cr+brd*vc+gw,$t.p.tblwidth>nwidth){var delta=$t.p.tblwidth-parseInt(nwidth,10);$t.p.tblwidth=nwidth,cw=$t.p.colModel[lvc].width=$t.p.colModel[lvc].width-delta}else cw=$t.p.colModel[lvc].width;$t.grid.headers[lvc].width=cw,$t.grid.headers[lvc].el.style.width=cw+"px",cle&&($t.grid.cols[lvc].style.width=cw+"px"),$t.p.footerrow&&($t.grid.footers[lvc].style.width=cw+"px")}$t.p.tblwidth&&($("table:first",$t.grid.bDiv).css("width",$t.p.tblwidth+"px"),$("table:first",$t.grid.hDiv).css("width",$t.p.tblwidth+"px"),$t.grid.hDiv.scrollLeft=$t.grid.bDiv.scrollLeft,$t.p.footerrow&&$("table:first",$t.grid.sDiv).css("width",$t.p.tblwidth+"px"))}}})},setGridHeight:function(nh){return this.each(function(){var $t=this;if($t.grid){var bDiv=$($t.grid.bDiv);bDiv.css({height:nh+(isNaN(nh)?"":"px")}),$t.p.frozenColumns===!0&&$("#"+$.jgrid.jqID($t.p.id)+"_frozen").parent().height(bDiv.height()-16),$t.p.height=nh,$t.p.scroll&&$t.grid.populateVisible()}})},setCaption:function(newcap){return this.each(function(){this.p.caption=newcap,$("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(newcap),$(this.grid.cDiv).show()})},setLabel:function(colname,nData,prop,attrp){return this.each(function(){var $t=this,pos=-1;if($t.grid&&"undefined"!=typeof colname&&($($t.p.colModel).each(function(i){return this.name==colname?(pos=i,!1):void 0}),pos>=0)){var thecol=$("tr.ui-jqgrid-labels th:eq("+pos+")",$t.grid.hDiv);if(nData){var ico=$(".s-ico",thecol);$("[id^=jqgh_]",thecol).empty().html(nData).append(ico),$t.p.colNames[pos]=nData}prop&&("string"==typeof prop?$(thecol).addClass(prop):$(thecol).css(prop)),"object"==typeof attrp&&$(thecol).attr(attrp)}})},setCell:function(rowid,colname,nData,cssp,attrp,forceupd){return this.each(function(){var v,title,$t=this,pos=-1;if($t.grid&&(isNaN(colname)?$($t.p.colModel).each(function(i){return this.name==colname?(pos=i,!1):void 0}):pos=parseInt(colname,10),pos>=0)){var ind=$t.rows.namedItem(rowid);if(ind){var tcell=$("td:eq("+pos+")",ind);if((""!==nData||forceupd===!0)&&(v=$t.formatter(rowid,nData,pos,ind,"edit"),title=$t.p.colModel[pos].title?{title:$.jgrid.stripHtml(v)}:{},$t.p.treeGrid&&$(".tree-wrap",$(tcell)).length>0?$("span",$(tcell)).html(v).attr(title):$(tcell).html(v).attr(title),"local"==$t.p.datatype)){var index,cm=$t.p.colModel[pos];nData=cm.formatter&&"string"==typeof cm.formatter&&"date"==cm.formatter?$.unformat.date.call($t,nData,cm):nData,index=$t.p._index[rowid],"undefined"!=typeof index&&($t.p.data[index][cm.name]=nData)}"string"==typeof cssp?$(tcell).addClass(cssp):cssp&&$(tcell).css(cssp),"object"==typeof attrp&&$(tcell).attr(attrp)}}})},getCell:function(rowid,col){var ret=!1;return this.each(function(){var $t=this,pos=-1;if($t.grid&&(isNaN(col)?$($t.p.colModel).each(function(i){return this.name===col?(pos=i,!1):void 0}):pos=parseInt(col,10),pos>=0)){var ind=$t.rows.namedItem(rowid);if(ind)try{ret=$.unformat.call($t,$("td:eq("+pos+")",ind),{rowId:ind.id,colModel:$t.p.colModel[pos]},pos)}catch(e){ret=$.jgrid.htmlDecode($("td:eq("+pos+")",ind).html())}}}),ret},getCol:function(col,obj,mathopr){var val,min,max,v,ret=[],sum=0;return obj="boolean"!=typeof obj?!1:obj,"undefined"==typeof mathopr&&(mathopr=!1),this.each(function(){var $t=this,pos=-1;if($t.grid&&(isNaN(col)?$($t.p.colModel).each(function(i){return this.name===col?(pos=i,!1):void 0}):pos=parseInt(col,10),pos>=0)){var ln=$t.rows.length,i=0;if(ln&&ln>0){for(;ln>i;){if($($t.rows[i]).hasClass("jqgrow")){try{val=$.unformat.call($t,$($t.rows[i].cells[pos]),{rowId:$t.rows[i].id,colModel:$t.p.colModel[pos]},pos)}catch(e){val=$.jgrid.htmlDecode($t.rows[i].cells[pos].innerHTML)}mathopr?(v=parseFloat(val),sum+=v,void 0===max&&(max=min=v),min=Math.min(min,v),max=Math.max(max,v)):ret.push(obj?{id:$t.rows[i].id,value:val}:val)}i++}if(mathopr)switch(mathopr.toLowerCase()){case"sum":ret=sum;break;case"avg":ret=sum/ln;break;case"count":ret=ln;break;case"min":ret=min;break;case"max":ret=max}}}}),ret},clearGridData:function(clearfooter){return this.each(function(){var $t=this;if($t.grid){if("boolean"!=typeof clearfooter&&(clearfooter=!1),$t.p.deepempty)$("#"+$.jgrid.jqID($t.p.id)+" tbody:first tr:gt(0)").remove();else{var trf=$("#"+$.jgrid.jqID($t.p.id)+" tbody:first tr:first")[0];$("#"+$.jgrid.jqID($t.p.id)+" tbody:first").empty().append(trf)}$t.p.footerrow&&clearfooter&&$(".ui-jqgrid-ftable td",$t.grid.sDiv).html("&#160;"),$t.p.selrow=null,$t.p.selarrrow=[],$t.p.savedRow=[],$t.p.records=0,$t.p.page=1,$t.p.lastpage=0,$t.p.reccount=0,$t.p.data=[],$t.p._index={},$t.updatepager(!0,!1)}})},getInd:function(rowid,rc){var rw,ret=!1;return this.each(function(){rw=this.rows.namedItem(rowid),rw&&(ret=rc===!0?rw:rw.rowIndex)}),ret},bindKeys:function(settings){var o=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},settings||{});return this.each(function(){var $t=this;$("body").is("[role]")||$("body").attr("role","application"),$t.p.scrollrows=o.scrollingRows,$($t).keydown(function(event){var id,r,mind,target=$($t).find("tr[tabindex=0]")[0],expanded=$t.p.treeReader.expanded_field;if(target)if(mind=$t.p._index[target.id],37===event.keyCode||38===event.keyCode||39===event.keyCode||40===event.keyCode){if(38===event.keyCode){if(r=target.previousSibling,id="",r)if($(r).is(":hidden")){for(;r;)if(r=r.previousSibling,!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){id=r.id;break}}else id=r.id;$($t).jqGrid("setSelection",id,!0,event),event.preventDefault()}if(40===event.keyCode){if(r=target.nextSibling,id="",r)if($(r).is(":hidden")){for(;r;)if(r=r.nextSibling,!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){id=r.id;break}}else id=r.id;$($t).jqGrid("setSelection",id,!0,event),event.preventDefault()}37===event.keyCode&&($t.p.treeGrid&&$t.p.data[mind][expanded]&&$(target).find("div.treeclick").trigger("click"),$($t).triggerHandler("jqGridKeyLeft",[$t.p.selrow]),$.isFunction(o.onLeftKey)&&o.onLeftKey.call($t,$t.p.selrow)),39===event.keyCode&&($t.p.treeGrid&&!$t.p.data[mind][expanded]&&$(target).find("div.treeclick").trigger("click"),$($t).triggerHandler("jqGridKeyRight",[$t.p.selrow]),$.isFunction(o.onRightKey)&&o.onRightKey.call($t,$t.p.selrow))}else 13===event.keyCode?($($t).triggerHandler("jqGridKeyEnter",[$t.p.selrow]),$.isFunction(o.onEnter)&&o.onEnter.call($t,$t.p.selrow)):32===event.keyCode&&($($t).triggerHandler("jqGridKeySpace",[$t.p.selrow]),$.isFunction(o.onSpace)&&o.onSpace.call($t,$t.p.selrow))})})},unbindKeys:function(){return this.each(function(){$(this).unbind("keydown")})},getLocalRow:function(rowid){var ind,ret=!1;return this.each(function(){"undefined"!=typeof rowid&&(ind=this.p._index[rowid],ind>=0&&(ret=this.p.data[ind]))}),ret}})}(jQuery),function($){"use strict";$.jgrid.extend({getColProp:function(colname){var ret={},$t=this[0];if(!$t.grid)return!1;for(var cM=$t.p.colModel,i=0;i<cM.length;i++)if(cM[i].name==colname){ret=cM[i];break}return ret},setColProp:function(colname,obj){return this.each(function(){if(this.grid&&obj)for(var cM=this.p.colModel,i=0;i<cM.length;i++)if(cM[i].name==colname){$.extend(this.p.colModel[i],obj);break}})},sortGrid:function(colname,reload,sor){return this.each(function(){var $t=this,idx=-1;if($t.grid){colname||(colname=$t.p.sortname);for(var i=0;i<$t.p.colModel.length;i++)if($t.p.colModel[i].index==colname||$t.p.colModel[i].name==colname){idx=i;break}if(-1!=idx){var sort=$t.p.colModel[idx].sortable;"boolean"!=typeof sort&&(sort=!0),"boolean"!=typeof reload&&(reload=!1),sort&&$t.sortData("jqgh_"+$t.p.id+"_"+colname,idx,reload,sor)}}})},clearBeforeUnload:function(){return this.each(function(){var grid=this.grid;grid.emptyRows.call(this,!0,!0),$(grid.hDiv).unbind("mousemove"),$(this).unbind(),grid.dragEnd=null,grid.dragMove=null,grid.dragStart=null,grid.emptyRows=null,grid.populate=null,grid.populateVisible=null,grid.scrollGrid=null,grid.selectionPreserver=null,grid.bDiv=null,grid.cDiv=null,grid.hDiv=null,grid.cols=null;var i,l=grid.headers.length;for(i=0;l>i;i++)grid.headers[i].el=null;this.formatCol=null,this.sortData=null,this.updatepager=null,this.refreshIndex=null,this.setHeadCheckBox=null,this.constructTr=null,this.formatter=null,this.addXmlData=null,this.addJSONData=null})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&$(this.p.pager).remove();try{$(this).jqGrid("clearBeforeUnload"),$("#gbox_"+$.jgrid.jqID(this.id)).remove()}catch(_){}}})},GridUnload:function(){return this.each(function(){if(this.grid){var defgrid={id:$(this).attr("id"),cl:$(this).attr("class")};this.p.pager&&$(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom");var newtable=document.createElement("table");$(newtable).attr({id:defgrid.id}),newtable.className=defgrid.cl;var gid=$.jgrid.jqID(this.id);$(newtable).removeClass("ui-jqgrid-btable"),1===$(this.p.pager).parents("#gbox_"+gid).length?($(newtable).insertBefore("#gbox_"+gid).show(),$(this.p.pager).insertBefore("#gbox_"+gid)):$(newtable).insertBefore("#gbox_"+gid).show(),$(this).jqGrid("clearBeforeUnload"),$("#gbox_"+gid).remove()}})},setGridState:function(state){return this.each(function(){if(this.grid){var $t=this;"hidden"==state?($(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+$.jgrid.jqID($t.p.id)).slideUp("fast"),$t.p.pager&&$($t.p.pager).slideUp("fast"),$t.p.toppager&&$($t.p.toppager).slideUp("fast"),$t.p.toolbar[0]===!0&&("both"==$t.p.toolbar[1]&&$($t.grid.ubDiv).slideUp("fast"),$($t.grid.uDiv).slideUp("fast")),$t.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID($t.p.id)).slideUp("fast"),$(".ui-jqgrid-titlebar-close span",$t.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),$t.p.gridstate="hidden"):"visible"==state&&($(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID($t.p.id)).slideDown("fast"),$t.p.pager&&$($t.p.pager).slideDown("fast"),$t.p.toppager&&$($t.p.toppager).slideDown("fast"),$t.p.toolbar[0]===!0&&("both"==$t.p.toolbar[1]&&$($t.grid.ubDiv).slideDown("fast"),$($t.grid.uDiv).slideDown("fast")),$t.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID($t.p.id)).slideDown("fast"),$(".ui-jqgrid-titlebar-close span",$t.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),$t.p.gridstate="visible")}})},filterToolbar:function(p){return p=$.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw"},p||{}),this.each(function(){function bindEvents(selector,events){var jElem=$(selector);jElem[0]&&jQuery.each(events,function(){void 0!==this.data?jElem.bind(this.type,this.data,this.fn):jElem.bind(this.type,this.fn)})}var $t=this;if(!this.ftoolbar){var timeoutHnd,triggerToolbar=function(){var v,nm,so,sdata={},j=0,sopt={};$.each($t.p.colModel,function(){if(nm=this.index||this.name,so=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"select"==this.stype?"eq":p.defaultSearch,v=$("#gs_"+$.jgrid.jqID(this.name),this.frozen===!0&&$t.p.frozenColumns===!0?$t.grid.fhDiv:$t.grid.hDiv).val())sdata[nm]=v,sopt[nm]=so,j++;else try{delete $t.p.postData[nm]}catch(z){}});var sd=j>0?!0:!1;if(p.stringResult===!0||"local"==$t.p.datatype){var ruleGroup='{"groupOp":"'+p.groupOp+'","rules":[',gi=0;$.each(sdata,function(i,n){gi>0&&(ruleGroup+=","),ruleGroup+='{"field":"'+i+'",',ruleGroup+='"op":"'+sopt[i]+'",',n+="",ruleGroup+='"data":"'+n.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',gi++}),ruleGroup+="]}",$.extend($t.p.postData,{filters:ruleGroup}),$.each(["searchField","searchString","searchOper"],function(i,n){$t.p.postData.hasOwnProperty(n)&&delete $t.p.postData[n]})}else $.extend($t.p.postData,sdata);var saveurl;$t.p.searchurl&&(saveurl=$t.p.url,$($t).jqGrid("setGridParam",{url:$t.p.searchurl}));var bsr="stop"===$($t).triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!bsr&&$.isFunction(p.beforeSearch)&&(bsr=p.beforeSearch.call($t)),bsr||$($t).jqGrid("setGridParam",{search:sd}).trigger("reloadGrid",[{page:1}]),saveurl&&$($t).jqGrid("setGridParam",{url:saveurl}),$($t).triggerHandler("jqGridToolbarAfterSearch"),$.isFunction(p.afterSearch)&&p.afterSearch.call($t)},clearToolbar=function(trigger){var nm,sdata={},j=0;trigger="boolean"!=typeof trigger?!0:trigger,$.each($t.p.colModel,function(){var v;switch(this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(v=this.searchoptions.defaultValue),nm=this.index||this.name,this.stype){case"select":if($("#gs_"+$.jgrid.jqID(this.name)+" option",this.frozen===!0&&$t.p.frozenColumns===!0?$t.grid.fhDiv:$t.grid.hDiv).each(function(i){return 0===i&&(this.selected=!0),$(this).val()==v?(this.selected=!0,!1):void 0}),void 0!==v)sdata[nm]=v,j++;else try{delete $t.p.postData[nm]}catch(e){}break;case"text":if($("#gs_"+$.jgrid.jqID(this.name),this.frozen===!0&&$t.p.frozenColumns===!0?$t.grid.fhDiv:$t.grid.hDiv).val(v),void 0!==v)sdata[nm]=v,j++;else try{delete $t.p.postData[nm]}catch(y){}}});var sd=j>0?!0:!1;if(p.stringResult===!0||"local"==$t.p.datatype){var ruleGroup='{"groupOp":"'+p.groupOp+'","rules":[',gi=0;$.each(sdata,function(i,n){gi>0&&(ruleGroup+=","),ruleGroup+='{"field":"'+i+'",',ruleGroup+='"op":"eq",',n+="",ruleGroup+='"data":"'+n.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',gi++}),ruleGroup+="]}",$.extend($t.p.postData,{filters:ruleGroup}),$.each(["searchField","searchString","searchOper"],function(i,n){$t.p.postData.hasOwnProperty(n)&&delete $t.p.postData[n]})}else $.extend($t.p.postData,sdata);var saveurl;$t.p.searchurl&&(saveurl=$t.p.url,$($t).jqGrid("setGridParam",{url:$t.p.searchurl}));var bcv="stop"===$($t).triggerHandler("jqGridToolbarBeforeClear")?!0:!1;!bcv&&$.isFunction(p.beforeClear)&&(bcv=p.beforeClear.call($t)),bcv||trigger&&$($t).jqGrid("setGridParam",{search:sd}).trigger("reloadGrid",[{page:1}]),saveurl&&$($t).jqGrid("setGridParam",{url:saveurl}),$($t).triggerHandler("jqGridToolbarAfterClear"),$.isFunction(p.afterClear)&&p.afterClear()},toggleToolbar=function(){var trow=$("tr.ui-search-toolbar",$t.grid.hDiv),trow2=$t.p.frozenColumns===!0?$("tr.ui-search-toolbar",$t.grid.fhDiv):!1;"none"==trow.css("display")?(trow.show(),trow2&&trow2.show()):(trow.hide(),trow2&&trow2.hide())},tr=$("<tr class='ui-search-toolbar' role='rowheader'></tr>");$.each($t.p.colModel,function(){var thd,th,soptions,surl,self,cm=this;if(th=$("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+$t.p.direction+"'></th>"),thd=$("<div style='width:100%;position:relative;height:100%;padding-right:0.3em;'></div>"),this.hidden===!0&&$(th).css("display","none"),this.search=this.search===!1?!1:!0,"undefined"==typeof this.stype&&(this.stype="text"),soptions=$.extend({},this.searchoptions||{}),this.search)switch(this.stype){case"select":if(surl=this.surl||soptions.dataUrl)self=thd,$.ajax($.extend({url:surl,dataType:"html",success:function(res){if(void 0!==soptions.buildSelect){var d=soptions.buildSelect(res);d&&$(self).append(d)}else $(self).append(res);void 0!==soptions.defaultValue&&$("select",self).val(soptions.defaultValue),$("select",self).attr({name:cm.index||cm.name,id:"gs_"+cm.name}),soptions.attr&&$("select",self).attr(soptions.attr),$("select",self).css({width:"100%"}),void 0!==soptions.dataInit&&soptions.dataInit($("select",self)[0]),void 0!==soptions.dataEvents&&bindEvents($("select",self)[0],soptions.dataEvents),p.autosearch===!0&&$("select",self).change(function(){return triggerToolbar(),!1}),res=null}},$.jgrid.ajaxOptions,$t.p.ajaxSelectOptions||{}));else{var oSv,sep,delim;if(cm.searchoptions?(oSv=void 0===cm.searchoptions.value?"":cm.searchoptions.value,sep=void 0===cm.searchoptions.separator?":":cm.searchoptions.separator,delim=void 0===cm.searchoptions.delimiter?";":cm.searchoptions.delimiter):cm.editoptions&&(oSv=void 0===cm.editoptions.value?"":cm.editoptions.value,sep=void 0===cm.editoptions.separator?":":cm.editoptions.separator,delim=void 0===cm.editoptions.delimiter?";":cm.editoptions.delimiter),oSv){var elem=document.createElement("select");elem.style.width="100%",$(elem).attr({name:cm.index||cm.name,id:"gs_"+cm.name});var so,sv,ov;if("string"==typeof oSv){so=oSv.split(delim);for(var k=0;k<so.length;k++)sv=so[k].split(sep),ov=document.createElement("option"),ov.value=sv[0],ov.innerHTML=sv[1],elem.appendChild(ov)}else if("object"==typeof oSv)for(var key in oSv)oSv.hasOwnProperty(key)&&(ov=document.createElement("option"),ov.value=key,ov.innerHTML=oSv[key],elem.appendChild(ov));void 0!==soptions.defaultValue&&$(elem).val(soptions.defaultValue),soptions.attr&&$(elem).attr(soptions.attr),void 0!==soptions.dataInit&&soptions.dataInit(elem),void 0!==soptions.dataEvents&&bindEvents(elem,soptions.dataEvents),$(thd).append(elem),p.autosearch===!0&&$(elem).change(function(){return triggerToolbar(),!1
})}}break;case"text":var df=void 0!==soptions.defaultValue?soptions.defaultValue:"";$(thd).append("<input type='text' style='width:95%;padding:0px;' name='"+(cm.index||cm.name)+"' id='gs_"+cm.name+"' value='"+df+"'/>"),soptions.attr&&$("input",thd).attr(soptions.attr),void 0!==soptions.dataInit&&soptions.dataInit($("input",thd)[0]),void 0!==soptions.dataEvents&&bindEvents($("input",thd)[0],soptions.dataEvents),p.autosearch===!0&&(p.searchOnEnter?$("input",thd).keypress(function(e){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;return 13==key?(triggerToolbar(),!1):this}):$("input",thd).keydown(function(e){var key=e.which;switch(key){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:timeoutHnd&&clearTimeout(timeoutHnd),timeoutHnd=setTimeout(function(){triggerToolbar()},500)}}))}$(th).append(thd),$(tr).append(th)}),$("table thead",$t.grid.hDiv).append(tr),this.ftoolbar=!0,this.triggerToolbar=triggerToolbar,this.clearToolbar=clearToolbar,this.toggleToolbar=toggleToolbar}})},destroyGroupHeader:function(nullHeader){return"undefined"==typeof nullHeader&&(nullHeader=!0),this.each(function(){var $tr,i,l,headers,$th,$resizing,hc,$t=this,grid=$t.grid,thead=$("table.ui-jqgrid-htable thead",grid.hDiv),cm=$t.p.colModel;if(grid){for($(this).unbind(".setGroupHeaders"),$tr=$("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels"),headers=grid.headers,i=0,l=headers.length;l>i;i++){hc=cm[i].hidden?"none":"",$th=$(headers[i].el).width(headers[i].width).css("display",hc);try{$th.removeAttr("rowSpan")}catch(rs){$th.attr("rowSpan",1)}$tr.append($th),$resizing=$th.children("span.ui-jqgrid-resize"),$resizing.length>0&&($resizing[0].style.height=""),$th.children("div")[0].style.top=""}$(thead).children("tr.ui-jqgrid-labels").remove(),$(thead).prepend($tr),nullHeader===!0&&$($t).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(o){return o=$.extend({useColSpanStyle:!1,groupHeaders:[]},o||{}),this.each(function(){this.p.groupHeader=o;var i,cmi,$tr,$colHeader,th,$th,thStyle,iCol,cghi,numberOfColumns,titleText,cVisibleColumns,$theadInTable,ts=this,skip=0,colModel=ts.p.colModel,cml=colModel.length,ths=ts.grid.headers,$htable=$("table.ui-jqgrid-htable",ts.grid.hDiv),$trLabels=$htable.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),$thead=$htable.children("thead"),$firstHeaderRow=$htable.find(".jqg-first-row-header");void 0===$firstHeaderRow[0]?$firstHeaderRow=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):$firstHeaderRow.empty();var $firstRow,inColumnHeader=function(text,columnHeaders){for(var i=0,length=columnHeaders.length;length>i;i++)if(columnHeaders[i].startColumnName===text)return i;return-1};for($(ts).prepend($thead),$tr=$("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels jqg-third-row-header"),i=0;cml>i;i++)if(th=ths[i].el,$th=$(th),cmi=colModel[i],thStyle={height:"0px",width:ths[i].width+"px",display:cmi.hidden?"none":""},$("<th>",{role:"gridcell"}).css(thStyle).addClass("ui-first-th-"+ts.p.direction).appendTo($firstHeaderRow),th.style.width="",iCol=inColumnHeader(cmi.name,o.groupHeaders),iCol>=0){for(cghi=o.groupHeaders[iCol],numberOfColumns=cghi.numberOfColumns,titleText=cghi.titleText,cVisibleColumns=0,iCol=0;numberOfColumns>iCol&&cml>i+iCol;iCol++)colModel[i+iCol].hidden||cVisibleColumns++;$colHeader=$("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+ts.p.direction).css({height:"22px","border-top":"0px none"}).html(titleText),cVisibleColumns>0&&$colHeader.attr("colspan",String(cVisibleColumns)),ts.p.headertitles&&$colHeader.attr("title",$colHeader.text()),0===cVisibleColumns&&$colHeader.hide(),$th.before($colHeader),$tr.append(th),skip=numberOfColumns-1}else 0===skip?o.useColSpanStyle?$th.attr("rowspan","2"):($("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+ts.p.direction).css({display:cmi.hidden?"none":"","border-top":"0px none"}).insertBefore($th),$tr.append(th)):($tr.append(th),skip--);$theadInTable=$(ts).children("thead"),$theadInTable.prepend($firstHeaderRow),$tr.insertAfter($trLabels),$htable.append($theadInTable),o.useColSpanStyle&&($htable.find("span.ui-jqgrid-resize").each(function(){var $parent=$(this).parent();$parent.is(":visible")&&(this.style.cssText="height: "+$parent.height()+"px !important; cursor: col-resize;")}),$htable.find("div.ui-jqgrid-sortable").each(function(){var $ts=$(this),$parent=$ts.parent();$parent.is(":visible")&&$parent.is(":has(span.ui-jqgrid-resize)")&&$ts.css("top",($parent.height()-$ts.outerHeight())/2+"px")})),$firstRow=$theadInTable.find("tr.jqg-first-row-header"),$(ts).bind("jqGridResizeStop.setGroupHeaders",function(e,nw,idx){$firstRow.find("th").eq(idx).width(nw)})})},setFrozenColumns:function(){return this.each(function(){if(this.grid){var $t=this,cm=$t.p.colModel,i=0,len=cm.length,maxfrozen=-1,frozen=!1;if(!($t.p.subGrid===!0||$t.p.treeGrid===!0||$t.p.cellEdit===!0||$t.p.sortable||$t.p.scroll||$t.p.grouping)){for($t.p.rownumbers&&i++,$t.p.multiselect&&i++;len>i&&cm[i].frozen===!0;)frozen=!0,maxfrozen=i,i++;if(maxfrozen>=0&&frozen){var top=$t.p.caption?$($t.grid.cDiv).outerHeight():0,hth=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID($t.p.id)).height();$t.p.toppager&&(top+=$($t.grid.topDiv).outerHeight()),$t.p.toolbar[0]===!0&&"bottom"!=$t.p.toolbar[1]&&(top+=$($t.grid.uDiv).outerHeight()),$t.grid.fhDiv=$('<div style="position:absolute;left:0px;top:'+top+"px;height:"+hth+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>'),$t.grid.fbDiv=$('<div style="position:absolute;left:0px;top:'+(parseInt(top,10)+parseInt(hth,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>'),$("#gview_"+$.jgrid.jqID($t.p.id)).append($t.grid.fhDiv);var htbl=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID($t.p.id)).clone(!0);if($t.p.groupHeader){$("tr.jqg-first-row-header, tr.jqg-third-row-header",htbl).each(function(){$("th:gt("+maxfrozen+")",this).remove()});var swapfroz=-1,fdel=-1;$("tr.jqg-second-row-header th",htbl).each(function(){var cs=parseInt($(this).attr("colspan"),10);return cs&&(swapfroz+=cs,fdel++),swapfroz===maxfrozen?!1:void 0}),swapfroz!==maxfrozen&&(fdel=maxfrozen),$("tr.jqg-second-row-header",htbl).each(function(){$("th:gt("+fdel+")",this).remove()})}else $("tr",htbl).each(function(){$("th:gt("+maxfrozen+")",this).remove()});$(htbl).width(1),$($t.grid.fhDiv).append(htbl).mousemove(function(e){return $t.grid.resizing?($t.grid.dragMove(e),!1):void 0}),$($t).bind("jqGridResizeStop.setFrozenColumns",function(e,w,index){var rhth=$(".ui-jqgrid-htable",$t.grid.fhDiv);$("th:eq("+index+")",rhth).width(w);var btd=$(".ui-jqgrid-btable",$t.grid.fbDiv);$("tr:first td:eq("+index+")",btd).width(w)}),$($t).bind("jqGridOnSortCol.setFrozenColumns",function(index,idxcol){var previousSelectedTh=$("tr.ui-jqgrid-labels:last th:eq("+$t.p.lastsort+")",$t.grid.fhDiv),newSelectedTh=$("tr.ui-jqgrid-labels:last th:eq("+idxcol+")",$t.grid.fhDiv);$("span.ui-grid-ico-sort",previousSelectedTh).addClass("ui-state-disabled"),$(previousSelectedTh).attr("aria-selected","false"),$("span.ui-icon-"+$t.p.sortorder,newSelectedTh).removeClass("ui-state-disabled"),$(newSelectedTh).attr("aria-selected","true"),$t.p.viewsortcols[0]||$t.p.lastsort!=idxcol&&($("span.s-ico",previousSelectedTh).hide(),$("span.s-ico",newSelectedTh).show())}),$("#gview_"+$.jgrid.jqID($t.p.id)).append($t.grid.fbDiv),jQuery($t.grid.bDiv).scroll(function(){jQuery($t.grid.fbDiv).scrollTop(jQuery(this).scrollTop())}),$t.p.hoverrows===!0&&$("#"+$.jgrid.jqID($t.p.id)).unbind("mouseover").unbind("mouseout"),$($t).bind("jqGridAfterGridComplete.setFrozenColumns",function(){$("#"+$.jgrid.jqID($t.p.id)+"_frozen").remove(),jQuery($t.grid.fbDiv).height(jQuery($t.grid.bDiv).height()-16);var btbl=$("#"+$.jgrid.jqID($t.p.id)).clone(!0);$("tr",btbl).each(function(){$("td:gt("+maxfrozen+")",this).remove()}),$(btbl).width(1).attr("id",$t.p.id+"_frozen"),$($t.grid.fbDiv).append(btbl),$t.p.hoverrows===!0&&($("tr.jqgrow",btbl).hover(function(){$(this).addClass("ui-state-hover"),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID($t.p.id)).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover"),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID($t.p.id)).removeClass("ui-state-hover")}),$("tr.jqgrow","#"+$.jgrid.jqID($t.p.id)).hover(function(){$(this).addClass("ui-state-hover"),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID($t.p.id)+"_frozen").addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover"),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID($t.p.id)+"_frozen").removeClass("ui-state-hover")})),btbl=null}),$t.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){if(this.grid&&this.p.frozenColumns===!0){var $t=this;if($($t.grid.fhDiv).remove(),$($t.grid.fbDiv).remove(),$t.grid.fhDiv=null,$t.grid.fbDiv=null,$(this).unbind(".setFrozenColumns"),$t.p.hoverrows===!0){var ptr;$("#"+$.jgrid.jqID($t.p.id)).bind("mouseover",function(e){ptr=$(e.target).closest("tr.jqgrow"),"ui-subgrid"!==$(ptr).attr("class")&&$(ptr).addClass("ui-state-hover")}).bind("mouseout",function(e){ptr=$(e.target).closest("tr.jqgrow"),$(ptr).removeClass("ui-state-hover")})}this.p.frozenColumns=!1}})}})}(jQuery),function($){$.fn.jqm=function(o){var p={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:F,ajaxText:"",target:F,modal:F,toTop:F,onShow:F,onHide:F,onLoad:F};return this.each(function(){return this._jqm?H[this._jqm].c=$.extend({},H[this._jqm].c,o):(s++,this._jqm=s,H[s]={c:$.extend(p,$.jqm.params,o),a:F,w:$(this).addClass("jqmID"+s),s:s},void(p.trigger&&$(this).jqmAddTrigger(p.trigger)))})},$.fn.jqmAddClose=function(e){return hs(this,e,"jqmHide")},$.fn.jqmAddTrigger=function(e){return hs(this,e,"jqmShow")},$.fn.jqmShow=function(t){return this.each(function(){$.jqm.open(this._jqm,t)})},$.fn.jqmHide=function(t){return this.each(function(){$.jqm.close(this._jqm,t)})},$.jqm={hash:{},open:function(s,t){var h=H[s],c=h.c,cc="."+c.closeClass,z=parseInt(h.w.css("z-index"));z=z>0?z:3e3;var o=$("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":z-1,opacity:c.overlay/100});if(h.a)return F;if(h.t=t,h.a=!0,h.w.css("z-index",z),c.modal?(A[0]||setTimeout(function(){L("bind")},1),A.push(s)):c.overlay>0?c.closeoverlay&&h.w.jqmAddClose(o):o=F,h.o=o?o.addClass(c.overlayClass).prependTo("body"):F,ie6&&($("html,body").css({height:"100%",width:"100%"}),o)){o=o.css({position:"absolute"})[0];for(var y in{Top:1,Left:1})o.style.setExpression(y.toLowerCase(),"(_=(document.documentElement.scroll"+y+" || document.body.scroll"+y+"))+'px'")}if(c.ajax){var r=c.target||h.w,u=c.ajax;r="string"==typeof r?$(r,h.w):$(r),u="@"==u.substr(0,1)?$(t).attr(u.substring(1)):u,r.html(c.ajaxText).load(u,function(){c.onLoad&&c.onLoad.call(this,h),cc&&h.w.jqmAddClose($(cc,h.w)),e(h)})}else cc&&h.w.jqmAddClose($(cc,h.w));return c.toTop&&h.o&&h.w.before('<span id="jqmP'+h.w[0]._jqm+'"></span>').insertAfter(h.o),c.onShow?c.onShow(h):h.w.show(),e(h),F},close:function(s){var h=H[s];return h.a?(h.a=F,A[0]&&(A.pop(),A[0]||L("unbind")),h.c.toTop&&h.o&&$("#jqmP"+h.w[0]._jqm).after(h.w).remove(),h.c.onHide?h.c.onHide(h):(h.w.hide(),h.o&&h.o.remove()),F):F},params:{}};var s=0,H=$.jqm.hash,A=[],ie6=$.browser.msie&&"6.0"==$.browser.version,F=!1,e=function(h){var i=$('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0});ie6&&(h.o?h.o.html('<p style="width:100%;height:100%"/>').prepend(i):$("iframe.jqm",h.w)[0]||h.w.prepend(i)),f(h)},f=function(h){try{$(":input:visible",h.w)[0].focus()}catch(_){}},L=function(t){$(document)[t]("keypress",m)[t]("keydown",m)[t]("mousedown",m)},m=function(e){var h=H[A[A.length-1]],r=!$(e.target).parents(".jqmID"+h.s)[0];return r&&f(h),!r},hs=function(w,t,c){return w.each(function(){var s=this._jqm;$(t).each(function(){this[c]||(this[c]=[],$(this).click(function(){for(var i in{jqmShow:1,jqmHide:1})for(var s in this[i])H[this[i][s]]&&H[this[i][s]].w[i](this);return F})),this[c].push(s)})})}}(jQuery),function($){$.fn.jqDrag=function(h){return i(this,h,"d")},$.fn.jqResize=function(h,ar){return i(this,h,"r",ar)},$.jqDnR={dnr:{},e:0,drag:function(v){return"d"==M.k?E.css({left:M.X+v.pageX-M.pX,top:M.Y+v.pageY-M.pY}):(E.css({width:Math.max(v.pageX-M.pX+M.W,0),height:Math.max(v.pageY-M.pY+M.H,0)}),M1&&E1.css({width:Math.max(v.pageX-M1.pX+M1.W,0),height:Math.max(v.pageY-M1.pY+M1.H,0)})),!1},stop:function(){$(document).unbind("mousemove",J.drag).unbind("mouseup",J.stop)}};var E1,M1,J=$.jqDnR,M=J.dnr,E=J.e,i=function(e,h,k,aR){return e.each(function(){h=h?$(h,e):e,h.bind("mousedown",{e:e,k:k},function(v){var d=v.data,p={};if(E=d.e,E1=aR?$(aR):!1,"relative"!=E.css("position"))try{E.position(p)}catch(e){}if(M={X:p.left||f("left")||0,Y:p.top||f("top")||0,W:f("width")||E[0].scrollWidth||0,H:f("height")||E[0].scrollHeight||0,pX:v.pageX,pY:v.pageY,k:d.k},M1=E1&&"d"!=d.k?{X:p.left||f1("left")||0,Y:p.top||f1("top")||0,W:E1[0].offsetWidth||f1("width")||0,H:E1[0].offsetHeight||f1("height")||0,pX:v.pageX,pY:v.pageY,k:d.k}:!1,$("input.hasDatepicker",E[0])[0])try{$("input.hasDatepicker",E[0]).datepicker("hide")}catch(dpe){}return $(document).mousemove($.jqDnR.drag).mouseup($.jqDnR.stop),!1})})},f=function(k){return parseInt(E.css(k),10)||!1},f1=function(k){return parseInt(E1.css(k),10)||!1}}(jQuery);var xmlJsonClass={xml2json:function(xml,tab){9===xml.nodeType&&(xml=xml.documentElement);var nws=this.removeWhite(xml),obj=this.toObj(nws),json=this.toJson(obj,xml.nodeName,"	");return"{\n"+tab+(tab?json.replace(/\t/g,tab):json.replace(/\t|\n/g,""))+"\n}"},json2xml:function(o,tab){var m,toXml=function(v,name,ind){var i,n,xml="";if(v instanceof Array)if(0===v.length)xml+=ind+"<"+name+">__EMPTY_ARRAY_</"+name+">\n";else for(i=0,n=v.length;n>i;i+=1){var sXml=ind+toXml(v[i],name,ind+"	")+"\n";xml+=sXml}else if("object"==typeof v){var hasChild=!1;xml+=ind+"<"+name;var m;for(m in v)v.hasOwnProperty(m)&&("@"===m.charAt(0)?xml+=" "+m.substr(1)+'="'+v[m].toString()+'"':hasChild=!0);if(xml+=hasChild?">":"/>",hasChild){for(m in v)v.hasOwnProperty(m)&&("#text"===m?xml+=v[m]:"#cdata"===m?xml+="<![CDATA["+v[m]+"]]>":"@"!==m.charAt(0)&&(xml+=toXml(v[m],m,ind+"	")));xml+=("\n"===xml.charAt(xml.length-1)?ind:"")+"</"+name+">"}}else"function"==typeof v?xml+=ind+"<"+name+"><![CDATA["+v+"]]></"+name+">":(void 0===v&&(v=""),xml+='""'===v.toString()||0===v.toString().length?ind+"<"+name+">__EMPTY_STRING_</"+name+">":ind+"<"+name+">"+v.toString()+"</"+name+">");return xml},xml="";for(m in o)o.hasOwnProperty(m)&&(xml+=toXml(o[m],m,""));return tab?xml.replace(/\t/g,tab):xml.replace(/\t|\n/g,"")},toObj:function(xml){var o={},FuncTest=/function/i;if(1===xml.nodeType){if(xml.attributes.length){var i;for(i=0;i<xml.attributes.length;i+=1)o["@"+xml.attributes[i].nodeName]=(xml.attributes[i].nodeValue||"").toString()}if(xml.firstChild){var n,textChild=0,cdataChild=0,hasElementChild=!1;for(n=xml.firstChild;n;n=n.nextSibling)1===n.nodeType?hasElementChild=!0:3===n.nodeType&&n.nodeValue.match(/[^ \f\n\r\t\v]/)?textChild+=1:4===n.nodeType&&(cdataChild+=1);if(hasElementChild)if(2>textChild&&2>cdataChild)for(this.removeWhite(xml),n=xml.firstChild;n;n=n.nextSibling)3===n.nodeType?o["#text"]=this.escape(n.nodeValue):4===n.nodeType?FuncTest.test(n.nodeValue)?o[n.nodeName]=[o[n.nodeName],n.nodeValue]:o["#cdata"]=this.escape(n.nodeValue):o[n.nodeName]?o[n.nodeName]instanceof Array?o[n.nodeName][o[n.nodeName].length]=this.toObj(n):o[n.nodeName]=[o[n.nodeName],this.toObj(n)]:o[n.nodeName]=this.toObj(n);else xml.attributes.length?o["#text"]=this.escape(this.innerXml(xml)):o=this.escape(this.innerXml(xml));else if(textChild)xml.attributes.length?o["#text"]=this.escape(this.innerXml(xml)):(o=this.escape(this.innerXml(xml)),"__EMPTY_ARRAY_"===o?o="[]":"__EMPTY_STRING_"===o&&(o=""));else if(cdataChild)if(cdataChild>1)o=this.escape(this.innerXml(xml));else for(n=xml.firstChild;n;n=n.nextSibling){if(FuncTest.test(xml.firstChild.nodeValue)){o=xml.firstChild.nodeValue;break}o["#cdata"]=this.escape(n.nodeValue)}}xml.attributes.length||xml.firstChild||(o=null)}else 9===xml.nodeType?o=this.toObj(xml.documentElement):alert("unhandled node type: "+xml.nodeType);return o},toJson:function(o,name,ind,wellform){void 0===wellform&&(wellform=!0);var json=name?'"'+name+'"':"",tab="	",newline="\n";if(wellform||(tab="",newline=""),"[]"===o)json+=name?":[]":"[]";else if(o instanceof Array){var n,i,ar=[];for(i=0,n=o.length;n>i;i+=1)ar[i]=this.toJson(o[i],"",ind+tab,wellform);json+=(name?":[":"[")+(ar.length>1?newline+ind+tab+ar.join(","+newline+ind+tab)+newline+ind:ar.join(""))+"]"}else if(null===o)json+=(name&&":")+"null";else if("object"==typeof o){var m,arr=[];for(m in o)o.hasOwnProperty(m)&&(arr[arr.length]=this.toJson(o[m],m,ind+tab,wellform));json+=(name?":{":"{")+(arr.length>1?newline+ind+tab+arr.join(","+newline+ind+tab)+newline+ind:arr.join(""))+"}"}else json+="string"==typeof o?(name&&":")+'"'+o.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(name&&":")+o.toString();return json},innerXml:function(node){var s="";if("innerHTML"in node)s=node.innerHTML;else for(var asXml=function(n){var i,s="";if(1===n.nodeType){for(s+="<"+n.nodeName,i=0;i<n.attributes.length;i+=1)s+=" "+n.attributes[i].nodeName+'="'+(n.attributes[i].nodeValue||"").toString()+'"';if(n.firstChild){s+=">";for(var c=n.firstChild;c;c=c.nextSibling)s+=asXml(c);s+="</"+n.nodeName+">"}else s+="/>"}else 3===n.nodeType?s+=n.nodeValue:4===n.nodeType&&(s+="<![CDATA["+n.nodeValue+"]]>");return s},c=node.firstChild;c;c=c.nextSibling)s+=asXml(c);return s},escape:function(txt){return txt.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();var n;for(n=e.firstChild;n;)if(3===n.nodeType)if(n.nodeValue.match(/[^ \f\n\r\t\v]/))n=n.nextSibling;else{var nxt=n.nextSibling;e.removeChild(n),n=nxt}else 1===n.nodeType?(this.removeWhite(n),n=n.nextSibling):n=n.nextSibling;return e}};!function($){"use strict";$.fmatter={},$.extend($.fmatter,{isBoolean:function(o){return"boolean"==typeof o},isObject:function(o){return o&&("object"==typeof o||$.isFunction(o))||!1},isString:function(o){return"string"==typeof o},isNumber:function(o){return"number"==typeof o&&isFinite(o)},isNull:function(o){return null===o},isUndefined:function(o){return"undefined"==typeof o},isValue:function(o){return this.isObject(o)||this.isString(o)||this.isNumber(o)||this.isBoolean(o)},isEmpty:function(o){return!this.isString(o)&&this.isValue(o)?!1:this.isValue(o)?(o=$.trim(o).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,""),""===o):!0}}),$.fn.fmatter=function(formatType,cellval,opts,rwd,act){var v=cellval;opts=$.extend({},$.jgrid.formatter,opts);try{v=$.fn.fmatter[formatType].call(this,cellval,opts,rwd,act)}catch(fe){}return v},$.fmatter.util={NumberFormat:function(nData,opts){if($.fmatter.isNumber(nData)||(nData*=1),$.fmatter.isNumber(nData)){var nDotIndex,bNegative=0>nData,sOutput=nData+"",sDecimalSeparator=opts.decimalSeparator?opts.decimalSeparator:".";if($.fmatter.isNumber(opts.decimalPlaces)){var nDecimalPlaces=opts.decimalPlaces,nDecimal=Math.pow(10,nDecimalPlaces);if(sOutput=Math.round(nData*nDecimal)/nDecimal+"",nDotIndex=sOutput.lastIndexOf("."),nDecimalPlaces>0)for(0>nDotIndex?(sOutput+=sDecimalSeparator,nDotIndex=sOutput.length-1):"."!==sDecimalSeparator&&(sOutput=sOutput.replace(".",sDecimalSeparator));sOutput.length-1-nDotIndex<nDecimalPlaces;)sOutput+="0"}if(opts.thousandsSeparator){var sThousandsSeparator=opts.thousandsSeparator;nDotIndex=sOutput.lastIndexOf(sDecimalSeparator),nDotIndex=nDotIndex>-1?nDotIndex:sOutput.length;for(var sNewOutput=sOutput.substring(nDotIndex),nCount=-1,i=nDotIndex;i>0;i--)nCount++,nCount%3===0&&i!==nDotIndex&&(!bNegative||i>1)&&(sNewOutput=sThousandsSeparator+sNewOutput),sNewOutput=sOutput.charAt(i-1)+sNewOutput;sOutput=sNewOutput}return sOutput=opts.prefix?opts.prefix+sOutput:sOutput,sOutput=opts.suffix?sOutput+opts.suffix:sOutput}return nData},DateFormat:function(format,date,newformat,opts){var dM,k,hl,token=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,msDateRegExp=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),msMatch="string"==typeof date?date.match(msDateRegExp):null,pad=function(value,length){for(value=String(value),length=parseInt(length,10)||2;value.length<length;)value="0"+value;return value},ts={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},timestamp=0,dateFormat=["i18n"];if(dateFormat.i18n={dayNames:opts.dayNames,monthNames:opts.monthNames},format in opts.masks&&(format=opts.masks[format]),isNaN(date-0)||"u"!=String(format).toLowerCase())if(date.constructor===Date)timestamp=date;else if(null!==msMatch){if(timestamp=new Date(parseInt(msMatch[1],10)),msMatch[3]){var offset=60*Number(msMatch[5])+Number(msMatch[6]);offset*="-"==msMatch[4]?1:-1,offset-=timestamp.getTimezoneOffset(),timestamp.setTime(Number(Number(timestamp)+60*offset*1e3))}}else{for(date=String(date).split(/[\\\/:_;.,\t\T\s-]/),format=format.split(/[\\\/:_;.,\t\T\s-]/),k=0,hl=format.length;hl>k;k++)"M"==format[k]&&(dM=$.inArray(date[k],dateFormat.i18n.monthNames),-1!==dM&&12>dM&&(date[k]=dM+1)),"F"==format[k]&&(dM=$.inArray(date[k],dateFormat.i18n.monthNames),-1!==dM&&dM>11&&(date[k]=dM+1-12)),date[k]&&(ts[format[k].toLowerCase()]=parseInt(date[k],10));if(ts.f&&(ts.m=ts.f),0===ts.m&&0===ts.y&&0===ts.d)return"&#160;";ts.m=parseInt(ts.m,10)-1;var ty=ts.y;ty>=70&&99>=ty?ts.y=1900+ts.y:ty>=0&&69>=ty&&(ts.y=2e3+ts.y),timestamp=new Date(ts.y,ts.m,ts.d,ts.h,ts.i,ts.s,ts.u)}else timestamp=new Date(1e3*parseFloat(date));newformat in opts.masks?newformat=opts.masks[newformat]:newformat||(newformat="Y-m-d");var G=timestamp.getHours(),i=timestamp.getMinutes(),j=timestamp.getDate(),n=timestamp.getMonth()+1,o=timestamp.getTimezoneOffset(),s=timestamp.getSeconds(),u=timestamp.getMilliseconds(),w=timestamp.getDay(),Y=timestamp.getFullYear(),N=(w+6)%7+1,z=(new Date(Y,n-1,j)-new Date(Y,0,1))/864e5,flags={d:pad(j),D:dateFormat.i18n.dayNames[w],j:j,l:dateFormat.i18n.dayNames[w+7],N:N,S:opts.S(j),w:w,z:z,W:5>N?Math.floor((z+N-1)/7)+1:Math.floor((z+N-1)/7)||((new Date(Y-1,0,1).getDay()+6)%7<4?53:52),F:dateFormat.i18n.monthNames[n-1+12],m:pad(n),M:dateFormat.i18n.monthNames[n-1],n:n,t:"?",L:"?",o:"?",Y:Y,y:String(Y).substring(2),a:12>G?opts.AmPm[0]:opts.AmPm[1],A:12>G?opts.AmPm[2]:opts.AmPm[3],B:"?",g:G%12||12,G:G,h:pad(G%12||12),H:pad(G),i:pad(i),s:pad(s),u:u,e:"?",I:"?",O:(o>0?"-":"+")+pad(100*Math.floor(Math.abs(o)/60)+Math.abs(o)%60,4),P:"?",T:(String(timestamp).match(timezone)||[""]).pop().replace(timezoneClip,""),Z:"?",c:"?",r:"?",U:Math.floor(timestamp/1e3)};return newformat.replace(token,function($0){return $0 in flags?flags[$0]:$0.substring(1)})}},$.fn.fmatter.defaultFormat=function(cellval,opts){return $.fmatter.isValue(cellval)&&""!==cellval?cellval:opts.defaultValue?opts.defaultValue:"&#160;"},$.fn.fmatter.email=function(cellval,opts){return $.fmatter.isEmpty(cellval)?$.fn.fmatter.defaultFormat(cellval,opts):'<a href="mailto:'+cellval+'">'+cellval+"</a>"},$.fn.fmatter.checkbox=function(cval,opts){var ds,op=$.extend({},opts.checkbox);void 0===opts.colModel||$.fmatter.isUndefined(opts.colModel.formatoptions)||(op=$.extend({},op,opts.colModel.formatoptions)),ds=op.disabled===!0?'disabled="disabled"':"",($.fmatter.isEmpty(cval)||$.fmatter.isUndefined(cval))&&(cval=$.fn.fmatter.defaultFormat(cval,op)),cval+="",cval=cval.toLowerCase();var bchk=cval.search(/(false|0|no|off)/i)<0?" checked='checked' ":"";return'<input type="checkbox" '+bchk+' value="'+cval+'" offval="no" '+ds+"/>"},$.fn.fmatter.link=function(cellval,opts){var op={target:opts.target},target="";return void 0===opts.colModel||$.fmatter.isUndefined(opts.colModel.formatoptions)||(op=$.extend({},op,opts.colModel.formatoptions)),op.target&&(target="target="+op.target),$.fmatter.isEmpty(cellval)?$.fn.fmatter.defaultFormat(cellval,opts):"<a "+target+' href="'+cellval+'">'+cellval+"</a>"},$.fn.fmatter.showlink=function(cellval,opts){var idUrl,op={baseLinkUrl:opts.baseLinkUrl,showAction:opts.showAction,addParam:opts.addParam||"",target:opts.target,idName:opts.idName},target="";return void 0===opts.colModel||$.fmatter.isUndefined(opts.colModel.formatoptions)||(op=$.extend({},op,opts.colModel.formatoptions)),op.target&&(target="target="+op.target),idUrl=op.baseLinkUrl+op.showAction+"?"+op.idName+"="+opts.rowId+op.addParam,$.fmatter.isString(cellval)||$.fmatter.isNumber(cellval)?"<a "+target+' href="'+idUrl+'">'+cellval+"</a>":$.fn.fmatter.defaultFormat(cellval,opts)},$.fn.fmatter.integer=function(cellval,opts){var op=$.extend({},opts.integer);return void 0===opts.colModel||$.fmatter.isUndefined(opts.colModel.formatoptions)||(op=$.extend({},op,opts.colModel.formatoptions)),$.fmatter.isEmpty(cellval)?op.defaultValue:$.fmatter.util.NumberFormat(cellval,op)},$.fn.fmatter.number=function(cellval,opts){var op=$.extend({},opts.number);return void 0===opts.colModel||$.fmatter.isUndefined(opts.colModel.formatoptions)||(op=$.extend({},op,opts.colModel.formatoptions)),$.fmatter.isEmpty(cellval)?op.defaultValue:$.fmatter.util.NumberFormat(cellval,op)},$.fn.fmatter.currency=function(cellval,opts){var op=$.extend({},opts.currency);return void 0===opts.colModel||$.fmatter.isUndefined(opts.colModel.formatoptions)||(op=$.extend({},op,opts.colModel.formatoptions)),$.fmatter.isEmpty(cellval)?op.defaultValue:$.fmatter.util.NumberFormat(cellval,op)},$.fn.fmatter.date=function(cellval,opts,rwd,act){var op=$.extend({},opts.date);return void 0===opts.colModel||$.fmatter.isUndefined(opts.colModel.formatoptions)||(op=$.extend({},op,opts.colModel.formatoptions)),op.reformatAfterEdit||"edit"!=act?$.fmatter.isEmpty(cellval)?$.fn.fmatter.defaultFormat(cellval,opts):$.fmatter.util.DateFormat(op.srcformat,cellval,op.newformat,op):$.fn.fmatter.defaultFormat(cellval,opts)},$.fn.fmatter.select=function(cellval,opts){cellval+="";var sep,delim,oSelect=!1,ret=[];if($.fmatter.isUndefined(opts.colModel.formatoptions)?$.fmatter.isUndefined(opts.colModel.editoptions)||(oSelect=opts.colModel.editoptions.value,sep=void 0===opts.colModel.editoptions.separator?":":opts.colModel.editoptions.separator,delim=void 0===opts.colModel.editoptions.delimiter?";":opts.colModel.editoptions.delimiter):(oSelect=opts.colModel.formatoptions.value,sep=void 0===opts.colModel.formatoptions.separator?":":opts.colModel.formatoptions.separator,delim=void 0===opts.colModel.formatoptions.delimiter?";":opts.colModel.formatoptions.delimiter),oSelect){var sv,msl=opts.colModel.editoptions.multiple===!0?!0:!1,scell=[];if(msl&&(scell=cellval.split(","),scell=$.map(scell,function(n){return $.trim(n)})),$.fmatter.isString(oSelect)){for(var so=oSelect.split(delim),j=0,i=0;i<so.length;i++)if(sv=so[i].split(sep),sv.length>2&&(sv[1]=$.map(sv,function(n,i){return i>0?n:void 0}).join(sep)),msl)$.inArray(sv[0],scell)>-1&&(ret[j]=sv[1],j++);else if($.trim(sv[0])==$.trim(cellval)){ret[0]=sv[1];break}}else $.fmatter.isObject(oSelect)&&(msl?ret=$.map(scell,function(n){return oSelect[n]}):ret[0]=oSelect[cellval]||"")}return cellval=ret.join(", "),""===cellval?$.fn.fmatter.defaultFormat(cellval,opts):cellval},$.fn.fmatter.rowactions=function(rid,gid,act,pos){var op={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null,restoreAfterError:!0,mtype:"POST",delOptions:{},editOptions:{}};rid=$.jgrid.jqID(rid),gid=$.jgrid.jqID(gid);var cm=$("#"+gid)[0].p.colModel[pos];$.fmatter.isUndefined(cm.formatoptions)||(op=$.extend(op,cm.formatoptions)),$.fmatter.isUndefined($("#"+gid)[0].p.editOptions)||(op.editOptions=$("#"+gid)[0].p.editOptions),$.fmatter.isUndefined($("#"+gid)[0].p.delOptions)||(op.delOptions=$("#"+gid)[0].p.delOptions);var $t=$("#"+gid)[0],saverow=function(rowid,res){$.isFunction(op.afterSave)&&op.afterSave.call($t,rowid,res),$("tr#"+rid+" div.ui-inline-edit, tr#"+rid+" div.ui-inline-del","#"+gid+".ui-jqgrid-btable:first").show(),$("tr#"+rid+" div.ui-inline-save, tr#"+rid+" div.ui-inline-cancel","#"+gid+".ui-jqgrid-btable:first").hide()},restorerow=function(rowid){$.isFunction(op.afterRestore)&&op.afterRestore.call($t,rowid),$("tr#"+rid+" div.ui-inline-edit, tr#"+rid+" div.ui-inline-del","#"+gid+".ui-jqgrid-btable:first").show(),$("tr#"+rid+" div.ui-inline-save, tr#"+rid+" div.ui-inline-cancel","#"+gid+".ui-jqgrid-btable:first").hide()};if($("#"+rid,"#"+gid).hasClass("jqgrid-new-row")){var opers=$t.p.prmNames,oper=opers.oper;op.extraparam[oper]=opers.addoper}var actop={keys:op.keys,oneditfunc:op.onEdit,successfunc:op.onSuccess,url:op.url,extraparam:op.extraparam,aftersavefunc:saverow,errorfunc:op.onError,afterrestorefunc:restorerow,restoreAfterError:op.restoreAfterError,mtype:op.mtype};switch(act){case"edit":$("#"+gid).jqGrid("editRow",rid,actop),$("tr#"+rid+" div.ui-inline-edit, tr#"+rid+" div.ui-inline-del","#"+gid+".ui-jqgrid-btable:first").hide(),$("tr#"+rid+" div.ui-inline-save, tr#"+rid+" div.ui-inline-cancel","#"+gid+".ui-jqgrid-btable:first").show(),$($t).triggerHandler("jqGridAfterGridComplete");break;case"save":$("#"+gid).jqGrid("saveRow",rid,actop)&&($("tr#"+rid+" div.ui-inline-edit, tr#"+rid+" div.ui-inline-del","#"+gid+".ui-jqgrid-btable:first").show(),$("tr#"+rid+" div.ui-inline-save, tr#"+rid+" div.ui-inline-cancel","#"+gid+".ui-jqgrid-btable:first").hide(),$($t).triggerHandler("jqGridAfterGridComplete"));break;case"cancel":$("#"+gid).jqGrid("restoreRow",rid,restorerow),$("tr#"+rid+" div.ui-inline-edit, tr#"+rid+" div.ui-inline-del","#"+gid+".ui-jqgrid-btable:first").show(),$("tr#"+rid+" div.ui-inline-save, tr#"+rid+" div.ui-inline-cancel","#"+gid+".ui-jqgrid-btable:first").hide(),$($t).triggerHandler("jqGridAfterGridComplete");break;case"del":$("#"+gid).jqGrid("delGridRow",rid,op.delOptions);break;case"formedit":$("#"+gid).jqGrid("setSelection",rid),$("#"+gid).jqGrid("editGridRow",rid,op.editOptions)}},$.fn.fmatter.actions=function(cellval,opts){var op={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1};$.fmatter.isUndefined(opts.colModel.formatoptions)||(op=$.extend(op,opts.colModel.formatoptions));var ocl,rowid=opts.rowId,str="";return"undefined"==typeof rowid||$.fmatter.isEmpty(rowid)?"":(op.editformbutton?(ocl="onclick=jQuery.fn.fmatter.rowactions('"+rowid+"','"+opts.gid+"','formedit',"+opts.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",str=str+"<div title='"+$.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+ocl+"><span class='ui-icon ui-icon-pencil'></span></div>"):op.editbutton&&(ocl="onclick=jQuery.fn.fmatter.rowactions('"+rowid+"','"+opts.gid+"','edit',"+opts.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ",str=str+"<div title='"+$.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+ocl+"><span class='ui-icon ui-icon-pencil'></span></div>"),op.delbutton&&(ocl="onclick=jQuery.fn.fmatter.rowactions('"+rowid+"','"+opts.gid+"','del',"+opts.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",str=str+"<div title='"+$.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+ocl+"><span class='ui-icon ui-icon-trash'></span></div>"),ocl="onclick=jQuery.fn.fmatter.rowactions('"+rowid+"','"+opts.gid+"','save',"+opts.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",str=str+"<div title='"+$.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+ocl+"><span class='ui-icon ui-icon-disk'></span></div>",ocl="onclick=jQuery.fn.fmatter.rowactions('"+rowid+"','"+opts.gid+"','cancel',"+opts.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",str=str+"<div title='"+$.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+ocl+"><span class='ui-icon ui-icon-cancel'></span></div>","<div style='margin-left:8px;'>"+str+"</div>")
},$.unformat=function(cellval,options,pos,cnt){var ret,sep,formatType=options.colModel.formatter,op=options.colModel.formatoptions||{},re=/([\.\*\_\'\(\)\{\}\+\?\\])/g,unformatFunc=options.colModel.unformat||$.fn.fmatter[formatType]&&$.fn.fmatter[formatType].unformat;if("undefined"!=typeof unformatFunc&&$.isFunction(unformatFunc))ret=unformatFunc.call(this,$(cellval).text(),options,cellval);else if(!$.fmatter.isUndefined(formatType)&&$.fmatter.isString(formatType)){var stripTag,opts=$.jgrid.formatter||{};switch(formatType){case"integer":op=$.extend({},opts.integer,op),sep=op.thousandsSeparator.replace(re,"\\$1"),stripTag=new RegExp(sep,"g"),ret=$(cellval).text().replace(stripTag,"");break;case"number":op=$.extend({},opts.number,op),sep=op.thousandsSeparator.replace(re,"\\$1"),stripTag=new RegExp(sep,"g"),ret=$(cellval).text().replace(stripTag,"").replace(op.decimalSeparator,".");break;case"currency":op=$.extend({},opts.currency,op),sep=op.thousandsSeparator.replace(re,"\\$1"),stripTag=new RegExp(sep,"g"),ret=$(cellval).text(),op.prefix&&op.prefix.length&&(ret=ret.substr(op.prefix.length)),op.suffix&&op.suffix.length&&(ret=ret.substr(0,ret.length-op.suffix.length)),ret=ret.replace(stripTag,"").replace(op.decimalSeparator,".");break;case"checkbox":var cbv=options.colModel.editoptions?options.colModel.editoptions.value.split(":"):["Yes","No"];ret=$("input",cellval).is(":checked")?cbv[0]:cbv[1];break;case"select":ret=$.unformat.select(cellval,options,pos,cnt);break;case"actions":return"";default:ret=$(cellval).text()}}return void 0!==ret?ret:cnt===!0?$(cellval).text():$.jgrid.htmlDecode($(cellval).html())},$.unformat.select=function(cellval,options,pos,cnt){var ret=[],cell=$(cellval).text();if(cnt===!0)return cell;var op=$.extend({},$.fmatter.isUndefined(options.colModel.formatoptions)?options.colModel.editoptions:options.colModel.formatoptions),sep=void 0===op.separator?":":op.separator,delim=void 0===op.delimiter?";":op.delimiter;if(op.value){var sv,oSelect=op.value,msl=op.multiple===!0?!0:!1,scell=[];if(msl&&(scell=cell.split(","),scell=$.map(scell,function(n){return $.trim(n)})),$.fmatter.isString(oSelect)){for(var so=oSelect.split(delim),j=0,i=0;i<so.length;i++)if(sv=so[i].split(sep),sv.length>2&&(sv[1]=$.map(sv,function(n,i){return i>0?n:void 0}).join(sep)),msl)$.inArray(sv[1],scell)>-1&&(ret[j]=sv[0],j++);else if($.trim(sv[1])==$.trim(cell)){ret[0]=sv[0];break}}else($.fmatter.isObject(oSelect)||$.isArray(oSelect))&&(msl||(scell[0]=cell),ret=$.map(scell,function(n){var rv;return $.each(oSelect,function(i,val){return val==n?(rv=i,!1):void 0}),"undefined"!=typeof rv?rv:void 0}));return ret.join(", ")}return cell||""},$.unformat.date=function(cellval,opts){var op=$.jgrid.formatter.date||{};return $.fmatter.isUndefined(opts.formatoptions)||(op=$.extend({},op,opts.formatoptions)),$.fmatter.isEmpty(cellval)?$.fn.fmatter.defaultFormat(cellval,opts):$.fmatter.util.DateFormat(op.newformat,cellval,op.srcformat,op)}}(jQuery),function($){$.extend($.jgrid,{showModal:function(h){h.w.show()},closeModal:function(h){h.w.hide().attr("aria-hidden","true"),h.o&&h.o.remove()},hideModal:function(selector,o){if(o=$.extend({jqm:!0,gb:""},o||{}),o.onClose){var oncret=o.onClose(selector);if("boolean"==typeof oncret&&!oncret)return}if($.fn.jqm&&o.jqm===!0)$(selector).attr("aria-hidden","true").jqmHide();else{if(""!==o.gb)try{$(".jqgrid-overlay:first",o.gb).hide()}catch(e){}$(selector).hide().attr("aria-hidden","true")}},findPos:function(obj){var curleft=0,curtop=0;if(obj.offsetParent)do curleft+=obj.offsetLeft,curtop+=obj.offsetTop;while(obj=obj.offsetParent);return[curleft,curtop]},createModal:function(aIDs,content,p,insertSelector,posSelector,appendsel,css){p=$.extend(!0,$.jgrid.jqModal||{},p);var rtlsup,mw=document.createElement("div"),self=this;css=$.extend({},css||{}),rtlsup="rtl"==$(p.gbox).attr("dir")?!0:!1,mw.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog",mw.id=aIDs.themodal;var mh=document.createElement("div");mh.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix",mh.id=aIDs.modalhead,$(mh).append("<span class='ui-jqdialog-title'>"+p.caption+"</span>");var ahr=$("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){ahr.addClass("ui-state-hover")},function(){ahr.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");$(mh).append(ahr),rtlsup?(mw.dir="rtl",$(".ui-jqdialog-title",mh).css("float","right"),$(".ui-jqdialog-titlebar-close",mh).css("left","0.3em")):(mw.dir="ltr",$(".ui-jqdialog-title",mh).css("float","left"),$(".ui-jqdialog-titlebar-close",mh).css("right","0.3em"));var mc=document.createElement("div");$(mc).addClass("ui-jqdialog-content ui-widget-content").attr("id",aIDs.modalcontent),$(mc).append(content),mw.appendChild(mc),$(mw).prepend(mh),appendsel===!0?$("body").append(mw):"string"==typeof appendsel?$(appendsel).append(mw):$(mw).insertBefore(insertSelector),$(mw).css(css),"undefined"==typeof p.jqModal&&(p.jqModal=!0);var coord={};if($.fn.jqm&&p.jqModal===!0){if(0===p.left&&0===p.top&&p.overlay){var pos=[];pos=$.jgrid.findPos(posSelector),p.left=pos[0]+4,p.top=pos[1]+4}coord.top=p.top+"px",coord.left=p.left}else(0!==p.left||0!==p.top)&&(coord.left=p.left,coord.top=p.top+"px");if($("a.ui-jqdialog-titlebar-close",mh).click(function(){var oncm=$("#"+$.jgrid.jqID(aIDs.themodal)).data("onClose")||p.onClose,gboxclose=$("#"+$.jgrid.jqID(aIDs.themodal)).data("gbox")||p.gbox;return self.hideModal("#"+$.jgrid.jqID(aIDs.themodal),{gb:gboxclose,jqm:p.jqModal,onClose:oncm}),!1}),0!==p.width&&p.width||(p.width=300),0!==p.height&&p.height||(p.height=200),!p.zIndex){var parentZ=$(insertSelector).parents("*[role=dialog]").filter(":first").css("z-index");p.zIndex=parentZ?parseInt(parentZ,10)+2:950}var rtlt=0;if(rtlsup&&coord.left&&!appendsel&&(rtlt=$(p.gbox).width()-(isNaN(p.width)?0:parseInt(p.width,10))-8,coord.left=parseInt(coord.left,10)+parseInt(rtlt,10)),coord.left&&(coord.left+="px"),$(mw).css($.extend({width:isNaN(p.width)?"auto":p.width+"px",height:isNaN(p.height)?"auto":p.height+"px",zIndex:p.zIndex,overflow:"hidden"},coord)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":aIDs.modalhead,"aria-hidden":"true"}),"undefined"==typeof p.drag&&(p.drag=!0),"undefined"==typeof p.resize&&(p.resize=!0),p.drag)if($(mh).css("cursor","move"),$.fn.jqDrag)$(mw).jqDrag(mh);else try{$(mw).draggable({handle:$("#"+$.jgrid.jqID(mh.id))})}catch(e){}if(p.resize)if($.fn.jqResize)$(mw).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>"),$("#"+$.jgrid.jqID(aIDs.themodal)).jqResize(".jqResize",aIDs.scrollelm?"#"+$.jgrid.jqID(aIDs.scrollelm):!1);else try{$(mw).resizable({handles:"se, sw",alsoResize:aIDs.scrollelm?"#"+$.jgrid.jqID(aIDs.scrollelm):!1})}catch(r){}p.closeOnEscape===!0&&$(mw).keydown(function(e){if(27==e.which){var cone=$("#"+$.jgrid.jqID(aIDs.themodal)).data("onClose")||p.onClose;self.hideModal(this,{gb:p.gbox,jqm:p.jqModal,onClose:cone})}})},viewModal:function(selector,o){if(o=$.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:$.jgrid.showModal,onHide:$.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},o||{}),$.fn.jqm&&o.jqm===!0)o.jqM?$(selector).attr("aria-hidden","false").jqm(o).jqmShow():$(selector).attr("aria-hidden","false").jqmShow();else{""!==o.gbox&&($(".jqgrid-overlay:first",o.gbox).show(),$(selector).data("gbox",o.gbox)),$(selector).show().attr("aria-hidden","false");try{$(":input:visible",selector)[0].focus()}catch(_){}}},info_dialog:function(caption,content,c_b,modalopt){var mopt={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,caption:"<b>"+caption+"</b>",left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};$.extend(mopt,modalopt||{});var jm=mopt.jqModal,self=this;$.fn.jqm&&!jm&&(jm=!1);var buttstr="";if(mopt.buttons.length>0)for(var i=0;i<mopt.buttons.length;i++)"undefined"==typeof mopt.buttons[i].id&&(mopt.buttons[i].id="info_button_"+i),buttstr+="<a href='javascript:void(0)' id='"+mopt.buttons[i].id+"' class='fm-button ui-state-default ui-corner-all'>"+mopt.buttons[i].text+"</a>";var dh=isNaN(mopt.dataheight)?mopt.dataheight:mopt.dataheight+"px",cn="text-align:"+mopt.align+";",cnt="<div id='info_id'>";cnt+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+dh+";"+cn+"'>"+content+"</div>",cnt+=c_b?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+mopt.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+c_b+"</a>"+buttstr+"</div>":""!==buttstr?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+mopt.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+buttstr+"</div>":"",cnt+="</div>";try{"false"==$("#info_dialog").attr("aria-hidden")&&$.jgrid.hideModal("#info_dialog",{jqm:jm}),$("#info_dialog").remove()}catch(e){}$.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},cnt,mopt,"","",!0),buttstr&&$.each(mopt.buttons,function(i){$("#"+$.jgrid.jqID(this.id),"#info_id").bind("click",function(){return mopt.buttons[i].onClick.call($("#info_dialog")),!1})}),$("#closedialog","#info_id").click(function(){return self.hideModal("#info_dialog",{jqm:jm}),!1}),$(".fm-button","#info_dialog").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),$.isFunction(mopt.beforeOpen)&&mopt.beforeOpen(),$.jgrid.viewModal("#info_dialog",{onHide:function(h){h.w.hide().remove(),h.o&&h.o.remove()},modal:mopt.modal,jqm:jm}),$.isFunction(mopt.afterOpen)&&mopt.afterOpen();try{$("#info_dialog").focus()}catch(m){}},createEl:function(eltype,options,vl,autowidth,ajaxso){function bindEv(el,opt){return $.isFunction(opt.dataInit)&&opt.dataInit.call($t,el),opt.dataEvents&&$.each(opt.dataEvents,function(){void 0!==this.data?$(el).bind(this.type,this.data,this.fn):$(el).bind(this.type,this.fn)}),opt}function setAttributes(elm,atr,exl){var exclude=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr"];"undefined"!=typeof exl&&$.isArray(exl)&&$.merge(exclude,exl),$.each(atr,function(key,value){-1===$.inArray(key,exclude)&&$(elm).attr(key,value)}),atr.hasOwnProperty("id")||$(elm).attr("id",$.jgrid.randId())}var elem="",$t=this;switch(eltype){case"textarea":elem=document.createElement("textarea"),autowidth?options.cols||$(elem).css({width:"98%"}):options.cols||(options.cols=20),options.rows||(options.rows=2),("&nbsp;"==vl||"&#160;"==vl||1==vl.length&&160==vl.charCodeAt(0))&&(vl=""),elem.value=vl,setAttributes(elem,options),options=bindEv(elem,options),$(elem).attr({role:"textbox",multiline:"true"});break;case"checkbox":if(elem=document.createElement("input"),elem.type="checkbox",options.value){var cbval=options.value.split(":");vl===cbval[0]&&(elem.checked=!0,elem.defaultChecked=!0),elem.value=cbval[0],$(elem).attr("offval",cbval[1])}else{var vl1=vl.toLowerCase();vl1.search(/(false|0|no|off|undefined)/i)<0&&""!==vl1?(elem.checked=!0,elem.defaultChecked=!0,elem.value=vl):elem.value="on",$(elem).attr("offval","off")}setAttributes(elem,options,["value"]),options=bindEv(elem,options),$(elem).attr("role","checkbox");break;case"select":elem=document.createElement("select"),elem.setAttribute("role","select");var msl,ovm=[];if(options.multiple===!0?(msl=!0,elem.multiple="multiple",$(elem).attr("aria-multiselectable","true")):msl=!1,"undefined"!=typeof options.dataUrl)$.ajax($.extend({url:options.dataUrl,type:"GET",dataType:"html",context:{elem:elem,options:options,vl:vl},success:function(data){var a,ovm=[],elem=this.elem,vl=this.vl,options=$.extend({},this.options),msl=options.multiple===!0;if($.isFunction(options.buildSelect)){var b=options.buildSelect.call($t,data);a=$(b).html()}else a=$(data).html();a&&($(elem).append(a),setAttributes(elem,options),options=bindEv(elem,options),"undefined"==typeof options.size&&(options.size=msl?3:1),msl?(ovm=vl.split(","),ovm=$.map(ovm,function(n){return $.trim(n)})):ovm[0]=$.trim(vl),setTimeout(function(){$("option",elem).each(function(i){0===i&&elem.multiple&&(this.selected=!1),$(this).attr("role","option"),($.inArray($.trim($(this).text()),ovm)>-1||$.inArray($.trim($(this).val()),ovm)>-1)&&(this.selected="selected")})},0))}},ajaxso||{}));else if(options.value){var i;"undefined"==typeof options.size&&(options.size=msl?3:1),msl&&(ovm=vl.split(","),ovm=$.map(ovm,function(n){return $.trim(n)})),"function"==typeof options.value&&(options.value=options.value());var so,sv,ov,sep=void 0===options.separator?":":options.separator,delim=void 0===options.delimiter?";":options.delimiter;if("string"==typeof options.value)for(so=options.value.split(delim),i=0;i<so.length;i++)sv=so[i].split(sep),sv.length>2&&(sv[1]=$.map(sv,function(n,ii){return ii>0?n:void 0}).join(sep)),ov=document.createElement("option"),ov.setAttribute("role","option"),ov.value=sv[0],ov.innerHTML=sv[1],elem.appendChild(ov),msl||$.trim(sv[0])!=$.trim(vl)&&$.trim(sv[1])!=$.trim(vl)||(ov.selected="selected"),msl&&($.inArray($.trim(sv[1]),ovm)>-1||$.inArray($.trim(sv[0]),ovm)>-1)&&(ov.selected="selected");else if("object"==typeof options.value){var oSv=options.value;for(var key in oSv)oSv.hasOwnProperty(key)&&(ov=document.createElement("option"),ov.setAttribute("role","option"),ov.value=key,ov.innerHTML=oSv[key],elem.appendChild(ov),msl||$.trim(key)!=$.trim(vl)&&$.trim(oSv[key])!=$.trim(vl)||(ov.selected="selected"),msl&&($.inArray($.trim(oSv[key]),ovm)>-1||$.inArray($.trim(key),ovm)>-1)&&(ov.selected="selected"))}setAttributes(elem,options,["value"]),options=bindEv(elem,options)}break;case"text":case"password":case"button":var role;role="button"==eltype?"button":"textbox",elem=document.createElement("input"),elem.type=eltype,elem.value=vl,setAttributes(elem,options),options=bindEv(elem,options),"button"!=eltype&&(autowidth?options.size||$(elem).css({width:"98%"}):options.size||(options.size=20)),$(elem).attr("role",role);break;case"image":case"file":elem=document.createElement("input"),elem.type=eltype,setAttributes(elem,options),options=bindEv(elem,options);break;case"custom":elem=document.createElement("span");try{if(!$.isFunction(options.custom_element))throw"e1";var celm=options.custom_element.call($t,vl,options);if(!celm)throw"e2";celm=$(celm).addClass("customelement").attr({id:options.id,name:options.name}),$(elem).empty().append(celm)}catch(e){"e1"==e&&$.jgrid.info_dialog($.jgrid.errors.errcap,"function 'custom_element' "+$.jgrid.edit.msg.nodefined,$.jgrid.edit.bClose),"e2"==e?$.jgrid.info_dialog($.jgrid.errors.errcap,"function 'custom_element' "+$.jgrid.edit.msg.novalue,$.jgrid.edit.bClose):$.jgrid.info_dialog($.jgrid.errors.errcap,"string"==typeof e?e:e.message,$.jgrid.edit.bClose)}}return elem},checkDate:function(format,date){var sep,daysInFebruary=function(year){return year%4!==0||year%100===0&&year%400!==0?28:29},DaysArray=function(n){for(var i=1;n>=i;i++)this[i]=31,(4==i||6==i||9==i||11==i)&&(this[i]=30),2==i&&(this[i]=29);return this},tsp={};if(format=format.toLowerCase(),sep=-1!=format.indexOf("/")?"/":-1!=format.indexOf("-")?"-":-1!=format.indexOf(".")?".":"/",format=format.split(sep),date=date.split(sep),3!=date.length)return!1;for(var yln,j=-1,dln=-1,mln=-1,i=0;i<format.length;i++){var dv=isNaN(date[i])?0:parseInt(date[i],10);tsp[format[i]]=dv,yln=format[i],-1!=yln.indexOf("y")&&(j=i),-1!=yln.indexOf("m")&&(mln=i),-1!=yln.indexOf("d")&&(dln=i)}yln="y"==format[j]||"yyyy"==format[j]?4:"yy"==format[j]?2:-1;var strDate,daysInMonth=DaysArray(12);return-1===j?!1:(strDate=tsp[format[j]].toString(),2==yln&&1==strDate.length&&(yln=1),strDate.length!=yln||0===tsp[format[j]]&&"00"!=date[j]?!1:-1===mln?!1:(strDate=tsp[format[mln]].toString(),strDate.length<1||tsp[format[mln]]<1||tsp[format[mln]]>12?!1:-1===dln?!1:(strDate=tsp[format[dln]].toString(),strDate.length<1||tsp[format[dln]]<1||tsp[format[dln]]>31||2==tsp[format[mln]]&&tsp[format[dln]]>daysInFebruary(tsp[format[j]])||tsp[format[dln]]>daysInMonth[tsp[format[mln]]]?!1:!0)))},isEmpty:function(val){return val.match(/^\s+$/)||""===val?!0:!1},checkTime:function(time){var regs,re=/^(\d{1,2}):(\d{2})([ap]m)?$/;if(!$.jgrid.isEmpty(time)){if(regs=time.match(re),!regs)return!1;if(regs[3]){if(regs[1]<1||regs[1]>12)return!1}else if(regs[1]>23)return!1;if(regs[2]>59)return!1}return!0},checkValues:function(val,valref,g,customobject,nam){var edtrul,i,nm,dft,len;if("undefined"==typeof customobject)if("string"==typeof valref){for(i=0,len=g.p.colModel.length;len>i;i++)if(g.p.colModel[i].name==valref){edtrul=g.p.colModel[i].editrules,valref=i;try{nm=g.p.colModel[i].formoptions.label}catch(e){}break}}else valref>=0&&(edtrul=g.p.colModel[valref].editrules);else edtrul=customobject,nm=void 0===nam?"_":nam;if(edtrul){if(nm||(nm=g.p.colNames[valref]),edtrul.required===!0&&$.jgrid.isEmpty(val))return[!1,nm+": "+$.jgrid.edit.msg.required,""];var rqfield=edtrul.required===!1?!1:!0;if(edtrul.number===!0&&(rqfield!==!1||!$.jgrid.isEmpty(val))&&isNaN(val))return[!1,nm+": "+$.jgrid.edit.msg.number,""];if("undefined"!=typeof edtrul.minValue&&!isNaN(edtrul.minValue)&&parseFloat(val)<parseFloat(edtrul.minValue))return[!1,nm+": "+$.jgrid.edit.msg.minValue+" "+edtrul.minValue,""];if("undefined"!=typeof edtrul.maxValue&&!isNaN(edtrul.maxValue)&&parseFloat(val)>parseFloat(edtrul.maxValue))return[!1,nm+": "+$.jgrid.edit.msg.maxValue+" "+edtrul.maxValue,""];var filter;if(edtrul.email===!0&&!(rqfield===!1&&$.jgrid.isEmpty(val)||(filter=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,filter.test(val))))return[!1,nm+": "+$.jgrid.edit.msg.email,""];if(edtrul.integer===!0&&(rqfield!==!1||!$.jgrid.isEmpty(val))){if(isNaN(val))return[!1,nm+": "+$.jgrid.edit.msg.integer,""];if(val%1!==0||-1!=val.indexOf("."))return[!1,nm+": "+$.jgrid.edit.msg.integer,""]}if(edtrul.date===!0&&!(rqfield===!1&&$.jgrid.isEmpty(val)||(dft=g.p.colModel[valref].formatoptions&&g.p.colModel[valref].formatoptions.newformat?g.p.colModel[valref].formatoptions.newformat:g.p.colModel[valref].datefmt||"Y-m-d",$.jgrid.checkDate(dft,val))))return[!1,nm+": "+$.jgrid.edit.msg.date+" - "+dft,""];if(edtrul.time===!0&&!(rqfield===!1&&$.jgrid.isEmpty(val)||$.jgrid.checkTime(val)))return[!1,nm+": "+$.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(edtrul.url===!0&&!(rqfield===!1&&$.jgrid.isEmpty(val)||(filter=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,filter.test(val))))return[!1,nm+": "+$.jgrid.edit.msg.url,""];if(edtrul.custom===!0&&(rqfield!==!1||!$.jgrid.isEmpty(val))){if($.isFunction(edtrul.custom_func)){var ret=edtrul.custom_func.call(g,val,nm);return $.isArray(ret)?ret:[!1,$.jgrid.edit.msg.customarray,""]}return[!1,$.jgrid.edit.msg.customfcheck,""]}}return[!0,"",""]}})}(jQuery),function($){$.fn.jqFilter=function(arg){if("string"==typeof arg){var fn=$.fn.jqFilter[arg];if(!fn)throw"jqFilter - No such method: "+arg;var args=$.makeArray(arguments).slice(1);return fn.apply(this,args)}var p=$.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[{name:"eq",description:"equal",operator:"="},{name:"ne",description:"not equal",operator:"<>"},{name:"lt",description:"less",operator:"<"},{name:"le",description:"less or equal",operator:"<="},{name:"gt",description:"greater",operator:">"},{name:"ge",description:"greater or equal",operator:">="},{name:"bw",description:"begins with",operator:"LIKE"},{name:"bn",description:"does not begin with",operator:"NOT LIKE"},{name:"in",description:"in",operator:"IN"},{name:"ni",description:"not in",operator:"NOT IN"},{name:"ew",description:"ends with",operator:"LIKE"},{name:"en",description:"does not end with",operator:"NOT LIKE"},{name:"cn",description:"contains",operator:"LIKE"},{name:"nc",description:"does not contain",operator:"NOT LIKE"},{name:"nu",description:"is null",operator:"IS NULL"},{name:"nn",description:"is not null",operator:"IS NOT NULL"}],numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],_gridsopt:[],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},$.jgrid.filter,arg||{});return this.each(function(){if(!this.filter){this.p=p,(null===this.p.filter||void 0===this.p.filter)&&(this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]});var i,cl,len=this.p.columns.length,isIE=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p._gridsopt.length)for(i=0;i<this.p._gridsopt.length;i++)this.p.ops[i].description=this.p._gridsopt[i];if(this.p.initFilter=$.extend(!0,{},this.p.filter),len){for(i=0;len>i;i++)cl=this.p.columns[i],cl.stype?cl.inputtype=cl.stype:cl.inputtype||(cl.inputtype="text"),cl.sorttype?cl.searchtype=cl.sorttype:cl.searchtype||(cl.searchtype="string"),void 0===cl.hidden&&(cl.hidden=!1),cl.label||(cl.label=cl.name),cl.index&&(cl.name=cl.index),cl.hasOwnProperty("searchoptions")||(cl.searchoptions={}),cl.hasOwnProperty("searchrules")||(cl.searchrules={});this.p.showQuery&&$(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var checkData=function(val,colModelItem){var ret=[!0,""];if($.isFunction(colModelItem.searchrules))ret=colModelItem.searchrules(val,colModelItem);else if($.jgrid&&$.jgrid.checkValues)try{ret=$.jgrid.checkValues(val,-1,null,colModelItem.searchrules,colModelItem.label)}catch(e){}ret&&ret.length&&ret[0]===!1&&(p.error=!ret[0],p.errmsg=ret[1])};this.onchange=function(){return this.p.error=!1,this.p.errmsg="",$.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1},this.reDraw=function(){$("table.group:first",this).remove();var t=this.createTableForGroup(p.filter,null);$(this).append(t),$.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)},this.createTableForGroup=function(group,parentgroup){var i,that=this,table=$("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>"),align="left";"rtl"==this.p.direction&&(align="right",table.attr("dir","rtl")),null===parentgroup&&table.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='"+align+"'></th></tr>");var tr=$("<tr></tr>");table.append(tr);var th=$("<th colspan='5' align='"+align+"'></th>");if(tr.append(th),this.p.ruleButtons===!0){var groupOpSelect=$("<select class='opsel'></select>");th.append(groupOpSelect);var selected,str="";for(i=0;i<p.groupOps.length;i++)selected=group.groupOp===that.p.groupOps[i].op?" selected='selected'":"",str+="<option value='"+that.p.groupOps[i].op+"'"+selected+">"+that.p.groupOps[i].text+"</option>";groupOpSelect.append(str).bind("change",function(){group.groupOp=$(groupOpSelect).val(),that.onchange()})}var inputAddSubgroup="<span></span>";if(this.p.groupButton&&(inputAddSubgroup=$("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),inputAddSubgroup.bind("click",function(){return void 0===group.groups&&(group.groups=[]),group.groups.push({groupOp:p.groupOps[0].op,rules:[],groups:[]}),that.reDraw(),that.onchange(),!1})),th.append(inputAddSubgroup),this.p.ruleButtons===!0){var cm,inputAddRule=$("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>");inputAddRule.bind("click",function(){for(void 0===group.rules&&(group.rules=[]),i=0;i<that.p.columns.length;i++){var searchable="undefined"==typeof that.p.columns[i].search?!0:that.p.columns[i].search,hidden=that.p.columns[i].hidden===!0,ignoreHiding=that.p.columns[i].searchoptions.searchhidden===!0;if(ignoreHiding&&searchable||searchable&&!hidden){cm=that.p.columns[i];break}}var opr;return opr=cm.searchoptions.sopt?cm.searchoptions.sopt:that.p.sopt?that.p.sopt:"string"===cm.searchtype?that.p.stropts:that.p.numopts,group.rules.push({field:cm.name,op:opr[0],data:""}),that.reDraw(),!1}),th.append(inputAddRule)}if(null!==parentgroup){var inputDeleteGroup=$("<input type='button' value='-' title='Delete group' class='delete-group'/>");th.append(inputDeleteGroup),inputDeleteGroup.bind("click",function(){for(i=0;i<parentgroup.groups.length;i++)if(parentgroup.groups[i]===group){parentgroup.groups.splice(i,1);break}return that.reDraw(),that.onchange(),!1})}if(void 0!==group.groups)for(i=0;i<group.groups.length;i++){var trHolderForSubgroup=$("<tr></tr>");table.append(trHolderForSubgroup);var tdFirstHolderForSubgroup=$("<td class='first'></td>");trHolderForSubgroup.append(tdFirstHolderForSubgroup);var tdMainHolderForSubgroup=$("<td colspan='4'></td>");tdMainHolderForSubgroup.append(this.createTableForGroup(group.groups[i],group)),trHolderForSubgroup.append(tdMainHolderForSubgroup)}if(void 0===group.groupOp&&(group.groupOp=that.p.groupOps[0].op),void 0!==group.rules)for(i=0;i<group.rules.length;i++)table.append(this.createTableRowForRule(group.rules[i],group));return table},this.createTableRowForRule=function(rule,group){var i,op,trpar,cm,selected,that=this,tr=$("<tr></tr>"),str="";tr.append("<td class='first'></td>");var ruleFieldTd=$("<td class='columns'></td>");tr.append(ruleFieldTd);var ina,ruleFieldSelect=$("<select></select>"),aoprs=[];ruleFieldTd.append(ruleFieldSelect),ruleFieldSelect.bind("change",function(){for(rule.field=$(ruleFieldSelect).val(),trpar=$(this).parents("tr:first"),i=0;i<that.p.columns.length;i++)if(that.p.columns[i].name===rule.field){cm=that.p.columns[i];break}if(cm){cm.searchoptions.id=$.jgrid.randId(),isIE&&"text"===cm.inputtype&&(cm.searchoptions.size||(cm.searchoptions.size=10));var elm=$.jgrid.createEl(cm.inputtype,cm.searchoptions,"",!0,that.p.ajaxSelectOptions,!0);$(elm).addClass("input-elm"),op=cm.searchoptions.sopt?cm.searchoptions.sopt:that.p.sopt?that.p.sopt:"string"===cm.searchtype?that.p.stropts:that.p.numopts;var s="",so=0;for(aoprs=[],$.each(that.p.ops,function(){aoprs.push(this.name)}),i=0;i<op.length;i++)ina=$.inArray(op[i],aoprs),-1!==ina&&(0===so&&(rule.op=that.p.ops[ina].name),s+="<option value='"+that.p.ops[ina].name+"'>"+that.p.ops[ina].description+"</option>",so++);if($(".selectopts",trpar).empty().append(s),$(".selectopts",trpar)[0].selectedIndex=0,$.browser.msie&&$.browser.version<9){var sw=parseInt($("select.selectopts",trpar)[0].offsetWidth)+1;$(".selectopts",trpar).width(sw),$(".selectopts",trpar).css("width","auto")}$(".data",trpar).empty().append(elm),$(".input-elm",trpar).bind("change",function(e){var tmo=$(this).hasClass("ui-autocomplete-input")?200:0;setTimeout(function(){var elem=e.target;rule.data="SPAN"===elem.nodeName.toUpperCase()&&cm.searchoptions&&$.isFunction(cm.searchoptions.custom_value)?cm.searchoptions.custom_value($(elem).children(".customelement:first"),"get"):elem.value,that.onchange()},tmo)}),setTimeout(function(){rule.data=$(elm).val(),that.onchange()},0)}});var j=0;for(i=0;i<that.p.columns.length;i++){var searchable="undefined"==typeof that.p.columns[i].search?!0:that.p.columns[i].search,hidden=that.p.columns[i].hidden===!0,ignoreHiding=that.p.columns[i].searchoptions.searchhidden===!0;(ignoreHiding&&searchable||searchable&&!hidden)&&(selected="",rule.field===that.p.columns[i].name&&(selected=" selected='selected'",j=i),str+="<option value='"+that.p.columns[i].name+"'"+selected+">"+that.p.columns[i].label+"</option>")}ruleFieldSelect.append(str);var ruleOperatorTd=$("<td class='operators'></td>");tr.append(ruleOperatorTd),cm=p.columns[j],cm.searchoptions.id=$.jgrid.randId(),isIE&&"text"===cm.inputtype&&(cm.searchoptions.size||(cm.searchoptions.size=10));var ruleDataInput=$.jgrid.createEl(cm.inputtype,cm.searchoptions,rule.data,!0,that.p.ajaxSelectOptions,!0),ruleOperatorSelect=$("<select class='selectopts'></select>");for(ruleOperatorTd.append(ruleOperatorSelect),ruleOperatorSelect.bind("change",function(){rule.op=$(ruleOperatorSelect).val(),trpar=$(this).parents("tr:first");var rd=$(".input-elm",trpar)[0];"nu"===rule.op||"nn"===rule.op?(rule.data="",rd.value="",rd.setAttribute("readonly","true"),rd.setAttribute("disabled","true")):(rd.removeAttribute("readonly"),rd.removeAttribute("disabled")),that.onchange()}),op=cm.searchoptions.sopt?cm.searchoptions.sopt:that.p.sopt?that.p.sopt:"string"===cm.searchtype?p.stropts:that.p.numopts,str="",$.each(that.p.ops,function(){aoprs.push(this.name)}),i=0;i<op.length;i++)ina=$.inArray(op[i],aoprs),-1!==ina&&(selected=rule.op===that.p.ops[ina].name?" selected='selected'":"",str+="<option value='"+that.p.ops[ina].name+"'"+selected+">"+that.p.ops[ina].description+"</option>");ruleOperatorSelect.append(str);var ruleDataTd=$("<td class='data'></td>");tr.append(ruleDataTd),ruleDataTd.append(ruleDataInput),$(ruleDataInput).addClass("input-elm").bind("change",function(){rule.data="custom"===cm.inputtype?cm.searchoptions.custom_value($(this).children(".customelement:first"),"get"):$(this).val(),that.onchange()});var ruleDeleteTd=$("<td></td>");if(tr.append(ruleDeleteTd),this.p.ruleButtons===!0){var ruleDeleteInput=$("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>");ruleDeleteTd.append(ruleDeleteInput),ruleDeleteInput.bind("click",function(){for(i=0;i<group.rules.length;i++)if(group.rules[i]===rule){group.rules.splice(i,1);break}return that.reDraw(),that.onchange(),!1})}return tr},this.getStringForGroup=function(group){var index,s="(";if(void 0!==group.groups)for(index=0;index<group.groups.length;index++){s.length>1&&(s+=" "+group.groupOp+" ");try{s+=this.getStringForGroup(group.groups[index])}catch(eg){alert(eg)}}if(void 0!==group.rules)try{for(index=0;index<group.rules.length;index++)s.length>1&&(s+=" "+group.groupOp+" "),s+=this.getStringForRule(group.rules[index])}catch(e){alert(e)}return s+=")","()"===s?"":s},this.getStringForRule=function(rule){var i,cm,ret,val,opUF="",opC="",numtypes=["int","integer","float","number","currency"];for(i=0;i<this.p.ops.length;i++)if(this.p.ops[i].name===rule.op){opUF=this.p.ops[i].operator,opC=this.p.ops[i].name;break}for(i=0;i<this.p.columns.length;i++)if(this.p.columns[i].name===rule.field){cm=this.p.columns[i];break}return val=rule.data,("bw"===opC||"bn"===opC)&&(val+="%"),("ew"===opC||"en"===opC)&&(val="%"+val),("cn"===opC||"nc"===opC)&&(val="%"+val+"%"),("in"===opC||"ni"===opC)&&(val=" ("+val+")"),p.errorcheck&&checkData(rule.data,cm),ret=-1!==$.inArray(cm.searchtype,numtypes)||"nn"===opC||"nu"===opC?rule.field+" "+opUF+" "+val:rule.field+" "+opUF+' "'+val+'"'},this.resetFilter=function(){this.p.filter=$.extend(!0,{},this.p.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){$("th.ui-state-error",this).html(""),$("tr.error",this).hide()},this.showError=function(){$("th.ui-state-error",this).html(this.p.errmsg),$("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(p.filter)
},this.toString=function(){function getStringRule(rule){if(that.p.errorcheck){var i,cm;for(i=0;i<that.p.columns.length;i++)if(that.p.columns[i].name===rule.field){cm=that.p.columns[i];break}cm&&checkData(rule.data,cm)}return rule.op+"(item."+rule.field+",'"+rule.data+"')"}function getStringForGroup(group){var index,s="(";if(void 0!==group.groups)for(index=0;index<group.groups.length;index++)s.length>1&&(s+="OR"===group.groupOp?" || ":" && "),s+=getStringForGroup(group.groups[index]);if(void 0!==group.rules)for(index=0;index<group.rules.length;index++)s.length>1&&(s+="OR"===group.groupOp?" || ":" && "),s+=getStringRule(group.rules[index]);return s+=")","()"===s?"":s}var that=this;return getStringForGroup(this.p.filter)},this.reDraw(),this.p.showQuery&&this.onchange(),this.filter=!0}}})},$.extend($.fn.jqFilter,{toSQLString:function(){var s="";return this.each(function(){s=this.toUserFriendlyString()}),s},filterData:function(){var s;return this.each(function(){s=this.p.filter}),s},getParameter:function(param){return void 0!==param&&this.p.hasOwnProperty(param)?this.p[param]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(pfilter){"string"==typeof pfilter&&(pfilter=jQuery.jgrid.parse(pfilter)),this.each(function(){this.p.filter=pfilter,this.reDraw(),this.onchange()})}})}(jQuery),function($){"use strict";var rp_ge={};$.jgrid.extend({searchGrid:function(p){return p=$.extend({recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null},$.jgrid.search,p||{}),this.each(function(){function showFilter(_filter){showFrm=$($t).triggerHandler("jqGridFilterBeforeShow",[_filter]),"undefined"==typeof showFrm&&(showFrm=!0),showFrm&&$.isFunction(p.beforeShowSearch)&&(showFrm=p.beforeShowSearch.call($t,_filter)),showFrm&&($.jgrid.viewModal("#"+$.jgrid.jqID(IDs.themodal),{gbox:"#gbox_"+$.jgrid.jqID(fid),jqm:p.jqModal,modal:p.modal,overlay:p.overlay,toTop:p.toTop}),$($t).triggerHandler("jqGridFilterAfterShow",[_filter]),$.isFunction(p.afterShowSearch)&&p.afterShowSearch.call($t,_filter))}var $t=this;if($t.grid){var fid="fbox_"+$t.p.id,showFrm=!0,IDs={themodal:"searchmod"+fid,modalhead:"searchhd"+fid,modalcontent:"searchcnt"+fid,scrollelm:fid},defaultFilters=$t.p.postData[p.sFilter];if("string"==typeof defaultFilters&&(defaultFilters=$.jgrid.parse(defaultFilters)),p.recreateFilter===!0&&$("#"+$.jgrid.jqID(IDs.themodal)).remove(),void 0!==$("#"+$.jgrid.jqID(IDs.themodal))[0])showFilter($("#fbox_"+$.jgrid.jqID(+$t.p.id)));else{var fil=$("<div><div id='"+fid+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+$.jgrid.jqID($t.p.id)),align="left",butleft="";"rtl"==$t.p.direction&&(align="right",butleft=" style='text-align:left'",fil.attr("dir","rtl"));var colnm,bt,columns=$.extend([],$t.p.colModel),bS="<a href='javascript:void(0)' id='"+fid+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>"+p.Find+"</a>",bC="<a href='javascript:void(0)' id='"+fid+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>"+p.Reset+"</a>",bQ="",tmpl="",found=!1,cmi=-1;if(p.showQuery&&(bQ="<a href='javascript:void(0)' id='"+fid+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>"),p.columns.length?columns=p.columns:$.each(columns,function(i,n){if(n.label||(n.label=$t.p.colNames[i]),!found){var searchable="undefined"==typeof n.search?!0:n.search,hidden=n.hidden===!0,ignoreHiding=n.searchoptions&&n.searchoptions.searchhidden===!0;(ignoreHiding&&searchable||searchable&&!hidden)&&(found=!0,colnm=n.index||n.name,cmi=i)}}),!defaultFilters&&colnm||p.multipleSearch===!1){var cmop="eq";cmi>=0&&columns[cmi].searchoptions&&columns[cmi].searchoptions.sopt?cmop=columns[cmi].searchoptions.sopt[0]:p.sopt&&p.sopt.length&&(cmop=p.sopt[0]),defaultFilters={groupOp:"AND",rules:[{field:colnm,op:cmop,data:""}]}}found=!1,p.tmplNames&&p.tmplNames.length&&(found=!0,tmpl=p.tmplLabel,tmpl+="<select class='ui-template'>",tmpl+="<option value='default'>Default</option>",$.each(p.tmplNames,function(i,n){tmpl+="<option value='"+i+"'>"+n+"</option>"}),tmpl+="</select>"),bt="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+fid+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:"+align+"'>"+bC+tmpl+"</td><td class='EditButton' "+butleft+">"+bQ+bS+"</td></tr></tbody></table>",fid=$.jgrid.jqID(fid),$("#"+fid).jqFilter({columns:columns,filter:p.loadDefaults?defaultFilters:null,showQuery:p.showQuery,errorcheck:p.errorcheck,sopt:p.sopt,groupButton:p.multipleGroup,ruleButtons:p.multipleSearch,afterRedraw:p.afterRedraw,_gridsopt:$.jgrid.search.odata,ajaxSelectOptions:$t.p.ajaxSelectOptions,groupOps:p.groupOps,onChange:function(){this.p.showQuery&&$(".query",this).html(this.toUserFriendlyString()),$.isFunction(p.afterChange)&&p.afterChange.call($t,$("#"+fid),p)},direction:$t.p.direction}),fil.append(bt),found&&p.tmplFilters&&p.tmplFilters.length&&$(".ui-template",fil).bind("change",function(){var curtempl=$(this).val();return"default"==curtempl?$("#"+fid).jqFilter("addFilter",defaultFilters):$("#"+fid).jqFilter("addFilter",p.tmplFilters[parseInt(curtempl,10)]),!1}),p.multipleGroup===!0&&(p.multipleSearch=!0),$($t).triggerHandler("jqGridFilterInitialize",[$("#"+fid)]),$.isFunction(p.onInitializeSearch)&&p.onInitializeSearch.call($t,$("#"+fid)),p.gbox="#gbox_"+fid,p.layer?$.jgrid.createModal(IDs,fil,p,"#gview_"+$.jgrid.jqID($t.p.id),$("#gbox_"+$.jgrid.jqID($t.p.id))[0],"#"+$.jgrid.jqID(p.layer),{position:"relative"}):$.jgrid.createModal(IDs,fil,p,"#gview_"+$.jgrid.jqID($t.p.id),$("#gbox_"+$.jgrid.jqID($t.p.id))[0]),(p.searchOnEnter||p.closeOnEscape)&&$("#"+$.jgrid.jqID(IDs.themodal)).keydown(function(e){var $target=$(e.target);return!p.searchOnEnter||13!==e.which||$target.hasClass("add-group")||$target.hasClass("add-rule")||$target.hasClass("delete-group")||$target.hasClass("delete-rule")||$target.hasClass("fm-button")&&$target.is("[id$=_query]")?p.closeOnEscape&&27===e.which?($("#"+$.jgrid.jqID(IDs.modalhead)).find(".ui-jqdialog-titlebar-close").focus().click(),!1):void 0:($("#"+fid+"_search").focus().click(),!1)}),bQ&&$("#"+fid+"_query").bind("click",function(){return $(".queryresult",fil).toggle(),!1}),void 0===p.stringResult&&(p.stringResult=p.multipleSearch),$("#"+fid+"_search").bind("click",function(){var res,fl=$("#"+fid),sdata={},filters=fl.jqFilter("filterData");if(p.errorcheck&&(fl[0].hideError(),p.showQuery||fl.jqFilter("toSQLString"),fl[0].p.error))return fl[0].showError(),!1;if(p.stringResult){try{res=xmlJsonClass.toJson(filters,"","",!1)}catch(e){try{res=JSON.stringify(filters)}catch(e2){}}"string"==typeof res&&(sdata[p.sFilter]=res,$.each([p.sField,p.sValue,p.sOper],function(){sdata[this]=""}))}else p.multipleSearch?(sdata[p.sFilter]=filters,$.each([p.sField,p.sValue,p.sOper],function(){sdata[this]=""})):(sdata[p.sField]=filters.rules[0].field,sdata[p.sValue]=filters.rules[0].data,sdata[p.sOper]=filters.rules[0].op,sdata[p.sFilter]="");return $t.p.search=!0,$.extend($t.p.postData,sdata),$($t).triggerHandler("jqGridFilterSearch"),$.isFunction(p.onSearch)&&p.onSearch.call($t),$($t).trigger("reloadGrid",[{page:1}]),p.closeAfterSearch&&$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:p.jqModal,onClose:p.onClose}),!1}),$("#"+fid+"_reset").bind("click",function(){var sdata={},fl=$("#"+fid);return $t.p.search=!1,p.multipleSearch===!1?sdata[p.sField]=sdata[p.sValue]=sdata[p.sOper]="":sdata[p.sFilter]="",fl[0].resetFilter(),found&&$(".ui-template",fil).val("default"),$.extend($t.p.postData,sdata),$($t).triggerHandler("jqGridFilterReset"),$.isFunction(p.onReset)&&p.onReset.call($t),$($t).trigger("reloadGrid",[{page:1}]),!1}),showFilter($("#"+fid)),$(".fm-button:not(.ui-state-disabled)",fil).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")})}}})},editGridRow:function(rowid,p){return p=$.extend({top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0},$.jgrid.edit,p||{}),rp_ge[$(this)[0].p.id]=p,this.each(function(){function getFormData(){return $(frmtb+" > tbody > tr > td > .FormElement").each(function(){var celm=$(".customelement",this);if(celm.length){var elem=celm[0],nm=$(elem).attr("name");$.each($t.p.colModel,function(){if(this.name===nm&&this.editoptions&&$.isFunction(this.editoptions.custom_value)){try{if(postdata[nm]=this.editoptions.custom_value.call($t,$("#"+$.jgrid.jqID(nm),frmtb),"get"),void 0===postdata[nm])throw"e1"}catch(e){"e1"===e?$.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+$.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):$.jgrid.info_dialog(jQuery.jgrid.errors.errcap,e.message,jQuery.jgrid.edit.bClose)}return!0}})}else{switch($(this).get(0).type){case"checkbox":if($(this).is(":checked"))postdata[this.name]=$(this).val();else{var ofv=$(this).attr("offval");postdata[this.name]=ofv}break;case"select-one":postdata[this.name]=$("option:selected",this).val(),extpost[this.name]=$("option:selected",this).text();break;case"select-multiple":postdata[this.name]=$(this).val(),postdata[this.name]=postdata[this.name]?postdata[this.name].join(","):"";var selectedText=[];$("option:selected",this).each(function(i,selected){selectedText[i]=$(selected).text()}),extpost[this.name]=selectedText.join(",");break;case"password":case"text":case"textarea":case"button":postdata[this.name]=$(this).val()}$t.p.autoencode&&(postdata[this.name]=$.jgrid.htmlEncode(postdata[this.name]))}}),!0}function createData(rowid,obj,tb,maxcols){var nm,hc,trdata,tmp,dc,elc,i,cnt=0,retpos=[],ind=!1,tdtmpl="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>",tmpl="";for(i=1;maxcols>=i;i++)tmpl+=tdtmpl;if("_empty"!=rowid&&(ind=$(obj).jqGrid("getInd",rowid)),$(obj.p.colModel).each(function(i){if(nm=this.name,hc=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,dc=hc?"style='display:none'":"","cb"!==nm&&"subgrid"!==nm&&this.editable===!0&&"rn"!==nm){if(ind===!1)tmp="";else if(nm==obj.p.ExpandColumn&&obj.p.treeGrid===!0)tmp=$("td:eq("+i+")",obj.rows[ind]).text();else{try{tmp=$.unformat.call(obj,$("td:eq("+i+")",obj.rows[ind]),{rowId:rowid,colModel:this},i)}catch(_){tmp=this.edittype&&"textarea"==this.edittype?$("td:eq("+i+")",obj.rows[ind]).text():$("td:eq("+i+")",obj.rows[ind]).html()}(!tmp||"&nbsp;"==tmp||"&#160;"==tmp||1==tmp.length&&160==tmp.charCodeAt(0))&&(tmp="")}var opt=$.extend({},this.editoptions||{},{id:nm,name:nm}),frmopt=$.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),rp=parseInt(frmopt.rowpos,10)||cnt+1,cp=parseInt(2*(parseInt(frmopt.colpos,10)||1),10);if("_empty"==rowid&&opt.defaultValue&&(tmp=$.isFunction(opt.defaultValue)?opt.defaultValue.call($t):opt.defaultValue),this.edittype||(this.edittype="text"),$t.p.autoencode&&(tmp=$.jgrid.htmlDecode(tmp)),elc=$.jgrid.createEl.call($t,this.edittype,opt,tmp,!1,$.extend({},$.jgrid.ajaxOptions,obj.p.ajaxSelectOptions||{})),""===tmp&&"checkbox"==this.edittype&&(tmp=$(elc).attr("offval")),""===tmp&&"select"==this.edittype&&(tmp=$("option:eq(0)",elc).text()),(rp_ge[$t.p.id].checkOnSubmit||rp_ge[$t.p.id].checkOnUpdate)&&(rp_ge[$t.p.id]._savedData[nm]=tmp),$(elc).addClass("FormElement"),("text"==this.edittype||"textarea"==this.edittype)&&$(elc).addClass("ui-widget-content ui-corner-all"),trdata=$(tb).find("tr[rowpos="+rp+"]"),frmopt.rowabove){var newdata=$("<tr><td class='contentinfo' colspan='"+2*maxcols+"'>"+frmopt.rowcontent+"</td></tr>");$(tb).append(newdata),newdata[0].rp=rp}0===trdata.length&&(trdata=$("<tr "+dc+" rowpos='"+rp+"'></tr>").addClass("FormData").attr("id","tr_"+nm),$(trdata).append(tmpl),$(tb).append(trdata),trdata[0].rp=rp),$("td:eq("+(cp-2)+")",trdata[0]).html("undefined"==typeof frmopt.label?obj.p.colNames[i]:frmopt.label),$("td:eq("+(cp-1)+")",trdata[0]).append(frmopt.elmprefix).append(elc).append(frmopt.elmsuffix),retpos[cnt]=i,cnt++}}),cnt>0){var idrow=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*maxcols-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+obj.p.id+"_id' value='"+rowid+"'/></td></tr>");idrow[0].rp=cnt+999,$(tb).append(idrow),(rp_ge[$t.p.id].checkOnSubmit||rp_ge[$t.p.id].checkOnUpdate)&&(rp_ge[$t.p.id]._savedData[obj.p.id+"_id"]=rowid)}return retpos}function fillData(rowid,obj,fmid){var nm,tmp,fld,opt,vl,vlc,cnt=0;(rp_ge[$t.p.id].checkOnSubmit||rp_ge[$t.p.id].checkOnUpdate)&&(rp_ge[$t.p.id]._savedData={},rp_ge[$t.p.id]._savedData[obj.p.id+"_id"]=rowid);var cm=obj.p.colModel;if("_empty"==rowid)return $(cm).each(function(){nm=this.name,opt=$.extend({},this.editoptions||{}),fld=$("#"+$.jgrid.jqID(nm),"#"+fmid),fld&&fld.length&&null!==fld[0]&&(vl="",opt.defaultValue?(vl=$.isFunction(opt.defaultValue)?opt.defaultValue.call($t):opt.defaultValue,"checkbox"==fld[0].type?(vlc=vl.toLowerCase(),vlc.search(/(false|0|no|off|undefined)/i)<0&&""!==vlc?(fld[0].checked=!0,fld[0].defaultChecked=!0,fld[0].value=vl):(fld[0].checked=!1,fld[0].defaultChecked=!1)):fld.val(vl)):"checkbox"==fld[0].type?(fld[0].checked=!1,fld[0].defaultChecked=!1,vl=$(fld).attr("offval")):fld[0].type&&"select"==fld[0].type.substr(0,6)?fld[0].selectedIndex=0:fld.val(vl),(rp_ge[$t.p.id].checkOnSubmit===!0||rp_ge[$t.p.id].checkOnUpdate)&&(rp_ge[$t.p.id]._savedData[nm]=vl))}),void $("#id_g","#"+fmid).val(rowid);var tre=$(obj).jqGrid("getInd",rowid,!0);tre&&($('td[role="gridcell"]',tre).each(function(i){if(nm=cm[i].name,"cb"!==nm&&"subgrid"!==nm&&"rn"!==nm&&cm[i].editable===!0){if(nm==obj.p.ExpandColumn&&obj.p.treeGrid===!0)tmp=$(this).text();else try{tmp=$.unformat.call(obj,$(this),{rowId:rowid,colModel:cm[i]},i)}catch(_){tmp="textarea"==cm[i].edittype?$(this).text():$(this).html()}switch($t.p.autoencode&&(tmp=$.jgrid.htmlDecode(tmp)),(rp_ge[$t.p.id].checkOnSubmit===!0||rp_ge[$t.p.id].checkOnUpdate)&&(rp_ge[$t.p.id]._savedData[nm]=tmp),nm=$.jgrid.jqID(nm),cm[i].edittype){case"password":case"text":case"button":case"image":case"textarea":("&nbsp;"==tmp||"&#160;"==tmp||1==tmp.length&&160==tmp.charCodeAt(0))&&(tmp=""),$("#"+nm,"#"+fmid).val(tmp);break;case"select":var opv=tmp.split(",");opv=$.map(opv,function(n){return $.trim(n)}),$("#"+nm+" option","#"+fmid).each(function(){this.selected=cm[i].editoptions.multiple||$.trim(tmp)!=$.trim($(this).text())&&opv[0]!=$.trim($(this).text())&&opv[0]!=$.trim($(this).val())?cm[i].editoptions.multiple&&($.inArray($.trim($(this).text()),opv)>-1||$.inArray($.trim($(this).val()),opv)>-1)?!0:!1:!0});break;case"checkbox":if(tmp+="",cm[i].editoptions&&cm[i].editoptions.value){var cb=cm[i].editoptions.value.split(":");cb[0]==tmp?($("#"+nm,"#"+fmid)[$t.p.useProp?"prop":"attr"]("checked",!0),$("#"+nm,"#"+fmid)[$t.p.useProp?"prop":"attr"]("defaultChecked",!0)):($("#"+nm,"#"+fmid)[$t.p.useProp?"prop":"attr"]("checked",!1),$("#"+nm,"#"+fmid)[$t.p.useProp?"prop":"attr"]("defaultChecked",!1))}else tmp=tmp.toLowerCase(),tmp.search(/(false|0|no|off|undefined)/i)<0&&""!==tmp?($("#"+nm,"#"+fmid)[$t.p.useProp?"prop":"attr"]("checked",!0),$("#"+nm,"#"+fmid)[$t.p.useProp?"prop":"attr"]("defaultChecked",!0)):($("#"+nm,"#"+fmid)[$t.p.useProp?"prop":"attr"]("checked",!1),$("#"+nm,"#"+fmid)[$t.p.useProp?"prop":"attr"]("defaultChecked",!1));break;case"custom":try{if(!cm[i].editoptions||!$.isFunction(cm[i].editoptions.custom_value))throw"e1";cm[i].editoptions.custom_value.call($t,$("#"+nm,"#"+fmid),"set",tmp)}catch(e){"e1"==e?$.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+$.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose):$.jgrid.info_dialog(jQuery.jgrid.errors.errcap,e.message,jQuery.jgrid.edit.bClose)}}cnt++}}),cnt>0&&$("#id_g",frmtb).val(rowid))}function setNulls(){$.each($t.p.colModel,function(i,n){n.editoptions&&n.editoptions.NullIfEmpty===!0&&postdata.hasOwnProperty(n.name)&&""===postdata[n.name]&&(postdata[n.name]="null")})}function postIt(){var copydata,idname,oper,key,selr,i,ret=[!0,"",""],onCS={},opers=$t.p.prmNames,retvals=$($t).triggerHandler("jqGridAddEditBeforeCheckValues",[$("#"+frmgr),frmoper]);retvals&&"object"==typeof retvals&&(postdata=retvals),$.isFunction(rp_ge[$t.p.id].beforeCheckValues)&&(retvals=rp_ge[$t.p.id].beforeCheckValues.call($t,postdata,$("#"+frmgr),"_empty"==postdata[$t.p.id+"_id"]?opers.addoper:opers.editoper),retvals&&"object"==typeof retvals&&(postdata=retvals));for(key in postdata)if(postdata.hasOwnProperty(key)&&(ret=$.jgrid.checkValues.call($t,postdata[key],key,$t),ret[0]===!1))break;if(setNulls(),ret[0]&&(onCS=$($t).triggerHandler("jqGridAddEditClickSubmit",[rp_ge[$t.p.id],postdata,frmoper]),void 0===onCS&&$.isFunction(rp_ge[$t.p.id].onclickSubmit)&&(onCS=rp_ge[$t.p.id].onclickSubmit.call($t,rp_ge[$t.p.id],postdata)||{}),ret=$($t).triggerHandler("jqGridAddEditBeforeSubmit",[postdata,$("#"+frmgr),frmoper]),void 0===ret&&(ret=[!0,"",""]),ret[0]&&$.isFunction(rp_ge[$t.p.id].beforeSubmit)&&(ret=rp_ge[$t.p.id].beforeSubmit.call($t,postdata,$("#"+frmgr)))),ret[0]&&!rp_ge[$t.p.id].processing){if(rp_ge[$t.p.id].processing=!0,$("#sData",frmtb+"_2").addClass("ui-state-active"),oper=opers.oper,idname=opers.id,postdata[oper]="_empty"==$.trim(postdata[$t.p.id+"_id"])?opers.addoper:opers.editoper,postdata[oper]!=opers.addoper?postdata[idname]=postdata[$t.p.id+"_id"]:void 0===postdata[idname]&&(postdata[idname]=postdata[$t.p.id+"_id"]),delete postdata[$t.p.id+"_id"],postdata=$.extend(postdata,rp_ge[$t.p.id].editData,onCS),$t.p.treeGrid===!0){if(postdata[oper]==opers.addoper){selr=$($t).jqGrid("getGridParam","selrow");var tr_par_id="adjacency"==$t.p.treeGridModel?$t.p.treeReader.parent_id_field:"parent_id";postdata[tr_par_id]=selr}for(i in $t.p.treeReader)if($t.p.treeReader.hasOwnProperty(i)){var itm=$t.p.treeReader[i];if(postdata.hasOwnProperty(itm)){if(postdata[oper]==opers.addoper&&"parent_id_field"===i)continue;delete postdata[itm]}}}postdata[idname]=$.jgrid.stripPref($t.p.idPrefix,postdata[idname]);var ajaxOptions=$.extend({url:rp_ge[$t.p.id].url?rp_ge[$t.p.id].url:$($t).jqGrid("getGridParam","editurl"),type:rp_ge[$t.p.id].mtype,data:$.isFunction(rp_ge[$t.p.id].serializeEditData)?rp_ge[$t.p.id].serializeEditData.call($t,postdata):postdata,complete:function(data,Status){if(postdata[idname]=$t.p.idPrefix+postdata[idname],"success"!=Status?(ret[0]=!1,ret[1]=$($t).triggerHandler("jqGridAddEditErrorTextFormat",[data,frmoper]),ret[1]=$.isFunction(rp_ge[$t.p.id].errorTextFormat)?rp_ge[$t.p.id].errorTextFormat.call($t,data):Status+" Status: '"+data.statusText+"'. Error code: "+data.status):(ret=$($t).triggerHandler("jqGridAddEditAfterSubmit",[data,postdata,frmoper]),void 0===ret&&(ret=[!0,"",""]),ret[0]&&$.isFunction(rp_ge[$t.p.id].afterSubmit)&&(ret=rp_ge[$t.p.id].afterSubmit.call($t,data,postdata))),ret[0]===!1)$("#FormError>td",frmtb).html(ret[1]),$("#FormError",frmtb).show();else if($.each($t.p.colModel,function(){if(extpost[this.name]&&this.formatter&&"select"==this.formatter)try{delete extpost[this.name]}catch(e){}}),postdata=$.extend(postdata,extpost),$t.p.autoencode&&$.each(postdata,function(n,v){postdata[n]=$.jgrid.htmlDecode(v)}),postdata[oper]==opers.addoper?(ret[2]||(ret[2]=$.jgrid.randId()),postdata[idname]=ret[2],rp_ge[$t.p.id].closeAfterAdd?(rp_ge[$t.p.id].reloadAfterSubmit?$($t).trigger("reloadGrid"):$t.p.treeGrid===!0?$($t).jqGrid("addChildNode",ret[2],selr,postdata):($($t).jqGrid("addRowData",ret[2],postdata,p.addedrow),$($t).jqGrid("setSelection",ret[2])),$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose})):rp_ge[$t.p.id].clearAfterAdd?(rp_ge[$t.p.id].reloadAfterSubmit?$($t).trigger("reloadGrid"):$t.p.treeGrid===!0?$($t).jqGrid("addChildNode",ret[2],selr,postdata):$($t).jqGrid("addRowData",ret[2],postdata,p.addedrow),fillData("_empty",$t,frmgr)):rp_ge[$t.p.id].reloadAfterSubmit?$($t).trigger("reloadGrid"):$t.p.treeGrid===!0?$($t).jqGrid("addChildNode",ret[2],selr,postdata):$($t).jqGrid("addRowData",ret[2],postdata,p.addedrow)):(rp_ge[$t.p.id].reloadAfterSubmit?($($t).trigger("reloadGrid"),rp_ge[$t.p.id].closeAfterEdit||setTimeout(function(){$($t).jqGrid("setSelection",postdata[idname])},1e3)):$t.p.treeGrid===!0?$($t).jqGrid("setTreeRow",postdata[idname],postdata):$($t).jqGrid("setRowData",postdata[idname],postdata),rp_ge[$t.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose})),$.isFunction(rp_ge[$t.p.id].afterComplete)&&(copydata=data,setTimeout(function(){$($t).triggerHandler("jqGridAddEditAfterComplete",[copydata,postdata,$("#"+frmgr),frmoper]),rp_ge[$t.p.id].afterComplete.call($t,copydata,postdata,$("#"+frmgr)),copydata=null},500)),(rp_ge[$t.p.id].checkOnSubmit||rp_ge[$t.p.id].checkOnUpdate)&&($("#"+frmgr).data("disabled",!1),"_empty"!=rp_ge[$t.p.id]._savedData[$t.p.id+"_id"]))for(var key in rp_ge[$t.p.id]._savedData)postdata[key]&&(rp_ge[$t.p.id]._savedData[key]=postdata[key]);rp_ge[$t.p.id].processing=!1,$("#sData",frmtb+"_2").removeClass("ui-state-active");try{$(":input:visible","#"+frmgr)[0].focus()}catch(e){}}},$.jgrid.ajaxOptions,rp_ge[$t.p.id].ajaxEditOptions);if(ajaxOptions.url||rp_ge[$t.p.id].useDataProxy||($.isFunction($t.p.dataProxy)?rp_ge[$t.p.id].useDataProxy=!0:(ret[0]=!1,ret[1]+=" "+$.jgrid.errors.nourl)),ret[0])if(rp_ge[$t.p.id].useDataProxy){var dpret=$t.p.dataProxy.call($t,ajaxOptions,"set_"+$t.p.id);"undefined"==typeof dpret&&(dpret=[!0,""]),dpret[0]===!1?(ret[0]=!1,ret[1]=dpret[1]||"Error deleting the selected row!"):(ajaxOptions.data.oper==opers.addoper&&rp_ge[$t.p.id].closeAfterAdd&&$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose}),ajaxOptions.data.oper==opers.editoper&&rp_ge[$t.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose}))}else $.ajax(ajaxOptions)}ret[0]===!1&&($("#FormError>td",frmtb).html(ret[1]),$("#FormError",frmtb).show())}function compareData(nObj,oObj){var key,ret=!1;for(key in nObj)if(nObj[key]!=oObj[key]){ret=!0;break}return ret}function checkUpdates(){var stat=!0;return $("#FormError",frmtb).hide(),rp_ge[$t.p.id].checkOnUpdate&&(postdata={},extpost={},getFormData(),newData=$.extend({},postdata,extpost),diff=compareData(newData,rp_ge[$t.p.id]._savedData),diff&&($("#"+frmgr).data("disabled",!0),$(".confirm","#"+IDs.themodal).show(),stat=!1)),stat}function restoreInline(){if("_empty"!==rowid&&"undefined"!=typeof $t.p.savedRow&&$t.p.savedRow.length>0&&$.isFunction($.fn.jqGrid.restoreRow))for(var i=0;i<$t.p.savedRow.length;i++)if($t.p.savedRow[i].id==rowid){$($t).jqGrid("restoreRow",rowid);break}}function updateNav(cr,totr){0===cr?$("#pData",frmtb+"_2").addClass("ui-state-disabled"):$("#pData",frmtb+"_2").removeClass("ui-state-disabled"),cr==totr?$("#nData",frmtb+"_2").addClass("ui-state-disabled"):$("#nData",frmtb+"_2").removeClass("ui-state-disabled")}function getCurrPos(){var rowsInGrid=$($t).jqGrid("getDataIDs"),selrow=$("#id_g",frmtb).val(),pos=$.inArray(selrow,rowsInGrid);return[pos,rowsInGrid]}var $t=this;if($t.grid&&rowid){var postdata,extpost,newData,diff,frmoper,gID=$t.p.id,frmgr="FrmGrid_"+gID,frmtborg="TblGrid_"+gID,frmtb="#"+$.jgrid.jqID(frmtborg),IDs={themodal:"editmod"+gID,modalhead:"edithd"+gID,modalcontent:"editcnt"+gID,scrollelm:frmgr},onBeforeShow=$.isFunction(rp_ge[$t.p.id].beforeShowForm)?rp_ge[$t.p.id].beforeShowForm:!1,onAfterShow=$.isFunction(rp_ge[$t.p.id].afterShowForm)?rp_ge[$t.p.id].afterShowForm:!1,onBeforeInit=$.isFunction(rp_ge[$t.p.id].beforeInitData)?rp_ge[$t.p.id].beforeInitData:!1,onInitializeForm=$.isFunction(rp_ge[$t.p.id].onInitializeForm)?rp_ge[$t.p.id].onInitializeForm:!1,showFrm=!0,maxCols=1,maxRows=0;frmgr=$.jgrid.jqID(frmgr),"new"===rowid?(rowid="_empty",frmoper="add",p.caption=rp_ge[$t.p.id].addCaption):(p.caption=rp_ge[$t.p.id].editCaption,frmoper="edit"),p.recreateForm===!0&&void 0!==$("#"+$.jgrid.jqID(IDs.themodal))[0]&&$("#"+$.jgrid.jqID(IDs.themodal)).remove();var closeovrl=!0;if(p.checkOnUpdate&&p.jqModal&&!p.modal&&(closeovrl=!1),void 0!==$("#"+$.jgrid.jqID(IDs.themodal))[0]){if(showFrm=$($t).triggerHandler("jqGridAddEditBeforeInitData",[$("#"+$.jgrid.jqID(frmgr)),frmoper]),"undefined"==typeof showFrm&&(showFrm=!0),showFrm&&onBeforeInit&&(showFrm=onBeforeInit.call($t,$("#"+frmgr))),showFrm===!1)return;restoreInline(),$(".ui-jqdialog-title","#"+$.jgrid.jqID(IDs.modalhead)).html(p.caption),$("#FormError",frmtb).hide(),rp_ge[$t.p.id].topinfo?($(".topinfo",frmtb).html(rp_ge[$t.p.id].topinfo),$(".tinfo",frmtb).show()):$(".tinfo",frmtb).hide(),rp_ge[$t.p.id].bottominfo?($(".bottominfo",frmtb+"_2").html(rp_ge[$t.p.id].bottominfo),$(".binfo",frmtb+"_2").show()):$(".binfo",frmtb+"_2").hide(),fillData(rowid,$t,frmgr),"_empty"!=rowid&&rp_ge[$t.p.id].viewPagerButtons?$("#pData, #nData",frmtb+"_2").show():$("#pData, #nData",frmtb+"_2").hide(),rp_ge[$t.p.id].processing===!0&&(rp_ge[$t.p.id].processing=!1,$("#sData",frmtb+"_2").removeClass("ui-state-active")),$("#"+frmgr).data("disabled")===!0&&($(".confirm","#"+$.jgrid.jqID(IDs.themodal)).hide(),$("#"+frmgr).data("disabled",!1)),$($t).triggerHandler("jqGridAddEditBeforeShowForm",[$("#"+frmgr),frmoper]),onBeforeShow&&onBeforeShow.call($t,$("#"+frmgr)),$("#"+$.jgrid.jqID(IDs.themodal)).data("onClose",rp_ge[$t.p.id].onClose),$.jgrid.viewModal("#"+$.jgrid.jqID(IDs.themodal),{gbox:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,jqM:!1,overlay:p.overlay,modal:p.modal}),closeovrl||$(".jqmOverlay").click(function(){return checkUpdates()?($.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose}),!1):!1}),$($t).triggerHandler("jqGridAddEditAfterShowForm",[$("#"+frmgr),frmoper]),onAfterShow&&onAfterShow.call($t,$("#"+frmgr))}else{var dh=isNaN(p.dataheight)?p.dataheight:p.dataheight+"px",frm=$("<form name='FormPost' id='"+frmgr+"' class='FormGrid' onSubmit='return false;' style='width:100%;overflow:auto;position:relative;height:"+dh+";'></form>").data("disabled",!1),tbl=$("<table id='"+frmtborg+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>");if(showFrm=$($t).triggerHandler("jqGridAddEditBeforeInitData",[$("#"+frmgr),frmoper]),"undefined"==typeof showFrm&&(showFrm=!0),showFrm&&onBeforeInit&&(showFrm=onBeforeInit.call($t,$("#"+frmgr))),showFrm===!1)return;restoreInline(),$($t.p.colModel).each(function(){var fmto=this.formoptions;maxCols=Math.max(maxCols,fmto?fmto.colpos||0:0),maxRows=Math.max(maxRows,fmto?fmto.rowpos||0:0)}),$(frm).append(tbl);var flr=$("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+2*maxCols+"'></td></tr>");flr[0].rp=0,$(tbl).append(flr),flr=$("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*maxCols+"'>"+rp_ge[$t.p.id].topinfo+"</td></tr>"),flr[0].rp=0,$(tbl).append(flr);var rtlb="rtl"==$t.p.direction?!0:!1,bp=rtlb?"nData":"pData",bn=rtlb?"pData":"nData";createData(rowid,$t,tbl,maxCols);var bP="<a href='javascript:void(0)' id='"+bp+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",bN="<a href='javascript:void(0)' id='"+bn+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",bS="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+p.bSubmit+"</a>",bC="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+p.bCancel+"</a>",bt="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+frmtborg+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(rtlb?bN+bP:bP+bN)+"</td><td class='EditButton'>"+bS+bC+"</td></tr>";if(bt+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+rp_ge[$t.p.id].bottominfo+"</td></tr>",bt+="</tbody></table>",maxRows>0){var sd=[];$.each($(tbl)[0].rows,function(i,r){sd[i]=r}),sd.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0}),$.each(sd,function(index,row){$("tbody",tbl).append(row)})}p.gbox="#gbox_"+$.jgrid.jqID(gID);var cle=!1;p.closeOnEscape===!0&&(p.closeOnEscape=!1,cle=!0);var tms=$("<span></span>").append(frm).append(bt);if($.jgrid.createModal(IDs,tms,p,"#gview_"+$.jgrid.jqID($t.p.id),$("#gbox_"+$.jgrid.jqID($t.p.id))[0]),rtlb&&($("#pData, #nData",frmtb+"_2").css("float","right"),$(".EditButton",frmtb+"_2").css("text-align","left")),rp_ge[$t.p.id].topinfo&&$(".tinfo",frmtb).show(),rp_ge[$t.p.id].bottominfo&&$(".binfo",frmtb+"_2").show(),tms=null,bt=null,$("#"+$.jgrid.jqID(IDs.themodal)).keydown(function(e){var wkey=e.target;if($("#"+frmgr).data("disabled")===!0)return!1;if(rp_ge[$t.p.id].savekey[0]===!0&&e.which==rp_ge[$t.p.id].savekey[1]&&"TEXTAREA"!=wkey.tagName)return $("#sData",frmtb+"_2").trigger("click"),!1;if(27===e.which)return checkUpdates()?(cle&&$.jgrid.hideModal(this,{gb:p.gbox,jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose}),!1):!1;if(rp_ge[$t.p.id].navkeys[0]===!0){if("_empty"==$("#id_g",frmtb).val())return!0;if(e.which==rp_ge[$t.p.id].navkeys[1])return $("#pData",frmtb+"_2").trigger("click"),!1;if(e.which==rp_ge[$t.p.id].navkeys[2])return $("#nData",frmtb+"_2").trigger("click"),!1}}),p.checkOnUpdate&&($("a.ui-jqdialog-titlebar-close span","#"+$.jgrid.jqID(IDs.themodal)).removeClass("jqmClose"),$("a.ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(IDs.themodal)).unbind("click").click(function(){return checkUpdates()?($.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose}),!1):!1})),p.saveicon=$.extend([!0,"left","ui-icon-disk"],p.saveicon),p.closeicon=$.extend([!0,"left","ui-icon-close"],p.closeicon),p.saveicon[0]===!0&&$("#sData",frmtb+"_2").addClass("right"==p.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+p.saveicon[2]+"'></span>"),p.closeicon[0]===!0&&$("#cData",frmtb+"_2").addClass("right"==p.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+p.closeicon[2]+"'></span>"),rp_ge[$t.p.id].checkOnSubmit||rp_ge[$t.p.id].checkOnUpdate){bS="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+p.bYes+"</a>",bN="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+p.bNo+"</a>",bC="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+p.bExit+"</a>";
var ii,zI=p.zIndex||999;zI++,ii=$.browser.msie&&6==$.browser.version?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"",$("<div class='ui-widget-overlay jqgrid-overlay confirm' style='z-index:"+zI+";display:none;'>&#160;"+ii+"</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(zI+1)+"'>"+p.saveData+"<br/><br/>"+bS+bN+bC+"</div>").insertAfter("#"+frmgr),$("#sNew","#"+$.jgrid.jqID(IDs.themodal)).click(function(){return postIt(),$("#"+frmgr).data("disabled",!1),$(".confirm","#"+$.jgrid.jqID(IDs.themodal)).hide(),!1}),$("#nNew","#"+$.jgrid.jqID(IDs.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(IDs.themodal)).hide(),$("#"+frmgr).data("disabled",!1),setTimeout(function(){$(":input","#"+frmgr)[0].focus()},0),!1}),$("#cNew","#"+$.jgrid.jqID(IDs.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(IDs.themodal)).hide(),$("#"+frmgr).data("disabled",!1),$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose}),!1})}$($t).triggerHandler("jqGridAddEditInitializeForm",[$("#"+frmgr),frmoper]),onInitializeForm&&onInitializeForm.call($t,$("#"+frmgr)),"_empty"!=rowid&&rp_ge[$t.p.id].viewPagerButtons?$("#pData,#nData",frmtb+"_2").show():$("#pData,#nData",frmtb+"_2").hide(),$($t).triggerHandler("jqGridAddEditBeforeShowForm",[$("#"+frmgr),frmoper]),onBeforeShow&&onBeforeShow.call($t,$("#"+frmgr)),$("#"+$.jgrid.jqID(IDs.themodal)).data("onClose",rp_ge[$t.p.id].onClose),$.jgrid.viewModal("#"+$.jgrid.jqID(IDs.themodal),{gbox:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,overlay:p.overlay,modal:p.modal}),closeovrl||$(".jqmOverlay").click(function(){return checkUpdates()?($.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose}),!1):!1}),$($t).triggerHandler("jqGridAddEditAfterShowForm",[$("#"+frmgr),frmoper]),onAfterShow&&onAfterShow.call($t,$("#"+frmgr)),$(".fm-button","#"+$.jgrid.jqID(IDs.themodal)).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),$("#sData",frmtb+"_2").click(function(){return postdata={},extpost={},$("#FormError",frmtb).hide(),getFormData(),"_empty"==postdata[$t.p.id+"_id"]?postIt():p.checkOnSubmit===!0?(newData=$.extend({},postdata,extpost),diff=compareData(newData,rp_ge[$t.p.id]._savedData),diff?($("#"+frmgr).data("disabled",!0),$(".confirm","#"+$.jgrid.jqID(IDs.themodal)).show()):postIt()):postIt(),!1}),$("#cData",frmtb+"_2").click(function(){return checkUpdates()?($.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose}),!1):!1}),$("#nData",frmtb+"_2").click(function(){if(!checkUpdates())return!1;$("#FormError",frmtb).hide();var npos=getCurrPos();if(npos[0]=parseInt(npos[0],10),-1!=npos[0]&&npos[1][npos[0]+1]){$($t).triggerHandler("jqGridAddEditClickPgButtons",["next",$("#"+frmgr),npos[1][npos[0]]]);var nposret=!0;if($.isFunction(p.onclickPgButtons)&&(nposret=p.onclickPgButtons.call($t,"next",$("#"+frmgr),npos[1][npos[0]]),void 0!==nposret&&nposret===!1))return!1;if($("#"+$.jgrid.jqID(npos[1][npos[0]+1])).hasClass("ui-state-disabled"))return!1;fillData(npos[1][npos[0]+1],$t,frmgr),$($t).jqGrid("setSelection",npos[1][npos[0]+1]),$($t).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",$("#"+frmgr),npos[1][npos[0]]]),$.isFunction(p.afterclickPgButtons)&&p.afterclickPgButtons.call($t,"next",$("#"+frmgr),npos[1][npos[0]+1]),updateNav(npos[0]+1,npos[1].length-1)}return!1}),$("#pData",frmtb+"_2").click(function(){if(!checkUpdates())return!1;$("#FormError",frmtb).hide();var ppos=getCurrPos();if(-1!=ppos[0]&&ppos[1][ppos[0]-1]){$($t).triggerHandler("jqGridAddEditClickPgButtons",["prev",$("#"+frmgr),ppos[1][ppos[0]]]);var pposret=!0;if($.isFunction(p.onclickPgButtons)&&(pposret=p.onclickPgButtons.call($t,"prev",$("#"+frmgr),ppos[1][ppos[0]]),void 0!==pposret&&pposret===!1))return!1;if($("#"+$.jgrid.jqID(ppos[1][ppos[0]-1])).hasClass("ui-state-disabled"))return!1;fillData(ppos[1][ppos[0]-1],$t,frmgr),$($t).jqGrid("setSelection",ppos[1][ppos[0]-1]),$($t).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",$("#"+frmgr),ppos[1][ppos[0]]]),$.isFunction(p.afterclickPgButtons)&&p.afterclickPgButtons.call($t,"prev",$("#"+frmgr),ppos[1][ppos[0]-1]),updateNav(ppos[0]-1,ppos[1].length-1)}return!1})}var posInit=getCurrPos();updateNav(posInit[0],posInit[1].length-1)}})},viewGridRow:function(rowid,p){return p=$.extend({top:0,left:0,width:0,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0},$.jgrid.view,p||{}),rp_ge[$(this)[0].p.id]=p,this.each(function(){function focusaref(){(rp_ge[$t.p.id].closeOnEscape===!0||rp_ge[$t.p.id].navkeys[0]===!0)&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(IDs.modalhead)).focus()},0)}function createData(rowid,obj,tb,maxcols){for(var nm,hc,trdata,tmp,dc,maxw,setme,viewfld,cnt=0,retpos=[],ind=!1,tdtmpl="<td class='CaptionTD form-view-label ui-widget-content' width='"+p.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",tmpl="",tdtmpl2="<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>",fmtnum=["integer","number","currency"],max1=0,max2=0,i=1;maxcols>=i;i++)tmpl+=1==i?tdtmpl:tdtmpl2;if($(obj.p.colModel).each(function(){hc=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,hc||"right"!==this.align||(this.formatter&&-1!==$.inArray(this.formatter,fmtnum)?max1=Math.max(max1,parseInt(this.width,10)):max2=Math.max(max2,parseInt(this.width,10)))}),maxw=0!==max1?max1:0!==max2?max2:0,ind=$(obj).jqGrid("getInd",rowid),$(obj.p.colModel).each(function(i){if(nm=this.name,setme=!1,hc=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,dc=hc?"style='display:none'":"",viewfld="boolean"!=typeof this.viewable?!0:this.viewable,"cb"!==nm&&"subgrid"!==nm&&"rn"!==nm&&viewfld){tmp=ind===!1?"":nm==obj.p.ExpandColumn&&obj.p.treeGrid===!0?$("td:eq("+i+")",obj.rows[ind]).text():$("td:eq("+i+")",obj.rows[ind]).html(),setme="right"===this.align&&0!==maxw?!0:!1;var frmopt=$.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),rp=parseInt(frmopt.rowpos,10)||cnt+1,cp=parseInt(2*(parseInt(frmopt.colpos,10)||1),10);if(frmopt.rowabove){var newdata=$("<tr><td class='contentinfo' colspan='"+2*maxcols+"'>"+frmopt.rowcontent+"</td></tr>");$(tb).append(newdata),newdata[0].rp=rp}trdata=$(tb).find("tr[rowpos="+rp+"]"),0===trdata.length&&(trdata=$("<tr "+dc+" rowpos='"+rp+"'></tr>").addClass("FormData").attr("id","trv_"+nm),$(trdata).append(tmpl),$(tb).append(trdata),trdata[0].rp=rp),$("td:eq("+(cp-2)+")",trdata[0]).html("<b>"+("undefined"==typeof frmopt.label?obj.p.colNames[i]:frmopt.label)+"</b>"),$("td:eq("+(cp-1)+")",trdata[0]).append("<span>"+tmp+"</span>").attr("id","v_"+nm),setme&&$("td:eq("+(cp-1)+") span",trdata[0]).css({"text-align":"right",width:maxw+"px"}),retpos[cnt]=i,cnt++}}),cnt>0){var idrow=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*maxcols-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+rowid+"'/></td></tr>");idrow[0].rp=cnt+99,$(tb).append(idrow)}return retpos}function fillData(rowid,obj){var nm,hc,tmp,opt,trv,cnt=0;trv=$(obj).jqGrid("getInd",rowid,!0),trv&&($("td",trv).each(function(i){nm=obj.p.colModel[i].name,hc=obj.p.colModel[i].editrules&&obj.p.colModel[i].editrules.edithidden===!0?!1:obj.p.colModel[i].hidden===!0?!0:!1,"cb"!==nm&&"subgrid"!==nm&&"rn"!==nm&&(tmp=nm==obj.p.ExpandColumn&&obj.p.treeGrid===!0?$(this).text():$(this).html(),opt=$.extend({},obj.p.colModel[i].editoptions||{}),nm=$.jgrid.jqID("v_"+nm),$("#"+nm+" span","#"+frmtb).html(tmp),hc&&$("#"+nm,"#"+frmtb).parents("tr:first").hide(),cnt++)}),cnt>0&&$("#id_g","#"+frmtb).val(rowid))}function updateNav(cr,totr){0===cr?$("#pData","#"+frmtb+"_2").addClass("ui-state-disabled"):$("#pData","#"+frmtb+"_2").removeClass("ui-state-disabled"),cr==totr?$("#nData","#"+frmtb+"_2").addClass("ui-state-disabled"):$("#nData","#"+frmtb+"_2").removeClass("ui-state-disabled")}function getCurrPos(){var rowsInGrid=$($t).jqGrid("getDataIDs"),selrow=$("#id_g","#"+frmtb).val(),pos=$.inArray(selrow,rowsInGrid);return[pos,rowsInGrid]}var $t=this;if($t.grid&&rowid){var gID=$t.p.id,frmgr="ViewGrid_"+$.jgrid.jqID(gID),frmtb="ViewTbl_"+$.jgrid.jqID(gID),frmgr_id="ViewGrid_"+gID,frmtb_id="ViewTbl_"+gID,IDs={themodal:"viewmod"+gID,modalhead:"viewhd"+gID,modalcontent:"viewcnt"+gID,scrollelm:frmgr},onBeforeInit=$.isFunction(rp_ge[$t.p.id].beforeInitData)?rp_ge[$t.p.id].beforeInitData:!1,showFrm=!0,maxCols=1,maxRows=0;if(void 0!==$("#"+$.jgrid.jqID(IDs.themodal))[0]){if(onBeforeInit&&(showFrm=onBeforeInit.call($t,$("#"+frmgr)),"undefined"==typeof showFrm&&(showFrm=!0)),showFrm===!1)return;$(".ui-jqdialog-title","#"+$.jgrid.jqID(IDs.modalhead)).html(p.caption),$("#FormError","#"+frmtb).hide(),fillData(rowid,$t),$.isFunction(rp_ge[$t.p.id].beforeShowForm)&&rp_ge[$t.p.id].beforeShowForm.call($t,$("#"+frmgr)),$.jgrid.viewModal("#"+$.jgrid.jqID(IDs.themodal),{gbox:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,jqM:!1,overlay:p.overlay,modal:p.modal}),focusaref()}else{var dh=isNaN(p.dataheight)?p.dataheight:p.dataheight+"px",frm=$("<form name='FormPost' id='"+frmgr_id+"' class='FormGrid' style='width:100%;overflow:auto;position:relative;height:"+dh+";'></form>"),tbl=$("<table id='"+frmtb_id+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");if(onBeforeInit&&(showFrm=onBeforeInit.call($t,$("#"+frmgr)),"undefined"==typeof showFrm&&(showFrm=!0)),showFrm===!1)return;$($t.p.colModel).each(function(){var fmto=this.formoptions;maxCols=Math.max(maxCols,fmto?fmto.colpos||0:0),maxRows=Math.max(maxRows,fmto?fmto.rowpos||0:0)}),$(frm).append(tbl),createData(rowid,$t,tbl,maxCols);var rtlb="rtl"==$t.p.direction?!0:!1,bp=rtlb?"nData":"pData",bn=rtlb?"pData":"nData",bP="<a href='javascript:void(0)' id='"+bp+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",bN="<a href='javascript:void(0)' id='"+bn+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",bC="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+p.bClose+"</a>";if(maxRows>0){var sd=[];$.each($(tbl)[0].rows,function(i,r){sd[i]=r}),sd.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0}),$.each(sd,function(index,row){$("tbody",tbl).append(row)})}p.gbox="#gbox_"+$.jgrid.jqID(gID);var bt=$("<span></span>").append(frm).append("<table border='0' class='EditTable' id='"+frmtb+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+p.labelswidth+"'>"+(rtlb?bN+bP:bP+bN)+"</td><td class='EditButton'>"+bC+"</td></tr></tbody></table>");$.jgrid.createModal(IDs,bt,p,"#gview_"+$.jgrid.jqID($t.p.id),$("#gview_"+$.jgrid.jqID($t.p.id))[0]),rtlb&&($("#pData, #nData","#"+frmtb+"_2").css("float","right"),$(".EditButton","#"+frmtb+"_2").css("text-align","left")),p.viewPagerButtons||$("#pData, #nData","#"+frmtb+"_2").hide(),bt=null,$("#"+IDs.themodal).keydown(function(e){if(27===e.which)return rp_ge[$t.p.id].closeOnEscape&&$.jgrid.hideModal(this,{gb:p.gbox,jqm:p.jqModal,onClose:p.onClose}),!1;if(p.navkeys[0]===!0){if(e.which===p.navkeys[1])return $("#pData","#"+frmtb+"_2").trigger("click"),!1;if(e.which===p.navkeys[2])return $("#nData","#"+frmtb+"_2").trigger("click"),!1}}),p.closeicon=$.extend([!0,"left","ui-icon-close"],p.closeicon),p.closeicon[0]===!0&&$("#cData","#"+frmtb+"_2").addClass("right"==p.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+p.closeicon[2]+"'></span>"),$.isFunction(p.beforeShowForm)&&p.beforeShowForm.call($t,$("#"+frmgr)),$.jgrid.viewModal("#"+$.jgrid.jqID(IDs.themodal),{gbox:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,modal:p.modal}),$(".fm-button:not(.ui-state-disabled)","#"+frmtb+"_2").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),focusaref(),$("#cData","#"+frmtb+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:p.onClose}),!1}),$("#nData","#"+frmtb+"_2").click(function(){$("#FormError","#"+frmtb).hide();var npos=getCurrPos();return npos[0]=parseInt(npos[0],10),-1!=npos[0]&&npos[1][npos[0]+1]&&($.isFunction(p.onclickPgButtons)&&p.onclickPgButtons.call($t,"next",$("#"+frmgr),npos[1][npos[0]]),fillData(npos[1][npos[0]+1],$t),$($t).jqGrid("setSelection",npos[1][npos[0]+1]),$.isFunction(p.afterclickPgButtons)&&p.afterclickPgButtons.call($t,"next",$("#"+frmgr),npos[1][npos[0]+1]),updateNav(npos[0]+1,npos[1].length-1)),focusaref(),!1}),$("#pData","#"+frmtb+"_2").click(function(){$("#FormError","#"+frmtb).hide();var ppos=getCurrPos();return-1!=ppos[0]&&ppos[1][ppos[0]-1]&&($.isFunction(p.onclickPgButtons)&&p.onclickPgButtons.call($t,"prev",$("#"+frmgr),ppos[1][ppos[0]]),fillData(ppos[1][ppos[0]-1],$t),$($t).jqGrid("setSelection",ppos[1][ppos[0]-1]),$.isFunction(p.afterclickPgButtons)&&p.afterclickPgButtons.call($t,"prev",$("#"+frmgr),ppos[1][ppos[0]-1]),updateNav(ppos[0]-1,ppos[1].length-1)),focusaref(),!1})}var posInit=getCurrPos();updateNav(posInit[0],posInit[1].length-1)}})},delGridRow:function(rowids,p){return p=$.extend({top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},$.jgrid.del,p||{}),rp_ge[$(this)[0].p.id]=p,this.each(function(){var $t=this;if($t.grid&&rowids){var postd,idname,opers,oper,onBeforeShow=$.isFunction(rp_ge[$t.p.id].beforeShowForm),onAfterShow=$.isFunction(rp_ge[$t.p.id].afterShowForm),onBeforeInit=$.isFunction(rp_ge[$t.p.id].beforeInitData)?rp_ge[$t.p.id].beforeInitData:!1,gID=$t.p.id,onCS={},showFrm=!0,dtbl="DelTbl_"+$.jgrid.jqID(gID),dtbl_id="DelTbl_"+gID,IDs={themodal:"delmod"+gID,modalhead:"delhd"+gID,modalcontent:"delcnt"+gID,scrollelm:dtbl};if(jQuery.isArray(rowids)&&(rowids=rowids.join()),void 0!==$("#"+$.jgrid.jqID(IDs.themodal))[0]){if(onBeforeInit&&(showFrm=onBeforeInit.call($t,$("#"+dtbl)),"undefined"==typeof showFrm&&(showFrm=!0)),showFrm===!1)return;$("#DelData>td","#"+dtbl).text(rowids),$("#DelError","#"+dtbl).hide(),rp_ge[$t.p.id].processing===!0&&(rp_ge[$t.p.id].processing=!1,$("#dData","#"+dtbl).removeClass("ui-state-active")),onBeforeShow&&rp_ge[$t.p.id].beforeShowForm.call($t,$("#"+dtbl)),$.jgrid.viewModal("#"+$.jgrid.jqID(IDs.themodal),{gbox:"#gbox_"+$.jgrid.jqID(gID),jqm:rp_ge[$t.p.id].jqModal,jqM:!1,overlay:rp_ge[$t.p.id].overlay,modal:rp_ge[$t.p.id].modal}),onAfterShow&&rp_ge[$t.p.id].afterShowForm.call($t,$("#"+dtbl))}else{var dh=isNaN(rp_ge[$t.p.id].dataheight)?rp_ge[$t.p.id].dataheight:rp_ge[$t.p.id].dataheight+"px",tbl="<div id='"+dtbl_id+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+dh+";'>";tbl+="<table class='DelTable'><tbody>",tbl+="<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>",tbl+="<tr id='DelData' style='display:none'><td >"+rowids+"</td></tr>",tbl+='<tr><td class="delmsg" style="white-space:pre;">'+rp_ge[$t.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>",tbl+="</tbody></table></div>";var bS="<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+p.bSubmit+"</a>",bC="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+p.bCancel+"</a>";if(tbl+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+dtbl+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+bS+"&#160;"+bC+"</td></tr></tbody></table>",p.gbox="#gbox_"+$.jgrid.jqID(gID),$.jgrid.createModal(IDs,tbl,p,"#gview_"+$.jgrid.jqID($t.p.id),$("#gview_"+$.jgrid.jqID($t.p.id))[0]),onBeforeInit&&(showFrm=onBeforeInit.call($t,$("#"+dtbl)),"undefined"==typeof showFrm&&(showFrm=!0)),showFrm===!1)return;$(".fm-button","#"+dtbl+"_2").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),p.delicon=$.extend([!0,"left","ui-icon-scissors"],rp_ge[$t.p.id].delicon),p.cancelicon=$.extend([!0,"left","ui-icon-cancel"],rp_ge[$t.p.id].cancelicon),p.delicon[0]===!0&&$("#dData","#"+dtbl+"_2").addClass("right"==p.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+p.delicon[2]+"'></span>"),p.cancelicon[0]===!0&&$("#eData","#"+dtbl+"_2").addClass("right"==p.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+p.cancelicon[2]+"'></span>"),$("#dData","#"+dtbl+"_2").click(function(){var ret=[!0,""];onCS={};var postdata=$("#DelData>td","#"+dtbl).text();if($.isFunction(rp_ge[$t.p.id].onclickSubmit)&&(onCS=rp_ge[$t.p.id].onclickSubmit.call($t,rp_ge[$t.p.id],postdata)||{}),$.isFunction(rp_ge[$t.p.id].beforeSubmit)&&(ret=rp_ge[$t.p.id].beforeSubmit.call($t,postdata)),ret[0]&&!rp_ge[$t.p.id].processing){if(rp_ge[$t.p.id].processing=!0,opers=$t.p.prmNames,postd=$.extend({},rp_ge[$t.p.id].delData,onCS),oper=opers.oper,postd[oper]=opers.deloper,idname=opers.id,postdata=String(postdata).split(","),!postdata.length)return!1;for(var pk in postdata)postdata.hasOwnProperty(pk)&&(postdata[pk]=$.jgrid.stripPref($t.p.idPrefix,postdata[pk]));postd[idname]=postdata.join(),$(this).addClass("ui-state-active");var ajaxOptions=$.extend({url:rp_ge[$t.p.id].url?rp_ge[$t.p.id].url:$($t).jqGrid("getGridParam","editurl"),type:rp_ge[$t.p.id].mtype,data:$.isFunction(rp_ge[$t.p.id].serializeDelData)?rp_ge[$t.p.id].serializeDelData.call($t,postd):postd,complete:function(data,Status){if("success"!=Status?(ret[0]=!1,ret[1]=$.isFunction(rp_ge[$t.p.id].errorTextFormat)?rp_ge[$t.p.id].errorTextFormat.call($t,data):Status+" Status: '"+data.statusText+"'. Error code: "+data.status):$.isFunction(rp_ge[$t.p.id].afterSubmit)&&(ret=rp_ge[$t.p.id].afterSubmit.call($t,data,postd)),ret[0]===!1)$("#DelError>td","#"+dtbl).html(ret[1]),$("#DelError","#"+dtbl).show();else{if(rp_ge[$t.p.id].reloadAfterSubmit&&"local"!=$t.p.datatype)$($t).trigger("reloadGrid");else{if($t.p.treeGrid===!0)try{$($t).jqGrid("delTreeNode",$t.p.idPrefix+postdata[0])}catch(e){}else for(var i=0;i<postdata.length;i++)$($t).jqGrid("delRowData",$t.p.idPrefix+postdata[i]);$t.p.selrow=null,$t.p.selarrrow=[]}$.isFunction(rp_ge[$t.p.id].afterComplete)&&setTimeout(function(){rp_ge[$t.p.id].afterComplete.call($t,data,postdata)},500)}rp_ge[$t.p.id].processing=!1,$("#dData","#"+dtbl+"_2").removeClass("ui-state-active"),ret[0]&&$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose})}},$.jgrid.ajaxOptions,rp_ge[$t.p.id].ajaxDelOptions);if(ajaxOptions.url||rp_ge[$t.p.id].useDataProxy||($.isFunction($t.p.dataProxy)?rp_ge[$t.p.id].useDataProxy=!0:(ret[0]=!1,ret[1]+=" "+$.jgrid.errors.nourl)),ret[0])if(rp_ge[$t.p.id].useDataProxy){var dpret=$t.p.dataProxy.call($t,ajaxOptions,"del_"+$t.p.id);"undefined"==typeof dpret&&(dpret=[!0,""]),dpret[0]===!1?(ret[0]=!1,ret[1]=dpret[1]||"Error deleting the selected row!"):$.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:p.jqModal,onClose:rp_ge[$t.p.id].onClose})}else $.ajax(ajaxOptions)}return ret[0]===!1&&($("#DelError>td","#"+dtbl).html(ret[1]),$("#DelError","#"+dtbl).show()),!1}),$("#eData","#"+dtbl+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+$.jgrid.jqID(gID),jqm:rp_ge[$t.p.id].jqModal,onClose:rp_ge[$t.p.id].onClose}),!1}),onBeforeShow&&rp_ge[$t.p.id].beforeShowForm.call($t,$("#"+dtbl)),$.jgrid.viewModal("#"+$.jgrid.jqID(IDs.themodal),{gbox:"#gbox_"+$.jgrid.jqID(gID),jqm:rp_ge[$t.p.id].jqModal,overlay:rp_ge[$t.p.id].overlay,modal:rp_ge[$t.p.id].modal}),onAfterShow&&rp_ge[$t.p.id].afterShowForm.call($t,$("#"+dtbl))}rp_ge[$t.p.id].closeOnEscape===!0&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(IDs.modalhead)).focus()},0)}})},navGrid:function(elem,o,pEdit,pAdd,pDel,pSearch,pView){return o=$.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},$.jgrid.nav,o||{}),this.each(function(){if(!this.nav){var twd,tdw,alertIDs={themodal:"alertmod",modalhead:"alerthd",modalcontent:"alertcnt"},$t=this;if($t.grid&&"string"==typeof elem){void 0===$("#"+alertIDs.themodal)[0]&&(o.alerttop||o.alertleft||("undefined"!=typeof window.innerWidth?(o.alertleft=window.innerWidth,o.alerttop=window.innerHeight):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(o.alertleft=document.documentElement.clientWidth,o.alerttop=document.documentElement.clientHeight):(o.alertleft=1024,o.alerttop=768),o.alertleft=o.alertleft/2-parseInt(o.alertwidth,10)/2,o.alerttop=o.alerttop/2-25),$.jgrid.createModal(alertIDs,"<div>"+o.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqModal:!0,drag:!0,resize:!0,caption:o.alertcap,top:o.alerttop,left:o.alertleft,width:o.alertwidth,height:o.alertheight,closeOnEscape:o.closeOnEscape,zIndex:o.alertzIndex},"","",!0));var clone=1;o.cloneToTop&&$t.p.toppager&&(clone=2);for(var i=0;clone>i;i++){var tbd,pgid,elemids,navtbl=$("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),sep="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>";0===i?(pgid=elem,elemids=$t.p.id,pgid==$t.p.toppager&&(elemids+="_top",clone=1)):(pgid=$t.p.toppager,elemids=$t.p.id+"_top"),"rtl"==$t.p.direction&&$(navtbl).attr("dir","rtl").css("float","right"),o.add&&(pAdd=pAdd||{},tbd=$("<td class='ui-pg-button ui-corner-all'></td>"),$(tbd).append("<div class='ui-pg-div'><span class='ui-icon "+o.addicon+"'></span>"+o.addtext+"</div>"),$("tr",navtbl).append(tbd),$(tbd,navtbl).attr({title:o.addtitle||"",id:pAdd.id||"add_"+elemids}).click(function(){return $(this).hasClass("ui-state-disabled")||($.isFunction(o.addfunc)?o.addfunc.call($t):$($t).jqGrid("editGridRow","new",pAdd)),!1}).hover(function(){$(this).hasClass("ui-state-disabled")||$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),tbd=null),o.edit&&(tbd=$("<td class='ui-pg-button ui-corner-all'></td>"),pEdit=pEdit||{},$(tbd).append("<div class='ui-pg-div'><span class='ui-icon "+o.editicon+"'></span>"+o.edittext+"</div>"),$("tr",navtbl).append(tbd),$(tbd,navtbl).attr({title:o.edittitle||"",id:pEdit.id||"edit_"+elemids}).click(function(){if(!$(this).hasClass("ui-state-disabled")){var sr=$t.p.selrow;sr?$.isFunction(o.editfunc)?o.editfunc.call($t,sr):$($t).jqGrid("editGridRow",sr,pEdit):($.jgrid.viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(function(){$(this).hasClass("ui-state-disabled")||$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),tbd=null),o.view&&(tbd=$("<td class='ui-pg-button ui-corner-all'></td>"),pView=pView||{},$(tbd).append("<div class='ui-pg-div'><span class='ui-icon "+o.viewicon+"'></span>"+o.viewtext+"</div>"),$("tr",navtbl).append(tbd),$(tbd,navtbl).attr({title:o.viewtitle||"",id:pView.id||"view_"+elemids}).click(function(){if(!$(this).hasClass("ui-state-disabled")){var sr=$t.p.selrow;sr?$.isFunction(o.viewfunc)?o.viewfunc.call($t,sr):$($t).jqGrid("viewGridRow",sr,pView):($.jgrid.viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(function(){$(this).hasClass("ui-state-disabled")||$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),tbd=null),o.del&&(tbd=$("<td class='ui-pg-button ui-corner-all'></td>"),pDel=pDel||{},$(tbd).append("<div class='ui-pg-div'><span class='ui-icon "+o.delicon+"'></span>"+o.deltext+"</div>"),$("tr",navtbl).append(tbd),$(tbd,navtbl).attr({title:o.deltitle||"",id:pDel.id||"del_"+elemids}).click(function(){if(!$(this).hasClass("ui-state-disabled")){var dr;$t.p.multiselect?(dr=$t.p.selarrrow,0===dr.length&&(dr=null)):dr=$t.p.selrow,dr?$.isFunction(o.delfunc)?o.delfunc.call($t,dr):$($t).jqGrid("delGridRow",dr,pDel):($.jgrid.viewModal("#"+alertIDs.themodal,{gbox:"#gbox_"+$.jgrid.jqID($t.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(function(){$(this).hasClass("ui-state-disabled")||$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),tbd=null),(o.add||o.edit||o.del||o.view)&&$("tr",navtbl).append(sep),o.search&&(tbd=$("<td class='ui-pg-button ui-corner-all'></td>"),pSearch=pSearch||{},$(tbd).append("<div class='ui-pg-div'><span class='ui-icon "+o.searchicon+"'></span>"+o.searchtext+"</div>"),$("tr",navtbl).append(tbd),$(tbd,navtbl).attr({title:o.searchtitle||"",id:pSearch.id||"search_"+elemids}).click(function(){return $(this).hasClass("ui-state-disabled")||($.isFunction(o.searchfunc)?o.searchfunc.call($t,pSearch):$($t).jqGrid("searchGrid",pSearch)),!1}).hover(function(){$(this).hasClass("ui-state-disabled")||$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),pSearch.showOnLoad&&pSearch.showOnLoad===!0&&$(tbd,navtbl).click(),tbd=null),o.refresh&&(tbd=$("<td class='ui-pg-button ui-corner-all'></td>"),$(tbd).append("<div class='ui-pg-div'><span class='ui-icon "+o.refreshicon+"'></span>"+o.refreshtext+"</div>"),$("tr",navtbl).append(tbd),$(tbd,navtbl).attr({title:o.refreshtitle||"",id:"refresh_"+elemids}).click(function(){if(!$(this).hasClass("ui-state-disabled")){$.isFunction(o.beforeRefresh)&&o.beforeRefresh.call($t),$t.p.search=!1;try{var gID=$t.p.id;$t.p.postData.filters="",$("#fbox_"+$.jgrid.jqID(gID)).jqFilter("resetFilter"),$.isFunction($t.clearToolbar)&&$t.clearToolbar.call($t,!1)}catch(e){}switch(o.refreshstate){case"firstpage":$($t).trigger("reloadGrid",[{page:1}]);break;case"current":$($t).trigger("reloadGrid",[{current:!0}])}$.isFunction(o.afterRefresh)&&o.afterRefresh.call($t)}return!1}).hover(function(){$(this).hasClass("ui-state-disabled")||$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),tbd=null),tdw=$(".ui-jqgrid").css("font-size")||"11px",$("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+tdw+";visibility:hidden;' ></div>"),twd=$(navtbl).clone().appendTo("#testpg2").width(),$("#testpg2").remove(),$(pgid+"_"+o.position,pgid).append(navtbl),$t.p._nvtd&&(twd>$t.p._nvtd[0]&&($(pgid+"_"+o.position,pgid).width(twd),$t.p._nvtd[0]=twd),$t.p._nvtd[1]=twd),tdw=null,twd=null,navtbl=null,this.nav=!0}}}})},navButtonAdd:function(elem,p){return p=$.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},p||{}),this.each(function(){if(this.grid){"string"==typeof elem&&0!==elem.indexOf("#")&&(elem="#"+$.jgrid.jqID(elem));var findnav=$(".navtable",elem)[0],$t=this;if(findnav){if(p.id&&void 0!==$("#"+$.jgrid.jqID(p.id),findnav)[0])return;var tbd=$("<td></td>");$(tbd).addClass("ui-pg-button ui-corner-all").append("NONE"==p.buttonicon.toString().toUpperCase()?"<div class='ui-pg-div'>"+p.caption+"</div>":"<div class='ui-pg-div'><span class='ui-icon "+p.buttonicon+"'></span>"+p.caption+"</div>"),p.id&&$(tbd).attr("id",p.id),"first"==p.position?0===findnav.rows[0].cells.length?$("tr",findnav).append(tbd):$("tr td:eq(0)",findnav).before(tbd):$("tr",findnav).append(tbd),$(tbd,findnav).attr("title",p.title||"").click(function(e){return $(this).hasClass("ui-state-disabled")||$.isFunction(p.onClickButton)&&p.onClickButton.call($t,e),!1}).hover(function(){$(this).hasClass("ui-state-disabled")||$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(elem,p){return p=$.extend({sepclass:"ui-separator",sepcontent:""},p||{}),this.each(function(){if(this.grid){"string"==typeof elem&&0!==elem.indexOf("#")&&(elem="#"+$.jgrid.jqID(elem));var findnav=$(".navtable",elem)[0];if(findnav){var sep="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+p.sepclass+"'></span>"+p.sepcontent+"</td>";$("tr",findnav).append(sep)}}})},GridToForm:function(rowid,formid){return this.each(function(){var $t=this;if($t.grid){var rowdata=$($t).jqGrid("getRowData",rowid);if(rowdata)for(var i in rowdata)$("[name="+$.jgrid.jqID(i)+"]",formid).is("input:radio")||$("[name="+$.jgrid.jqID(i)+"]",formid).is("input:checkbox")?$("[name="+$.jgrid.jqID(i)+"]",formid).each(function(){$(this).val()==rowdata[i]?$(this)[$t.p.useProp?"prop":"attr"]("checked",!0):$(this)[$t.p.useProp?"prop":"attr"]("checked",!1)}):$("[name="+$.jgrid.jqID(i)+"]",formid).val(rowdata[i])}})},FormToGrid:function(rowid,formid,mode,position){return this.each(function(){var $t=this;if($t.grid){mode||(mode="set"),position||(position="first");var fields=$(formid).serializeArray(),griddata={};$.each(fields,function(i,field){griddata[field.name]=field.value}),"add"==mode?$($t).jqGrid("addRowData",rowid,griddata,position):"set"==mode&&$($t).jqGrid("setRowData",rowid,griddata)}})}})}(jQuery),function($){"use strict";$.jgrid.inlineEdit=$.jgrid.inlineEdit||{},$.jgrid.extend({editRow:function(rowid,keys,oneditfunc,successfunc,url,extraparam,aftersavefunc,errorfunc,afterrestorefunc){var o={},args=$.makeArray(arguments).slice(1);return"object"===$.type(args[0])?o=args[0]:("undefined"!=typeof keys&&(o.keys=keys),$.isFunction(oneditfunc)&&(o.oneditfunc=oneditfunc),$.isFunction(successfunc)&&(o.successfunc=successfunc),"undefined"!=typeof url&&(o.url=url),"undefined"!=typeof extraparam&&(o.extraparam=extraparam),$.isFunction(aftersavefunc)&&(o.aftersavefunc=aftersavefunc),$.isFunction(errorfunc)&&(o.errorfunc=errorfunc),$.isFunction(afterrestorefunc)&&(o.afterrestorefunc=afterrestorefunc)),o=$.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},$.jgrid.inlineEdit,o),this.each(function(){var nm,tmp,editable,ind,cm,$t=this,cnt=0,focus=null,svr={};$t.grid&&(ind=$($t).jqGrid("getInd",rowid,!0),ind!==!1&&(editable=$(ind).attr("editable")||"0","0"!=editable||$(ind).hasClass("not-editable-row")||(cm=$t.p.colModel,$('td[role="gridcell"]',ind).each(function(i){nm=cm[i].name;var treeg=$t.p.treeGrid===!0&&nm==$t.p.ExpandColumn;if(treeg)tmp=$("span:first",this).html();else try{tmp=$.unformat.call($t,this,{rowId:rowid,colModel:cm[i]},i)}catch(_){tmp=cm[i].edittype&&"textarea"==cm[i].edittype?$(this).text():$(this).html()}if("cb"!=nm&&"subgrid"!=nm&&"rn"!=nm&&($t.p.autoencode&&(tmp=$.jgrid.htmlDecode(tmp)),svr[nm]=tmp,cm[i].editable===!0)){null===focus&&(focus=i),treeg?$("span:first",this).html(""):$(this).html("");var opt=$.extend({},cm[i].editoptions||{},{id:rowid+"_"+nm,name:nm});cm[i].edittype||(cm[i].edittype="text"),("&nbsp;"==tmp||"&#160;"==tmp||1==tmp.length&&160==tmp.charCodeAt(0))&&(tmp="");var elc=$.jgrid.createEl.call($t,cm[i].edittype,opt,tmp,!0,$.extend({},$.jgrid.ajaxOptions,$t.p.ajaxSelectOptions||{}));
$(elc).addClass("editable"),treeg?$("span:first",this).append(elc):$(this).append(elc),"select"==cm[i].edittype&&"undefined"!=typeof cm[i].editoptions&&cm[i].editoptions.multiple===!0&&"undefined"==typeof cm[i].editoptions.dataUrl&&$.browser.msie&&$(elc).width($(elc).width()),cnt++}}),cnt>0&&(svr.id=rowid,$t.p.savedRow.push(svr),$(ind).attr("editable","1"),$("td:eq("+focus+") input",ind).focus(),o.keys===!0&&$(ind).bind("keydown",function(e){if(27===e.keyCode){if($($t).jqGrid("restoreRow",rowid,o.afterrestorefunc),$t.p._inlinenav)try{$($t).jqGrid("showAddEditButtons")}catch(eer1){}return!1}if(13===e.keyCode){var ta=e.target;if("TEXTAREA"==ta.tagName)return!0;if($($t).jqGrid("saveRow",rowid,o)&&$t.p._inlinenav)try{$($t).jqGrid("showAddEditButtons")}catch(eer2){}return!1}}),$($t).triggerHandler("jqGridInlineEditRow",[rowid,o]),$.isFunction(o.oneditfunc)&&o.oneditfunc.call($t,rowid)))))})},saveRow:function(rowid,successfunc,url,extraparam,aftersavefunc,errorfunc,afterrestorefunc){var args=$.makeArray(arguments).slice(1),o={};"object"===$.type(args[0])?o=args[0]:($.isFunction(successfunc)&&(o.successfunc=successfunc),"undefined"!=typeof url&&(o.url=url),"undefined"!=typeof extraparam&&(o.extraparam=extraparam),$.isFunction(aftersavefunc)&&(o.aftersavefunc=aftersavefunc),$.isFunction(errorfunc)&&(o.errorfunc=errorfunc),$.isFunction(afterrestorefunc)&&(o.afterrestorefunc=afterrestorefunc)),o=$.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},$.jgrid.inlineEdit,o);var nm,editable,fr,cv,ind,success=!1,$t=this[0],tmp={},tmp2={},tmp3={};if(!$t.grid)return success;if(ind=$($t).jqGrid("getInd",rowid,!0),ind===!1)return success;if(editable=$(ind).attr("editable"),o.url=o.url?o.url:$t.p.editurl,"1"===editable){var cm;if($('td[role="gridcell"]',ind).each(function(i){if(cm=$t.p.colModel[i],nm=cm.name,"cb"!=nm&&"subgrid"!=nm&&cm.editable===!0&&"rn"!=nm&&!$(this).hasClass("not-editable-cell")){switch(cm.edittype){case"checkbox":var cbv=["Yes","No"];cm.editoptions&&(cbv=cm.editoptions.value.split(":")),tmp[nm]=$("input",this).is(":checked")?cbv[0]:cbv[1];break;case"text":case"password":case"textarea":case"button":tmp[nm]=$("input, textarea",this).val();break;case"select":if(cm.editoptions.multiple){var sel=$("select",this),selectedText=[];tmp[nm]=$(sel).val(),tmp[nm]=tmp[nm]?tmp[nm].join(","):"",$("select option:selected",this).each(function(i,selected){selectedText[i]=$(selected).text()}),tmp2[nm]=selectedText.join(",")}else tmp[nm]=$("select option:selected",this).val(),tmp2[nm]=$("select option:selected",this).text();cm.formatter&&"select"==cm.formatter&&(tmp2={});break;case"custom":try{if(!cm.editoptions||!$.isFunction(cm.editoptions.custom_value))throw"e1";if(tmp[nm]=cm.editoptions.custom_value.call($t,$(".customelement",this),"get"),void 0===tmp[nm])throw"e2"}catch(e){"e1"==e&&$.jgrid.info_dialog($.jgrid.errors.errcap,"function 'custom_value' "+$.jgrid.edit.msg.nodefined,$.jgrid.edit.bClose),"e2"==e?$.jgrid.info_dialog($.jgrid.errors.errcap,"function 'custom_value' "+$.jgrid.edit.msg.novalue,$.jgrid.edit.bClose):$.jgrid.info_dialog($.jgrid.errors.errcap,e.message,$.jgrid.edit.bClose)}}if(cv=$.jgrid.checkValues(tmp[nm],i,$t),cv[0]===!1)return cv[1]=tmp[nm]+" "+cv[1],!1;$t.p.autoencode&&(tmp[nm]=$.jgrid.htmlEncode(tmp[nm])),"clientArray"!==o.url&&cm.editoptions&&cm.editoptions.NullIfEmpty===!0&&""===tmp[nm]&&(tmp3[nm]="null")}}),cv[0]===!1){try{var positions=$.jgrid.findPos($("#"+$.jgrid.jqID(rowid),$t.grid.bDiv)[0]);$.jgrid.info_dialog($.jgrid.errors.errcap,cv[1],$.jgrid.edit.bClose,{left:positions[0],top:positions[1]})}catch(e){alert(cv[1])}return success}var idname,opers,oper;if(opers=$t.p.prmNames,oper=opers.oper,idname=opers.id,tmp&&(tmp[oper]=opers.editoper,tmp[idname]=rowid,"undefined"==typeof $t.p.inlineData&&($t.p.inlineData={}),tmp=$.extend({},tmp,$t.p.inlineData,o.extraparam)),"clientArray"==o.url){tmp=$.extend({},tmp,tmp2),$t.p.autoencode&&$.each(tmp,function(n,v){tmp[n]=$.jgrid.htmlDecode(v)});var resp=$($t).jqGrid("setRowData",rowid,tmp);$(ind).attr("editable","0");for(var k=0;k<$t.p.savedRow.length;k++)if($t.p.savedRow[k].id==rowid){fr=k;break}fr>=0&&$t.p.savedRow.splice(fr,1),$($t).triggerHandler("jqGridInlineAfterSaveRow",[rowid,resp,tmp,o]),$.isFunction(o.aftersavefunc)&&o.aftersavefunc.call($t,rowid,resp,o),success=!0,$(ind).unbind("keydown")}else $("#lui_"+$.jgrid.jqID($t.p.id)).show(),tmp3=$.extend({},tmp,tmp3),tmp3[idname]=$.jgrid.stripPref($t.p.idPrefix,tmp3[idname]),$.ajax($.extend({url:o.url,data:$.isFunction($t.p.serializeRowData)?$t.p.serializeRowData.call($t,tmp3):tmp3,type:o.mtype,async:!1,complete:function(res,stat){if($("#lui_"+$.jgrid.jqID($t.p.id)).hide(),"success"===stat){var sucret,ret=!0;if(sucret=$($t).triggerHandler("jqGridInlineSuccessSaveRow",[res,rowid,o]),$.isArray(sucret)||(sucret=[!0,tmp]),sucret[0]&&$.isFunction(o.successfunc)&&(sucret=o.successfunc.call($t,res)),$.isArray(sucret)?(ret=sucret[0],tmp=sucret[1]?sucret[1]:tmp):ret=sucret,ret===!0){$t.p.autoencode&&$.each(tmp,function(n,v){tmp[n]=$.jgrid.htmlDecode(v)}),tmp=$.extend({},tmp,tmp2),$($t).jqGrid("setRowData",rowid,tmp),$(ind).attr("editable","0");for(var k=0;k<$t.p.savedRow.length;k++)if($t.p.savedRow[k].id==rowid){fr=k;break}fr>=0&&$t.p.savedRow.splice(fr,1),$($t).triggerHandler("jqGridInlineAfterSaveRow",[rowid,res,tmp,o]),$.isFunction(o.aftersavefunc)&&o.aftersavefunc.call($t,rowid,res),success=!0,$(ind).unbind("keydown")}else $($t).triggerHandler("jqGridInlineErrorSaveRow",[rowid,res,stat,null,o]),$.isFunction(o.errorfunc)&&o.errorfunc.call($t,rowid,res,stat,null),o.restoreAfterError===!0&&$($t).jqGrid("restoreRow",rowid,o.afterrestorefunc)}},error:function(res,stat,err){if($("#lui_"+$.jgrid.jqID($t.p.id)).hide(),$($t).triggerHandler("jqGridInlineErrorSaveRow",[rowid,res,stat,err,o]),$.isFunction(o.errorfunc))o.errorfunc.call($t,rowid,res,stat,err);else{var rT=res.responseText||res.statusText;try{$.jgrid.info_dialog($.jgrid.errors.errcap,'<div class="ui-state-error">'+rT+"</div>",$.jgrid.edit.bClose,{buttonalign:"right"})}catch(e){alert(rT)}}o.restoreAfterError===!0&&$($t).jqGrid("restoreRow",rowid,o.afterrestorefunc)}},$.jgrid.ajaxOptions,$t.p.ajaxRowOptions||{}))}return success},restoreRow:function(rowid,afterrestorefunc){var args=$.makeArray(arguments).slice(1),o={};return"object"===$.type(args[0])?o=args[0]:$.isFunction(afterrestorefunc)&&(o.afterrestorefunc=afterrestorefunc),o=$.extend(!0,$.jgrid.inlineEdit,o),this.each(function(){var fr,ind,$t=this,ares={};if($t.grid&&(ind=$($t).jqGrid("getInd",rowid,!0),ind!==!1)){for(var k=0;k<$t.p.savedRow.length;k++)if($t.p.savedRow[k].id==rowid){fr=k;break}if(fr>=0){if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker","#"+$.jgrid.jqID(ind.id)).datepicker("hide")}catch(e){}$.each($t.p.colModel,function(){this.editable===!0&&this.name in $t.p.savedRow[fr]&&(ares[this.name]=$t.p.savedRow[fr][this.name])}),$($t).jqGrid("setRowData",rowid,ares),$(ind).attr("editable","0").unbind("keydown"),$t.p.savedRow.splice(fr,1),$("#"+$.jgrid.jqID(rowid),"#"+$.jgrid.jqID($t.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){$($t).jqGrid("delRowData",rowid)},0)}$($t).triggerHandler("jqGridInlineAfterRestoreRow",[rowid]),$.isFunction(o.afterrestorefunc)&&o.afterrestorefunc.call($t,rowid)}})},addRow:function(p){return p=$.extend(!0,{rowID:"new_row",initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},p||{}),this.each(function(){if(this.grid){var $t=this;if(p.useDefValues===!0&&$($t.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var opt=this.editoptions.defaultValue,tmp=$.isFunction(opt)?opt.call($t):opt;p.initdata[this.name]=tmp}}),$($t).jqGrid("addRowData",p.rowID,p.initdata,p.position),p.rowID=$t.p.idPrefix+p.rowID,$("#"+$.jgrid.jqID(p.rowID),"#"+$.jgrid.jqID($t.p.id)).addClass("jqgrid-new-row"),p.useFormatter)$("#"+$.jgrid.jqID(p.rowID)+" .ui-inline-edit","#"+$.jgrid.jqID($t.p.id)).click();else{var opers=$t.p.prmNames,oper=opers.oper;p.addRowParams.extraparam[oper]=opers.addoper,$($t).jqGrid("editRow",p.rowID,p.addRowParams),$($t).jqGrid("setSelection",p.rowID)}}})},inlineNav:function(elem,o){return o=$.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",addParams:{useFormatter:!1,rowID:"new_row"},editParams:{},restoreAfterSelect:!0},$.jgrid.nav,o||{}),this.each(function(){if(this.grid){var onSelect,$t=this,gID=$.jgrid.jqID($t.p.id);if($t.p._inlinenav=!0,o.addParams.useFormatter===!0){var i,cm=$t.p.colModel;for(i=0;i<cm.length;i++)if(cm[i].formatter&&"actions"===cm[i].formatter){if(cm[i].formatoptions){var defaults={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},ap=$.extend(defaults,cm[i].formatoptions);o.addParams.addRowParams={keys:ap.keys,oneditfunc:ap.onEdit,successfunc:ap.onSuccess,url:ap.url,extraparam:ap.extraparam,aftersavefunc:ap.afterSavef,errorfunc:ap.onError,afterrestorefunc:ap.afterRestore}}break}}o.add&&$($t).jqGrid("navButtonAdd",elem,{caption:o.addtext,title:o.addtitle,buttonicon:o.addicon,id:$t.p.id+"_iladd",onClickButton:function(){$($t).jqGrid("addRow",o.addParams),o.addParams.useFormatter||($("#"+gID+"_ilsave").removeClass("ui-state-disabled"),$("#"+gID+"_ilcancel").removeClass("ui-state-disabled"),$("#"+gID+"_iladd").addClass("ui-state-disabled"),$("#"+gID+"_iledit").addClass("ui-state-disabled"))}}),o.edit&&$($t).jqGrid("navButtonAdd",elem,{caption:o.edittext,title:o.edittitle,buttonicon:o.editicon,id:$t.p.id+"_iledit",onClickButton:function(){var sr=$($t).jqGrid("getGridParam","selrow");sr?($($t).jqGrid("editRow",sr,o.editParams),$("#"+gID+"_ilsave").removeClass("ui-state-disabled"),$("#"+gID+"_ilcancel").removeClass("ui-state-disabled"),$("#"+gID+"_iladd").addClass("ui-state-disabled"),$("#"+gID+"_iledit").addClass("ui-state-disabled")):($.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+gID,jqm:!0}),$("#jqg_alrt").focus())}}),o.save&&($($t).jqGrid("navButtonAdd",elem,{caption:o.savetext||"",title:o.savetitle||"Save row",buttonicon:o.saveicon,id:$t.p.id+"_ilsave",onClickButton:function(){var sr=$t.p.savedRow[0].id;if(sr){var opers=$t.p.prmNames,oper=opers.oper;o.editParams.extraparam||(o.editParams.extraparam={}),o.editParams.extraparam[oper]=$("#"+$.jgrid.jqID(sr),"#"+gID).hasClass("jqgrid-new-row")?opers.addoper:opers.editoper,$($t).jqGrid("saveRow",sr,o.editParams)&&$($t).jqGrid("showAddEditButtons")}else $.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+gID,jqm:!0}),$("#jqg_alrt").focus()}}),$("#"+gID+"_ilsave").addClass("ui-state-disabled")),o.cancel&&($($t).jqGrid("navButtonAdd",elem,{caption:o.canceltext||"",title:o.canceltitle||"Cancel row editing",buttonicon:o.cancelicon,id:$t.p.id+"_ilcancel",onClickButton:function(){var sr=$t.p.savedRow[0].id;sr?($($t).jqGrid("restoreRow",sr,o.editParams),$($t).jqGrid("showAddEditButtons")):($.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+gID,jqm:!0}),$("#jqg_alrt").focus())}}),$("#"+gID+"_ilcancel").addClass("ui-state-disabled")),o.restoreAfterSelect===!0&&(onSelect=$.isFunction($t.p.beforeSelectRow)?$t.p.beforeSelectRow:!1,$t.p.beforeSelectRow=function(id,stat){var ret=!0;return $t.p.savedRow.length>0&&$t.p._inlinenav===!0&&id!==$t.p.selrow&&null!==$t.p.selrow&&($t.p.selrow==o.addParams.rowID?$($t).jqGrid("delRowData",$t.p.selrow):$($t).jqGrid("restoreRow",$t.p.selrow,o.editParams),$($t).jqGrid("showAddEditButtons")),onSelect&&(ret=onSelect.call($t,id,stat)),ret})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var gID=$.jgrid.jqID(this.p.id);$("#"+gID+"_ilsave").addClass("ui-state-disabled"),$("#"+gID+"_ilcancel").addClass("ui-state-disabled"),$("#"+gID+"_iladd").removeClass("ui-state-disabled"),$("#"+gID+"_iledit").removeClass("ui-state-disabled")}})}})}(jQuery),function($){"use strict";$.jgrid.extend({editCell:function(iRow,iCol,ed){return this.each(function(){var nm,tmp,cc,cm,$t=this;if($t.grid&&$t.p.cellEdit===!0){if(iCol=parseInt(iCol,10),$t.p.selrow=$t.rows[iRow].id,$t.p.knv||$($t).jqGrid("GridNav"),$t.p.savedRow.length>0){if(ed===!0&&iRow==$t.p.iRow&&iCol==$t.p.iCol)return;$($t).jqGrid("saveCell",$t.p.savedRow[0].id,$t.p.savedRow[0].ic)}else window.setTimeout(function(){$("#"+$.jgrid.jqID($t.p.knv)).attr("tabindex","-1").focus()},0);if(cm=$t.p.colModel[iCol],nm=cm.name,"subgrid"!=nm&&"cb"!=nm&&"rn"!=nm){if(cc=$("td:eq("+iCol+")",$t.rows[iRow]),cm.editable!==!0||ed!==!0||cc.hasClass("not-editable-cell"))parseInt($t.p.iCol,10)>=0&&parseInt($t.p.iRow,10)>=0&&($("td:eq("+$t.p.iCol+")",$t.rows[$t.p.iRow]).removeClass("edit-cell ui-state-highlight"),$($t.rows[$t.p.iRow]).removeClass("selected-row ui-state-hover")),cc.addClass("edit-cell ui-state-highlight"),$($t.rows[iRow]).addClass("selected-row ui-state-hover"),tmp=cc.html().replace(/\&#160\;/gi,""),$($t).triggerHandler("jqGridSelectCell",[$t.rows[iRow].id,nm,tmp,iRow,iCol]),$.isFunction($t.p.onSelectCell)&&$t.p.onSelectCell.call($t,$t.rows[iRow].id,nm,tmp,iRow,iCol);else{parseInt($t.p.iCol,10)>=0&&parseInt($t.p.iRow,10)>=0&&($("td:eq("+$t.p.iCol+")",$t.rows[$t.p.iRow]).removeClass("edit-cell ui-state-highlight"),$($t.rows[$t.p.iRow]).removeClass("selected-row ui-state-hover")),$(cc).addClass("edit-cell ui-state-highlight"),$($t.rows[iRow]).addClass("selected-row ui-state-hover");try{tmp=$.unformat.call($t,cc,{rowId:$t.rows[iRow].id,colModel:cm},iCol)}catch(_){tmp=cm.edittype&&"textarea"==cm.edittype?$(cc).text():$(cc).html()}if($t.p.autoencode&&(tmp=$.jgrid.htmlDecode(tmp)),cm.edittype||(cm.edittype="text"),$t.p.savedRow.push({id:iRow,ic:iCol,name:nm,v:tmp}),("&nbsp;"===tmp||"&#160;"===tmp||1===tmp.length&&160===tmp.charCodeAt(0))&&(tmp=""),$.isFunction($t.p.formatCell)){var tmp2=$t.p.formatCell.call($t,$t.rows[iRow].id,nm,tmp,iRow,iCol);void 0!==tmp2&&(tmp=tmp2)}var opt=$.extend({},cm.editoptions||{},{id:iRow+"_"+nm,name:nm}),elc=$.jgrid.createEl.call($t,cm.edittype,opt,tmp,!0,$.extend({},$.jgrid.ajaxOptions,$t.p.ajaxSelectOptions||{}));$($t).triggerHandler("jqGridBeforeEditCell",[$t.rows[iRow].id,nm,tmp,iRow,iCol]),$.isFunction($t.p.beforeEditCell)&&$t.p.beforeEditCell.call($t,$t.rows[iRow].id,nm,tmp,iRow,iCol),$(cc).html("").append(elc).attr("tabindex","0"),window.setTimeout(function(){$(elc).focus()},0),$("input, select, textarea",cc).bind("keydown",function(e){if(27===e.keyCode&&($("input.hasDatepicker",cc).length>0?$(".ui-datepicker").is(":hidden")?$($t).jqGrid("restoreCell",iRow,iCol):$("input.hasDatepicker",cc).datepicker("hide"):$($t).jqGrid("restoreCell",iRow,iCol)),13===e.keyCode)return $($t).jqGrid("saveCell",iRow,iCol),!1;if(9===e.keyCode){if($t.grid.hDiv.loading)return!1;e.shiftKey?$($t).jqGrid("prevCell",iRow,iCol):$($t).jqGrid("nextCell",iRow,iCol)}e.stopPropagation()}),$($t).triggerHandler("jqGridAfterEditCell",[$t.rows[iRow].id,nm,tmp,iRow,iCol]),$.isFunction($t.p.afterEditCell)&&$t.p.afterEditCell.call($t,$t.rows[iRow].id,nm,tmp,iRow,iCol)}$t.p.iCol=iCol,$t.p.iRow=iRow}}})},saveCell:function(iRow,iCol){return this.each(function(){var fr,$t=this;if($t.grid&&$t.p.cellEdit===!0){if(fr=$t.p.savedRow.length>=1?0:null,null!==fr){var v,v2,cc=$("td:eq("+iCol+")",$t.rows[iRow]),cm=$t.p.colModel[iCol],nm=cm.name,nmjq=$.jgrid.jqID(nm);switch(cm.edittype){case"select":if(cm.editoptions.multiple){var sel=$("#"+iRow+"_"+nmjq,$t.rows[iRow]),selectedText=[];v=$(sel).val(),v?v.join(","):v="",$("option:selected",sel).each(function(i,selected){selectedText[i]=$(selected).text()}),v2=selectedText.join(",")}else v=$("#"+iRow+"_"+nmjq+" option:selected",$t.rows[iRow]).val(),v2=$("#"+iRow+"_"+nmjq+" option:selected",$t.rows[iRow]).text();cm.formatter&&(v2=v);break;case"checkbox":var cbv=["Yes","No"];cm.editoptions&&(cbv=cm.editoptions.value.split(":")),v=$("#"+iRow+"_"+nmjq,$t.rows[iRow]).is(":checked")?cbv[0]:cbv[1],v2=v;break;case"password":case"text":case"textarea":case"button":v=$("#"+iRow+"_"+nmjq,$t.rows[iRow]).val(),v2=v;break;case"custom":try{if(!cm.editoptions||!$.isFunction(cm.editoptions.custom_value))throw"e1";if(v=cm.editoptions.custom_value.call($t,$(".customelement",cc),"get"),void 0===v)throw"e2";v2=v}catch(e){"e1"==e&&$.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+$.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose),"e2"==e?$.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+$.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):$.jgrid.info_dialog(jQuery.jgrid.errors.errcap,e.message,jQuery.jgrid.edit.bClose)}}if(v2!==$t.p.savedRow[fr].v){var vvv=$($t).triggerHandler("jqGridBeforeSaveCell",[$t.rows[iRow].id,nm,v,iRow,iCol]);if(vvv&&(v=vvv,v2=vvv),$.isFunction($t.p.beforeSaveCell)){var vv=$t.p.beforeSaveCell.call($t,$t.rows[iRow].id,nm,v,iRow,iCol);vv&&(v=vv,v2=vv)}var cv=$.jgrid.checkValues(v,iCol,$t);if(cv[0]===!0){var addpost=$($t).triggerHandler("jqGridBeforeSubmitCell",[$t.rows[iRow].id,nm,v,iRow,iCol])||{};if($.isFunction($t.p.beforeSubmitCell)&&(addpost=$t.p.beforeSubmitCell.call($t,$t.rows[iRow].id,nm,v,iRow,iCol),addpost||(addpost={})),$("input.hasDatepicker",cc).length>0&&$("input.hasDatepicker",cc).datepicker("hide"),"remote"==$t.p.cellsubmit)if($t.p.cellurl){var postdata={};$t.p.autoencode&&(v=$.jgrid.htmlEncode(v)),postdata[nm]=v;var idname,oper,opers;opers=$t.p.prmNames,idname=opers.id,oper=opers.oper,postdata[idname]=$.jgrid.stripPref($t.p.idPrefix,$t.rows[iRow].id),postdata[oper]=opers.editoper,postdata=$.extend(addpost,postdata),$("#lui_"+$.jgrid.jqID($t.p.id)).show(),$t.grid.hDiv.loading=!0,$.ajax($.extend({url:$t.p.cellurl,data:$.isFunction($t.p.serializeCellData)?$t.p.serializeCellData.call($t,postdata):postdata,type:"POST",complete:function(result,stat){if($("#lui_"+$t.p.id).hide(),$t.grid.hDiv.loading=!1,"success"==stat){var ret=$($t).triggerHandler("jqGridAfterSubmitCell",[$t,result,postdata.id,nm,v,iRow,iCol])||[!0,""];ret[0]===!0&&$.isFunction($t.p.afterSubmitCell)&&(ret=$t.p.afterSubmitCell.call($t,result,postdata.id,nm,v,iRow,iCol)),ret[0]===!0?($(cc).empty(),$($t).jqGrid("setCell",$t.rows[iRow].id,iCol,v2,!1,!1,!0),$(cc).addClass("dirty-cell"),$($t.rows[iRow]).addClass("edited"),$($t).triggerHandler("jqGridAfterSaveCell",[$t.rows[iRow].id,nm,v,iRow,iCol]),$.isFunction($t.p.afterSaveCell)&&$t.p.afterSaveCell.call($t,$t.rows[iRow].id,nm,v,iRow,iCol),$t.p.savedRow.splice(0,1)):($.jgrid.info_dialog($.jgrid.errors.errcap,ret[1],$.jgrid.edit.bClose),$($t).jqGrid("restoreCell",iRow,iCol))}},error:function(res,stat,err){$("#lui_"+$.jgrid.jqID($t.p.id)).hide(),$t.grid.hDiv.loading=!1,$($t).triggerHandler("jqGridErrorCell",[res,stat,err]),$.isFunction($t.p.errorCell)?($t.p.errorCell.call($t,res,stat,err),$($t).jqGrid("restoreCell",iRow,iCol)):($.jgrid.info_dialog($.jgrid.errors.errcap,res.status+" : "+res.statusText+"<br/>"+stat,$.jgrid.edit.bClose),$($t).jqGrid("restoreCell",iRow,iCol))}},$.jgrid.ajaxOptions,$t.p.ajaxCellOptions||{}))}else try{$.jgrid.info_dialog($.jgrid.errors.errcap,$.jgrid.errors.nourl,$.jgrid.edit.bClose),$($t).jqGrid("restoreCell",iRow,iCol)}catch(e){}"clientArray"==$t.p.cellsubmit&&($(cc).empty(),$($t).jqGrid("setCell",$t.rows[iRow].id,iCol,v2,!1,!1,!0),$(cc).addClass("dirty-cell"),$($t.rows[iRow]).addClass("edited"),$($t).triggerHandler("jqGridAfterSaveCell",[$t.rows[iRow].id,nm,v,iRow,iCol]),$.isFunction($t.p.afterSaveCell)&&$t.p.afterSaveCell.call($t,$t.rows[iRow].id,nm,v,iRow,iCol),$t.p.savedRow.splice(0,1))}else try{window.setTimeout(function(){$.jgrid.info_dialog($.jgrid.errors.errcap,v+" "+cv[1],$.jgrid.edit.bClose)},100),$($t).jqGrid("restoreCell",iRow,iCol)}catch(e){}}else $($t).jqGrid("restoreCell",iRow,iCol)}$.browser.opera?$("#"+$.jgrid.jqID($t.p.knv)).attr("tabindex","-1").focus():window.setTimeout(function(){$("#"+$.jgrid.jqID($t.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(iRow,iCol){return this.each(function(){var fr,$t=this;if($t.grid&&$t.p.cellEdit===!0){if(fr=$t.p.savedRow.length>=1?0:null,null!==fr){var cc=$("td:eq("+iCol+")",$t.rows[iRow]);if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker",cc).datepicker("hide")}catch(e){}$(cc).empty().attr("tabindex","-1"),$($t).jqGrid("setCell",$t.rows[iRow].id,iCol,$t.p.savedRow[fr].v,!1,!1,!0),$($t).triggerHandler("jqGridAfterRestoreCell",[$t.rows[iRow].id,$t.p.savedRow[fr].v,iRow,iCol]),$.isFunction($t.p.afterRestoreCell)&&$t.p.afterRestoreCell.call($t,$t.rows[iRow].id,$t.p.savedRow[fr].v,iRow,iCol),$t.p.savedRow.splice(0,1)}window.setTimeout(function(){$("#"+$t.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(iRow,iCol){return this.each(function(){var $t=this,nCol=!1;if($t.grid&&$t.p.cellEdit===!0){for(var i=iCol+1;i<$t.p.colModel.length;i++)if($t.p.colModel[i].editable===!0){nCol=i;break}nCol!==!1?$($t).jqGrid("editCell",iRow,nCol,!0):$t.p.savedRow.length>0&&$($t).jqGrid("saveCell",iRow,iCol)}})},prevCell:function(iRow,iCol){return this.each(function(){var $t=this,nCol=!1;if($t.grid&&$t.p.cellEdit===!0){for(var i=iCol-1;i>=0;i--)if($t.p.colModel[i].editable===!0){nCol=i;break}nCol!==!1?$($t).jqGrid("editCell",iRow,nCol,!0):$t.p.savedRow.length>0&&$($t).jqGrid("saveCell",iRow,iCol)}})},GridNav:function(){return this.each(function(){function scrollGrid(iR,iC,tp){if("v"==tp.substr(0,1)){var ch=$($t.grid.bDiv)[0].clientHeight,st=$($t.grid.bDiv)[0].scrollTop,nROT=$t.rows[iR].offsetTop+$t.rows[iR].clientHeight,pROT=$t.rows[iR].offsetTop;"vd"==tp&&nROT>=ch&&($($t.grid.bDiv)[0].scrollTop=$($t.grid.bDiv)[0].scrollTop+$t.rows[iR].clientHeight),"vu"==tp&&st>pROT&&($($t.grid.bDiv)[0].scrollTop=$($t.grid.bDiv)[0].scrollTop-$t.rows[iR].clientHeight)}if("h"==tp){var cw=$($t.grid.bDiv)[0].clientWidth,sl=$($t.grid.bDiv)[0].scrollLeft,nCOL=$t.rows[iR].cells[iC].offsetLeft+$t.rows[iR].cells[iC].clientWidth,pCOL=$t.rows[iR].cells[iC].offsetLeft;nCOL>=cw+parseInt(sl,10)?$($t.grid.bDiv)[0].scrollLeft=$($t.grid.bDiv)[0].scrollLeft+$t.rows[iR].cells[iC].clientWidth:sl>pCOL&&($($t.grid.bDiv)[0].scrollLeft=$($t.grid.bDiv)[0].scrollLeft-$t.rows[iR].cells[iC].clientWidth)}}function findNextVisible(iC,act){var ind,i;if("lft"==act)for(ind=iC+1,i=iC;i>=0;i--)if($t.p.colModel[i].hidden!==!0){ind=i;break}if("rgt"==act)for(ind=iC-1,i=iC;i<$t.p.colModel.length;i++)if($t.p.colModel[i].hidden!==!0){ind=i;break}return ind}var $t=this;if($t.grid&&$t.p.cellEdit===!0){$t.p.knv=$t.p.id+"_kn";var i,kdir,selection=$("<div style='position:absolute;top:-1000000px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+$t.p.knv+"'></div></div>");$(selection).insertBefore($t.grid.cDiv),$("#"+$t.p.knv).focus().keydown(function(e){switch(kdir=e.keyCode,"rtl"==$t.p.direction&&(37===kdir?kdir=39:39===kdir&&(kdir=37)),kdir){case 38:$t.p.iRow-1>0&&(scrollGrid($t.p.iRow-1,$t.p.iCol,"vu"),$($t).jqGrid("editCell",$t.p.iRow-1,$t.p.iCol,!1));break;case 40:$t.p.iRow+1<=$t.rows.length-1&&(scrollGrid($t.p.iRow+1,$t.p.iCol,"vd"),$($t).jqGrid("editCell",$t.p.iRow+1,$t.p.iCol,!1));break;case 37:$t.p.iCol-1>=0&&(i=findNextVisible($t.p.iCol-1,"lft"),scrollGrid($t.p.iRow,i,"h"),$($t).jqGrid("editCell",$t.p.iRow,i,!1));break;case 39:$t.p.iCol+1<=$t.p.colModel.length-1&&(i=findNextVisible($t.p.iCol+1,"rgt"),scrollGrid($t.p.iRow,i,"h"),$($t).jqGrid("editCell",$t.p.iRow,i,!1));break;case 13:parseInt($t.p.iCol,10)>=0&&parseInt($t.p.iRow,10)>=0&&$($t).jqGrid("editCell",$t.p.iRow,$t.p.iCol,!0);break;default:return!0}return!1})}})},getChangedCells:function(mthd){var ret=[];return mthd||(mthd="all"),this.each(function(){var nm,$t=this;$t.grid&&$t.p.cellEdit===!0&&$($t.rows).each(function(j){var res={};$(this).hasClass("edited")&&($("td",this).each(function(i){if(nm=$t.p.colModel[i].name,"cb"!==nm&&"subgrid"!==nm)if("dirty"==mthd){if($(this).hasClass("dirty-cell"))try{res[nm]=$.unformat.call($t,this,{rowId:$t.rows[j].id,colModel:$t.p.colModel[i]},i)}catch(e){res[nm]=$.jgrid.htmlDecode($(this).html())}}else try{res[nm]=$.unformat.call($t,this,{rowId:$t.rows[j].id,colModel:$t.p.colModel[i]},i)}catch(e){res[nm]=$.jgrid.htmlDecode($(this).html())}}),res.id=this.id,ret.push(res))})}),ret}})}(jQuery),function($){"use strict";$.jgrid.extend({setSubGrid:function(){return this.each(function(){var cm,$t=this,suboptions={plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,reloadOnExpand:!0};if($t.p.subGridOptions=$.extend(suboptions,$t.p.subGridOptions||{}),$t.p.colNames.unshift(""),$t.p.colModel.unshift({name:"subgrid",width:$.browser.safari?$t.p.subGridWidth+$t.p.cellLayout:$t.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),cm=$t.p.subGridModel,cm[0]){cm[0].align=$.extend([],cm[0].align||[]);for(var i=0;i<cm[0].name.length;i++)cm[0].align[i]=cm[0].align[i]||"left"}})},addSubGridCell:function(pos,iRow){var ic,sid,prp="";return this.each(function(){prp=this.formatCol(pos,iRow),sid=this.p.id,ic=this.p.subGridOptions.plusicon}),'<td role="gridcell" aria-describedby="'+sid+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+prp+"><a href='javascript:void(0);'><span class='ui-icon "+ic+"'></span></a></td>"},addSubGrid:function(pos,sind){return this.each(function(){var ts=this;if(ts.grid){var _id,pID,atd,bfsc,r,subGridCell=function(trdiv,cell,pos){var tddiv=$("<td align='"+ts.p.subGridModel[0].align[pos]+"'></td>").html(cell);$(trdiv).append(tddiv)},subGridXml=function(sjxml,sbid){var tddiv,i,sgmap,dummy=$("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),trdiv=$("<tr></tr>");for(i=0;i<ts.p.subGridModel[0].name.length;i++)tddiv=$("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+ts.p.direction+"'></th>"),$(tddiv).html(ts.p.subGridModel[0].name[i]),$(tddiv).width(ts.p.subGridModel[0].width[i]),$(trdiv).append(tddiv);$(dummy).append(trdiv),sjxml&&(sgmap=ts.p.xmlReader.subgrid,$(sgmap.root+" "+sgmap.row,sjxml).each(function(){if(trdiv=$("<tr class='ui-widget-content ui-subtblcell'></tr>"),sgmap.repeatitems===!0)$(sgmap.cell,this).each(function(i){subGridCell(trdiv,$(this).text()||"&#160;",i)});else{var f=ts.p.subGridModel[0].mapping||ts.p.subGridModel[0].name;if(f)for(i=0;i<f.length;i++)subGridCell(trdiv,$(f[i],this).text()||"&#160;",i)}$(dummy).append(trdiv)}));var pID=$("table:first",ts.grid.bDiv).attr("id")+"_";return $("#"+$.jgrid.jqID(pID+sbid)).append(dummy),ts.grid.hDiv.loading=!1,$("#load_"+$.jgrid.jqID(ts.p.id)).hide(),!1},subGridJson=function(sjxml,sbid){var tddiv,result,i,cur,sgmap,j,dummy=$("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),trdiv=$("<tr></tr>");for(i=0;i<ts.p.subGridModel[0].name.length;i++)tddiv=$("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+ts.p.direction+"'></th>"),$(tddiv).html(ts.p.subGridModel[0].name[i]),$(tddiv).width(ts.p.subGridModel[0].width[i]),$(trdiv).append(tddiv);if($(dummy).append(trdiv),sjxml&&(sgmap=ts.p.jsonReader.subgrid,result=$.jgrid.getAccessor(sjxml,sgmap.root),"undefined"!=typeof result))for(i=0;i<result.length;i++){if(cur=result[i],trdiv=$("<tr class='ui-widget-content ui-subtblcell'></tr>"),sgmap.repeatitems===!0)for(sgmap.cell&&(cur=cur[sgmap.cell]),j=0;j<cur.length;j++)subGridCell(trdiv,cur[j]||"&#160;",j);else{var f=ts.p.subGridModel[0].mapping||ts.p.subGridModel[0].name;if(f.length)for(j=0;j<f.length;j++)subGridCell(trdiv,cur[f[j]]||"&#160;",j)}$(dummy).append(trdiv)}var pID=$("table:first",ts.grid.bDiv).attr("id")+"_";return $("#"+$.jgrid.jqID(pID+sbid)).append(dummy),ts.grid.hDiv.loading=!1,$("#load_"+$.jgrid.jqID(ts.p.id)).hide(),!1},populatesubgrid=function(rd){var sid,dp,i,j;if(sid=$(rd).attr("id"),dp={nd_:(new Date).getTime()},dp[ts.p.prmNames.subgridid]=sid,!ts.p.subGridModel[0])return!1;if(ts.p.subGridModel[0].params)for(j=0;j<ts.p.subGridModel[0].params.length;j++)for(i=0;i<ts.p.colModel.length;i++)ts.p.colModel[i].name===ts.p.subGridModel[0].params[j]&&(dp[ts.p.colModel[i].name]=$("td:eq("+i+")",rd).text().replace(/\&#160\;/gi,""));if(!ts.grid.hDiv.loading)switch(ts.grid.hDiv.loading=!0,$("#load_"+$.jgrid.jqID(ts.p.id)).show(),ts.p.subgridtype||(ts.p.subgridtype=ts.p.datatype),$.isFunction(ts.p.subgridtype)?ts.p.subgridtype.call(ts,dp):ts.p.subgridtype=ts.p.subgridtype.toLowerCase(),ts.p.subgridtype){case"xml":case"json":$.ajax($.extend({type:ts.p.mtype,url:ts.p.subGridUrl,dataType:ts.p.subgridtype,data:$.isFunction(ts.p.serializeSubGridData)?ts.p.serializeSubGridData.call(ts,dp):dp,complete:function(sxml){"xml"===ts.p.subgridtype?subGridXml(sxml.responseXML,sid):subGridJson($.jgrid.parse(sxml.responseText),sid),sxml=null}},$.jgrid.ajaxOptions,ts.p.ajaxSubgridOptions||{}))}return!1},nhc=0;$.each(ts.p.colModel,function(){(this.hidden===!0||"rn"===this.name||"cb"===this.name)&&nhc++});var len=ts.rows.length,i=1;for(void 0!==sind&&sind>0&&(i=sind,len=sind+1);len>i;)$(ts.rows[i]).hasClass("jqgrow")&&$(ts.rows[i].cells[pos]).bind("click",function(){var tr=$(this).parent("tr")[0];if(r=tr.nextSibling,$(this).hasClass("sgcollapsed")){if(pID=ts.p.id,_id=tr.id,ts.p.subGridOptions.reloadOnExpand===!0||ts.p.subGridOptions.reloadOnExpand===!1&&!$(r).hasClass("ui-subgrid")){if(atd=pos>=1?"<td colspan='"+pos+"'>&#160;</td>":"",bfsc=$(ts).triggerHandler("jqGridSubGridBeforeExpand",[pID+"_"+_id,_id]),bfsc=bfsc===!1||"stop"===bfsc?!1:!0,bfsc&&$.isFunction(ts.p.subGridBeforeExpand)&&(bfsc=ts.p.subGridBeforeExpand.call(ts,pID+"_"+_id,_id)),bfsc===!1)return!1;$(tr).after("<tr role='row' class='ui-subgrid'>"+atd+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+ts.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(ts.p.colNames.length-1-nhc,10)+"' class='ui-widget-content subgrid-data'><div id="+pID+"_"+_id+" class='tablediv'></div></td></tr>"),$(ts).triggerHandler("jqGridSubGridRowExpanded",[pID+"_"+_id,_id]),$.isFunction(ts.p.subGridRowExpanded)?ts.p.subGridRowExpanded.call(ts,pID+"_"+_id,_id):populatesubgrid(tr)}else $(r).show();$(this).html("<a href='javascript:void(0);'><span class='ui-icon "+ts.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded"),ts.p.subGridOptions.selectOnExpand&&$(ts).jqGrid("setSelection",_id)}else if($(this).hasClass("sgexpanded")){if(bfsc=$(ts).triggerHandler("jqGridSubGridRowColapsed",[pID+"_"+_id,_id]),bfsc=bfsc===!1||"stop"===bfsc?!1:!0,bfsc&&$.isFunction(ts.p.subGridRowColapsed)&&(_id=tr.id,bfsc=ts.p.subGridRowColapsed.call(ts,pID+"_"+_id,_id)),bfsc===!1)return!1;ts.p.subGridOptions.reloadOnExpand===!0?$(r).remove(".ui-subgrid"):$(r).hasClass("ui-subgrid")&&$(r).hide(),$(this).html("<a href='javascript:void(0);'><span class='ui-icon "+ts.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed")}return!1}),i++;ts.p.subGridOptions.expandOnLoad===!0&&$(ts.rows).filter(".jqgrow").each(function(index,row){$(row.cells[0]).click()}),ts.subGridXml=function(xml,sid){subGridXml(xml,sid)},ts.subGridJson=function(json,sid){subGridJson(json,sid)}}})},expandSubGridRow:function(rowid){return this.each(function(){var $t=this;if(($t.grid||rowid)&&$t.p.subGrid===!0){var rc=$(this).jqGrid("getInd",rowid,!0);if(rc){var sgc=$("td.sgcollapsed",rc)[0];sgc&&$(sgc).trigger("click")}}})},collapseSubGridRow:function(rowid){return this.each(function(){var $t=this;if(($t.grid||rowid)&&$t.p.subGrid===!0){var rc=$(this).jqGrid("getInd",rowid,!0);if(rc){var sgc=$("td.sgexpanded",rc)[0];sgc&&$(sgc).trigger("click")}}})},toggleSubGridRow:function(rowid){return this.each(function(){var $t=this;if(($t.grid||rowid)&&$t.p.subGrid===!0){var rc=$(this).jqGrid("getInd",rowid,!0);if(rc){var sgc=$("td.sgcollapsed",rc)[0];sgc?$(sgc).trigger("click"):(sgc=$("td.sgexpanded",rc)[0],sgc&&$(sgc).trigger("click"))}}})}})}(jQuery),function($){"use strict";$.jgrid.extend({setTreeNode:function(i,len){return this.each(function(){var $t=this;if($t.grid&&$t.p.treeGrid)for(var lft,rgt,curLevel,ident,lftpos,twrap,ldat,lf,expCol=$t.p.expColInd,expanded=$t.p.treeReader.expanded_field,isLeaf=$t.p.treeReader.leaf_field,level=$t.p.treeReader.level_field,icon=$t.p.treeReader.icon_field,loaded=$t.p.treeReader.loaded;len>i;){var expan,ind=$t.rows[i].id,dind=$t.p._index[ind];
if(ldat=$t.p.data[dind],"nested"==$t.p.treeGridModel&&(ldat[isLeaf]||(lft=parseInt(ldat[$t.p.treeReader.left_field],10),rgt=parseInt(ldat[$t.p.treeReader.right_field],10),ldat[isLeaf]=rgt===lft+1?"true":"false",$t.rows[i].cells[$t.p._treeleafpos].innerHTML=ldat[isLeaf])),curLevel=parseInt(ldat[level],10),0===$t.p.tree_root_level?(ident=curLevel+1,lftpos=curLevel):(ident=curLevel,lftpos=curLevel-1),twrap="<div class='tree-wrap tree-wrap-"+$t.p.direction+"' style='width:"+18*ident+"px;'>",twrap+="<div style='"+("rtl"==$t.p.direction?"right:":"left:")+18*lftpos+"px;' class='ui-icon ",void 0!==ldat[loaded]&&(ldat[loaded]="true"==ldat[loaded]||ldat[loaded]===!0?!0:!1),"true"==ldat[isLeaf]||ldat[isLeaf]===!0?(twrap+=(void 0!==ldat[icon]&&""!==ldat[icon]?ldat[icon]:$t.p.treeIcons.leaf)+" tree-leaf treeclick",ldat[isLeaf]=!0,lf="leaf"):(ldat[isLeaf]=!1,lf=""),ldat[expanded]=("true"==ldat[expanded]||ldat[expanded]===!0?!0:!1)&&ldat[loaded],twrap+=ldat[expanded]===!1?ldat[isLeaf]===!0?"'":$t.p.treeIcons.plus+" tree-plus treeclick'":ldat[isLeaf]===!0?"'":$t.p.treeIcons.minus+" tree-minus treeclick'",twrap+="></div></div>",$($t.rows[i].cells[expCol]).wrapInner("<span class='cell-wrapper"+lf+"'></span>").prepend(twrap),curLevel!==parseInt($t.p.tree_root_level,10)){var pn=$($t).jqGrid("getNodeParent",ldat);expan=pn&&pn.hasOwnProperty(expanded)?pn[expanded]:!0,expan||$($t.rows[i]).css("display","none")}$($t.rows[i].cells[expCol]).find("div.treeclick").bind("click",function(e){var target=e.target||e.srcElement,ind2=$(target,$t.rows).closest("tr.jqgrow")[0].id,pos=$t.p._index[ind2];return $t.p.data[pos][isLeaf]||($t.p.data[pos][expanded]?($($t).jqGrid("collapseRow",$t.p.data[pos]),$($t).jqGrid("collapseNode",$t.p.data[pos])):($($t).jqGrid("expandRow",$t.p.data[pos]),$($t).jqGrid("expandNode",$t.p.data[pos]))),!1}),$t.p.ExpandColClick===!0&&$($t.rows[i].cells[expCol]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(e){var target=e.target||e.srcElement,ind2=$(target,$t.rows).closest("tr.jqgrow")[0].id,pos=$t.p._index[ind2];return $t.p.data[pos][isLeaf]||($t.p.data[pos][expanded]?($($t).jqGrid("collapseRow",$t.p.data[pos]),$($t).jqGrid("collapseNode",$t.p.data[pos])):($($t).jqGrid("expandRow",$t.p.data[pos]),$($t).jqGrid("expandNode",$t.p.data[pos]))),$($t).jqGrid("setSelection",ind2),!1}),i++}})},setTreeGrid:function(){return this.each(function(){var pico,nm,key,$t=this,i=0,ecol=!1,dupcols=[];if($t.p.treeGrid){$t.p.treedatatype||$.extend($t.p,{treedatatype:$t.p.datatype}),$t.p.subGrid=!1,$t.p.altRows=!1,$t.p.pgbuttons=!1,$t.p.pginput=!1,$t.p.gridview=!0,null===$t.p.rowTotal&&($t.p.rowNum=1e4),$t.p.multiselect=!1,$t.p.rowList=[],$t.p.expColInd=0,pico="ui-icon-triangle-1-"+("rtl"==$t.p.direction?"w":"e"),$t.p.treeIcons=$.extend({plus:pico,minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},$t.p.treeIcons||{}),"nested"==$t.p.treeGridModel?$t.p.treeReader=$.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},$t.p.treeReader):"adjacency"==$t.p.treeGridModel&&($t.p.treeReader=$.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},$t.p.treeReader));for(key in $t.p.colModel)if($t.p.colModel.hasOwnProperty(key)){nm=$t.p.colModel[key].name,nm!=$t.p.ExpandColumn||ecol||(ecol=!0,$t.p.expColInd=i),i++;for(var tkey in $t.p.treeReader)$t.p.treeReader[tkey]==nm&&dupcols.push(nm)}$.each($t.p.treeReader,function(j,n){n&&-1===$.inArray(n,dupcols)&&("leaf_field"===j&&($t.p._treeleafpos=i),i++,$t.p.colNames.push(n),$t.p.colModel.push({name:n,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(record){this.each(function(){var $t=this;if($t.grid&&$t.p.treeGrid){var childern=$($t).jqGrid("getNodeChildren",record),expanded=$t.p.treeReader.expanded_field,rows=$t.rows;$(childern).each(function(){var id=$.jgrid.getAccessor(this,$t.p.localReader.id);$(rows.namedItem(id)).css("display",""),this[expanded]&&$($t).jqGrid("expandRow",this)})}})},collapseRow:function(record){this.each(function(){var $t=this;if($t.grid&&$t.p.treeGrid){var childern=$($t).jqGrid("getNodeChildren",record),expanded=$t.p.treeReader.expanded_field,rows=$t.rows;$(childern).each(function(){var id=$.jgrid.getAccessor(this,$t.p.localReader.id);$(rows.namedItem(id)).css("display","none"),this[expanded]&&$($t).jqGrid("collapseRow",this)})}})},getRootNodes:function(){var result=[];return this.each(function(){var $t=this;if($t.grid&&$t.p.treeGrid)switch($t.p.treeGridModel){case"nested":var level=$t.p.treeReader.level_field;$($t.p.data).each(function(){parseInt(this[level],10)===parseInt($t.p.tree_root_level,10)&&result.push(this)});break;case"adjacency":var parent_id=$t.p.treeReader.parent_id_field;$($t.p.data).each(function(){(null===this[parent_id]||"null"==String(this[parent_id]).toLowerCase())&&result.push(this)})}}),result},getNodeDepth:function(rc){var ret=null;return this.each(function(){if(this.grid&&this.p.treeGrid){var $t=this;switch($t.p.treeGridModel){case"nested":var level=$t.p.treeReader.level_field;ret=parseInt(rc[level],10)-parseInt($t.p.tree_root_level,10);break;case"adjacency":ret=$($t).jqGrid("getNodeAncestors",rc).length}}}),ret},getNodeParent:function(rc){var result=null;return this.each(function(){var $t=this;if($t.grid&&$t.p.treeGrid)switch($t.p.treeGridModel){case"nested":var lftc=$t.p.treeReader.left_field,rgtc=$t.p.treeReader.right_field,levelc=$t.p.treeReader.level_field,lft=parseInt(rc[lftc],10),rgt=parseInt(rc[rgtc],10),level=parseInt(rc[levelc],10);$(this.p.data).each(function(){return parseInt(this[levelc],10)===level-1&&parseInt(this[lftc],10)<lft&&parseInt(this[rgtc],10)>rgt?(result=this,!1):void 0});break;case"adjacency":var parent_id=$t.p.treeReader.parent_id_field,dtid=$t.p.localReader.id;$(this.p.data).each(function(){return this[dtid]==rc[parent_id]?(result=this,!1):void 0})}}),result},getNodeChildren:function(rc){var result=[];return this.each(function(){var $t=this;if($t.grid&&$t.p.treeGrid)switch($t.p.treeGridModel){case"nested":var lftc=$t.p.treeReader.left_field,rgtc=$t.p.treeReader.right_field,levelc=$t.p.treeReader.level_field,lft=parseInt(rc[lftc],10),rgt=parseInt(rc[rgtc],10),level=parseInt(rc[levelc],10);$(this.p.data).each(function(){parseInt(this[levelc],10)===level+1&&parseInt(this[lftc],10)>lft&&parseInt(this[rgtc],10)<rgt&&result.push(this)});break;case"adjacency":var parent_id=$t.p.treeReader.parent_id_field,dtid=$t.p.localReader.id;$(this.p.data).each(function(){this[parent_id]==rc[dtid]&&result.push(this)})}}),result},getFullTreeNode:function(rc){var result=[];return this.each(function(){var len,$t=this;if($t.grid&&$t.p.treeGrid)switch($t.p.treeGridModel){case"nested":var lftc=$t.p.treeReader.left_field,rgtc=$t.p.treeReader.right_field,levelc=$t.p.treeReader.level_field,lft=parseInt(rc[lftc],10),rgt=parseInt(rc[rgtc],10),level=parseInt(rc[levelc],10);$(this.p.data).each(function(){parseInt(this[levelc],10)>=level&&parseInt(this[lftc],10)>=lft&&parseInt(this[lftc],10)<=rgt&&result.push(this)});break;case"adjacency":if(rc){result.push(rc);var parent_id=$t.p.treeReader.parent_id_field,dtid=$t.p.localReader.id;$(this.p.data).each(function(i){for(len=result.length,i=0;len>i;i++)if(result[i][dtid]==this[parent_id]){result.push(this);break}})}}}),result},getNodeAncestors:function(rc){var ancestors=[];return this.each(function(){if(this.grid&&this.p.treeGrid)for(var parent=$(this).jqGrid("getNodeParent",rc);parent;)ancestors.push(parent),parent=$(this).jqGrid("getNodeParent",parent)}),ancestors},isVisibleNode:function(rc){var result=!0;return this.each(function(){var $t=this;if($t.grid&&$t.p.treeGrid){var ancestors=$($t).jqGrid("getNodeAncestors",rc),expanded=$t.p.treeReader.expanded_field;$(ancestors).each(function(){return result=result&&this[expanded],result?void 0:!1})}}),result},isNodeLoaded:function(rc){var result;return this.each(function(){var $t=this;if($t.grid&&$t.p.treeGrid){var isLeaf=$t.p.treeReader.leaf_field;result=void 0!==rc?void 0!==rc.loaded?rc.loaded:rc[isLeaf]||$($t).jqGrid("getNodeChildren",rc).length>0?!0:!1:!1}}),result},expandNode:function(rc){return this.each(function(){if(this.grid&&this.p.treeGrid){var expanded=this.p.treeReader.expanded_field,parent=this.p.treeReader.parent_id_field,loaded=this.p.treeReader.loaded,level=this.p.treeReader.level_field,lft=this.p.treeReader.left_field,rgt=this.p.treeReader.right_field;if(!rc[expanded]){var id=$.jgrid.getAccessor(rc,this.p.localReader.id),rc1=$("#"+$.jgrid.jqID(id),this.grid.bDiv)[0],position=this.p._index[id];$(this).jqGrid("isNodeLoaded",this.p.data[position])?(rc[expanded]=!0,$("div.treeclick",rc1).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(rc[expanded]=!0,$("div.treeclick",rc1).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=rc1.rowIndex,this.p.datatype=this.p.treedatatype,"nested"==this.p.treeGridModel?$(this).jqGrid("setGridParam",{postData:{nodeid:id,n_left:rc[lft],n_right:rc[rgt],n_level:rc[level]}}):$(this).jqGrid("setGridParam",{postData:{nodeid:id,parentid:rc[parent],n_level:rc[level]}}),$(this).trigger("reloadGrid"),rc[loaded]=!0,"nested"==this.p.treeGridModel?$(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):$(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))}}})},collapseNode:function(rc){return this.each(function(){if(this.grid&&this.p.treeGrid){var expanded=this.p.treeReader.expanded_field;if(rc[expanded]){rc[expanded]=!1;var id=$.jgrid.getAccessor(rc,this.p.localReader.id),rc1=$("#"+$.jgrid.jqID(id),this.grid.bDiv)[0];$("div.treeclick",rc1).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus")}}})},SortTree:function(sortname,newDir,st,datefmt){return this.each(function(){if(this.grid&&this.p.treeGrid){var i,len,rec,query,roots,records=[],$t=this,rt=$(this).jqGrid("getRootNodes");for(query=$.jgrid.from(rt),query.orderBy(sortname,newDir,st,datefmt),roots=query.select(),i=0,len=roots.length;len>i;i++)rec=roots[i],records.push(rec),$(this).jqGrid("collectChildrenSortTree",records,rec,sortname,newDir,st,datefmt);$.each(records,function(index){var id=$.jgrid.getAccessor(this,$t.p.localReader.id);$("#"+$.jgrid.jqID($t.p.id)+" tbody tr:eq("+index+")").after($("tr#"+$.jgrid.jqID(id),$t.grid.bDiv))}),query=null,roots=null,records=null}})},collectChildrenSortTree:function(records,rec,sortname,newDir,st,datefmt){return this.each(function(){if(this.grid&&this.p.treeGrid){var i,len,child,ch,query,children;for(ch=$(this).jqGrid("getNodeChildren",rec),query=$.jgrid.from(ch),query.orderBy(sortname,newDir,st,datefmt),children=query.select(),i=0,len=children.length;len>i;i++)child=children[i],records.push(child),$(this).jqGrid("collectChildrenSortTree",records,child,sortname,newDir,st,datefmt)}})},setTreeRow:function(rowid,data){var success=!1;return this.each(function(){var t=this;t.grid&&t.p.treeGrid&&(success=$(t).jqGrid("setRowData",rowid,data))}),success},delTreeNode:function(rowid){return this.each(function(){var myright,width,res,key,$t=this,rid=$t.p.localReader.id,left=$t.p.treeReader.left_field,right=$t.p.treeReader.right_field;if($t.grid&&$t.p.treeGrid){var rc=$t.p._index[rowid];if(void 0!==rc){myright=parseInt($t.p.data[rc][right],10),width=myright-parseInt($t.p.data[rc][left],10)+1;var dr=$($t).jqGrid("getFullTreeNode",$t.p.data[rc]);if(dr.length>0)for(var i=0;i<dr.length;i++)$($t).jqGrid("delRowData",dr[i][rid]);if("nested"===$t.p.treeGridModel){if(res=$.jgrid.from($t.p.data).greater(left,myright,{stype:"integer"}).select(),res.length)for(key in res)res.hasOwnProperty(key)&&(res[key][left]=parseInt(res[key][left],10)-width);if(res=$.jgrid.from($t.p.data).greater(right,myright,{stype:"integer"}).select(),res.length)for(key in res)res.hasOwnProperty(key)&&(res[key][right]=parseInt(res[key][right],10)-width)}}}})},addChildNode:function(nodeid,parentid,data){var $t=this[0];if(data){var method,parentindex,parentdata,parentlevel,i,len,leaf,maxright,expanded=$t.p.treeReader.expanded_field,isLeaf=$t.p.treeReader.leaf_field,level=$t.p.treeReader.level_field,parent=$t.p.treeReader.parent_id_field,left=$t.p.treeReader.left_field,right=$t.p.treeReader.right_field,loaded=$t.p.treeReader.loaded,max=0,rowind=parentid;if("undefined"==typeof nodeid||null===nodeid){if(i=$t.p.data.length-1,i>=0)for(;i>=0;)max=Math.max(max,parseInt($t.p.data[i][$t.p.localReader.id],10)),i--;nodeid=max+1}var prow=$($t).jqGrid("getInd",parentid);if(leaf=!1,void 0===parentid||null===parentid||""===parentid)parentid=null,rowind=null,method="last",parentlevel=$t.p.tree_root_level,i=$t.p.data.length+1;else{method="after",parentindex=$t.p._index[parentid],parentdata=$t.p.data[parentindex],parentid=parentdata[$t.p.localReader.id],parentlevel=parseInt(parentdata[level],10)+1;var childs=$($t).jqGrid("getFullTreeNode",parentdata);childs.length?(i=childs[childs.length-1][$t.p.localReader.id],rowind=i,i=$($t).jqGrid("getInd",rowind)+1):i=$($t).jqGrid("getInd",parentid)+1,parentdata[isLeaf]&&(leaf=!0,parentdata[expanded]=!0,$($t.rows[prow]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass($t.p.treeIcons.leaf+" tree-leaf").addClass($t.p.treeIcons.minus+" tree-minus"),$t.p.data[parentindex][isLeaf]=!1,parentdata[loaded]=!0)}if(len=i+1,data[expanded]=!1,data[loaded]=!0,data[level]=parentlevel,data[isLeaf]=!0,"adjacency"===$t.p.treeGridModel&&(data[parent]=parentid),"nested"===$t.p.treeGridModel){var query,res,key;if(null!==parentid){if(maxright=parseInt(parentdata[right],10),query=$.jgrid.from($t.p.data),query=query.greaterOrEquals(right,maxright,{stype:"integer"}),res=query.select(),res.length)for(key in res)res.hasOwnProperty(key)&&(res[key][left]=res[key][left]>maxright?parseInt(res[key][left],10)+2:res[key][left],res[key][right]=res[key][right]>=maxright?parseInt(res[key][right],10)+2:res[key][right]);data[left]=maxright,data[right]=maxright+1}else{if(maxright=parseInt($($t).jqGrid("getCol",right,!1,"max"),10),res=$.jgrid.from($t.p.data).greater(left,maxright,{stype:"integer"}).select(),res.length)for(key in res)res.hasOwnProperty(key)&&(res[key][left]=parseInt(res[key][left],10)+2);if(res=$.jgrid.from($t.p.data).greater(right,maxright,{stype:"integer"}).select(),res.length)for(key in res)res.hasOwnProperty(key)&&(res[key][right]=parseInt(res[key][right],10)+2);data[left]=maxright+1,data[right]=maxright+2}}(null===parentid||$($t).jqGrid("isNodeLoaded",parentdata)||leaf)&&($($t).jqGrid("addRowData",nodeid,data,method,rowind),$($t).jqGrid("setTreeNode",i,len)),parentdata&&!parentdata[expanded]&&$($t.rows[prow]).find("div.treeclick").click()}}})}(jQuery),function($){"use strict";$.extend($.jgrid,{template:function(format){var args=$.makeArray(arguments).slice(1),j=1;return void 0===format&&(format=""),format.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(m,i){if(!isNaN(parseInt(i,10)))return j++,args[parseInt(i,10)];for(var nmarr=args[j],k=nmarr.length;k--;)if(i===nmarr[k].nm)return nmarr[k].v;j++})}}),$.jgrid.extend({groupingSetup:function(){return this.each(function(){var $t=this,grp=$t.p.groupingView;if(null===grp||"object"!=typeof grp&&!$.isFunction(grp))$t.p.grouping=!1;else if(grp.groupField.length){"undefined"==typeof grp.visibiltyOnNextGrouping&&(grp.visibiltyOnNextGrouping=[]),grp.lastvalues=[],grp.groups=[],grp.counters=[];for(var i=0;i<grp.groupField.length;i++)grp.groupOrder[i]||(grp.groupOrder[i]="asc"),grp.groupText[i]||(grp.groupText[i]="{0}"),"boolean"!=typeof grp.groupColumnShow[i]&&(grp.groupColumnShow[i]=!0),"boolean"!=typeof grp.groupSummary[i]&&(grp.groupSummary[i]=!1),grp.groupColumnShow[i]===!0?(grp.visibiltyOnNextGrouping[i]=!0,$($t).jqGrid("showCol",grp.groupField[i])):(grp.visibiltyOnNextGrouping[i]=$("#"+$.jgrid.jqID($t.p.id+"_"+grp.groupField[i])).is(":visible"),$($t).jqGrid("hideCol",grp.groupField[i]));grp.summary=[];for(var cm=$t.p.colModel,j=0,cml=cm.length;cml>j;j++)cm[j].summaryType&&grp.summary.push({nm:cm[j].name,st:cm[j].summaryType,v:"",sr:cm[j].summaryRound,srt:cm[j].summaryRoundType||"round"})}else $t.p.grouping=!1})},groupingPrepare:function(rData,gdata,record,irow){return this.each(function(){for(var fieldName,v,grp=this.p.groupingView,$t=this,grlen=grp.groupField.length,changed=0,i=0;grlen>i;i++)fieldName=grp.groupField[i],v=record[fieldName],void 0!==v&&(0===irow?(grp.groups.push({idx:i,dataIndex:fieldName,value:v,startRow:irow,cnt:1,summary:[]}),grp.lastvalues[i]=v,grp.counters[i]={cnt:1,pos:grp.groups.length-1,summary:$.extend(!0,[],grp.summary)},$.each(grp.counters[i].summary,function(){this.v=$.isFunction(this.st)?this.st.call($t,this.v,this.nm,record):$($t).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,record)}),grp.groups[grp.counters[i].pos].summary=grp.counters[i].summary):"object"!=typeof v&&grp.lastvalues[i]!==v?(grp.groups.push({idx:i,dataIndex:fieldName,value:v,startRow:irow,cnt:1,summary:[]}),grp.lastvalues[i]=v,changed=1,grp.counters[i]={cnt:1,pos:grp.groups.length-1,summary:$.extend(!0,[],grp.summary)},$.each(grp.counters[i].summary,function(){this.v=$.isFunction(this.st)?this.st.call($t,this.v,this.nm,record):$($t).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,record)}),grp.groups[grp.counters[i].pos].summary=grp.counters[i].summary):1===changed?(grp.groups.push({idx:i,dataIndex:fieldName,value:v,startRow:irow,cnt:1,summary:[]}),grp.lastvalues[i]=v,grp.counters[i]={cnt:1,pos:grp.groups.length-1,summary:$.extend(!0,[],grp.summary)},$.each(grp.counters[i].summary,function(){this.v=$.isFunction(this.st)?this.st.call($t,this.v,this.nm,record):$($t).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,record)}),grp.groups[grp.counters[i].pos].summary=grp.counters[i].summary):(grp.counters[i].cnt+=1,grp.groups[grp.counters[i].pos].cnt=grp.counters[i].cnt,$.each(grp.counters[i].summary,function(){this.v=$.isFunction(this.st)?this.st.call($t,this.v,this.nm,record):$($t).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,record)}),grp.groups[grp.counters[i].pos].summary=grp.counters[i].summary));gdata.push(rData)}),gdata},groupingToggle:function(hid){return this.each(function(){var $t=this,grp=$t.p.groupingView,strpos=hid.split("_"),num=parseInt(strpos[strpos.length-2],10);strpos.splice(strpos.length-2,2);var tspan,uid=strpos.join("_"),minus=grp.minusicon,plus=grp.plusicon,tar=$("#"+$.jgrid.jqID(hid)),r=tar.length?tar[0].nextSibling:null,tarspan=$("#"+$.jgrid.jqID(hid)+" span.tree-wrap-"+$t.p.direction),collapsed=!1;if(tarspan.hasClass(minus)){if(grp.showSummaryOnHide){if(r)for(;r;){if($(r).hasClass("jqfoot")){var lv=parseInt($(r).attr("jqfootlevel"),10);if(num>=lv)break}$(r).hide(),r=r.nextSibling}}else if(r)for(;r&&!$(r).hasClass(uid+"_"+String(num))&&!$(r).hasClass(uid+"_"+String(num-1));)$(r).hide(),r=r.nextSibling;tarspan.removeClass(minus).addClass(plus),collapsed=!0}else{if(r)for(;r&&!$(r).hasClass(uid+"_"+String(num))&&!$(r).hasClass(uid+"_"+String(num-1));)$(r).show(),tspan=$(r).find("span.tree-wrap-"+$t.p.direction),tspan&&$(tspan).hasClass(plus)&&$(tspan).removeClass(plus).addClass(minus),r=r.nextSibling;tarspan.removeClass(plus).addClass(minus)}$($t).triggerHandler("jqGridGroupingClickGroup",[hid,collapsed]),$.isFunction($t.p.onClickGroup)&&$t.p.onClickGroup.call($t,hid,collapsed)}),!1},groupingRender:function(grdata,colspans){return this.each(function(){function findGroupIdx(ind,offset,grp){if(0===offset)return grp[ind];var id=grp[ind].idx;if(0===id)return grp[ind];for(var i=ind;i>=0;i--)if(grp[i].idx===id-offset)return grp[i]}var hid,clid,gv,ii,$t=this,grp=$t.p.groupingView,str="",icon="",pmrtl=grp.groupCollapse?grp.plusicon:grp.minusicon,cp=[],len=grp.groupField.length;pmrtl+=" tree-wrap-"+$t.p.direction,ii=0,$.each($t.p.colModel,function(i,n){for(var ii=0;len>ii;ii++)if(grp.groupField[ii]===n.name){cp[ii]=i;break}});var toEnd=0,sumreverse=$.makeArray(grp.groupSummary);sumreverse.reverse(),$.each(grp.groups,function(i,n){toEnd++,clid=$t.p.id+"ghead_"+n.idx,hid=clid+"_"+i,icon="<span style='cursor:pointer;' class='ui-icon "+pmrtl+"' onclick=\"jQuery('#"+$.jgrid.jqID($t.p.id)+"').jqGrid('groupingToggle','"+hid+"');return false;\"></span>";try{gv=$t.formatter(hid,n.value,cp[n.idx],n.value)}catch(egv){gv=n.value}str+='<tr id="'+hid+'" role="row" class= "ui-widget-content jqgroup ui-row-'+$t.p.direction+" "+clid+'"><td style="padding-left:'+12*n.idx+'px;" colspan="'+colspans+'">'+icon+$.jgrid.template(grp.groupText[n.idx],gv,n.cnt,n.summary)+"</td></tr>";var leaf=len-1===n.idx;if(leaf){for(var gg=grp.groups[i+1],end=void 0!==gg?grp.groups[i+1].startRow:grdata.length,kk=n.startRow;end>kk;kk++)str+=grdata[kk].join("");var jj;if(void 0!==gg){for(jj=0;jj<grp.groupField.length&&gg.dataIndex!==grp.groupField[jj];jj++);toEnd=grp.groupField.length-jj}for(var ik=0;toEnd>ik;ik++)if(sumreverse[ik]){var hhdr="";grp.groupCollapse&&!grp.showSummaryOnHide&&(hhdr=' style="display:none;"'),str+="<tr"+hhdr+' jqfootlevel="'+(n.idx-ik)+'" role="row" class="ui-widget-content jqfoot ui-row-'+$t.p.direction+'">';for(var vv,fdata=findGroupIdx(i,ik,grp.groups),cm=$t.p.colModel,grlen=fdata.cnt,k=0;colspans>k;k++){var tmpdata="<td "+$t.formatCol(k,1,"")+">&#160;</td>",tplfld="{0}";$.each(fdata.summary,function(){if(this.nm===cm[k].name){cm[k].summaryTpl&&(tplfld=cm[k].summaryTpl),"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&this.v&&grlen>0&&(this.v=this.v/grlen);try{vv=$t.formatter("",this.v,k,this)}catch(ef){vv=this.v}return tmpdata="<td "+$t.formatCol(k,1,"")+">"+$.jgrid.format(tplfld,vv)+"</td>",!1}}),str+=tmpdata}str+="</tr>"}toEnd=jj}}),$("#"+$.jgrid.jqID($t.p.id)+" tbody:first").append(str),str=null})},groupingGroupBy:function(name,options){return this.each(function(){var $t=this;"string"==typeof name&&(name=[name]);var grp=$t.p.groupingView;$t.p.grouping=!0,"undefined"==typeof grp.visibiltyOnNextGrouping&&(grp.visibiltyOnNextGrouping=[]);var i;for(i=0;i<grp.groupField.length;i++)!grp.groupColumnShow[i]&&grp.visibiltyOnNextGrouping[i]&&$($t).jqGrid("showCol",grp.groupField[i]);for(i=0;i<name.length;i++)grp.visibiltyOnNextGrouping[i]=$("#"+$.jgrid.jqID($t.p.id)+"_"+$.jgrid.jqID(name[i])).is(":visible");$t.p.groupingView=$.extend($t.p.groupingView,options||{}),grp.groupField=name,$($t).trigger("reloadGrid")})},groupingRemove:function(current){return this.each(function(){var $t=this;if("undefined"==typeof current&&(current=!0),$t.p.grouping=!1,current===!0){for(var grp=$t.p.groupingView,i=0;i<grp.groupField.length;i++)!grp.groupColumnShow[i]&&grp.visibiltyOnNextGrouping[i]&&$($t).jqGrid("showCol",grp.groupField);$("tr.jqgroup, tr.jqfoot","#"+$.jgrid.jqID($t.p.id)+" tbody:first").remove(),$("tr.jqgrow:hidden","#"+$.jgrid.jqID($t.p.id)+" tbody:first").show()}else $($t).trigger("reloadGrid")})},groupingCalculations:{handler:function(fn,v,field,round,roundType,rc){var funcs={sum:function(){return parseFloat(v||0)+parseFloat(rc[field]||0)},min:function(){return""===v?parseFloat(rc[field]||0):Math.min(parseFloat(v),parseFloat(rc[field]||0))},max:function(){return""===v?parseFloat(rc[field]||0):Math.max(parseFloat(v),parseFloat(rc[field]||0))},count:function(){return""===v&&(v=0),rc.hasOwnProperty(field)?v+1:0},avg:function(){return funcs.sum()}};if(!funcs[fn])throw"jqGrid Grouping No such method: "+fn;var res=funcs[fn]();if(null!=round)if("fixed"==roundType)res=res.toFixed(round);else{var mul=Math.pow(10,round);res=Math.round(res*mul)/mul}return res}}})}(jQuery),function($){"use strict";$.jgrid.extend({jqGridImport:function(o){return o=$.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},o||{}),this.each(function(){var $t=this,xmlConvert=function(xml,o){var jstr,jstr1,cnfg=$(o.xmlGrid.config,xml)[0],xmldata=$(o.xmlGrid.data,xml)[0];if(xmlJsonClass.xml2json&&$.jgrid.parse){jstr=xmlJsonClass.xml2json(cnfg," "),jstr=$.jgrid.parse(jstr);for(var key in jstr)jstr.hasOwnProperty(key)&&(jstr1=jstr[key]);if(xmldata){var svdatatype=jstr.grid.datatype;jstr.grid.datatype="xmlstring",jstr.grid.datastr=xml,$($t).jqGrid(jstr1).jqGrid("setGridParam",{datatype:svdatatype})}else $($t).jqGrid(jstr1);jstr=null,jstr1=null}else alert("xml2json or parse are not present")},jsonConvert=function(jsonstr,o){if(jsonstr&&"string"==typeof jsonstr){var _jsonparse=!1;$.jgrid.useJSON&&($.jgrid.useJSON=!1,_jsonparse=!0);var json=$.jgrid.parse(jsonstr);_jsonparse&&($.jgrid.useJSON=!0);var gprm=json[o.jsonGrid.config],jdata=json[o.jsonGrid.data];if(jdata){var svdatatype=gprm.datatype;gprm.datatype="jsonstring",gprm.datastr=jdata,$($t).jqGrid(gprm).jqGrid("setGridParam",{datatype:svdatatype})}else $($t).jqGrid(gprm)}};switch(o.imptype){case"xml":$.ajax($.extend({url:o.impurl,type:o.mtype,data:o.impData,dataType:"xml",complete:function(xml,stat){"success"==stat&&(xmlConvert(xml.responseXML,o),$($t).triggerHandler("jqGridImportComplete",[xml,o]),$.isFunction(o.importComplete)&&o.importComplete(xml)),xml=null}},o.ajaxOptions));break;case"xmlstring":if(o.impstring&&"string"==typeof o.impstring){var xmld=$.jgrid.stringToDoc(o.impstring);xmld&&(xmlConvert(xmld,o),$($t).triggerHandler("jqGridImportComplete",[xmld,o]),$.isFunction(o.importComplete)&&o.importComplete(xmld),o.impstring=null),xmld=null}break;case"json":$.ajax($.extend({url:o.impurl,type:o.mtype,data:o.impData,dataType:"json",complete:function(json){try{jsonConvert(json.responseText,o),$($t).triggerHandler("jqGridImportComplete",[json,o]),$.isFunction(o.importComplete)&&o.importComplete(json)}catch(ee){}json=null}},o.ajaxOptions));break;case"jsonstring":o.impstring&&"string"==typeof o.impstring&&(jsonConvert(o.impstring,o),$($t).triggerHandler("jqGridImportComplete",[o.impstring,o]),$.isFunction(o.importComplete)&&o.importComplete(o.impstring),o.impstring=null)}})},jqGridExport:function(o){o=$.extend({exptype:"xmlstring",root:"grid",ident:"	"},o||{});var ret=null;return this.each(function(){if(this.grid){var gprm=$.extend(!0,{},$(this).jqGrid("getGridParam"));if(gprm.rownumbers&&(gprm.colNames.splice(0,1),gprm.colModel.splice(0,1)),gprm.multiselect&&(gprm.colNames.splice(0,1),gprm.colModel.splice(0,1)),gprm.subGrid&&(gprm.colNames.splice(0,1),gprm.colModel.splice(0,1)),gprm.knv=null,gprm.treeGrid)for(var key in gprm.treeReader)gprm.treeReader.hasOwnProperty(key)&&(gprm.colNames.splice(gprm.colNames.length-1),gprm.colModel.splice(gprm.colModel.length-1));switch(o.exptype){case"xmlstring":ret="<"+o.root+">"+xmlJsonClass.json2xml(gprm,o.ident)+"</"+o.root+">";break;case"jsonstring":ret="{"+xmlJsonClass.toJson(gprm,o.root,o.ident,!1)+"}",void 0!==gprm.postData.filters&&(ret=ret.replace(/filters":"/,'filters":'),ret=ret.replace(/}]}"/,"}]}"))}}}),ret},excelExport:function(o){return o=$.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},o||{}),this.each(function(){if(this.grid){var url;if("remote"==o.exptype){var pdata=$.extend({},this.p.postData);pdata[o.oper]=o.tag;var params=jQuery.param(pdata);url=-1!=o.url.indexOf("?")?o.url+"&"+params:o.url+"?"+params,window.location=url}}})}})}(jQuery),function($){if($.browser.msie&&8==$.browser.version&&($.expr[":"].hidden=function(elem){return 0===elem.offsetWidth||0===elem.offsetHeight||"none"==elem.style.display}),$.jgrid._multiselect=!1,$.ui&&$.ui.multiselect){if($.ui.multiselect.prototype._setSelected){var setSelected=$.ui.multiselect.prototype._setSelected;$.ui.multiselect.prototype._setSelected=function(item,selected){var ret=setSelected.call(this,item,selected);if(selected&&this.selectedList){var elt=this.element;this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(elt)})}return ret}}$.ui.multiselect.prototype.destroy&&($.ui.multiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),void 0===$.Widget?$.widget.prototype.destroy.apply(this,arguments):$.Widget.prototype.destroy.apply(this,arguments)}),$.jgrid._multiselect=!0}$.jgrid.extend({sortableColumns:function(tblrow){return this.each(function(){function start(){ts.p.disableClick=!0}var ts=this,tid=$.jgrid.jqID(ts.p.id),sortable_opts={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+tid+"_cb,#jqgh_"+tid+"_rn,#jqgh_"+tid+"_subgrid),:hidden)",placeholder:{element:function(item){var el=$(document.createElement(item[0].nodeName)).addClass(item[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];return el},update:function(self,p){p.height(self.currentItem.innerHeight()-parseInt(self.currentItem.css("paddingTop")||0,10)-parseInt(self.currentItem.css("paddingBottom")||0,10)),p.width(self.currentItem.innerWidth()-parseInt(self.currentItem.css("paddingLeft")||0,10)-parseInt(self.currentItem.css("paddingRight")||0,10))}},update:function(event,ui){var p=$(ui.item).parent(),th=$(">th",p),colModel=ts.p.colModel,cmMap={},tid=ts.p.id+"_";$.each(colModel,function(i){cmMap[this.name]=i});var permutation=[];th.each(function(){var id=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(tid,"");id in cmMap&&permutation.push(cmMap[id])}),$(ts).jqGrid("remapColumns",permutation,!0,!0),$.isFunction(ts.p.sortable.update)&&ts.p.sortable.update(permutation),setTimeout(function(){ts.p.disableClick=!1},50)}};if(ts.p.sortable.options?$.extend(sortable_opts,ts.p.sortable.options):$.isFunction(ts.p.sortable)&&(ts.p.sortable={update:ts.p.sortable}),sortable_opts.start){var s=sortable_opts.start;sortable_opts.start=function(e,ui){start(),s.call(this,e,ui)}}else sortable_opts.start=start;ts.p.sortable.exclude&&(sortable_opts.items+=":not("+ts.p.sortable.exclude+")"),tblrow.sortable(sortable_opts).data("sortable").floating=!0})},columnChooser:function(opts){function insert(perm,i,v){if(i>=0){var a=perm.slice(),b=a.splice(i,Math.max(perm.length-i,i));return i>perm.length&&(i=perm.length),a[i]=v,a.concat(b)}}function call(fn,obj){fn&&("string"==typeof fn?$.fn[fn]&&$.fn[fn].apply(obj,$.makeArray(arguments).slice(2)):$.isFunction(fn)&&fn.apply(obj,$.makeArray(arguments).slice(2)))}var self=this;if(!$("#colchooser_"+$.jgrid.jqID(self[0].p.id)).length){var selector=$('<div id="colchooser_'+self[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),select=$("select",selector);if(opts=$.extend({width:420,height:240,classname:null,done:function(perm){perm&&self.jqGrid("remapColumns",perm,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470},dlog_opts:function(opts){var buttons={};return buttons[opts.bSubmit]=function(){opts.apply_perm(),opts.cleanup(!1)},buttons[opts.bCancel]=function(){opts.cleanup(!0)},$.extend(!0,{buttons:buttons,close:function(){opts.cleanup(!0)},modal:opts.modal?opts.modal:!1,resizable:opts.resizable?opts.resizable:!0,width:opts.width+20},opts.dialog_opts||{})},apply_perm:function(){$("option",select).each(function(){this.selected?self.jqGrid("showCol",colModel[this.value].name):self.jqGrid("hideCol",colModel[this.value].name)});var perm=[];$("option:selected",select).each(function(){perm.push(parseInt(this.value,10))}),$.each(perm,function(){delete colMap[colModel[parseInt(this,10)].name]}),$.each(colMap,function(){var ti=parseInt(this,10);perm=insert(perm,ti,ti)}),opts.done&&opts.done.call(self,perm)},cleanup:function(calldone){call(opts.dlog,selector,"destroy"),call(opts.msel,select,"destroy"),selector.remove(),calldone&&opts.done&&opts.done.call(self)},msel_opts:{}},$.jgrid.col,opts||{}),$.ui&&$.ui.multiselect&&"multiselect"==opts.msel){if(!$.jgrid._multiselect)return void alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");opts.msel_opts=$.extend($.ui.multiselect.defaults,opts.msel_opts)
}opts.caption&&selector.attr("title",opts.caption),opts.classname&&(selector.addClass(opts.classname),select.addClass(opts.classname)),opts.width&&($(">div",selector).css({width:opts.width,margin:"0 auto"}),select.css("width",opts.width)),opts.height&&($(">div",selector).css("height",opts.height),select.css("height",opts.height-10));var colModel=self.jqGrid("getGridParam","colModel"),colNames=self.jqGrid("getGridParam","colNames"),colMap={},fixedCols=[];select.empty(),$.each(colModel,function(i){return colMap[this.name]=i,this.hidedlg?void(this.hidden||fixedCols.push(i)):void select.append("<option value='"+i+"' "+(this.hidden?"":"selected='selected'")+">"+jQuery.jgrid.stripHtml(colNames[i])+"</option>")});var dopts=$.isFunction(opts.dlog_opts)?opts.dlog_opts.call(self,opts):opts.dlog_opts;call(opts.dlog,selector,dopts);var mopts=$.isFunction(opts.msel_opts)?opts.msel_opts.call(self,opts):opts.msel_opts;call(opts.msel,select,mopts)}},sortableRows:function(opts){return this.each(function(){var $t=this;$t.grid&&($t.p.treeGrid||$.fn.sortable&&(opts=$.extend({cursor:"move",axis:"y",items:".jqgrow"},opts||{}),opts.start&&$.isFunction(opts.start)?(opts._start_=opts.start,delete opts.start):opts._start_=!1,opts.update&&$.isFunction(opts.update)?(opts._update_=opts.update,delete opts.update):opts._update_=!1,opts.start=function(ev,ui){if($(ui.item).css("border-width","0px"),$("td",ui.item).each(function(i){this.style.width=$t.grid.cols[i].style.width}),$t.p.subGrid){var subgid=$(ui.item).attr("id");try{$($t).jqGrid("collapseSubGridRow",subgid)}catch(e){}}opts._start_&&opts._start_.apply(this,[ev,ui])},opts.update=function(ev,ui){$(ui.item).css("border-width",""),$t.p.rownumbers===!0&&$("td.jqgrid-rownum",$t.rows).each(function(i){$(this).html(i+1+(parseInt($t.p.page,10)-1)*parseInt($t.p.rowNum,10))}),opts._update_&&opts._update_.apply(this,[ev,ui])},$("tbody:first",$t).sortable(opts),$("tbody:first",$t).disableSelection()))})},gridDnD:function(opts){return this.each(function(){function updateDnD(){var datadnd=$.data($t,"dnd");$("tr.jqgrow:not(.ui-draggable)",$t).draggable($.isFunction(datadnd.drag)?datadnd.drag.call($($t),datadnd):datadnd.drag)}var $t=this;if($t.grid&&!$t.p.treeGrid&&$.fn.draggable&&$.fn.droppable){var appender="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>";if(void 0===$("#jqgrid_dnd")[0]&&$("body").append(appender),"string"==typeof opts&&"updateDnD"==opts&&$t.p.jqgdnd===!0)return void updateDnD();if(opts=$.extend({drag:function(opts){return $.extend({start:function(ev,ui){if($t.p.subGrid){var subgid=$(ui.helper).attr("id");try{$($t).jqGrid("collapseSubGridRow",subgid)}catch(e){}}for(var i=0;i<$.data($t,"dnd").connectWith.length;i++)"0"==$($.data($t,"dnd").connectWith[i]).jqGrid("getGridParam","reccount")&&$($.data($t,"dnd").connectWith[i]).jqGrid("addRowData","jqg_empty_row",{});ui.helper.addClass("ui-state-highlight"),$("td",ui.helper).each(function(i){this.style.width=$t.grid.headers[i].width+"px"}),opts.onstart&&$.isFunction(opts.onstart)&&opts.onstart.call($($t),ev,ui)},stop:function(ev,ui){if(ui.helper.dropped&&!opts.dragcopy){var ids=$(ui.helper).attr("id");void 0===ids&&(ids=$(this).attr("id")),$($t).jqGrid("delRowData",ids)}for(var i=0;i<$.data($t,"dnd").connectWith.length;i++)$($.data($t,"dnd").connectWith[i]).jqGrid("delRowData","jqg_empty_row");opts.onstop&&$.isFunction(opts.onstop)&&opts.onstop.call($($t),ev,ui)}},opts.drag_opts||{})},drop:function(opts){return $.extend({accept:function(d){if(!$(d).hasClass("jqgrow"))return d;var tid=$(d).closest("table.ui-jqgrid-btable");if(tid.length>0&&void 0!==$.data(tid[0],"dnd")){var cn=$.data(tid[0],"dnd").connectWith;return-1!=$.inArray("#"+$.jgrid.jqID(this.id),cn)?!0:!1}return!1},drop:function(ev,ui){if($(ui.draggable).hasClass("jqgrow")){var accept=$(ui.draggable).attr("id"),getdata=ui.draggable.parent().parent().jqGrid("getRowData",accept);if(!opts.dropbyname){var nm,j=0,tmpdata={},dropmodel=$("#"+$.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(var key in getdata)nm=dropmodel[j].name,"cb"!=nm&&"rn"!=nm&&"subgrid"!=nm&&getdata.hasOwnProperty(key)&&dropmodel[j]&&(tmpdata[nm]=getdata[key]),j++;getdata=tmpdata}catch(e){}}if(ui.helper.dropped=!0,opts.beforedrop&&$.isFunction(opts.beforedrop)){var datatoinsert=opts.beforedrop.call(this,ev,ui,getdata,$("#"+$.jgrid.jqID($t.p.id)),$(this));"undefined"!=typeof datatoinsert&&null!==datatoinsert&&"object"==typeof datatoinsert&&(getdata=datatoinsert)}if(ui.helper.dropped){var grid;opts.autoid&&($.isFunction(opts.autoid)?grid=opts.autoid.call(this,getdata):(grid=Math.ceil(1e3*Math.random()),grid=opts.autoidprefix+grid)),$("#"+$.jgrid.jqID(this.id)).jqGrid("addRowData",grid,getdata,opts.droppos)}opts.ondrop&&$.isFunction(opts.ondrop)&&opts.ondrop.call(this,ev,ui,getdata)}}},opts.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},opts||{}),opts.connectWith){opts.connectWith=opts.connectWith.split(","),opts.connectWith=$.map(opts.connectWith,function(n){return $.trim(n)}),$.data($t,"dnd",opts),"0"==$t.p.reccount||$t.p.jqgdnd||updateDnD(),$t.p.jqgdnd=!0;for(var i=0;i<opts.connectWith.length;i++){var cn=opts.connectWith[i];$(cn).droppable($.isFunction(opts.drop)?opts.drop.call($($t),opts):opts.drop)}}}})},gridResize:function(opts){return this.each(function(){var $t=this,gID=$.jgrid.jqID($t.p.id);if($t.grid&&$.fn.resizable){if(opts=$.extend({},opts||{}),opts.alsoResize?(opts._alsoResize_=opts.alsoResize,delete opts.alsoResize):opts._alsoResize_=!1,opts.stop&&$.isFunction(opts.stop)?(opts._stop_=opts.stop,delete opts.stop):opts._stop_=!1,opts.stop=function(ev,ui){$($t).jqGrid("setGridParam",{height:$("#gview_"+gID+" .ui-jqgrid-bdiv").height()}),$($t).jqGrid("setGridWidth",ui.size.width,opts.shrinkToFit),opts._stop_&&opts._stop_.call($t,ev,ui)},opts._alsoResize_){var optstest="{'#gview_"+gID+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}";opts.alsoResize=eval("("+optstest+")")}else opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+gID);delete opts._alsoResize_,$("#gbox_"+gID).resizable(opts)}})}})}(jQuery),function($){var opt;$.fn.jqprint=function(options){opt=$.extend({},$.fn.jqprint.defaults,options);var $element=this instanceof jQuery?this:$(this);if(opt.operaSupport&&$.browser.opera){var tab=window.open("","jqPrint-preview");tab.document.open();var doc=tab.document}else{var $iframe=$("<iframe  />");opt.debug||$iframe.css({position:"absolute",width:"0px",height:"0px",left:"-600px",top:"-600px"}),$iframe.appendTo("body");var doc=$iframe[0].contentWindow.document}opt.importCSS&&($("link[media=print]").length>0?$("link[media=print]").each(function(){doc.write("<link type='text/css' rel='stylesheet' href='"+$(this).attr("href")+"' media='print' />")}):$("link").each(function(){doc.write("<link type='text/css' rel='stylesheet' href='"+$(this).attr("href")+"' />")})),opt.printContainer?doc.write($element.outer()):$element.each(function(){doc.write($(this).html())}),doc.close(),(opt.operaSupport&&$.browser.opera?tab:$iframe[0].contentWindow).focus(),setTimeout(function(){(opt.operaSupport&&$.browser.opera?tab:$iframe[0].contentWindow).print(),tab&&tab.close()},1e3)},$.fn.jqprint.defaults={debug:!1,importCSS:!0,printContainer:!0,operaSupport:!0},jQuery.fn.outer=function(){return $($("<div></div>").html(this.clone())).html()}}(jQuery),function($){function getCaretPosition(ctl){var res={begin:0,end:0};if(ctl.setSelectionRange)res.begin=ctl.selectionStart,res.end=ctl.selectionEnd;else if(document.selection&&document.selection.createRange){var range=document.selection.createRange();res.begin=0-range.duplicate().moveStart("character",-1e5),res.end=res.begin+range.text.length}return res}function setCaretPosition(ctl,pos){if(ctl.setSelectionRange)ctl.focus(),ctl.setSelectionRange(pos,pos);else if(ctl.createTextRange){var range=ctl.createTextRange();range.collapse(!0),range.moveEnd("character",pos),range.moveStart("character",pos),range.select()}}var charMap={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"};$.mask={addPlaceholder:function(c,r){charMap[c]=r}},$.fn.unmask=function(){return this.trigger("unmask")},$.fn.mask=function(mask,settings){settings=$.extend({placeholder:"_",completed:null},settings);for(var reString="^",i=0;i<mask.length;i++)reString+=charMap[mask.charAt(i)]||"\\"+mask.charAt(i);reString+="$";var re=new RegExp(reString);return this.each(function(){function focusEvent(){checkVal(),writeBuffer(),setTimeout(function(){setCaretPosition(input[0],0)},0)}function keydownEvent(e){var pos=getCaretPosition(this),k=e.keyCode;if(ignore=16>k||k>16&&32>k||k>32&&41>k,pos.begin-pos.end==0||ignore&&8!=k&&46!=k||clearBuffer(pos.begin,pos.end),8==k){for(;pos.begin-->=0;)if(!locked[pos.begin])return buffer[pos.begin]=settings.placeholder,$.browser.opera?(writeBuffer(pos.begin),setCaretPosition(this,pos.begin+1)):(writeBuffer(),setCaretPosition(this,pos.begin)),!1}else{if(46==k)return clearBuffer(pos.begin,pos.begin+1),writeBuffer(),setCaretPosition(this,pos.begin),!1;if(27==k)return clearBuffer(0,mask.length),writeBuffer(),setCaretPosition(this,0),!1}}function keypressEvent(e){if(ignore)return void(ignore=!1);e=e||window.event;var k=e.charCode||e.keyCode||e.which,pos=getCaretPosition(this),caretPos=pos.begin;if(e.ctrlKey||e.altKey)return!0;if(!(k>=41&&122>=k||32==k||k>186))return!1;for(;pos.begin<mask.length;){var match,reString=charMap[mask.charAt(pos.begin)];if(reString){var reChar=new RegExp(reString);if(match=String.fromCharCode(k).match(reChar),!match)return!1;for(buffer[pos.begin]=String.fromCharCode(k);++caretPos<mask.length&&locked[caretPos];);break}pos.begin+=1,pos.end=pos.begin,caretPos+=1}return writeBuffer(),settings.completed&&caretPos>=buffer.length?settings.completed.call(input):setCaretPosition(this,caretPos),!1}function clearBuffer(start,end){for(var i=start;end>i;i++)locked[i]||(buffer[i]=settings.placeholder)}function writeBuffer(pos){for(var s="",i=0;i<mask.length;i++)s+=buffer[i],i==pos&&(s+=settings.placeholder);return input.val(s),s}function checkVal(){for(var test=input.val(),pos=0,i=0;i<mask.length;i++)if(!locked[i])for(;pos++<test.length;){var reChar=new RegExp(charMap[mask.charAt(i)]);if(test.charAt(pos-1).match(reChar)){buffer[i]=test.charAt(pos-1);break}}var s=writeBuffer();s.match(re)||(input.val(""),clearBuffer(0,mask.length))}for(var input=$(this),buffer=new Array(mask.length),locked=new Array(mask.length),i=0;i<mask.length;i++)locked[i]=null==charMap[mask.charAt(i)],buffer[i]=locked[i]?mask.charAt(i):settings.placeholder;input.bind("focus",focusEvent),input.bind("blur",checkVal),$.browser.msie?this.onpaste=function(){setTimeout(checkVal,0)}:$.browser.mozilla&&this.addEventListener("input",checkVal,!1);var ignore=!1;input.bind("keydown",keydownEvent),input.bind("keypress",keypressEvent),input.one("unmask",function(){input.unbind("focus",focusEvent),input.unbind("blur",checkVal),input.unbind("keydown",keydownEvent),input.unbind("keypress",keypressEvent),$.browser.msie?this.onpaste=null:$.browser.mozilla&&this.removeEventListener("input",checkVal,!1)})})}}(jQuery),function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(type,name){this.defaults.type=type,this.defaults.name=name},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);settings.single.length||(settings.single="metadata");var data=$.data(elem,settings.single);if(data)return data;data="{}";var getData=function(data){return"string"!=typeof data?data:void(data.indexOf("{")<0&&(data=eval("("+data+")")))},getObject=function(data){return"string"!=typeof data?data:data=eval("("+data+")")};if("html5"==settings.type){var object={};$(elem.attributes).each(function(){var name=this.nodeName;return name.match(/^data-/)?(name=name.replace(/^data-/,""),void(object[name]=getObject(this.nodeValue))):!0})}else{if("class"==settings.type){var m=settings.cre.exec(elem.className);m&&(data=m[1])}else if("elem"==settings.type){if(!elem.getElementsByTagName)return;var e=elem.getElementsByTagName(settings.name);e.length&&(data=$.trim(e[0].innerHTML))}else if(void 0!=elem.getAttribute){var attr=elem.getAttribute(settings.name);attr&&(data=attr)}object=getObject(data.indexOf("{")<0?"{"+data+"}":data)}return $.data(elem,settings.single,object),object}}}),$.fn.metadata=function(opts){return $.metadata.get(this[0],opts)}}(jQuery),jQuery&&function($){$.extend($.fn,{miniColors:function(o,data){var create=function(input,o){var color=cleanHex(input.val());color||(color="FFFFFF");var hsb=hex2hsb(color),trigger=$('<a class="miniColors-trigger" style="background-color: #'+color+'" href="#"></a>');trigger.insertAfter(input),input.addClass("miniColors").attr("maxlength",7).attr("autocomplete","off"),input.data("trigger",trigger),input.data("hsb",hsb),o.change&&input.data("change",o.change),o.readonly&&input.attr("readonly",!0),o.disabled&&disable(input),trigger.bind("click.miniColors",function(event){event.preventDefault(),input.trigger("focus")}),input.bind("focus.miniColors",function(){show(input)}),input.bind("blur.miniColors",function(){var hex=cleanHex(input.val());input.val(hex?"#"+hex:"")}),input.bind("keydown.miniColors",function(event){9===event.keyCode&&hide(input)}),input.bind("keyup.miniColors",function(){var filteredHex=input.val().replace(/[^A-F0-9#]/gi,"");input.val(filteredHex),setColorFromInput(input)||input.data("trigger").css("backgroundColor","#FFF")}),input.bind("paste.miniColors",function(){setTimeout(function(){input.trigger("keyup")},5)})},destroy=function(input){hide(),input=$(input),input.data("trigger").remove(),input.removeAttr("autocomplete"),input.removeData("trigger"),input.removeData("selector"),input.removeData("hsb"),input.removeData("huePicker"),input.removeData("colorPicker"),input.removeData("mousebutton"),input.removeData("moving"),input.unbind("click.miniColors"),input.unbind("focus.miniColors"),input.unbind("blur.miniColors"),input.unbind("keyup.miniColors"),input.unbind("keydown.miniColors"),input.unbind("paste.miniColors"),$(document).unbind("mousedown.miniColors"),$(document).unbind("mousemove.miniColors")},enable=function(input){input.attr("disabled",!1),input.data("trigger").css("opacity",1)},disable=function(input){hide(input),input.attr("disabled",!0),input.data("trigger").css("opacity",.5)},show=function(input){if(input.attr("disabled"))return!1;hide();var selector=$('<div class="miniColors-selector"></div>');selector.append('<div class="miniColors-colors" style="background-color: #FFF;"><div class="miniColors-colorPicker"></div></div>'),selector.append('<div class="miniColors-hues"><div class="miniColors-huePicker"></div></div>'),selector.css({top:input.is(":visible")?input.offset().top+input.outerHeight():input.data("trigger").offset().top+input.data("trigger").outerHeight(),left:input.is(":visible")?input.offset().left:input.data("trigger").offset().left,display:"none"}).addClass(input.attr("class"));var hsb=input.data("hsb");selector.find(".miniColors-colors").css("backgroundColor","#"+hsb2hex({h:hsb.h,s:100,b:100}));var colorPosition=input.data("colorPosition");colorPosition||(colorPosition=getColorPositionFromHSB(hsb)),selector.find(".miniColors-colorPicker").css("top",colorPosition.y+"px").css("left",colorPosition.x+"px");var huePosition=input.data("huePosition");huePosition||(huePosition=getHuePositionFromHSB(hsb)),selector.find(".miniColors-huePicker").css("top",huePosition.y+"px"),input.data("selector",selector),input.data("huePicker",selector.find(".miniColors-huePicker")),input.data("colorPicker",selector.find(".miniColors-colorPicker")),input.data("mousebutton",0),$("BODY").append(selector),selector.fadeIn(100),selector.bind("selectstart",function(){return!1}),$(document).bind("mousedown.miniColors",function(event){return input.data("mousebutton",1),$(event.target).parents().andSelf().hasClass("miniColors-colors")&&(event.preventDefault(),input.data("moving","colors"),moveColor(input,event)),$(event.target).parents().andSelf().hasClass("miniColors-hues")&&(event.preventDefault(),input.data("moving","hues"),moveHue(input,event)),$(event.target).parents().andSelf().hasClass("miniColors-selector")?void event.preventDefault():void($(event.target).parents().andSelf().hasClass("miniColors")||hide(input))}),$(document).bind("mouseup.miniColors",function(){input.data("mousebutton",0),input.removeData("moving")}),$(document).bind("mousemove.miniColors",function(event){1===input.data("mousebutton")&&("colors"===input.data("moving")&&moveColor(input,event),"hues"===input.data("moving")&&moveHue(input,event))})},hide=function(input){input||(input=".miniColors"),$(input).each(function(){var selector=$(this).data("selector");$(this).removeData("selector"),$(selector).fadeOut(100,function(){$(this).remove()})}),$(document).unbind("mousedown.miniColors"),$(document).unbind("mousemove.miniColors")},moveColor=function(input,event){var colorPicker=input.data("colorPicker");colorPicker.hide();var position={x:event.clientX-input.data("selector").find(".miniColors-colors").offset().left+$(document).scrollLeft()-5,y:event.clientY-input.data("selector").find(".miniColors-colors").offset().top+$(document).scrollTop()-5};position.x<=-5&&(position.x=-5),position.x>=144&&(position.x=144),position.y<=-5&&(position.y=-5),position.y>=144&&(position.y=144),input.data("colorPosition",position),colorPicker.css("left",position.x).css("top",position.y).show();var s=Math.round(.67*(position.x+5));0>s&&(s=0),s>100&&(s=100);var b=100-Math.round(.67*(position.y+5));0>b&&(b=0),b>100&&(b=100);var hsb=input.data("hsb");hsb.s=s,hsb.b=b,setColor(input,hsb,!0)},moveHue=function(input,event){var huePicker=input.data("huePicker");huePicker.hide();var position={y:event.clientY-input.data("selector").find(".miniColors-colors").offset().top+$(document).scrollTop()-1};position.y<=-1&&(position.y=-1),position.y>=149&&(position.y=149),input.data("huePosition",position),huePicker.css("top",position.y).show();var h=Math.round(2.4*(150-position.y-1));0>h&&(h=0),h>360&&(h=360);var hsb=input.data("hsb");hsb.h=h,setColor(input,hsb,!0)},setColor=function(input,hsb,updateInputValue){input.data("hsb",hsb);var hex=hsb2hex(hsb);updateInputValue&&input.val("#"+hex),input.data("trigger").css("backgroundColor","#"+hex),input.data("selector")&&input.data("selector").find(".miniColors-colors").css("backgroundColor","#"+hsb2hex({h:hsb.h,s:100,b:100})),input.data("change")&&input.data("change").call(input,"#"+hex,hsb2rgb(hsb))},setColorFromInput=function(input){var hex=cleanHex(input.val());if(!hex)return!1;var hsb=hex2hsb(hex),currentHSB=input.data("hsb");if(hsb.h===currentHSB.h&&hsb.s===currentHSB.s&&hsb.b===currentHSB.b)return!0;var colorPosition=getColorPositionFromHSB(hsb),colorPicker=$(input.data("colorPicker"));colorPicker.css("top",colorPosition.y+"px").css("left",colorPosition.x+"px");var huePosition=getHuePositionFromHSB(hsb),huePicker=$(input.data("huePicker"));return huePicker.css("top",huePosition.y+"px"),setColor(input,hsb,!1),!0},getColorPositionFromHSB=function(hsb){var x=Math.ceil(hsb.s/.67);0>x&&(x=0),x>150&&(x=150);var y=150-Math.ceil(hsb.b/.67);return 0>y&&(y=0),y>150&&(y=150),{x:x-5,y:y-5}},getHuePositionFromHSB=function(hsb){var y=150-hsb.h/2.4;return 0>y&&(h=0),y>150&&(h=150),{y:y-1}},cleanHex=function(hex){return hex=hex.replace(/[^A-Fa-f0-9]/,""),3==hex.length&&(hex=hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2]),6===hex.length?hex:null},hsb2rgb=function(hsb){var rgb={},h=Math.round(hsb.h),s=Math.round(255*hsb.s/100),v=Math.round(255*hsb.b/100);if(0==s)rgb.r=rgb.g=rgb.b=v;else{var t1=v,t2=(255-s)*v/255,t3=(t1-t2)*(h%60)/60;360==h&&(h=0),60>h?(rgb.r=t1,rgb.b=t2,rgb.g=t2+t3):120>h?(rgb.g=t1,rgb.b=t2,rgb.r=t1-t3):180>h?(rgb.g=t1,rgb.r=t2,rgb.b=t2+t3):240>h?(rgb.b=t1,rgb.r=t2,rgb.g=t1-t3):300>h?(rgb.b=t1,rgb.g=t2,rgb.r=t2+t3):360>h?(rgb.r=t1,rgb.g=t2,rgb.b=t1-t3):(rgb.r=0,rgb.g=0,rgb.b=0)}return{r:Math.round(rgb.r),g:Math.round(rgb.g),b:Math.round(rgb.b)}},rgb2hex=function(rgb){var hex=[rgb.r.toString(16),rgb.g.toString(16),rgb.b.toString(16)];return $.each(hex,function(nr,val){1==val.length&&(hex[nr]="0"+val)}),hex.join("")},hex2rgb=function(hex){var hex=parseInt(hex.indexOf("#")>-1?hex.substring(1):hex,16);return{r:hex>>16,g:(65280&hex)>>8,b:255&hex}},rgb2hsb=function(rgb){var hsb={h:0,s:0,b:0},min=Math.min(rgb.r,rgb.g,rgb.b),max=Math.max(rgb.r,rgb.g,rgb.b),delta=max-min;return hsb.b=max,hsb.s=0!=max?255*delta/max:0,hsb.h=0!=hsb.s?rgb.r==max?(rgb.g-rgb.b)/delta:rgb.g==max?2+(rgb.b-rgb.r)/delta:4+(rgb.r-rgb.g)/delta:-1,hsb.h*=60,hsb.h<0&&(hsb.h+=360),hsb.s*=100/255,hsb.b*=100/255,hsb},hex2hsb=function(hex){var hsb=rgb2hsb(hex2rgb(hex));return 0===hsb.s&&(hsb.h=360),hsb},hsb2hex=function(hsb){return rgb2hex(hsb2rgb(hsb))};switch(o){case"readonly":return $(this).each(function(){$(this).attr("readonly",data)}),$(this);case"disabled":return $(this).each(function(){data?disable($(this)):enable($(this))}),$(this);case"value":return $(this).each(function(){$(this).val(data).trigger("keyup")}),$(this);case"destroy":return $(this).each(function(){destroy($(this))}),$(this);default:return o||(o={}),$(this).each(function(){"input"===$(this)[0].tagName.toLowerCase()&&($(this).data("trigger")||create($(this),o,data))}),$(this)}}})}(jQuery),function($,undefined){function Timepicker(){this.debug=!0,this._curInst=null,this._isInline=!1,this._disabledInputs=[],this._timepickerShowing=!1,this._inDialog=!1,this._dialogClass="ui-timepicker-dialog",this._mainDivId="ui-timepicker-div",this._inlineClass="ui-timepicker-inline",this._currentClass="ui-timepicker-current",this._dayOverClass="ui-timepicker-days-cell-over",this.regional=[],this.regional[""]={hourText:"Hour",minuteText:"Minute",amPmText:["AM","PM"]},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},appendText:"",onSelect:null,onClose:null,timeSeparator:":",showPeriod:!1,showLeadingZero:!0,showMinutesLeadingZero:!0,altField:"",defaultTime:"",onHourShow:null,onMinuteShow:null},$.extend(this._defaults,this.regional[""]),this.tpDiv=$('<div id="'+this._mainDivId+'" class="ui-timepicker ui-widget ui-helper-clearfix ui-corner-all " style="display: none"></div>')}function extendRemove(target,props){$.extend(target,props);for(var name in props)(null==props[name]||props[name]==undefined)&&(target[name]=props[name]);return target}$.extend($.ui,{timepicker:{version:"0.0.8"}});var PROP_NAME="timepicker",tpuuid=(new Date).getTime();$.extend(Timepicker.prototype,{markerClassName:"hasTimepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetTimepicker:function(){return this.tpDiv},setDefaults:function(settings){return extendRemove(this._defaults,settings||{}),this},_attachTimepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("time:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="tp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectTimepicker(target,inst):inline&&this._inlineTimepicker(target,inst)},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,tpDiv:inline?$('<div class="'+this._inlineClass+' ui-timepicker ui-widget  ui-helper-clearfix"></div>'):this.tpDiv}},_connectTimepicker:function(target,inst){var input=$(target);inst.append=$([]),inst.trigger=$([]),input.hasClass(this.markerClassName)||(this._attachments(input,inst),input.addClass(this.markerClassName).keydown(this._doKeyDown).keyup(this._doKeyUp).bind("setData.timepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.timepicker",function(event,key){return this._get(inst,key)}),$.data(target,PROP_NAME,inst))},_doKeyDown:function(event){var inst=$.timepicker._getInst(event.target),handled=!0;if(inst._keyEvent=!0,$.timepicker._timepickerShowing)switch(event.keyCode){case 9:$.timepicker._hideTimepicker(),handled=!1;break;case 27:$.timepicker._hideTimepicker();break;default:handled=!1}else 36==event.keyCode&&event.ctrlKey?$.timepicker._showTimepicker(this):handled=!1;handled&&(event.preventDefault(),event.stopPropagation())},_doKeyUp:function(event){var inst=$.timepicker._getInst(event.target);$.timepicker._setTimeFromField(inst),$.timepicker._updateTimepicker(inst)},_attachments:function(input,inst){var appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");inst.append&&inst.append.remove(),appendText&&(inst.append=$('<span class="'+this._appendClass+'">'+appendText+"</span>"),input[isRTL?"before":"after"](inst.append)),input.unbind("focus",this._showTimepicker),inst.trigger&&inst.trigger.remove();var showOn=this._get(inst,"showOn");if(("focus"==showOn||"both"==showOn)&&input.focus(this._showTimepicker),"button"==showOn||"both"==showOn){var buttonText=this._get(inst,"buttonText"),buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==buttonImage?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText}))),input[isRTL?"before":"after"](inst.trigger),inst.trigger.click(function(){return $.timepicker._timepickerShowing&&$.timepicker._lastInput==input[0]?$.timepicker._hideTimepicker():$.timepicker._showTimepicker(input[0]),!1})}},_inlineTimepicker:function(target,inst){var divSpan=$(target);divSpan.hasClass(this.markerClassName)||(divSpan.addClass(this.markerClassName).append(inst.tpDiv).bind("setData.timepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.timepicker",function(event,key){return this._get(inst,key)}),$.data(target,PROP_NAME,inst),this._setTimeFromField(inst),this._updateTimepicker(inst),inst.tpDiv.show())},_showTimepicker:function(input){if(input=input.target||input,"input"!=input.nodeName.toLowerCase()&&(input=$("input",input.parentNode)[0]),!$.timepicker._isDisabledTimepicker(input)&&$.timepicker._lastInput!=input){$.timepicker._hideTimepicker();var inst=$.timepicker._getInst(input);$.timepicker._curInst&&$.timepicker._curInst!=inst&&$.timepicker._curInst.tpDiv.stop(!0,!0);var beforeShow=$.timepicker._get(inst,"beforeShow");extendRemove(inst.settings,beforeShow?beforeShow.apply(input,[input,inst]):{}),inst.lastVal=null,$.timepicker._lastInput=input,$.timepicker._setTimeFromField(inst),$.timepicker._inDialog&&(input.value=""),$.timepicker._pos||($.timepicker._pos=$.timepicker._findPos(input),$.timepicker._pos[1]+=input.offsetHeight);var isFixed=!1;$(input).parents().each(function(){return isFixed|="fixed"==$(this).css("position"),!isFixed}),isFixed&&$.browser.opera&&($.timepicker._pos[0]-=document.documentElement.scrollLeft,$.timepicker._pos[1]-=document.documentElement.scrollTop);var offset={left:$.timepicker._pos[0],top:$.timepicker._pos[1]};if($.timepicker._pos=null,inst.tpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.timepicker._updateTimepicker(inst),inst._hoursClicked=!1,inst._minutesClicked=!1,offset=$.timepicker._checkOffset(inst,offset,isFixed),inst.tpDiv.css({position:$.timepicker._inDialog&&$.blockUI?"static":isFixed?"fixed":"absolute",display:"none",left:offset.left+"px",top:offset.top+"px"}),!inst.inline){var showAnim=$.timepicker._get(inst,"showAnim"),duration=$.timepicker._get(inst,"duration"),postProcess=function(){$.timepicker._timepickerShowing=!0;var borders=$.timepicker._getBorders(inst.tpDiv);inst.tpDiv.find("iframe.ui-timepicker-cover").css({left:-borders[0],top:-borders[1],width:inst.tpDiv.outerWidth(),height:inst.tpDiv.outerHeight()})};inst.tpDiv.zIndex($(input).zIndex()+1),$.effects&&$.effects[showAnim]?inst.tpDiv.show(showAnim,$.timepicker._get(inst,"showOptions"),duration,postProcess):inst.tpDiv[showAnim||"show"](showAnim?duration:null,postProcess),showAnim&&duration||postProcess(),inst.input.is(":visible")&&!inst.input.is(":disabled")&&inst.input.focus(),$.timepicker._curInst=inst}}},_updateTimepicker:function(inst){var self=this,borders=$.timepicker._getBorders(inst.tpDiv);inst.tpDiv.empty().append(this._generateHTML(inst)).find("iframe.ui-timepicker-cover").css({left:-borders[0],top:-borders[1],width:inst.tpDiv.outerWidth(),height:inst.tpDiv.outerHeight()}).end().find(".ui-timepicker td a").bind("mouseout",function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-timepicker-prev")&&$(this).removeClass("ui-timepicker-prev-hover"),-1!=this.className.indexOf("ui-timepicker-next")&&$(this).removeClass("ui-timepicker-next-hover")}).bind("mouseover",function(){self._isDisabledTimepicker(inst.inline?inst.tpDiv.parent()[0]:inst.input[0])||($(this).parents(".ui-timepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-timepicker-prev")&&$(this).addClass("ui-timepicker-prev-hover"),-1!=this.className.indexOf("ui-timepicker-next")&&$(this).addClass("ui-timepicker-next-hover"))}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end()},_generateHTML:function(inst){var h,html="",showPeriod=1==this._get(inst,"showPeriod"),showLeadingZero=1==this._get(inst,"showLeadingZero"),amPmText=this._get(inst,"amPmText");for(html='<table class="ui-timepicker-table ui-widget-content ui-corner-all"><tr><td class="ui-timepicker-hours"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+this._get(inst,"hourText")+'</div><table class="ui-timepicker">',html+='<tr><th rowspan="2" class="periods">'+amPmText[0]+"</th>",h=0;5>=h;h++)html+=this._generateHTMLHourCell(inst,h,showPeriod,showLeadingZero);for(html+="</tr><tr>",h=6;11>=h;h++)html+=this._generateHTMLHourCell(inst,h,showPeriod,showLeadingZero);for(html+='</tr><tr><th rowspan="2" class="periods">'+amPmText[1]+"</th>",h=12;17>=h;h++)html+=this._generateHTMLHourCell(inst,h,showPeriod,showLeadingZero);for(html+="</tr><tr>",h=18;23>=h;h++)html+=this._generateHTMLHourCell(inst,h,showPeriod,showLeadingZero);return html+='</tr></table></td><td class="ui-timepicker-minutes">',html+=this._generateHTMLMinutes(inst),html+="</td></tr></table>"},_updateMinuteDisplay:function(inst){var newHtml=this._generateHTMLMinutes(inst);inst.tpDiv.find("td.ui-timepicker-minutes").html(newHtml)},_generateHTMLMinutes:function(inst){var m,showMinutesLeadingZero=1==this._get(inst,"showMinutesLeadingZero"),onMinuteShow=this._get(inst,"onMinuteShow");if(onMinuteShow&&0==onMinuteShow.apply(inst.input?inst.input[0]:null,[inst.hours,inst.minutes]))for(m=0;60>m;m+=5)if(onMinuteShow.apply(inst.input?inst.input[0]:null,[inst.hours,m])){inst.minutes=m;break}var html='<div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+this._get(inst,"minuteText")+'</div><table class="ui-timepicker"><tr>';for(m=0;15>m;m+=5)html+=this._generateHTMLMinuteCell(inst,m,10>m&&showMinutesLeadingZero?"0"+m.toString():m.toString());for(html+="</tr><tr>",m=15;30>m;m+=5)html+=this._generateHTMLMinuteCell(inst,m,m.toString());for(html+="</tr><tr>",m=30;45>m;m+=5)html+=this._generateHTMLMinuteCell(inst,m,m.toString());for(html+="</tr><tr>",m=45;60>m;m+=5)html+=this._generateHTMLMinuteCell(inst,m,m.toString());return html+="</tr></table>"},_generateHTMLHourCell:function(inst,hour,showPeriod,showLeadingZero){var displayHour=hour;hour>12&&showPeriod&&(displayHour=hour-12),0==displayHour&&showPeriod&&(displayHour=12),10>displayHour&&showLeadingZero&&(displayHour="0"+displayHour);var html="",enabled=!0,onHourShow=this._get(inst,"onHourShow");
return onHourShow&&(enabled=onHourShow.apply(inst.input?inst.input[0]:null,[hour])),html=enabled?'<td onclick="TP_jQuery_'+tpuuid+".timepicker.selectHours('#"+inst.id+"', "+hour.toString()+', this ); return false;" ondblclick="TP_jQuery_'+tpuuid+".timepicker.selectHours('#"+inst.id+"', "+hour.toString()+', this, true ); return false;" ><a href="#" class="ui-state-default '+(hour==inst.hours?"ui-state-active":"")+'">'+displayHour.toString()+"</a></td>":'<td><span class="ui-state-default ui-state-disabled'+(hour==inst.hours?"ui-state-active":"")+'">'+displayHour.toString()+"</span></td>"},_generateHTMLMinuteCell:function(inst,minute,displayText){var html="",enabled=!0,onMinuteShow=this._get(inst,"onMinuteShow");return onMinuteShow&&(enabled=onMinuteShow.apply(inst.input?inst.input[0]:null,[inst.hours,minute])),html=enabled?'<td onclick="TP_jQuery_'+tpuuid+".timepicker.selectMinutes('#"+inst.id+"', "+minute.toString()+', this ); return false;" ondblclick="TP_jQuery_'+tpuuid+".timepicker.selectMinutes('#"+inst.id+"', "+minute.toString()+', this, true ); return false;" ><a href="#" class="ui-state-default '+(minute==inst.minutes?"ui-state-active":"")+'" >'+displayText+"</a></td>":'<td><span class="ui-state-default ui-state-disabled" >'+displayText+"</span></td>"},_isDisabledTimepicker:function(target){if(!target)return!1;for(var i=0;i<this._disabledInputs.length;i++)if(this._disabledInputs[i]==target)return!0;return!1},_checkOffset:function(inst,offset,isFixed){var tpWidth=inst.tpDiv.outerWidth(),tpHeight=inst.tpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+$(document).scrollLeft(),viewHeight=document.documentElement.clientHeight+$(document).scrollTop();return offset.left-=this._get(inst,"isRTL")?tpWidth-inputWidth:0,offset.left-=isFixed&&offset.left==inst.input.offset().left?$(document).scrollLeft():0,offset.top-=isFixed&&offset.top==inst.input.offset().top+inputHeight?$(document).scrollTop():0,offset.left-=Math.min(offset.left,offset.left+tpWidth>viewWidth&&viewWidth>tpWidth?Math.abs(offset.left+tpWidth-viewWidth):0),offset.top-=Math.min(offset.top,offset.top+tpHeight>viewHeight&&viewHeight>tpHeight?Math.abs(tpHeight+inputHeight):0),offset},_findPos:function(obj){for(var inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");obj&&("hidden"==obj.type||1!=obj.nodeType);)obj=obj[isRTL?"previousSibling":"nextSibling"];var position=$(obj).offset();return[position.left,position.top]},_getBorders:function(elem){var convert=function(value){return{thin:1,medium:2,thick:3}[value]||value};return[parseFloat(convert(elem.css("border-left-width"))),parseFloat(convert(elem.css("border-top-width")))]},_checkExternalClick:function(event){if($.timepicker._curInst){var $target=$(event.target);$target[0].id==$.timepicker._mainDivId||0!=$target.parents("#"+$.timepicker._mainDivId).length||$target.hasClass($.timepicker.markerClassName)||$target.hasClass($.timepicker._triggerClass)||!$.timepicker._timepickerShowing||$.timepicker._inDialog&&$.blockUI||$.timepicker._hideTimepicker()}},_hideTimepicker:function(input){var inst=this._curInst;if(inst&&(!input||inst==$.data(input,PROP_NAME))&&this._timepickerShowing){var showAnim=this._get(inst,"showAnim"),duration=this._get(inst,"duration"),postProcess=function(){$.timepicker._tidyDialog(inst),this._curInst=null};$.effects&&$.effects[showAnim]?inst.tpDiv.hide(showAnim,$.timepicker._get(inst,"showOptions"),duration,postProcess):inst.tpDiv["slideDown"==showAnim?"slideUp":"fadeIn"==showAnim?"fadeOut":"hide"](showAnim?duration:null,postProcess),showAnim||postProcess();var onClose=this._get(inst,"onClose");onClose&&onClose.apply(inst.input?inst.input[0]:null,[inst.input?inst.input.val():"",inst]),this._timepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.tpDiv))),this._inDialog=!1}},_tidyDialog:function(inst){inst.tpDiv.removeClass(this._dialogClass).unbind(".ui-timepicker")},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this timepicker"}},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setTimeFromField:function(inst){if(inst.input.val()!=inst.lastVal){var defaultTime=this._get(inst,"defaultTime"),timeToParse=this._getCurrentTimeRounded(inst);""!=defaultTime&&(timeToParse=defaultTime),0==inst.inline&&""!=inst.input.val()&&(timeToParse=inst.input.val());var timeVal=inst.lastVal=timeToParse,time=this.parseTime(inst,timeVal);inst.hours=time.hours,inst.minutes=time.minutes,$.timepicker._updateTimepicker(inst)}},_setTimeTimepicker:function(target,time){var inst=this._getInst(target);inst&&(this._setTime(inst,time),this._updateTimepicker(inst),this._updateAlternate(inst))},_setTime:function(inst,time,noChange){var origHours=inst.hours,origMinutes=inst.minutes,time=this.parseTime(inst,time);inst.hours=time.hours,inst.minutes=time.minutes,origHours==inst.hours&&origMinutes==inst.minuts||noChange||inst.input.trigger("change"),this._updateTimepicker(inst),this._updateSelectedValue(inst)},_getCurrentTimeRounded:function(inst){var currentTime=new Date,timeSeparator=this._get(inst,"timeSeparator"),currentMinutes=currentTime.getMinutes();return currentMinutes=5*Math.round(currentMinutes/5),currentTime.getHours().toString()+timeSeparator+currentMinutes.toString()},parseTime:function(inst,timeVal){var retVal=new Object;retVal.hours=-1,retVal.minutes=-1;var timeSeparator=this._get(inst,"timeSeparator"),amPmText=this._get(inst,"amPmText"),p=timeVal.indexOf(timeSeparator);if(-1==p)return retVal;retVal.hours=parseInt(timeVal.substr(0,p),10),retVal.minutes=parseInt(timeVal.substr(p+1),10);var showPeriod=1==this._get(inst,"showPeriod"),timeValUpper=timeVal.toUpperCase();return retVal.hours<12&&showPeriod&&-1!=timeValUpper.indexOf(amPmText[1].toUpperCase())&&(retVal.hours+=12),12==retVal.hours&&showPeriod&&-1!=timeValUpper.indexOf(amPmText[0].toUpperCase())&&(retVal.hours=0),retVal},selectHours:function(id,newHours,td,fromDoubleClick){var target=$(id),inst=this._getInst(target[0]);if($(td).parents(".ui-timepicker-hours:first").find("a").removeClass("ui-state-active"),$(td).children("a").addClass("ui-state-active"),inst.hours=newHours,this._updateSelectedValue(inst),inst._hoursClicked=!0,inst._minutesClicked||fromDoubleClick)return void $.timepicker._hideTimepicker();var onMinuteShow=this._get(inst,"onMinuteShow");onMinuteShow&&this._updateMinuteDisplay(inst)},selectMinutes:function(id,newMinutes,td,fromDoubleClick){var target=$(id),inst=this._getInst(target[0]);$(td).parents(".ui-timepicker-minutes:first").find("a").removeClass("ui-state-active"),$(td).children("a").addClass("ui-state-active"),inst.minutes=newMinutes,this._updateSelectedValue(inst),inst._minutesClicked=!0,(inst._hoursClicked||fromDoubleClick)&&$.timepicker._hideTimepicker()},_updateSelectedValue:function(inst){(inst.hours<0||inst.hours>23)&&(inst.hours=12),(inst.minutes<0||inst.minutes>59)&&(inst.minutes=0);var period="",showPeriod=1==this._get(inst,"showPeriod"),showLeadingZero=1==this._get(inst,"showLeadingZero"),amPmText=this._get(inst,"amPmText"),selectedHours=inst.hours?inst.hours:0,selectedMinutes=inst.minutes?inst.minutes:0,displayHours=selectedHours;displayHours||(displayHoyrs=0),showPeriod&&(0==inst.hours&&(displayHours=12),inst.hours<12?period=amPmText[0]:(period=amPmText[1],displayHours>12&&(displayHours-=12)));var h=displayHours.toString();showLeadingZero&&10>displayHours&&(h="0"+h);var m=selectedMinutes.toString();10>selectedMinutes&&(m="0"+m);var newTime=h+this._get(inst,"timeSeparator")+m;period.length>0&&(newTime+=" "+period),inst.input&&(inst.input.val(newTime),inst.input.trigger("change"));var onSelect=this._get(inst,"onSelect");return onSelect&&onSelect.apply(inst.input?inst.input[0]:null,[newTime,inst]),this._updateAlternate(inst,newTime),newTime},_updateAlternate:function(inst,newTime){var altField=this._get(inst,"altField");altField&&$(altField).each(function(){$(this).val(newTime)})}}),$.fn.timepicker=function(options){$.timepicker.initialized||($(document).mousedown($.timepicker._checkExternalClick).find("body").append($.timepicker.tpDiv),$.timepicker.initialized=!0);var otherArgs=Array.prototype.slice.call(arguments,1);return"string"!=typeof options||"isDisabled"!=options&&"getTime"!=options&&"widget"!=options?"option"==options&&2==arguments.length&&"string"==typeof arguments[1]?$.timepicker["_"+options+"Datepicker"].apply($.timepicker,[this[0]].concat(otherArgs)):this.each(function(){"string"==typeof options?$.timepicker["_"+options+"Timepicker"].apply($.timepicker,[this].concat(otherArgs)):$.timepicker._attachTimepicker(this,options)}):$.timepicker["_"+options+"Datepicker"].apply($.timepicker,[this[0]].concat(otherArgs))},$.timepicker=new Timepicker,$.timepicker.initialized=!1,$.timepicker.uuid=(new Date).getTime(),$.timepicker.version="1.8.6",window["TP_jQuery_"+tpuuid]=$}(jQuery),function($){$.noty.themes.defaultTheme={name:"defaultTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var selector=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":$(selector).css({borderRadius:"0px 0px 0px 0px"}),$(selector).last().css({borderRadius:"0px 0px 5px 5px"});break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":$(selector).css({borderRadius:"0px 0px 0px 0px"}),$(selector).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),$(selector).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":$(selector).css({borderRadius:"0px 0px 0px 0px"}),$(selector).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",background:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPZJREFUeNq81tsOgjAMANB2ov7/7ypaN7IlIwi9rGuT8QSc9EIDAsAznxvY4pXPKr05RUE5MEVB+TyWfCEl9LZApYopCmo9C4FKSMtYoI8Bwv79aQJU4l6hXXCZrQbokJEksxHo9KMOgc6w1atHXM8K9DVC7FQnJ0i8iK3QooGgbnyKgMDygBWyYFZoqx4qS27KqLZJjA1D0jK6QJcYEQEiWv9PGkTsbqxQ8oT+ZtZB6AkdsJnQDnMoHXHLGKOgDYuCWmYhEERCI5gaamW0bnHdA3k2ltlIN+2qKRyCND0bhqSYCyTB3CAOc4WusBEIpkeBuPgJMAAX8Hs1NfqHRgAAAABJRU5ErkJggg==') repeat-x scroll left top #fff"}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAATpJREFUeNoszrFqVFEUheG19zlz7sQ7ijMQBAvfYBqbpJCoZSAQbOwEE1IHGytbLQUJ8SUktW8gCCFJMSGSNxCmFBJO7j5rpXD6n5/P5vM53H3b3T9LOiB5AQDuDjM7BnA7DMPHDGBH0nuSzwHsRcRVRNRSysuU0i6AOwA/02w2+9Fae00SEbEh6SGAR5K+k3zWWptKepCm0+kpyRoRGyRBcpPkDsn1iEBr7drdP2VJZyQXERGSPpiZAViTBACXKaV9kqd5uVzCzO5KKb/d/UZSDwD/eyxqree1VqSu6zKAF2Z2RPJJaw0rAkjOJT0m+SuT/AbgDcmnkmBmfwAsJL1dXQ8lWY6IGwB1ZbrOOb8zs8thGP4COFwx/mE8Ho9Go9ErMzvJOW/1fY/JZIJSypqZfXX3L13X9fcDAKJct1sx3OiuAAAAAElFTkSuQmCC)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.bind({mouseenter:function(){$(this).find(".noty_close").fadeIn()},mouseleave:function(){$(this).find(".noty_close").fadeOut()}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 5px 5px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"5px 5px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"red",borderColor:"darkred",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){$.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){$.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}}}(jQuery),function($){$.noty.layouts.inline={name:"inline",options:{},container:{object:'<ul id="noty_inline_layout_container" />',selector:"ul#noty_inline_layout_container",style:function(){$(this).css({width:"100%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),"function"!=typeof Object.create&&(Object.create=function(o){function F(){}return F.prototype=o,new F}),function($){var NotyObject={init:function(options){return this.options=$.extend({},$.noty.defaults,options),this.options.layout=this.options.custom?$.noty.layouts.inline:$.noty.layouts[this.options.layout],this.options.theme=$.noty.themes[this.options.theme],delete options.layout,delete options.theme,this.options=$.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this.options=$.extend({},this.options,options),this._build(),this},_build:function(){var $bar=$('<div class="noty_bar"></div>').attr("id",this.options.id);if($bar.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?$(this.options.layout.parent.object).css(this.options.layout.parent.css).append($bar):$bar,this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var $buttons=$("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append($buttons):this.$bar.append($buttons);var self=this;$.each(this.options.buttons,function(i,button){var $button=$("<button/>").addClass(button.addClass?button.addClass:"gray").html(button.text).appendTo(self.$bar.find(".noty_buttons")).bind("click",function(){$.isFunction(button.onClick)&&button.onClick.call($button,self)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),$.noty.store[this.options.id]=this},show:function(){var self=this;return $(self.options.layout.container.selector).append(self.$bar),self.options.theme.style.apply(self),"function"===$.type(self.options.layout.css)?this.options.layout.css.apply(self.$bar):self.$bar.css(this.options.layout.css||{}),self.$bar.addClass(self.options.layout.addClass),self.options.layout.container.style.apply($(self.options.layout.container.selector)),self.options.theme.callback.onShow.apply(this),$.inArray("click",self.options.closeWith)>-1&&self.$bar.css("cursor","pointer").one("click",function(){self.close()}),$.inArray("hover",self.options.closeWith)>-1&&self.$bar.one("mouseenter",function(){self.close()}),$.inArray("button",self.options.closeWith)>-1&&self.$closeButton.one("click",function(){self.close()}),-1==$.inArray("button",self.options.closeWith)&&self.$closeButton.remove(),self.options.callback.onShow&&self.options.callback.onShow.apply(self),self.$bar.animate(self.options.animation.open,self.options.animation.speed,self.options.animation.easing,function(){self.options.callback.afterShow&&self.options.callback.afterShow.apply(self),self.shown=!0}),self.options.timeout&&self.$bar.delay(self.options.timeout).promise().done(function(){self.close()}),this},close:function(){if(!this.closed){var self=this;if(!this.shown){var queue=[];return $.each($.noty.queue,function(i,n){n.options.id!=self.options.id&&queue.push(n)}),void($.noty.queue=queue)}self.$bar.addClass("i-am-closing-now"),self.options.callback.onClose&&self.options.callback.onClose.apply(self),self.$bar.clearQueue().stop().animate(self.options.animation.close,self.options.animation.speed,self.options.animation.easing,function(){self.options.callback.afterClose&&self.options.callback.afterClose.apply(self)}).promise().done(function(){self.options.modal&&($.notyRenderer.setModalCount(-1),0==$.notyRenderer.getModalCount()&&$(".noty_modal").fadeOut("fast",function(){$(this).remove()})),$.notyRenderer.setLayoutCountFor(self,-1),0==$.notyRenderer.getLayoutCountFor(self)&&$(self.options.layout.container.selector).remove(),"undefined"!=typeof self.$bar&&null!==self.$bar&&(self.$bar.remove(),self.$bar=null,self.closed=!0),delete $.noty.store[self.options.id],self.options.theme.callback.onClose.apply(self),self.options.dismissQueue||($.noty.ontap=!0,$.notyRenderer.render())})}},setText:function(text){return this.closed||(this.options.text=text,this.$bar.find(".noty_text").html(text)),this},setType:function(type){return this.closed||(this.options.type=type,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(time){if(!this.closed){var self=this;this.options.timeout=time,self.$bar.delay(self.options.timeout).promise().done(function(){self.close()})}return this},setAnimationSpeed:function(time){this.options.animation.speed=time},closed:!1,shown:!1};$.notyRenderer={},$.notyRenderer.init=function(options){var notification=Object.create(NotyObject).init(options);return notification.options.force?$.noty.queue.unshift(notification):$.noty.queue.push(notification),$.notyRenderer.render(),"object"==$.noty.returns?notification:notification.options.id},$.notyRenderer.render=function(){var instance=$.noty.queue[0];"object"===$.type(instance)?instance.options.dismissQueue?$.notyRenderer.show($.noty.queue.shift()):$.noty.ontap&&($.notyRenderer.show($.noty.queue.shift()),$.noty.ontap=!1):$.noty.ontap=!0},$.notyRenderer.show=function(notification){notification.options.modal&&($.notyRenderer.createModalFor(notification),$.notyRenderer.setModalCount(1)),0==$(notification.options.layout.container.selector).length?notification.options.custom?notification.options.custom.append($(notification.options.layout.container.object).addClass("i-am-new")):$("body").append($(notification.options.layout.container.object).addClass("i-am-new")):$(notification.options.layout.container.selector).removeClass("i-am-new"),$.notyRenderer.setLayoutCountFor(notification,1),notification.show()},$.notyRenderer.createModalFor=function(notification){0==$(".noty_modal").length&&$("<div/>").addClass("noty_modal").data("noty_modal_count",0).css(notification.options.theme.modal.css).prependTo($("body")).fadeIn("fast")},$.notyRenderer.getLayoutCountFor=function(notification){return $(notification.options.layout.container.selector).data("noty_layout_count")||0},$.notyRenderer.setLayoutCountFor=function(notification,arg){return $(notification.options.layout.container.selector).data("noty_layout_count",$.notyRenderer.getLayoutCountFor(notification)+arg)},$.notyRenderer.getModalCount=function(){return $(".noty_modal").data("noty_modal_count")||0},$.notyRenderer.setModalCount=function(arg){return $(".noty_modal").data("noty_modal_count",$.notyRenderer.getModalCount()+arg)},$.fn.noty=function(options){return options.custom=$(this),$.notyRenderer.init(options)},$.noty={},$.noty.queue=[],$.noty.ontap=!0,$.noty.layouts={},$.noty.themes={},$.noty.returns="object",$.noty.store={},$.noty.get=function(id){return $.noty.store.hasOwnProperty(id)?$.noty.store[id]:!1},$.noty.close=function(id){return $.noty.get(id)?$.noty.get(id).close():!1},$.noty.closeByElementId=function(eid){var targets=[];$.each($.noty.store,function(key,value){value.options.elementId==eid&&targets.push(value)}),$(targets).each(function(i,item){item.close()})},$.noty.closeByViewId=function(cid){var targets=[];$.each($.noty.store,function(key,value){value.options.viewId==cid&&targets.push(value)}),$(targets).each(function(i,item){item.close()})},$.noty.getByViewIdAndElementId=function(viewId,elementId){var result="";return $.each($.noty.store,function(key,value){viewId&&value.options.viewId!=viewId||elementId&&value.options.elementId!=elementId||(result=value)}),result},$.noty.closeAllErrorsByViewId=function(cid){var targets=[];$.each($.noty.store,function(key,value){value.options.viewId==cid&&"error"==value.options.type&&targets.push(value)}),$(targets).each(function(i,item){item.close()})},$.noty.setText=function(id,text){return $.noty.get(id)?$.noty.get(id).setText(text):!1},$.noty.setType=function(id,type){return $.noty.get(id)?$.noty.get(id).setType(type):!1},$.noty.clearQueue=function(){$.noty.queue=[]},$.noty.closeAll=function(){$.noty.clearQueue(),$.each($.noty.store,function(id,noty){noty.close()})};var windowAlert=window.alert;$.noty.consumeAlert=function(options){window.alert=function(text){options?options.text=text:options={text:text},$.notyRenderer.init(options)}},$.noty.stopConsumeAlert=function(){window.alert=windowAlert},$.noty.defaults={layout:"topCenter",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:300},timeout:!1,force:!1,modal:!1,closeWith:[],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){}},buttons:!1},$(window).resize(function(){$.each($.noty.layouts,function(index,layout){layout.container.style.apply($(layout.container.selector))})})}(jQuery),function($){$.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){$(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function($){$.noty.layouts.topCenter={name:"topCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){$(this).css({top:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),$(this).css({left:($(window).width()-$(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function($){$.noty.layouts.topLeft={name:"topLeft",options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:"ul#noty_topLeft_layout_container",style:function(){$(this).css({top:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&$(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),jasmine.HtmlReporterHelpers={},jasmine.HtmlReporterHelpers.createDom=function(type,attrs){for(var el=document.createElement(type),i=2;i<arguments.length;i++){var child=arguments[i];"string"==typeof child?el.appendChild(document.createTextNode(child)):child&&el.appendChild(child)}for(var attr in attrs)"className"==attr?el[attr]=attrs[attr]:el.setAttribute(attr,attrs[attr]);return el},jasmine.HtmlReporterHelpers.getSpecStatus=function(child){var results=child.results(),status=results.passed()?"passed":"failed";return results.skipped&&(status="skipped"),status},jasmine.HtmlReporterHelpers.appendToSummary=function(child,childElement){var parentDiv=this.dom.summary,parentSuite="undefined"==typeof child.parentSuite?"suite":"parentSuite",parent=child[parentSuite];parent&&("undefined"==typeof this.views.suites[parent.id]&&(this.views.suites[parent.id]=new jasmine.HtmlReporter.SuiteView(parent,this.dom,this.views)),parentDiv=this.views.suites[parent.id].element),parentDiv.appendChild(childElement)},jasmine.HtmlReporterHelpers.addHelpers=function(ctor){for(var fn in jasmine.HtmlReporterHelpers)ctor.prototype[fn]=jasmine.HtmlReporterHelpers[fn]},jasmine.HtmlReporter=function(_doc){function focusedSpecName(){var specName;return function(){if(!specName){for(var paramMap=[],params=doc.location.search.substring(1).split("&"),i=0;i<params.length;i++){var p=params[i].split("=");paramMap[decodeURIComponent(p[0])]=decodeURIComponent(p[1])}specName=paramMap.spec}}(),specName}function createReporterDom(version){dom.reporter=self.createDom("div",{id:"HTMLReporter",className:"jasmine_reporter"},dom.banner=self.createDom("div",{className:"banner"},self.createDom("span",{className:"title"},"Jasmine "),self.createDom("span",{className:"version"},version)),dom.symbolSummary=self.createDom("ul",{className:"symbolSummary"}),dom.alert=self.createDom("div",{className:"alert"}),dom.results=self.createDom("div",{className:"results"},dom.summary=self.createDom("div",{className:"summary"}),dom.details=self.createDom("div",{id:"details"})))}var reporterView,self=this,doc=_doc||window.document,dom={};return self.logRunningSpecs=!1,self.reportRunnerStarting=function(runner){var specs=runner.specs()||[];0!=specs.length&&(createReporterDom(runner.env.versionString()),doc.body.appendChild(dom.reporter),reporterView=new jasmine.HtmlReporter.ReporterView(dom),reporterView.addSpecs(specs,self.specFilter))},self.reportRunnerResults=function(){reporterView&&reporterView.complete()},self.reportSuiteResults=function(suite){reporterView.suiteComplete(suite)},self.reportSpecStarting=function(spec){self.logRunningSpecs&&self.log(">> Jasmine Running "+spec.suite.description+" "+spec.description+"...")},self.reportSpecResults=function(spec){reporterView.specComplete(spec)},self.log=function(){var console=jasmine.getGlobal().console;console&&console.log&&(console.log.apply?console.log.apply(console,arguments):console.log(arguments))},self.specFilter=function(spec){return focusedSpecName()?0===spec.getFullName().indexOf(focusedSpecName()):!0},self},jasmine.HtmlReporterHelpers.addHelpers(jasmine.HtmlReporter),jasmine.HtmlReporter.ReporterView=function(dom){function showDetails(){-1===dom.reporter.className.search(/showDetails/)&&(dom.reporter.className+=" showDetails")}function isUndefined(obj){return"undefined"==typeof obj}function isDefined(obj){return!isUndefined(obj)}function specPluralizedFor(count){var str=count+" spec";return count>1&&(str+="s"),str}return this.startedAt=new Date,this.runningSpecCount=0,this.completeSpecCount=0,this.passedCount=0,this.failedCount=0,this.skippedCount=0,this.createResultsMenu=function(){this.resultsMenu=this.createDom("span",{className:"resultsMenu bar"},this.summaryMenuItem=this.createDom("a",{className:"summaryMenuItem",href:"#"},"0 specs")," | ",this.detailsMenuItem=this.createDom("a",{className:"detailsMenuItem",href:"#"},"0 failing")),this.summaryMenuItem.onclick=function(){dom.reporter.className=dom.reporter.className.replace(/ showDetails/g,"")},this.detailsMenuItem.onclick=function(){showDetails()}},this.addSpecs=function(specs,specFilter){this.totalSpecCount=specs.length,this.views={specs:{},suites:{}};
for(var i=0;i<specs.length;i++){var spec=specs[i];this.views.specs[spec.id]=new jasmine.HtmlReporter.SpecView(spec,dom,this.views),specFilter(spec)&&this.runningSpecCount++}},this.specComplete=function(spec){this.completeSpecCount++,isUndefined(this.views.specs[spec.id])&&(this.views.specs[spec.id]=new jasmine.HtmlReporter.SpecView(spec,dom));var specView=this.views.specs[spec.id];switch(specView.status()){case"passed":this.passedCount++;break;case"failed":this.failedCount++;break;case"skipped":this.skippedCount++}specView.refresh(),this.refresh()},this.suiteComplete=function(suite){var suiteView=this.views.suites[suite.id];isUndefined(suiteView)||suiteView.refresh()},this.refresh=function(){isUndefined(this.resultsMenu)&&this.createResultsMenu(),isUndefined(this.runningAlert)&&(this.runningAlert=this.createDom("a",{href:"?",className:"runningAlert bar"}),dom.alert.appendChild(this.runningAlert)),this.runningAlert.innerHTML="Running "+this.completeSpecCount+" of "+specPluralizedFor(this.totalSpecCount),isUndefined(this.skippedAlert)&&(this.skippedAlert=this.createDom("a",{href:"?",className:"skippedAlert bar"})),this.skippedAlert.innerHTML="Skipping "+this.skippedCount+" of "+specPluralizedFor(this.totalSpecCount)+" - run all",1===this.skippedCount&&isDefined(dom.alert)&&dom.alert.appendChild(this.skippedAlert),isUndefined(this.passedAlert)&&(this.passedAlert=this.createDom("span",{href:"?",className:"passingAlert bar"})),this.passedAlert.innerHTML="Passing "+specPluralizedFor(this.passedCount),isUndefined(this.failedAlert)&&(this.failedAlert=this.createDom("span",{href:"?",className:"failingAlert bar"})),this.failedAlert.innerHTML="Failing "+specPluralizedFor(this.failedCount),1===this.failedCount&&isDefined(dom.alert)&&(dom.alert.appendChild(this.failedAlert),dom.alert.appendChild(this.resultsMenu)),this.summaryMenuItem.innerHTML=""+specPluralizedFor(this.runningSpecCount),this.detailsMenuItem.innerHTML=""+this.failedCount+" failing"},this.complete=function(){dom.alert.removeChild(this.runningAlert),this.skippedAlert.innerHTML="Ran "+this.runningSpecCount+" of "+specPluralizedFor(this.totalSpecCount)+" - run all",0===this.failedCount?dom.alert.appendChild(this.createDom("span",{className:"passingAlert bar"},"Passing "+specPluralizedFor(this.passedCount))):showDetails(),dom.banner.appendChild(this.createDom("span",{className:"duration"},"finished in "+((new Date).getTime()-this.startedAt.getTime())/1e3+"s"))},this},jasmine.HtmlReporterHelpers.addHelpers(jasmine.HtmlReporter.ReporterView),jasmine.HtmlReporter.SpecView=function(spec,dom,views){this.spec=spec,this.dom=dom,this.views=views,this.symbol=this.createDom("li",{className:"pending"}),this.dom.symbolSummary.appendChild(this.symbol),this.summary=this.createDom("div",{className:"specSummary"},this.createDom("a",{className:"description",href:"?spec="+encodeURIComponent(this.spec.getFullName()),title:this.spec.getFullName()},this.spec.description)),this.detail=this.createDom("div",{className:"specDetail"},this.createDom("a",{className:"description",href:"?spec="+encodeURIComponent(this.spec.getFullName()),title:this.spec.getFullName()},this.spec.getFullName()))},jasmine.HtmlReporter.SpecView.prototype.status=function(){return this.getSpecStatus(this.spec)},jasmine.HtmlReporter.SpecView.prototype.refresh=function(){switch(this.symbol.className=this.status(),this.status()){case"skipped":break;case"passed":this.appendSummaryToSuiteDiv();break;case"failed":this.appendSummaryToSuiteDiv(),this.appendFailureDetail()}},jasmine.HtmlReporter.SpecView.prototype.appendSummaryToSuiteDiv=function(){this.summary.className+=" "+this.status(),this.appendToSummary(this.spec,this.summary)},jasmine.HtmlReporter.SpecView.prototype.appendFailureDetail=function(){this.detail.className+=" "+this.status();for(var resultItems=this.spec.results().getItems(),messagesDiv=this.createDom("div",{className:"messages"}),i=0;i<resultItems.length;i++){var result=resultItems[i];"log"==result.type?messagesDiv.appendChild(this.createDom("div",{className:"resultMessage log"},result.toString())):"expect"==result.type&&result.passed&&!result.passed()&&(messagesDiv.appendChild(this.createDom("div",{className:"resultMessage fail"},result.message)),result.trace.stack&&messagesDiv.appendChild(this.createDom("div",{className:"stackTrace"},result.trace.stack)))}messagesDiv.childNodes.length>0&&(this.detail.appendChild(messagesDiv),this.dom.details.appendChild(this.detail))},jasmine.HtmlReporterHelpers.addHelpers(jasmine.HtmlReporter.SpecView),jasmine.HtmlReporter.SuiteView=function(suite,dom,views){this.suite=suite,this.dom=dom,this.views=views,this.element=this.createDom("div",{className:"suite"},this.createDom("a",{className:"description",href:"?spec="+encodeURIComponent(this.suite.getFullName())},this.suite.description)),this.appendToSummary(this.suite,this.element)},jasmine.HtmlReporter.SuiteView.prototype.status=function(){return this.getSpecStatus(this.suite)},jasmine.HtmlReporter.SuiteView.prototype.refresh=function(){this.element.className+=" "+this.status()},jasmine.HtmlReporterHelpers.addHelpers(jasmine.HtmlReporter.SuiteView),jasmine.TrivialReporter=function(doc){this.document=doc||document,this.suiteDivs={},this.logRunningSpecs=!1},jasmine.TrivialReporter.prototype.createDom=function(type,attrs){for(var el=document.createElement(type),i=2;i<arguments.length;i++){var child=arguments[i];"string"==typeof child?el.appendChild(document.createTextNode(child)):child&&el.appendChild(child)}for(var attr in attrs)"className"==attr?el[attr]=attrs[attr]:el.setAttribute(attr,attrs[attr]);return el},jasmine.TrivialReporter.prototype.reportRunnerStarting=function(runner){var showPassed,showSkipped;this.outerDiv=this.createDom("div",{id:"TrivialReporter",className:"jasmine_reporter"},this.createDom("div",{className:"banner"},this.createDom("div",{className:"logo"},this.createDom("span",{className:"title"},"Jasmine"),this.createDom("span",{className:"version"},runner.env.versionString())),this.createDom("div",{className:"options"},"Show ",showPassed=this.createDom("input",{id:"__jasmine_TrivialReporter_showPassed__",type:"checkbox"}),this.createDom("label",{"for":"__jasmine_TrivialReporter_showPassed__"}," passed "),showSkipped=this.createDom("input",{id:"__jasmine_TrivialReporter_showSkipped__",type:"checkbox"}),this.createDom("label",{"for":"__jasmine_TrivialReporter_showSkipped__"}," skipped"))),this.runnerDiv=this.createDom("div",{className:"runner running"},this.createDom("a",{className:"run_spec",href:"?"},"run all"),this.runnerMessageSpan=this.createDom("span",{},"Running..."),this.finishedAtSpan=this.createDom("span",{className:"finished-at"},""))),this.document.body.appendChild(this.outerDiv);for(var suites=runner.suites(),i=0;i<suites.length;i++){var suite=suites[i],suiteDiv=this.createDom("div",{className:"suite"},this.createDom("a",{className:"run_spec",href:"?spec="+encodeURIComponent(suite.getFullName())},"run"),this.createDom("a",{className:"description",href:"?spec="+encodeURIComponent(suite.getFullName())},suite.description));this.suiteDivs[suite.id]=suiteDiv;var parentDiv=this.outerDiv;suite.parentSuite&&(parentDiv=this.suiteDivs[suite.parentSuite.id]),parentDiv.appendChild(suiteDiv)}this.startedAt=new Date;var self=this;showPassed.onclick=function(){showPassed.checked?self.outerDiv.className+=" show-passed":self.outerDiv.className=self.outerDiv.className.replace(/ show-passed/,"")},showSkipped.onclick=function(){showSkipped.checked?self.outerDiv.className+=" show-skipped":self.outerDiv.className=self.outerDiv.className.replace(/ show-skipped/,"")}},jasmine.TrivialReporter.prototype.reportRunnerResults=function(runner){var results=runner.results(),className=results.failedCount>0?"runner failed":"runner passed";this.runnerDiv.setAttribute("class",className),this.runnerDiv.setAttribute("className",className);for(var specs=runner.specs(),specCount=0,i=0;i<specs.length;i++)this.specFilter(specs[i])&&specCount++;var message=""+specCount+" spec"+(1==specCount?"":"s")+", "+results.failedCount+" failure"+(1==results.failedCount?"":"s");message+=" in "+((new Date).getTime()-this.startedAt.getTime())/1e3+"s",this.runnerMessageSpan.replaceChild(this.createDom("a",{className:"description",href:"?"},message),this.runnerMessageSpan.firstChild),this.finishedAtSpan.appendChild(document.createTextNode("Finished at "+(new Date).toString()))},jasmine.TrivialReporter.prototype.reportSuiteResults=function(suite){var results=suite.results(),status=results.passed()?"passed":"failed";0===results.totalCount&&(status="skipped"),this.suiteDivs[suite.id].className+=" "+status},jasmine.TrivialReporter.prototype.reportSpecStarting=function(spec){this.logRunningSpecs&&this.log(">> Jasmine Running "+spec.suite.description+" "+spec.description+"...")},jasmine.TrivialReporter.prototype.reportSpecResults=function(spec){var results=spec.results(),status=results.passed()?"passed":"failed";results.skipped&&(status="skipped");for(var specDiv=this.createDom("div",{className:"spec "+status},this.createDom("a",{className:"run_spec",href:"?spec="+encodeURIComponent(spec.getFullName())},"run"),this.createDom("a",{className:"description",href:"?spec="+encodeURIComponent(spec.getFullName()),title:spec.getFullName()},spec.description)),resultItems=results.getItems(),messagesDiv=this.createDom("div",{className:"messages"}),i=0;i<resultItems.length;i++){var result=resultItems[i];"log"==result.type?messagesDiv.appendChild(this.createDom("div",{className:"resultMessage log"},result.toString())):"expect"==result.type&&result.passed&&!result.passed()&&(messagesDiv.appendChild(this.createDom("div",{className:"resultMessage fail"},result.message)),result.trace.stack&&messagesDiv.appendChild(this.createDom("div",{className:"stackTrace"},result.trace.stack)))}messagesDiv.childNodes.length>0&&specDiv.appendChild(messagesDiv),this.suiteDivs[spec.suite.id].appendChild(specDiv)},jasmine.TrivialReporter.prototype.log=function(){var console=jasmine.getGlobal().console;console&&console.log&&(console.log.apply?console.log.apply(console,arguments):console.log(arguments))},jasmine.TrivialReporter.prototype.getLocation=function(){return this.document.location},jasmine.TrivialReporter.prototype.specFilter=function(spec){for(var paramMap={},params=this.getLocation().search.substring(1).split("&"),i=0;i<params.length;i++){var p=params[i].split("=");paramMap[decodeURIComponent(p[0])]=decodeURIComponent(p[1])}return paramMap.spec?0===spec.getFullName().indexOf(paramMap.spec):!0};var isCommonJS="undefined"==typeof window,jasmine={};isCommonJS&&(exports.jasmine=jasmine),jasmine.unimplementedMethod_=function(){throw new Error("unimplemented method")},jasmine.undefined=jasmine.___undefined___,jasmine.VERBOSE=!1,jasmine.DEFAULT_UPDATE_INTERVAL=250,jasmine.DEFAULT_TIMEOUT_INTERVAL=5e3,jasmine.getGlobal=function(){function getGlobal(){return this}return getGlobal()},jasmine.bindOriginal_=function(base,name){var original=base[name];return original.apply?function(){return original.apply(base,arguments)}:jasmine.getGlobal()[name]},jasmine.setTimeout=jasmine.bindOriginal_(jasmine.getGlobal(),"setTimeout"),jasmine.clearTimeout=jasmine.bindOriginal_(jasmine.getGlobal(),"clearTimeout"),jasmine.setInterval=jasmine.bindOriginal_(jasmine.getGlobal(),"setInterval"),jasmine.clearInterval=jasmine.bindOriginal_(jasmine.getGlobal(),"clearInterval"),jasmine.MessageResult=function(values){this.type="log",this.values=values,this.trace=new Error},jasmine.MessageResult.prototype.toString=function(){for(var text="",i=0;i<this.values.length;i++)i>0&&(text+=" "),text+=jasmine.isString_(this.values[i])?this.values[i]:jasmine.pp(this.values[i]);return text},jasmine.ExpectationResult=function(params){this.type="expect",this.matcherName=params.matcherName,this.passed_=params.passed,this.expected=params.expected,this.actual=params.actual,this.message=this.passed_?"Passed.":params.message;var trace=params.trace||new Error(this.message);this.trace=this.passed_?"":trace},jasmine.ExpectationResult.prototype.toString=function(){return this.message},jasmine.ExpectationResult.prototype.passed=function(){return this.passed_},jasmine.getEnv=function(){var env=jasmine.currentEnv_=jasmine.currentEnv_||new jasmine.Env;return env},jasmine.isArray_=function(value){return jasmine.isA_("Array",value)},jasmine.isString_=function(value){return jasmine.isA_("String",value)},jasmine.isNumber_=function(value){return jasmine.isA_("Number",value)},jasmine.isA_=function(typeName,value){return Object.prototype.toString.apply(value)==="[object "+typeName+"]"},jasmine.pp=function(value){var stringPrettyPrinter=new jasmine.StringPrettyPrinter;return stringPrettyPrinter.format(value),stringPrettyPrinter.string},jasmine.isDomNode=function(obj){return obj.nodeType>0},jasmine.any=function(clazz){return new jasmine.Matchers.Any(clazz)},jasmine.objectContaining=function(sample){return new jasmine.Matchers.ObjectContaining(sample)},jasmine.Spy=function(name){this.identity=name||"unknown",this.isSpy=!0,this.plan=function(){},this.mostRecentCall={},this.argsForCall=[],this.calls=[]},jasmine.Spy.prototype.andCallThrough=function(){return this.plan=this.originalValue,this},jasmine.Spy.prototype.andReturn=function(value){return this.plan=function(){return value},this},jasmine.Spy.prototype.andThrow=function(exceptionMsg){return this.plan=function(){throw exceptionMsg},this},jasmine.Spy.prototype.andCallFake=function(fakeFunc){return this.plan=fakeFunc,this},jasmine.Spy.prototype.reset=function(){this.wasCalled=!1,this.callCount=0,this.argsForCall=[],this.calls=[],this.mostRecentCall={}},jasmine.createSpy=function(name){var spyObj=function(){spyObj.wasCalled=!0,spyObj.callCount++;var args=jasmine.util.argsToArray(arguments);return spyObj.mostRecentCall.object=this,spyObj.mostRecentCall.args=args,spyObj.argsForCall.push(args),spyObj.calls.push({object:this,args:args}),spyObj.plan.apply(this,arguments)},spy=new jasmine.Spy(name);for(var prop in spy)spyObj[prop]=spy[prop];return spyObj.reset(),spyObj},jasmine.isSpy=function(putativeSpy){return putativeSpy&&putativeSpy.isSpy},jasmine.createSpyObj=function(baseName,methodNames){if(!jasmine.isArray_(methodNames)||0===methodNames.length)throw new Error("createSpyObj requires a non-empty array of method names to create spies for");for(var obj={},i=0;i<methodNames.length;i++)obj[methodNames[i]]=jasmine.createSpy(baseName+"."+methodNames[i]);return obj},jasmine.log=function(){var spec=jasmine.getEnv().currentSpec;spec.log.apply(spec,arguments)};var spyOn=function(obj,methodName){return jasmine.getEnv().currentSpec.spyOn(obj,methodName)};isCommonJS&&(exports.spyOn=spyOn);var it=function(desc,func){return jasmine.getEnv().it(desc,func)};isCommonJS&&(exports.it=it);var xit=function(desc,func){return jasmine.getEnv().xit(desc,func)};isCommonJS&&(exports.xit=xit);var expect=function(actual){return jasmine.getEnv().currentSpec.expect(actual)};isCommonJS&&(exports.expect=expect);var runs=function(func){jasmine.getEnv().currentSpec.runs(func)};isCommonJS&&(exports.runs=runs);var waits=function(timeout){jasmine.getEnv().currentSpec.waits(timeout)};isCommonJS&&(exports.waits=waits);var waitsFor=function(){jasmine.getEnv().currentSpec.waitsFor.apply(jasmine.getEnv().currentSpec,arguments)};isCommonJS&&(exports.waitsFor=waitsFor);var beforeEach=function(beforeEachFunction){jasmine.getEnv().beforeEach(beforeEachFunction)};isCommonJS&&(exports.beforeEach=beforeEach);var afterEach=function(afterEachFunction){jasmine.getEnv().afterEach(afterEachFunction)};isCommonJS&&(exports.afterEach=afterEach);var describe=function(description,specDefinitions){return jasmine.getEnv().describe(description,specDefinitions)};isCommonJS&&(exports.describe=describe);var xdescribe=function(description,specDefinitions){return jasmine.getEnv().xdescribe(description,specDefinitions)};isCommonJS&&(exports.xdescribe=xdescribe),jasmine.XmlHttpRequest="undefined"==typeof XMLHttpRequest?function(){function tryIt(f){try{return f()}catch(e){}return null}var xhr=tryIt(function(){return new ActiveXObject("Msxml2.XMLHTTP.6.0")})||tryIt(function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")})||tryIt(function(){return new ActiveXObject("Msxml2.XMLHTTP")})||tryIt(function(){return new ActiveXObject("Microsoft.XMLHTTP")});if(!xhr)throw new Error("This browser does not support XMLHttpRequest.");return xhr}:XMLHttpRequest,jasmine.util={},jasmine.util.inherit=function(childClass,parentClass){var subclass=function(){};subclass.prototype=parentClass.prototype,childClass.prototype=new subclass},jasmine.util.formatException=function(e){var lineNumber;e.line?lineNumber=e.line:e.lineNumber&&(lineNumber=e.lineNumber);var file;e.sourceURL?file=e.sourceURL:e.fileName&&(file=e.fileName);var message=e.name&&e.message?e.name+": "+e.message:e.toString();return file&&lineNumber&&(message+=" in "+file+" (line "+lineNumber+")"),message},jasmine.util.htmlEscape=function(str){return str?str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):str},jasmine.util.argsToArray=function(args){for(var arrayOfArgs=[],i=0;i<args.length;i++)arrayOfArgs.push(args[i]);return arrayOfArgs},jasmine.util.extend=function(destination,source){for(var property in source)destination[property]=source[property];return destination},jasmine.Env=function(){this.currentSpec=null,this.currentSuite=null,this.currentRunner_=new jasmine.Runner(this),this.reporter=new jasmine.MultiReporter,this.updateInterval=jasmine.DEFAULT_UPDATE_INTERVAL,this.defaultTimeoutInterval=jasmine.DEFAULT_TIMEOUT_INTERVAL,this.lastUpdate=0,this.specFilter=function(){return!0},this.nextSpecId_=0,this.nextSuiteId_=0,this.equalityTesters_=[],this.matchersClass=function(){jasmine.Matchers.apply(this,arguments)},jasmine.util.inherit(this.matchersClass,jasmine.Matchers),jasmine.Matchers.wrapInto_(jasmine.Matchers.prototype,this.matchersClass)},jasmine.Env.prototype.setTimeout=jasmine.setTimeout,jasmine.Env.prototype.clearTimeout=jasmine.clearTimeout,jasmine.Env.prototype.setInterval=jasmine.setInterval,jasmine.Env.prototype.clearInterval=jasmine.clearInterval,jasmine.Env.prototype.version=function(){if(jasmine.version_)return jasmine.version_;throw new Error("Version not set")},jasmine.Env.prototype.versionString=function(){if(!jasmine.version_)return"version unknown";var version=this.version(),versionString=version.major+"."+version.minor+"."+version.build;return version.release_candidate&&(versionString+=".rc"+version.release_candidate),versionString+=" revision "+version.revision},jasmine.Env.prototype.nextSpecId=function(){return this.nextSpecId_++},jasmine.Env.prototype.nextSuiteId=function(){return this.nextSuiteId_++},jasmine.Env.prototype.addReporter=function(reporter){this.reporter.addReporter(reporter)},jasmine.Env.prototype.execute=function(){this.currentRunner_.execute()},jasmine.Env.prototype.describe=function(description,specDefinitions){var suite=new jasmine.Suite(this,description,specDefinitions,this.currentSuite),parentSuite=this.currentSuite;parentSuite?parentSuite.add(suite):this.currentRunner_.add(suite),this.currentSuite=suite;var declarationError=null;try{specDefinitions.call(suite)}catch(e){declarationError=e}return declarationError&&this.it("encountered a declaration exception",function(){throw declarationError}),this.currentSuite=parentSuite,suite},jasmine.Env.prototype.beforeEach=function(beforeEachFunction){this.currentSuite?this.currentSuite.beforeEach(beforeEachFunction):this.currentRunner_.beforeEach(beforeEachFunction)},jasmine.Env.prototype.currentRunner=function(){return this.currentRunner_},jasmine.Env.prototype.afterEach=function(afterEachFunction){this.currentSuite?this.currentSuite.afterEach(afterEachFunction):this.currentRunner_.afterEach(afterEachFunction)},jasmine.Env.prototype.xdescribe=function(){return{execute:function(){}}},jasmine.Env.prototype.it=function(description,func){var spec=new jasmine.Spec(this,this.currentSuite,description);return this.currentSuite.add(spec),this.currentSpec=spec,func&&spec.runs(func),spec},jasmine.Env.prototype.xit=function(){return{id:this.nextSpecId(),runs:function(){}}},jasmine.Env.prototype.compareObjects_=function(a,b,mismatchKeys,mismatchValues){if(a.__Jasmine_been_here_before__===b&&b.__Jasmine_been_here_before__===a)return!0;a.__Jasmine_been_here_before__=b,b.__Jasmine_been_here_before__=a;var hasKey=function(obj,keyName){return null!==obj&&obj[keyName]!==jasmine.undefined};for(var property in b)!hasKey(a,property)&&hasKey(b,property)&&mismatchKeys.push("expected has key '"+property+"', but missing from actual.");for(property in a)!hasKey(b,property)&&hasKey(a,property)&&mismatchKeys.push("expected missing key '"+property+"', but present in actual.");for(property in b)"__Jasmine_been_here_before__"!=property&&(this.equals_(a[property],b[property],mismatchKeys,mismatchValues)||mismatchValues.push("'"+property+"' was '"+(b[property]?jasmine.util.htmlEscape(b[property].toString()):b[property])+"' in expected, but was '"+(a[property]?jasmine.util.htmlEscape(a[property].toString()):a[property])+"' in actual."));return jasmine.isArray_(a)&&jasmine.isArray_(b)&&a.length!=b.length&&mismatchValues.push("arrays were not the same length"),delete a.__Jasmine_been_here_before__,delete b.__Jasmine_been_here_before__,0===mismatchKeys.length&&0===mismatchValues.length},jasmine.Env.prototype.equals_=function(a,b,mismatchKeys,mismatchValues){mismatchKeys=mismatchKeys||[],mismatchValues=mismatchValues||[];for(var i=0;i<this.equalityTesters_.length;i++){var equalityTester=this.equalityTesters_[i],result=equalityTester(a,b,this,mismatchKeys,mismatchValues);if(result!==jasmine.undefined)return result}return a===b?!0:a===jasmine.undefined||null===a||b===jasmine.undefined||null===b?a==jasmine.undefined&&b==jasmine.undefined:jasmine.isDomNode(a)&&jasmine.isDomNode(b)?a===b:a instanceof Date&&b instanceof Date?a.getTime()==b.getTime():a.jasmineMatches?a.jasmineMatches(b):b.jasmineMatches?b.jasmineMatches(a):a instanceof jasmine.Matchers.ObjectContaining?a.matches(b):b instanceof jasmine.Matchers.ObjectContaining?b.matches(a):jasmine.isString_(a)&&jasmine.isString_(b)?a==b:jasmine.isNumber_(a)&&jasmine.isNumber_(b)?a==b:"object"==typeof a&&"object"==typeof b?this.compareObjects_(a,b,mismatchKeys,mismatchValues):a===b},jasmine.Env.prototype.contains_=function(haystack,needle){if(jasmine.isArray_(haystack)){for(var i=0;i<haystack.length;i++)if(this.equals_(haystack[i],needle))return!0;return!1}return haystack.indexOf(needle)>=0},jasmine.Env.prototype.addEqualityTester=function(equalityTester){this.equalityTesters_.push(equalityTester)},jasmine.Reporter=function(){},jasmine.Reporter.prototype.reportRunnerStarting=function(){},jasmine.Reporter.prototype.reportRunnerResults=function(){},jasmine.Reporter.prototype.reportSuiteResults=function(){},jasmine.Reporter.prototype.reportSpecStarting=function(){},jasmine.Reporter.prototype.reportSpecResults=function(){},jasmine.Reporter.prototype.log=function(){},jasmine.Block=function(env,func,spec){this.env=env,this.func=func,this.spec=spec},jasmine.Block.prototype.execute=function(onComplete){try{this.func.apply(this.spec)}catch(e){this.spec.fail(e)}onComplete()},jasmine.JsApiReporter=function(){this.started=!1,this.finished=!1,this.suites_=[],this.results_={}},jasmine.JsApiReporter.prototype.reportRunnerStarting=function(runner){this.started=!0;for(var suites=runner.topLevelSuites(),i=0;i<suites.length;i++){var suite=suites[i];this.suites_.push(this.summarize_(suite))}},jasmine.JsApiReporter.prototype.suites=function(){return this.suites_},jasmine.JsApiReporter.prototype.summarize_=function(suiteOrSpec){var isSuite=suiteOrSpec instanceof jasmine.Suite,summary={id:suiteOrSpec.id,name:suiteOrSpec.description,type:isSuite?"suite":"spec",children:[]};if(isSuite)for(var children=suiteOrSpec.children(),i=0;i<children.length;i++)summary.children.push(this.summarize_(children[i]));return summary},jasmine.JsApiReporter.prototype.results=function(){return this.results_},jasmine.JsApiReporter.prototype.resultsForSpec=function(specId){return this.results_[specId]},jasmine.JsApiReporter.prototype.reportRunnerResults=function(){this.finished=!0},jasmine.JsApiReporter.prototype.reportSuiteResults=function(){},jasmine.JsApiReporter.prototype.reportSpecResults=function(spec){this.results_[spec.id]={messages:spec.results().getItems(),result:spec.results().failedCount>0?"failed":"passed"}},jasmine.JsApiReporter.prototype.log=function(){},jasmine.JsApiReporter.prototype.resultsForSpecs=function(specIds){for(var results={},i=0;i<specIds.length;i++){var specId=specIds[i];results[specId]=this.summarizeResult_(this.results_[specId])}return results},jasmine.JsApiReporter.prototype.summarizeResult_=function(result){for(var summaryMessages=[],messagesLength=result.messages.length,messageIndex=0;messagesLength>messageIndex;messageIndex++){var resultMessage=result.messages[messageIndex];summaryMessages.push({text:"log"==resultMessage.type?resultMessage.toString():jasmine.undefined,passed:resultMessage.passed?resultMessage.passed():!0,type:resultMessage.type,message:resultMessage.message,trace:{stack:resultMessage.passed&&!resultMessage.passed()?resultMessage.trace.stack:jasmine.undefined}})}return{result:result.result,messages:summaryMessages}},jasmine.Matchers=function(env,actual,spec,opt_isNot){this.env=env,this.actual=actual,this.spec=spec,this.isNot=opt_isNot||!1,this.reportWasCalled_=!1},jasmine.Matchers.pp=function(){throw new Error("jasmine.Matchers.pp() is no longer supported, please use jasmine.pp() instead!")},jasmine.Matchers.prototype.report=function(){throw new Error("As of jasmine 0.11, custom matchers must be implemented differently -- please see jasmine docs")},jasmine.Matchers.wrapInto_=function(prototype,matchersClass){for(var methodName in prototype)if("report"!=methodName){var orig=prototype[methodName];matchersClass.prototype[methodName]=jasmine.Matchers.matcherFn_(methodName,orig)}},jasmine.Matchers.matcherFn_=function(matcherName,matcherFunction){return function(){var matcherArgs=jasmine.util.argsToArray(arguments),result=matcherFunction.apply(this,arguments);if(this.isNot&&(result=!result),this.reportWasCalled_)return result;var message;if(!result)if(this.message)message=this.message.apply(this,arguments),jasmine.isArray_(message)&&(message=message[this.isNot?1:0]);else{var englishyPredicate=matcherName.replace(/[A-Z]/g,function(s){return" "+s.toLowerCase()});if(message="Expected "+jasmine.pp(this.actual)+(this.isNot?" not ":" ")+englishyPredicate,matcherArgs.length>0)for(var i=0;i<matcherArgs.length;i++)i>0&&(message+=","),message+=" "+jasmine.pp(matcherArgs[i]);message+="."}var expectationResult=new jasmine.ExpectationResult({matcherName:matcherName,passed:result,expected:matcherArgs.length>1?matcherArgs:matcherArgs[0],actual:this.actual,message:message});return this.spec.addMatcherResult(expectationResult),jasmine.undefined}},jasmine.Matchers.prototype.toBe=function(expected){return this.actual===expected},jasmine.Matchers.prototype.toNotBe=function(expected){return this.actual!==expected},jasmine.Matchers.prototype.toEqual=function(expected){return this.env.equals_(this.actual,expected)},jasmine.Matchers.prototype.toNotEqual=function(expected){return!this.env.equals_(this.actual,expected)},jasmine.Matchers.prototype.toMatch=function(expected){return new RegExp(expected).test(this.actual)},jasmine.Matchers.prototype.toNotMatch=function(expected){return!new RegExp(expected).test(this.actual)},jasmine.Matchers.prototype.toBeDefined=function(){return this.actual!==jasmine.undefined},jasmine.Matchers.prototype.toBeUndefined=function(){return this.actual===jasmine.undefined},jasmine.Matchers.prototype.toBeNull=function(){return null===this.actual},jasmine.Matchers.prototype.toBeTruthy=function(){return!!this.actual},jasmine.Matchers.prototype.toBeFalsy=function(){return!this.actual},jasmine.Matchers.prototype.toHaveBeenCalled=function(){if(arguments.length>0)throw new Error("toHaveBeenCalled does not take arguments, use toHaveBeenCalledWith");if(!jasmine.isSpy(this.actual))throw new Error("Expected a spy, but got "+jasmine.pp(this.actual)+".");return this.message=function(){return["Expected spy "+this.actual.identity+" to have been called.","Expected spy "+this.actual.identity+" not to have been called."]},this.actual.wasCalled},jasmine.Matchers.prototype.wasCalled=jasmine.Matchers.prototype.toHaveBeenCalled,jasmine.Matchers.prototype.wasNotCalled=function(){if(arguments.length>0)throw new Error("wasNotCalled does not take arguments");if(!jasmine.isSpy(this.actual))throw new Error("Expected a spy, but got "+jasmine.pp(this.actual)+".");return this.message=function(){return["Expected spy "+this.actual.identity+" to not have been called.","Expected spy "+this.actual.identity+" to have been called."]},!this.actual.wasCalled},jasmine.Matchers.prototype.toHaveBeenCalledWith=function(){var expectedArgs=jasmine.util.argsToArray(arguments);if(!jasmine.isSpy(this.actual))throw new Error("Expected a spy, but got "+jasmine.pp(this.actual)+".");return this.message=function(){return 0===this.actual.callCount?["Expected spy "+this.actual.identity+" to have been called with "+jasmine.pp(expectedArgs)+" but it was never called.","Expected spy "+this.actual.identity+" not to have been called with "+jasmine.pp(expectedArgs)+" but it was."]:["Expected spy "+this.actual.identity+" to have been called with "+jasmine.pp(expectedArgs)+" but was called with "+jasmine.pp(this.actual.argsForCall),"Expected spy "+this.actual.identity+" not to have been called with "+jasmine.pp(expectedArgs)+" but was called with "+jasmine.pp(this.actual.argsForCall)]},this.env.contains_(this.actual.argsForCall,expectedArgs)},jasmine.Matchers.prototype.wasCalledWith=jasmine.Matchers.prototype.toHaveBeenCalledWith,jasmine.Matchers.prototype.wasNotCalledWith=function(){var expectedArgs=jasmine.util.argsToArray(arguments);if(!jasmine.isSpy(this.actual))throw new Error("Expected a spy, but got "+jasmine.pp(this.actual)+".");return this.message=function(){return["Expected spy not to have been called with "+jasmine.pp(expectedArgs)+" but it was","Expected spy to have been called with "+jasmine.pp(expectedArgs)+" but it was"]},!this.env.contains_(this.actual.argsForCall,expectedArgs)},jasmine.Matchers.prototype.toContain=function(expected){return this.env.contains_(this.actual,expected)},jasmine.Matchers.prototype.toNotContain=function(expected){return!this.env.contains_(this.actual,expected)},jasmine.Matchers.prototype.toBeLessThan=function(expected){return this.actual<expected},jasmine.Matchers.prototype.toBeGreaterThan=function(expected){return this.actual>expected},jasmine.Matchers.prototype.toBeCloseTo=function(expected,precision){0!==precision&&(precision=precision||2);var multiplier=Math.pow(10,precision),actual=Math.round(this.actual*multiplier);return expected=Math.round(expected*multiplier),expected==actual},jasmine.Matchers.prototype.toThrow=function(expected){var exception,result=!1;if("function"!=typeof this.actual)throw new Error("Actual is not a function");try{this.actual()}catch(e){exception=e}exception&&(result=expected===jasmine.undefined||this.env.equals_(exception.message||exception,expected.message||expected));var not=this.isNot?"not ":"";return this.message=function(){return!exception||expected!==jasmine.undefined&&this.env.equals_(exception.message||exception,expected.message||expected)?"Expected function to throw an exception.":["Expected function "+not+"to throw",expected?expected.message||expected:"an exception",", but it threw",exception.message||exception].join(" ")},result},jasmine.Matchers.Any=function(expectedClass){this.expectedClass=expectedClass},jasmine.Matchers.Any.prototype.jasmineMatches=function(other){return this.expectedClass==String?"string"==typeof other||other instanceof String:this.expectedClass==Number?"number"==typeof other||other instanceof Number:this.expectedClass==Function?"function"==typeof other||other instanceof Function:this.expectedClass==Object?"object"==typeof other:other instanceof this.expectedClass
},jasmine.Matchers.Any.prototype.jasmineToString=function(){return"<jasmine.any("+this.expectedClass+")>"},jasmine.Matchers.ObjectContaining=function(sample){this.sample=sample},jasmine.Matchers.ObjectContaining.prototype.jasmineMatches=function(other,mismatchKeys,mismatchValues){mismatchKeys=mismatchKeys||[],mismatchValues=mismatchValues||[];var env=jasmine.getEnv(),hasKey=function(obj,keyName){return null!=obj&&obj[keyName]!==jasmine.undefined};for(var property in this.sample)!hasKey(other,property)&&hasKey(this.sample,property)?mismatchKeys.push("expected has key '"+property+"', but missing from actual."):env.equals_(this.sample[property],other[property],mismatchKeys,mismatchValues)||mismatchValues.push("'"+property+"' was '"+(other[property]?jasmine.util.htmlEscape(other[property].toString()):other[property])+"' in expected, but was '"+(this.sample[property]?jasmine.util.htmlEscape(this.sample[property].toString()):this.sample[property])+"' in actual.");return 0===mismatchKeys.length&&0===mismatchValues.length},jasmine.Matchers.ObjectContaining.prototype.jasmineToString=function(){return"<jasmine.objectContaining("+jasmine.pp(this.sample)+")>"},jasmine.FakeTimer=function(){this.reset();var self=this;self.setTimeout=function(funcToCall,millis){return self.timeoutsMade++,self.scheduleFunction(self.timeoutsMade,funcToCall,millis,!1),self.timeoutsMade},self.setInterval=function(funcToCall,millis){return self.timeoutsMade++,self.scheduleFunction(self.timeoutsMade,funcToCall,millis,!0),self.timeoutsMade},self.clearTimeout=function(timeoutKey){self.scheduledFunctions[timeoutKey]=jasmine.undefined},self.clearInterval=function(timeoutKey){self.scheduledFunctions[timeoutKey]=jasmine.undefined}},jasmine.FakeTimer.prototype.reset=function(){this.timeoutsMade=0,this.scheduledFunctions={},this.nowMillis=0},jasmine.FakeTimer.prototype.tick=function(millis){var oldMillis=this.nowMillis,newMillis=oldMillis+millis;this.runFunctionsWithinRange(oldMillis,newMillis),this.nowMillis=newMillis},jasmine.FakeTimer.prototype.runFunctionsWithinRange=function(oldMillis,nowMillis){var scheduledFunc,funcsToRun=[];for(var timeoutKey in this.scheduledFunctions)scheduledFunc=this.scheduledFunctions[timeoutKey],scheduledFunc!=jasmine.undefined&&scheduledFunc.runAtMillis>=oldMillis&&scheduledFunc.runAtMillis<=nowMillis&&(funcsToRun.push(scheduledFunc),this.scheduledFunctions[timeoutKey]=jasmine.undefined);if(funcsToRun.length>0){funcsToRun.sort(function(a,b){return a.runAtMillis-b.runAtMillis});for(var i=0;i<funcsToRun.length;++i)try{var funcToRun=funcsToRun[i];this.nowMillis=funcToRun.runAtMillis,funcToRun.funcToCall(),funcToRun.recurring&&this.scheduleFunction(funcToRun.timeoutKey,funcToRun.funcToCall,funcToRun.millis,!0)}catch(e){}this.runFunctionsWithinRange(oldMillis,nowMillis)}},jasmine.FakeTimer.prototype.scheduleFunction=function(timeoutKey,funcToCall,millis,recurring){this.scheduledFunctions[timeoutKey]={runAtMillis:this.nowMillis+millis,funcToCall:funcToCall,recurring:recurring,timeoutKey:timeoutKey,millis:millis}},jasmine.Clock={defaultFakeTimer:new jasmine.FakeTimer,reset:function(){jasmine.Clock.assertInstalled(),jasmine.Clock.defaultFakeTimer.reset()},tick:function(millis){jasmine.Clock.assertInstalled(),jasmine.Clock.defaultFakeTimer.tick(millis)},runFunctionsWithinRange:function(oldMillis,nowMillis){jasmine.Clock.defaultFakeTimer.runFunctionsWithinRange(oldMillis,nowMillis)},scheduleFunction:function(timeoutKey,funcToCall,millis,recurring){jasmine.Clock.defaultFakeTimer.scheduleFunction(timeoutKey,funcToCall,millis,recurring)},useMock:function(){if(!jasmine.Clock.isInstalled()){var spec=jasmine.getEnv().currentSpec;spec.after(jasmine.Clock.uninstallMock),jasmine.Clock.installMock()}},installMock:function(){jasmine.Clock.installed=jasmine.Clock.defaultFakeTimer},uninstallMock:function(){jasmine.Clock.assertInstalled(),jasmine.Clock.installed=jasmine.Clock.real},real:{setTimeout:jasmine.getGlobal().setTimeout,clearTimeout:jasmine.getGlobal().clearTimeout,setInterval:jasmine.getGlobal().setInterval,clearInterval:jasmine.getGlobal().clearInterval},assertInstalled:function(){if(!jasmine.Clock.isInstalled())throw new Error("Mock clock is not installed, use jasmine.Clock.useMock()")},isInstalled:function(){return jasmine.Clock.installed==jasmine.Clock.defaultFakeTimer},installed:null},jasmine.Clock.installed=jasmine.Clock.real,jasmine.getGlobal().setTimeout=function(funcToCall,millis){return jasmine.Clock.installed.setTimeout.apply?jasmine.Clock.installed.setTimeout.apply(this,arguments):jasmine.Clock.installed.setTimeout(funcToCall,millis)},jasmine.getGlobal().setInterval=function(funcToCall,millis){return jasmine.Clock.installed.setInterval.apply?jasmine.Clock.installed.setInterval.apply(this,arguments):jasmine.Clock.installed.setInterval(funcToCall,millis)},jasmine.getGlobal().clearTimeout=function(timeoutKey){return jasmine.Clock.installed.clearTimeout.apply?jasmine.Clock.installed.clearTimeout.apply(this,arguments):jasmine.Clock.installed.clearTimeout(timeoutKey)},jasmine.getGlobal().clearInterval=function(timeoutKey){return jasmine.Clock.installed.clearTimeout.apply?jasmine.Clock.installed.clearInterval.apply(this,arguments):jasmine.Clock.installed.clearInterval(timeoutKey)},jasmine.MultiReporter=function(){this.subReporters_=[]},jasmine.util.inherit(jasmine.MultiReporter,jasmine.Reporter),jasmine.MultiReporter.prototype.addReporter=function(reporter){this.subReporters_.push(reporter)},function(){for(var functionNames=["reportRunnerStarting","reportRunnerResults","reportSuiteResults","reportSpecStarting","reportSpecResults","log"],i=0;i<functionNames.length;i++){var functionName=functionNames[i];jasmine.MultiReporter.prototype[functionName]=function(functionName){return function(){for(var j=0;j<this.subReporters_.length;j++){var subReporter=this.subReporters_[j];subReporter[functionName]&&subReporter[functionName].apply(subReporter,arguments)}}}(functionName)}}(),jasmine.NestedResults=function(){this.totalCount=0,this.passedCount=0,this.failedCount=0,this.skipped=!1,this.items_=[]},jasmine.NestedResults.prototype.rollupCounts=function(result){this.totalCount+=result.totalCount,this.passedCount+=result.passedCount,this.failedCount+=result.failedCount},jasmine.NestedResults.prototype.log=function(values){this.items_.push(new jasmine.MessageResult(values))},jasmine.NestedResults.prototype.getItems=function(){return this.items_},jasmine.NestedResults.prototype.addResult=function(result){"log"!=result.type&&(result.items_?this.rollupCounts(result):(this.totalCount++,result.passed()?this.passedCount++:this.failedCount++)),this.items_.push(result)},jasmine.NestedResults.prototype.passed=function(){return this.passedCount===this.totalCount},jasmine.PrettyPrinter=function(){this.ppNestLevel_=0},jasmine.PrettyPrinter.prototype.format=function(value){if(this.ppNestLevel_>40)throw new Error("jasmine.PrettyPrinter: format() nested too deeply!");this.ppNestLevel_++;try{value===jasmine.undefined?this.emitScalar("undefined"):null===value?this.emitScalar("null"):value===jasmine.getGlobal()?this.emitScalar("<global>"):value.jasmineToString?this.emitScalar(value.jasmineToString()):"string"==typeof value?this.emitString(value):jasmine.isSpy(value)?this.emitScalar("spy on "+value.identity):value instanceof RegExp?this.emitScalar(value.toString()):"function"==typeof value?this.emitScalar("Function"):"number"==typeof value.nodeType?this.emitScalar("HTMLNode"):value instanceof Date?this.emitScalar("Date("+value+")"):value.__Jasmine_been_here_before__?this.emitScalar("<circular reference: "+(jasmine.isArray_(value)?"Array":"Object")+">"):jasmine.isArray_(value)||"object"==typeof value?(value.__Jasmine_been_here_before__=!0,jasmine.isArray_(value)?this.emitArray(value):this.emitObject(value),delete value.__Jasmine_been_here_before__):this.emitScalar(value.toString())}finally{this.ppNestLevel_--}},jasmine.PrettyPrinter.prototype.iterateObject=function(obj,fn){for(var property in obj)"__Jasmine_been_here_before__"!=property&&fn(property,obj.__lookupGetter__?obj.__lookupGetter__(property)!==jasmine.undefined&&null!==obj.__lookupGetter__(property):!1)},jasmine.PrettyPrinter.prototype.emitArray=jasmine.unimplementedMethod_,jasmine.PrettyPrinter.prototype.emitObject=jasmine.unimplementedMethod_,jasmine.PrettyPrinter.prototype.emitScalar=jasmine.unimplementedMethod_,jasmine.PrettyPrinter.prototype.emitString=jasmine.unimplementedMethod_,jasmine.StringPrettyPrinter=function(){jasmine.PrettyPrinter.call(this),this.string=""},jasmine.util.inherit(jasmine.StringPrettyPrinter,jasmine.PrettyPrinter),jasmine.StringPrettyPrinter.prototype.emitScalar=function(value){this.append(value)},jasmine.StringPrettyPrinter.prototype.emitString=function(value){this.append("'"+value+"'")},jasmine.StringPrettyPrinter.prototype.emitArray=function(array){this.append("[ ");for(var i=0;i<array.length;i++)i>0&&this.append(", "),this.format(array[i]);this.append(" ]")},jasmine.StringPrettyPrinter.prototype.emitObject=function(obj){var self=this;this.append("{ ");var first=!0;this.iterateObject(obj,function(property,isGetter){first?first=!1:self.append(", "),self.append(property),self.append(" : "),isGetter?self.append("<getter>"):self.format(obj[property])}),this.append(" }")},jasmine.StringPrettyPrinter.prototype.append=function(value){this.string+=value},jasmine.Queue=function(env){this.env=env,this.blocks=[],this.running=!1,this.index=0,this.offset=0,this.abort=!1},jasmine.Queue.prototype.addBefore=function(block){this.blocks.unshift(block)},jasmine.Queue.prototype.add=function(block){this.blocks.push(block)},jasmine.Queue.prototype.insertNext=function(block){this.blocks.splice(this.index+this.offset+1,0,block),this.offset++},jasmine.Queue.prototype.start=function(onComplete){this.running=!0,this.onComplete=onComplete,this.next_()},jasmine.Queue.prototype.isRunning=function(){return this.running},jasmine.Queue.LOOP_DONT_RECURSE=!0,jasmine.Queue.prototype.next_=function(){for(var self=this,goAgain=!0;goAgain;)if(goAgain=!1,self.index<self.blocks.length&&!this.abort){var calledSynchronously=!0,completedSynchronously=!1,onComplete=function(){if(jasmine.Queue.LOOP_DONT_RECURSE&&calledSynchronously)return void(completedSynchronously=!0);self.blocks[self.index].abort&&(self.abort=!0),self.offset=0,self.index++;var now=(new Date).getTime();self.env.updateInterval&&now-self.env.lastUpdate>self.env.updateInterval?(self.env.lastUpdate=now,self.env.setTimeout(function(){self.next_()},0)):jasmine.Queue.LOOP_DONT_RECURSE&&completedSynchronously?goAgain=!0:self.next_()};self.blocks[self.index].execute(onComplete),calledSynchronously=!1,completedSynchronously&&onComplete()}else self.running=!1,self.onComplete&&self.onComplete()},jasmine.Queue.prototype.results=function(){for(var results=new jasmine.NestedResults,i=0;i<this.blocks.length;i++)this.blocks[i].results&&results.addResult(this.blocks[i].results());return results},jasmine.Runner=function(env){var self=this;self.env=env,self.queue=new jasmine.Queue(env),self.before_=[],self.after_=[],self.suites_=[]},jasmine.Runner.prototype.execute=function(){var self=this;self.env.reporter.reportRunnerStarting&&self.env.reporter.reportRunnerStarting(this),self.queue.start(function(){self.finishCallback()})},jasmine.Runner.prototype.beforeEach=function(beforeEachFunction){beforeEachFunction.typeName="beforeEach",this.before_.splice(0,0,beforeEachFunction)},jasmine.Runner.prototype.afterEach=function(afterEachFunction){afterEachFunction.typeName="afterEach",this.after_.splice(0,0,afterEachFunction)},jasmine.Runner.prototype.finishCallback=function(){this.env.reporter.reportRunnerResults(this)},jasmine.Runner.prototype.addSuite=function(suite){this.suites_.push(suite)},jasmine.Runner.prototype.add=function(block){block instanceof jasmine.Suite&&this.addSuite(block),this.queue.add(block)},jasmine.Runner.prototype.specs=function(){for(var suites=this.suites(),specs=[],i=0;i<suites.length;i++)specs=specs.concat(suites[i].specs());return specs},jasmine.Runner.prototype.suites=function(){return this.suites_},jasmine.Runner.prototype.topLevelSuites=function(){for(var topLevelSuites=[],i=0;i<this.suites_.length;i++)this.suites_[i].parentSuite||topLevelSuites.push(this.suites_[i]);return topLevelSuites},jasmine.Runner.prototype.results=function(){return this.queue.results()},jasmine.Spec=function(env,suite,description){if(!env)throw new Error("jasmine.Env() required");if(!suite)throw new Error("jasmine.Suite() required");var spec=this;spec.id=env.nextSpecId?env.nextSpecId():null,spec.env=env,spec.suite=suite,spec.description=description,spec.queue=new jasmine.Queue(env),spec.afterCallbacks=[],spec.spies_=[],spec.results_=new jasmine.NestedResults,spec.results_.description=description,spec.matchersClass=null},jasmine.Spec.prototype.getFullName=function(){return this.suite.getFullName()+" "+this.description+"."},jasmine.Spec.prototype.results=function(){return this.results_},jasmine.Spec.prototype.log=function(){return this.results_.log(arguments)},jasmine.Spec.prototype.runs=function(func){var block=new jasmine.Block(this.env,func,this);return this.addToQueue(block),this},jasmine.Spec.prototype.addToQueue=function(block){this.queue.isRunning()?this.queue.insertNext(block):this.queue.add(block)},jasmine.Spec.prototype.addMatcherResult=function(result){this.results_.addResult(result)},jasmine.Spec.prototype.expect=function(actual){var positive=new(this.getMatchersClass_())(this.env,actual,this);return positive.not=new(this.getMatchersClass_())(this.env,actual,this,!0),positive},jasmine.Spec.prototype.waits=function(timeout){var waitsFunc=new jasmine.WaitsBlock(this.env,timeout,this);return this.addToQueue(waitsFunc),this},jasmine.Spec.prototype.waitsFor=function(){for(var latchFunction_=null,optional_timeoutMessage_=null,optional_timeout_=null,i=0;i<arguments.length;i++){var arg=arguments[i];switch(typeof arg){case"function":latchFunction_=arg;break;case"string":optional_timeoutMessage_=arg;break;case"number":optional_timeout_=arg}}var waitsForFunc=new jasmine.WaitsForBlock(this.env,optional_timeout_,latchFunction_,optional_timeoutMessage_,this);return this.addToQueue(waitsForFunc),this},jasmine.Spec.prototype.fail=function(e){var expectationResult=new jasmine.ExpectationResult({passed:!1,message:e?jasmine.util.formatException(e):"Exception",trace:{stack:e.stack}});this.results_.addResult(expectationResult)},jasmine.Spec.prototype.getMatchersClass_=function(){return this.matchersClass||this.env.matchersClass},jasmine.Spec.prototype.addMatchers=function(matchersPrototype){var parent=this.getMatchersClass_(),newMatchersClass=function(){parent.apply(this,arguments)};jasmine.util.inherit(newMatchersClass,parent),jasmine.Matchers.wrapInto_(matchersPrototype,newMatchersClass),this.matchersClass=newMatchersClass},jasmine.Spec.prototype.finishCallback=function(){this.env.reporter.reportSpecResults(this)},jasmine.Spec.prototype.finish=function(onComplete){this.removeAllSpies(),this.finishCallback(),onComplete&&onComplete()},jasmine.Spec.prototype.after=function(doAfter){this.queue.isRunning()?this.queue.add(new jasmine.Block(this.env,doAfter,this)):this.afterCallbacks.unshift(doAfter)},jasmine.Spec.prototype.execute=function(onComplete){var spec=this;return spec.env.specFilter(spec)?(this.env.reporter.reportSpecStarting(this),spec.env.currentSpec=spec,spec.addBeforesAndAftersToQueue(),void spec.queue.start(function(){spec.finish(onComplete)})):(spec.results_.skipped=!0,void spec.finish(onComplete))},jasmine.Spec.prototype.addBeforesAndAftersToQueue=function(){for(var i,runner=this.env.currentRunner(),suite=this.suite;suite;suite=suite.parentSuite)for(i=0;i<suite.before_.length;i++)this.queue.addBefore(new jasmine.Block(this.env,suite.before_[i],this));for(i=0;i<runner.before_.length;i++)this.queue.addBefore(new jasmine.Block(this.env,runner.before_[i],this));for(i=0;i<this.afterCallbacks.length;i++)this.queue.add(new jasmine.Block(this.env,this.afterCallbacks[i],this));for(suite=this.suite;suite;suite=suite.parentSuite)for(i=0;i<suite.after_.length;i++)this.queue.add(new jasmine.Block(this.env,suite.after_[i],this));for(i=0;i<runner.after_.length;i++)this.queue.add(new jasmine.Block(this.env,runner.after_[i],this))},jasmine.Spec.prototype.explodes=function(){throw"explodes function should not have been called"},jasmine.Spec.prototype.spyOn=function(obj,methodName,ignoreMethodDoesntExist){if(obj==jasmine.undefined)throw"spyOn could not find an object to spy upon for "+methodName+"()";if(!ignoreMethodDoesntExist&&obj[methodName]===jasmine.undefined)throw methodName+"() method does not exist";if(!ignoreMethodDoesntExist&&obj[methodName]&&obj[methodName].isSpy)throw new Error(methodName+" has already been spied upon");var spyObj=jasmine.createSpy(methodName);return this.spies_.push(spyObj),spyObj.baseObj=obj,spyObj.methodName=methodName,spyObj.originalValue=obj[methodName],obj[methodName]=spyObj,spyObj},jasmine.Spec.prototype.removeAllSpies=function(){for(var i=0;i<this.spies_.length;i++){var spy=this.spies_[i];spy.baseObj[spy.methodName]=spy.originalValue}this.spies_=[]},jasmine.Suite=function(env,description,specDefinitions,parentSuite){var self=this;self.id=env.nextSuiteId?env.nextSuiteId():null,self.description=description,self.queue=new jasmine.Queue(env),self.parentSuite=parentSuite,self.env=env,self.before_=[],self.after_=[],self.children_=[],self.suites_=[],self.specs_=[]},jasmine.Suite.prototype.getFullName=function(){for(var fullName=this.description,parentSuite=this.parentSuite;parentSuite;parentSuite=parentSuite.parentSuite)fullName=parentSuite.description+" "+fullName;return fullName},jasmine.Suite.prototype.finish=function(onComplete){this.env.reporter.reportSuiteResults(this),this.finished=!0,"function"==typeof onComplete&&onComplete()},jasmine.Suite.prototype.beforeEach=function(beforeEachFunction){beforeEachFunction.typeName="beforeEach",this.before_.unshift(beforeEachFunction)},jasmine.Suite.prototype.afterEach=function(afterEachFunction){afterEachFunction.typeName="afterEach",this.after_.unshift(afterEachFunction)},jasmine.Suite.prototype.results=function(){return this.queue.results()},jasmine.Suite.prototype.add=function(suiteOrSpec){this.children_.push(suiteOrSpec),suiteOrSpec instanceof jasmine.Suite?(this.suites_.push(suiteOrSpec),this.env.currentRunner().addSuite(suiteOrSpec)):this.specs_.push(suiteOrSpec),this.queue.add(suiteOrSpec)},jasmine.Suite.prototype.specs=function(){return this.specs_},jasmine.Suite.prototype.suites=function(){return this.suites_},jasmine.Suite.prototype.children=function(){return this.children_},jasmine.Suite.prototype.execute=function(onComplete){var self=this;this.queue.start(function(){self.finish(onComplete)})},jasmine.WaitsBlock=function(env,timeout,spec){this.timeout=timeout,jasmine.Block.call(this,env,null,spec)},jasmine.util.inherit(jasmine.WaitsBlock,jasmine.Block),jasmine.WaitsBlock.prototype.execute=function(onComplete){jasmine.VERBOSE&&this.env.reporter.log(">> Jasmine waiting for "+this.timeout+" ms..."),this.env.setTimeout(function(){onComplete()},this.timeout)},jasmine.WaitsForBlock=function(env,timeout,latchFunction,message,spec){this.timeout=timeout||env.defaultTimeoutInterval,this.latchFunction=latchFunction,this.message=message,this.totalTimeSpentWaitingForLatch=0,jasmine.Block.call(this,env,null,spec)},jasmine.util.inherit(jasmine.WaitsForBlock,jasmine.Block),jasmine.WaitsForBlock.TIMEOUT_INCREMENT=10,jasmine.WaitsForBlock.prototype.execute=function(onComplete){jasmine.VERBOSE&&this.env.reporter.log(">> Jasmine waiting for "+(this.message||"something to happen"));var latchFunctionResult;try{latchFunctionResult=this.latchFunction.apply(this.spec)}catch(e){return this.spec.fail(e),void onComplete()}if(latchFunctionResult)onComplete();else if(this.totalTimeSpentWaitingForLatch>=this.timeout){var message="timed out after "+this.timeout+" msec waiting for "+(this.message||"something to happen");this.spec.fail({name:"timeout",message:message}),this.abort=!0,onComplete()}else{this.totalTimeSpentWaitingForLatch+=jasmine.WaitsForBlock.TIMEOUT_INCREMENT;var self=this;this.env.setTimeout(function(){self.execute(onComplete)},jasmine.WaitsForBlock.TIMEOUT_INCREMENT)}},jasmine.version_={major:1,minor:2,build:0,revision:1337005947};var viewModel={EntityId:1,DateCreated:"1/5/1972",_Title:"someTitle",_someList:"someList",_someUrl:"someUrl"},koViewModel={EntityId:ko.observable(1),DateCreated:ko.observable("1/5/1972"),_Title:ko.observable("someTitle"),_someList:ko.observable("someList"),_someUrl:ko.observable("someUrl")},mix={rawModel:viewModel,el:"#someSelector"};MF.mixin(mix,"modelAndElementsMixin"),describe("bindModelAndElements",function(){beforeEach(function(){ko.mapping.fromJS=jasmine.createSpy("fromJS").andReturn(koViewModel),spyOn(ko,"applyBindings"),spyOn(mix,"extendModel"),spyOn(CC.elementService,"getElementsViewmodel"),spyOn(mix,"renderElements"),MF.vent=jasmine.createSpy("vent"),MF.vent.trigger=jasmine.createSpy("trigger"),mix.bindModelAndElements(["_someList","_someUrl"])}),it("should call ko.mapping.fromJs",function(){expect(ko.mapping.fromJS).toHaveBeenCalledWith(viewModel,mix.mappingOptions)}),it("should call ko.applyBindings",function(){expect(ko.applyBindings).toHaveBeenCalledWith(koViewModel,mix.el)}),it("should call mix.extendModel",function(){expect(mix.extendModel).toHaveBeenCalledWith(koViewModel)}),it("should call CC.elementService.getElementsViewmodel",function(){expect(CC.elementService.getElementsViewmodel).toHaveBeenCalled()}),it("should call mix.renderElements",function(){expect(mix.renderElements).toHaveBeenCalled()}),it("should push ignore elements into array",function(){expect(mix.mappingOptions.ignore).toContain("_someList"),expect(mix.mappingOptions.ignore).toContain("_someUrl")}),it("should filter out any items in ignore or that start with _",function(){expect(mix.mappingOptions.ignore).totalCount(5)})}),describe("Player",function(){var player,song;beforeEach(function(){player=new Player,song=new Song}),it("should be able to play a Song",function(){player.play(song),expect(player.currentlyPlayingSong).toEqual(song),expect(player).toBePlaying(song)}),describe("when song has been paused",function(){beforeEach(function(){player.play(song),player.pause()}),it("should indicate that the song is currently paused",function(){expect(player.isPlaying).toBeFalsy(),expect(player).not.toBePlaying(song)}),it("should be possible to resume",function(){player.resume(),expect(player.isPlaying).toBeTruthy(),expect(player.currentlyPlayingSong).toEqual(song)})}),it("tells the current song if the user has made it a favorite",function(){spyOn(song,"persistFavoriteStatus"),player.play(song),player.makeFavorite(),expect(song.persistFavoriteStatus).toHaveBeenCalledWith(!0)}),describe("#resume",function(){it("should throw an exception if song is already playing",function(){player.play(song),expect(function(){player.resume()}).toThrow("song is already playing")})})}),beforeEach(function(){this.addMatchers({toBePlaying:function(expectedSong){var player=this.actual;return player.currentlyPlayingSong===expectedSong&&player.isPlaying}})}),Player.prototype.play=function(song){this.currentlyPlayingSong=song,this.isPlaying=!0},Player.prototype.pause=function(){this.isPlaying=!1},Player.prototype.resume=function(){if(this.isPlaying)throw new Error("song is already playing");this.isPlaying=!0},Player.prototype.makeFavorite=function(){this.currentlyPlayingSong.persistFavoriteStatus(!0)},Song.prototype.persistFavoriteStatus=function(){throw new Error("not yet implemented")};